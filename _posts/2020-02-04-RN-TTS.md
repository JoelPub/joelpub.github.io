---
layout:     post   				    # 使用的布局（不需要改）
title:      RN TTS 				# 标题 
subtitle:   React Native Text to Speech Solutions   #副标题
date:       2020-02-04				# 时间
author:     Joel 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:	APP							#标签
---

# Comparison of Text to Speech Solutions for React Native
[https://www.netguru.com/codestories/react-native-text-to-speech](https://www.netguru.com/codestories/react-native-text-to-speech)   

Comparison of Text to Speech Solutions for React Native
=======================================================

![](/img/blog/AK_files/Daniel_autor.jpg)

Daniel Idaszak

Feb 4, 2020 | 11 min read

[React Native](https://www.netguru.com/codestories/topic/react-native) [Text to speech](https://www.netguru.com/codestories/topic/text-to-speech)

A comparison of text to speech solutions
----------------------------------------

There are many text to speech solutions on the market, starting from Google Cloud Text To Speech, Microsoft Azure Text To Speech, Amazon AWS Polly and finishing with natively implemented solutions for Android and iOS devices. While the last one seems easier to implement, is reliable, and offers possibilities like using it without an internet connection, the “bigger” solutions are backed by machine learning and provide higher quality voices. The biggest downside is support for [React Native](https://www.netguru.com/what-is-react-native) - while all of them have official iOS and Android SDKs, it’s really hard to find a library for React Native.  
In this article, we present a comparison of native solutions for normal React Native apps, Expo ones, and the Rest API of Google Speech To Text. 

React-Native-TTS library
------------------------

The simplest way to implement Text to Speech functionality in React Native apps is by using the [React-Native-TTS library](https://github.com/ak1394/react-native-tts). It is very easy to set up and the library is ready to use with auto-linking from React-Native version 0.60+.  
What is the biggest advantage of this solution? Native text to speech engines on both platforms allow you to easily use this feature in your app, and, more importantly, enable you to use some of the voices without a network connection.

The downside of this solution is the lack of consistency. Android and iOS have different text to speech engines, so the selection of voices is different on each platform. This could be an issue if you want to create a chatbot that speaks its own voice.

You can choose from 281 voices in different languages on Android and 38 provided by Apple on iOS.

While configuring your voice you can set parameters like:

*   Language  
    
        Tts.setDefaultLanguage('en-IE');
    
    Js
    
*   Voice  
    
        Tts.setDefaultVoice('com.apple.ttsbundle.Moira-compact');
    
    Js
    
*   Speech rate  
    
        Tts.setDefaultRate(0.6);
    
    Js
    
*   Pitch  
    
        Tts.setDefaultPitch(1.5);
    
    Js
    

On Android there are also Pan and Volume:

    Tts.speak('Hello, world!', { androidParams: { KEY_PARAM_PAN: -1, KEY_PARAM_VOLUME: 0.5 } });

Js

Setup is as easy as typing: 

    yarn add react-native-tts

Bash

and the library should link itself while running pod install.

Let’s create a simple component with speech to text:

    
    import React from 'react'
    import { Button } from 'react-native'
    import Tts from 'react-native-tts'
     
    Tts.setDefaultLanguage('en-GB')
    Tts.setDefaultVoice('com.apple.ttsbundle.Daniel-compact')
     
    const NativeSpeech = () => (
     <Button
       title="Speak!"
       onPress={() => Tts.speak('Hello World!')}
     />
    )
     
    export default NativeSpeech
    

Js

Speech React Native Expo module
-------------------------------

If you are using expo, React-Native-TTS library is not for you. Instead, you should use [Expo-speech SDK](https://docs.expo.io/versions/latest/sdk/speech/). You just need to run:

    expo install expo-speech

Bash

If you want to use this library in a non-expo project, you can use the [unimodules](https://github.com/unimodules/react-native-unimodules) package. Just follow the [unimodules](https://github.com/unimodules/react-native-unimodules) documentation, run expo install expo-speech, and then run pod install.

The speech library from expo uses the same native text to speech engine as the React-Native-TTS library, so you can use the same voices you would use with this library and the configuration process is similar. For more info, head to the expo-speech documentation.  
Let’s create a simple component with the expo speaking service:

    
    import React from 'react'
    import { Button } from 'react-native'
    import * as Speech from 'expo-speech'
     
    const NativeSpeech = () => (
     <Button title="Speak!" onPress={() => Speech.speak('Hello World!')} />
    );
     
    export default NativeSpeech
    

React JSX

Google Cloud Speech To Text 
----------------------------

Google Cloud Speech to Text is a solution without a client library for React Native. We can use its rest API to request base64 encoded mp3 with our text. The biggest advantage of this service is the ability to choose one voice that would be available on both platforms. It’s also highly configurable. You can choose from sets of standard voices, but you can also choose from a library of higher quality voices.

Head to the [Google Text to Speech website](https://cloud.google.com/text-to-speech/). You can test all of the available voices in the panel below.

![Screenshot 2019-12-17 at 14.32.07](/img/blog/AK_files/Screenshot%25202019-12-17%2520at%252014.png)

In order to start using text to speech, hit the “Get started for free” button and create an account.

If you are ready, the first thing to do before starting would be creating an API key. Of course, you can create a simple API key to test text to speech, but if you want to use it in a real app, you should restrict this key as described in this blog post.

Open the [Google Cloud Console](https://console.cloud.google.com/) and from the menu choose “APIs & services”, then head to the credentials section. Click “Create Credentials” and use “API key”. The key will be created; click the “Restrict key” button. You will see a screen like this:

![Screenshot 2019-12-17 at 14.39.28](/img/blog/AK_files/Screenshot%2525202019-12-17%252520at%25252014_002.png)

Choose a name for your key. We will be creating one key for Android and one for iOS apps, so you can name them “API key - iOS” and “API key - Android”. Then go to application restrictions:

![Screenshot 2019-12-17 at 14.40.03](/img/blog/AK_files/Screenshot%2525202019-12-17%252520at%25252014_004.png)

You can restrict your API key for your app bundle. It will prevent attackers from stealing your keys and using them outside of your app. You have to prepare two different keys, one for Android and one for iOS. If you want, you can also restrict those keys to Text to Speech only:

![Screenshot 2019-12-17 at 14.42.22](/img/blog/AK_files/Screenshot%2525202019-12-17%252520at%25252014_003.png)

Now you can safely store your keys in your ENV file by using the [React-Native-Config](https://github.com/luggit/react-native-config) library and then fetch API key according to the platform.  

Google’s speech to text is a REST API, There is no client library for React Native. That’s why we need to fetch base64 encoded voice to our app and then play It.

A huge advantage of using this solution is better quality voices backed by machine learning. You can choose from a huge list of voices for every language. Every language has a few voices, both male and female, but also standard ones and WaveNet voices, whose pricing is a little bit higher because of better voice quality. You can check them all out on the [Reference list of Google Text to Speech voices](https://cloud.google.com/text-to-speech/docs/voices). How to set the voice of your choice? It’s as simple as adding the setting to the body of an API call:  

    
    voice: {
         languageCode: 'en-US',
         name: 'en-US-Standard-B',
         ssmlGender: 'FEMALE'
       }

React JSX

Let’s create an API call to fetch this data.  
Our goal is to fetch data from the https://texttospeech.googleapis.com/v1/text:synthesize endpoint, so first, we can create a function returning an object with our headers and body:

    
    const createRequest = text => ({
     headers : {
       'Content-Type': 'application/json'
     },
     body: {
       input: {
         text
       },
       voice: {
         languageCode: 'en-US',
         name: 'en-US-Standard-B',
         ssmlGender: 'FEMALE'
       },
       audioConfig: {
         audioEncoding: 'MP3',
       }
     },
     method: 'POST'
    })

React JSX

The createRequest function has some settings for voice and config for audio type, but the most important thing is the “text” argument, which is our text we want Google to say. Now we can create a function which will fetch our mp3.

    
    import Config from 'react-native-config'
    import { Platform } from 'react-native'
     
    const speech = async (text) => {
     const key = Platform.OS === 'ios' ? Config.KEY_IOS : Config.KEY_ANDROID
     const address = `https://texttospeech.googleapis.com/v1/text:synthesize?key=${key}`
     const payload = createRequest(text)
     try {
       const response = await fetch(`${address}`, payload)
       const result = await response.json()
       console.log(result)
     } catch (err) {
       console.warn(err)
     }
    }
    

React JSX

As you can see, we are using react-native-config to fetch the API key depending on the current platform, using the createRequest function with the passed text, and then fetching from the Google Text to Speech API. It should return base64 encoded data to the console, just run:

    speech(‘Hello world!’)

If we want to decode base64 and play it on our device, we need to use the [react-native-fs](https://github.com/itinance/react-native-fs) library, so we can create createFile function:

    
    const RNFS = require('react-native-fs')
     
    const createFile = async (path, data) => {
     try {
       return await RNFS.writeFile(path, data, 'base64')
     } catch (err) {
       console.warn(err)
     }
     
     return null
    }
    

React JSX

As the first argument, we need to pass the path and our base64 encoded data. It will save It in our device memory as an mp3, which can be played by the [React-Native-Sound](https://github.com/zmxv/react-native-sound) library. So right now we need a function to play our sound:

    
    const Sound = require('react-native-sound')
     
    const playMusic = (music) => {
     const speech = new Sound(music, '', (error) => {
       if (error) {
         console.warn('failed to load the sound', error)
     
         return null
       }
       speech.play((success) => {
         if (!success) {
           console.warn('playback failed due to audio decoding errors')
         }
       })
     
       return null
     })
    }

React JSX

We need to pass the previously created path as an argument to the playMusic function.  
Now we can connect our code and try our new speaking service:

    
    const speech = async (text) => {
     const key = Platform.OS === 'ios' ? Config.KEY_IOS : Config.KEY_ANDROID
     const address = `https://texttospeech.googleapis.com/v1/text:synthesize?key=${key}`
     const payload = createRequest(text)
     const path = `${RNFS.DocumentDirectoryPath}/voice.mp3`
     try {
       const response = await fetch(`${address}`, payload)
       const result = await response.json()
       console.log(result)
       await createFile(path, result.audioContent)
       playMusic(path)
     } catch (err) {
       console.warn(err)
     }
    }

React JSX

Summary
-------

In this article, we compared speech to text solutions - native ones and the Google Cloud Speech To Text. We also provided some information about using this service in Expo-based projects and native projects.

  
When choosing a speech to text solution we have to decide on the most important features - whether it’s using this service offline, or maybe having the same voice on all platforms? It’s also possible to use both solutions, with the native one as a fallback, so feel free to experiment with the code!

Photo by [Dan Farrell](https://unsplash.com/@farreal?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

![](/img/blog/AK_files/Daniel_autor_002.jpg)

Daniel Idaszak

 [![New call-to-action](/img/blog/AK_files/3c01ef18-03bf-45b7-a297-0e1faa643dbf.webp)](https://www.netguru.com/cs/c/?cta_guid=38386b9e-1ccd-4da4-8393-c6bca957157c&signature=AAH58kEuEHHhgy9d3KPpqGQfL6peD30cXQ&placement_guid=f869f20d-aae9-4efc-8189-5464e3bf47a1&click=c8519fb7-1044-4a31-9e66-e7359e6b5ad5&hsutk=6c25a4302b13f6d780ed7df77b25b7ff&canon=https%3A%2F%2Fwww.netguru.com%2Fcodestories%2Freact-native-text-to-speech&portal_id=493098&redirect_url=APefjpHpQIwW0H3Yk7g__PC3DyN9pB8kpUfEcKZkRIsqfshy-S6C4k-i08HctD5hyaj-uXBqnAHCdDlP4aEoEKib9oJDOdo7WF4AL91hA4KnpR5XzXRhjgs&__hstc=199729585.6c25a4302b13f6d780ed7df77b25b7ff.1602906598700.1602906598700.1602906598700.1&__hssc=199729585.1.1602906598700&__hsfp=412467850&contentType=blog-post) hbspt.cta.\_relativeUrls=true;hbspt.cta.load(493098, 'f869f20d-aae9-4efc-8189-5464e3bf47a1', {}); 

[](javascript:void(0))[](javascript:void(0))

 [![Looking for new opportunities? Check our offers!](/img/blog/AK_files/68f7984b-49b0-4b97-85c7-8b614318a607.webp)](https://www.netguru.com/cs/c/?cta_guid=1846ffc1-8544-4c9a-a4b9-7a27bbfb0512&signature=AAH58kGrbriuDzkfSlKxiOWLWL759p4UXw&placement_guid=1ee45616-dbb2-4166-bbdc-b48682356f8d&click=5b0589bc-2a63-4a59-a79c-051d373ae7f9&hsutk=6c25a4302b13f6d780ed7df77b25b7ff&canon=https%3A%2F%2Fwww.netguru.com%2Fcodestories%2Freact-native-text-to-speech&portal_id=493098&redirect_url=APefjpHja_oUkt0DK-XkXZj2sP98dkKHh2p9nWb9F9NkK-2vM5RYeBhC06y-booeI4rVIkAeosRmJH7LIQoI89YGIRAu-iit-iZ1hfP5qTUVhp8fA0SnvRE&__hstc=199729585.6c25a4302b13f6d780ed7df77b25b7ff.1602906598700.1602906598700.1602906598700.1&__hssc=199729585.1.1602906598700&__hsfp=412467850&contentType=blog-post) hbspt.cta.\_relativeUrls=true;hbspt.cta.load(493098, '1ee45616-dbb2-4166-bbdc-b48682356f8d', {}); 

READ ALSO FROM React Native

Read also

[

Firebase Smart Reply: A Simple Trick That Will Make Your App Smarter

](https://www.netguru.com/codestories/firebase-smart-reply)

[

Querying and Sorting Firestore Data

](https://www.netguru.com/codestories/querying-and-sorting-firestore-data)

[

How to Make Your App Respond Gracefully to Region Change

](https://www.netguru.com/codestories/how-to-make-your-app-respond-gracefully-to-region-change)

![Parallax](/img/blog/AK_files/ng_sign_bg_dark.webp)

params = { left: 'inherit', top: '30%', color: 'dark' } renderComponent('ParallaxLogo', params)

Need a successful project?

[Estimate project](https://www.netguru.com/estimate-project?ref=successful-project-footer-cta) [or contact us](https://www.netguru.com/contact)

[netguru\_logo Created with Sketch.](https://www.netguru.com/)

*   [hello@netguru.com](mailto:hello@netguru.com)

*   [](javascript:;)
    *   [Services](https://www.netguru.com/services)
        *   [Research & Development](https://www.netguru.com/services/research-and-development)
        *   [Product Design](https://www.netguru.com/services/product-design)
        *   [UX Design](https://www.netguru.com/services/ux-design)
        *   [Branding](https://www.netguru.com/services/branding-services)
        *   [Software Development](https://www.netguru.com/services/software-development)
        *   [Web Development](https://www.netguru.com/services/web-development)
        *   [Mobile Development](https://www.netguru.com/services/mobile-development)
        *   [Digital Transformation](https://www.netguru.com/services/digital-transformation)
        *   [Machine Learning](https://www.netguru.com/services/machine-learning)
        *   [Cloud Technology](https://www.netguru.com/services/cloud-technology)
    *   [Industries](https://www.netguru.com/industries)
        *   [Fintech](https://www.netguru.com/industries/fintech)
        *   [Healthcare](https://www.netguru.com/industries/healthcare)
        *   [Retail](https://www.netguru.com/industries/retail)
        *   [Education](https://www.netguru.com/industries/education)
*   [](javascript:;)
    *   [Customers](https://www.netguru.com/featured-clients)
        *   [solarisBank](https://www.netguru.com/featured/solarisbank-the-first-banking-platform-for-corporations-and-startup)
        *   [Volkswagen](https://www.netguru.com/featured/volkswagen-home-first-in-the-world-concept-store-for-volkswagen)
        *   [Keller Williams](https://www.netguru.com/featured/keller-williams-digital-transformation)
        *   [Babbel](https://www.netguru.com/featured/babbel)
        *   [Damac](https://www.netguru.com/featured/damac)
        *   [IKEA](https://www.netguru.com/featured/enterprise-mobile-app-for-workspace-management)
    *   [Reports](javascript:;)
        *   [Patient Management Apps](https://www.netguru.com/healthcare-report-download)
        *   [Payday Startups](https://www.netguru.com/payday-startups-report)
        *   [Electric Scooter Market](https://www.netguru.com/resources/electric-scooters-report)
        *   [Online Education](https://www.netguru.com/en/edtech-report)
        *   [Online Grocery Shopping](https://www.netguru.com/online-grocery-shopping-report)
*   [](javascript:;)
    *   [Blog](https://www.netguru.com/blog)
        *   [Design](https://www.netguru.com/blog/topic/product-design)
        *   [Development](https://www.netguru.com/blog/topic/software-development)
        *   [Digital Transformation](https://www.netguru.com/blog/topic/digital-transformation)
        *   [Machine Learning](https://www.netguru.com/blog/topic/machine-learning)
        *   [Project Management](https://www.netguru.com/blog/topic/project-management)
        *   [Interviews](https://www.netguru.com/blog/topic/interview)
        *   [Trends](https://www.netguru.com/blog/topic/trends)
        *   [Sustainability](https://www.netguru.com/blog/topic/sustainability)
        *   [Join Our Newsletter](https://www.netguru.com/newsletter/codestories-european-tech-newsletter)
    *   [Publications](https://www.netguru.com/resources)
        *   [Disruption Guide NYC 2020](https://disruption-guide-nyc.netguru.com/)
        *   [Design Proces for Pros](https://www.netguru.com/design-process)
        *   [Project Management Guide](https://pm-guide.netguru.com/)
        *   [Scaling Fintech](https://www.netguru.com/scaling-fintech-ebook)
*   [](javascript:;)
    *   [About us](https://www.netguru.com/about-us)
        *   [Our Values](https://www.netguru.com/about-us#our-values)
        *   [How We Work](https://www.netguru.com/about-us#howWeWork)
        *   [Meet Our Team](https://www.netguru.com/about-us/team-netguru)
        *   [Press Office](https://www.netguru.com/about-us/press)
        *   [Sustainability Policies](https://www.netguru.com/sustainability)
        *   [COVID-19 Policy Statement](https://www.netguru.com/covid19-netguru-policy)
        *   [Become a Partner](https://www.netguru.com/partners/apply)
    *   [Join Netguru](https://www.netguru.com/career)
        *   [Open Positions](https://www.netguru.com/career)
        *   [Careers Paths](https://www.netguru.com/career/paths)
        *   [Join as a Freelancer](https://www.netguru.com/talent/marketplace)

[Netguru logo](https://www.netguru.com/)

Netguru S.A


---------------

*   Nowe Garbary Office Center
    
*   ul. Małe Garbary 9
    
*   61-756 Poznań, Poland
    

*   VAT-ID: PL7781454968
    
*   REGON: 300826280
    
*   KRS: 0000745671
    

Contact


-----------

*   [
    
    hello@netguru.com
    
    ](mailto:hello@netguru.com)

Follow us


-------------

*    [![behance](/img/blog/AK_files/behance.svg)](https://www.behance.net/netguru) 
*    [![dribbble](/img/blog/AK_files/dribbble.svg)](https://dribbble.com/netguru) 
*    [![facebook](/img/blog/AK_files/facebook.svg)](https://www.facebook.com/netguru) 
*    [![github](/img/blog/AK_files/github.svg)](https://github.com/netguru) 
*    [![linkedin](/img/blog/AK_files/linkedin.svg)](https://pl.linkedin.com/company/netguru) 
*    [![twitter](/img/blog/AK_files/twitter.svg)](https://twitter.com/netguru) 

[

](https://clutch.co/profile/netguru)

*   [
    
    Privacy Policy
    
    ](https://www.netguru.com/tou#privacy-policy)
*   [
    
    Terms of use
    
    ](https://www.netguru.com/tou)
*   [
    
    Sitemap
    
    ](https://www.netguru.com/sitemap.xml)

©2020 Netguru S.A. All rights reserved.

function getCookie(cname) { var name = cname + "="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for(var i = 0; i <ca.length; i++) { var c = ca\[i\]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } setTimeout(function() { var utk = getCookie("hubspotutk"); var mailto\_hello = "hello@netguru.com"; if ( utk ) { mailto\_hello = "hello+" + utk + "@netguru.com"; document.getElementById("mailto\_hello").setAttribute('href', "mailto:" + mailto\_hello); } }, 2000);

![](/img/blog/AK_files/0.txt)

function getParameterByName(a){return(a=RegExp("\[?\\x26\]"+a+"\\x3d(\[^\\x26\]\*)").exec(window.location.search))&&decodeURIComponent(a\[1\].replace(/\\+/g," "))}var \_hsq=window.\_hsq=window.\_hsq||\[\];\_hsq.push(\["identify",{email:getParameterByName("email"),leadsource:getParameterByName("ls")}\]);(function(e,g){function c(a){if(!a.each&&!a.every)throw Error("Requires opts.each or opts.every.");if((a.idleAfter||a.engagementEvents)&&!(a.idleAfter&&a.engagementEvents&&a.engagementEvents.length))throw Error("Configure opts.idleAfter \\x26 opts.engagementEvents for idling.");if(!(this instanceof c))return new c(a);var b=a.context||e;"string"===typeof b&&(b=e.querySelector(a.context));if(!b)throw Error("Unable to find context "+a.context);this.\_context=b;this.\_startTime=a.startTime||q;this.\_trackedTime= Math.ceil((+new Date-this.\_startTime)/1E3);this.\_max=a.max||Infinity;this.\_min=a.min||0;this.\_every=a.every||\[\];this.\_each=a.each||\[\];this.\_gcd=r(this.\_every.concat(this.\_each));this.\_each.\_originals=this.\_each.slice(0);this.\_every.\_originals=this.\_every.slice(0);this.\_events={};this.\_cache={};this.\_lastTick=this.\_startTime;setTimeout(this.start.bind(this),0);if(a.idleAfter&&a.engagementEvents){this.\_idleAfter=1E3\*a.idleAfter+100;this.\_idleTimer=this.\_resetIdleTimeout();var f=t(this.\_preventIdle.bind(this), this.\_idleTimeout/2);a.engagementEvents.forEach(function(a){this.\_context.addEventListener(a,f)}.bind(this))}a.idleOnVisibilityChange&&u(function(a){a?this.pause():this.start()}.bind(this))}function n(a,b,f){var d;for(d=a.length-1;0<=d;d--)b(a\[d\])&&f(a\[d\],d,a)}function v(a,b){return a>b?1:b>a?-1:0}function p(a,b){a=Math.abs(a);b=Math.abs(b);if(b>a)return p(b,a);for(;;){if(0===b)return a;a%=b;if(0===a)return b;b%=a}}function r(a){if(1===a.length)return a\[0\];var b=a.pop();return a.reduce(function(a, b){return p(a,b)},b)}function l(a){return"undefined"!==typeof a}function u(a){if(l(e.hidden)){var b="hidden";var f="visibilitychange"}else l(e.mozHidden)?(b="mozHidden",f="mozvisibilitychange"):l(e.msHidden)?(b="msHidden",f="msvisibilitychange"):l(e.webkitHidden)&&(b="webkitHidden",f="webkitvisibilitychange");f?e.addEventListener(f,function(){a(e\[b\])}):(g.addEventListener("blur",function(){a(!0)}),g.addEventListener("focus",function(){a(!1)}))}function t(a,b){var f,c,m,h=null,k=0,e=function(){k=new Date; h=null;m=a.apply(f,c)};return function(){var d=new Date;k||(k=d);var g=b-(d-k);f=this;c=arguments;0>=g?(clearTimeout(h),h=null,k=d,m=a.apply(f,c)):h||(h=setTimeout(e,g));return m}}var q=+new Date;g.EngagementTimer=g.EngagementTimer||c;var w=function(){function a(a,h,k){if(1E3>h)throw Error("Interval is too frequent.");var d=this.tickId=c++;k?f\[d\]=setTimeout(function(){a();b(a,h,d)}.bind(this),k):b(a,h,this.tickId)}function b(a,c,d){f\[d\]=setTimeout(function(){a();b(a,c,d)},c)}var f={},c=1;a.prototype.clear= function(){clearTimeout(f\[this.tickId\])};return a}();c.prototype.\_timer=function(a){return new w(function(){var a=+new Date;this.\_trackedTime+=Math.floor((a-this.\_lastTick)/1E3);this.\_lastTick=a;if(!(this.\_trackedTime<this.\_min)){if(this.\_trackedTime>this.\_max)return this.destroy();this.\_checkMarks()}}.bind(this),1E3\*this.\_gcd,a)};c.prototype.on=function(a,b){(this.\_events\[a\]=this.\_events\[a\]||\[\]).push(b)};c.prototype.reset=function(){this.\_each=this.\_each.\_originals.slice(0);this.\_every=this.\_every.\_originals.slice(0); this.\_trackedTime=0;this.\_startTime=+new Date;this.\_cache={};this.emit("reset",{data:{timestamp:+new Date}})};c.prototype.start=function(){console.log(this.\_offset);this.\_tick||(this.\_tick=this.\_timer(this.\_offset));this.emit("start",{data:{timestamp:+new Date}})};c.prototype.pause=function(){var a=+new Date;this.\_offset=Math.floor((a-this.\_lastTick)/1E3);this.\_tick&&this.\_tick.clear();this.\_tick=null;this.\_running=0;this.emit("pause",{data:{timestamp:+new Date}})};c.prototype.emit=function(a,b){var c= this.\_events\[a\];c&&this.\_events\[a\].forEach(function(a){setTimeout(function(){a(b)},0)})};c.prototype.destroy=function(){this.\_tick&&this.\_tick.clear()};c.prototype.\_checkMarks=function(){function a(a){return d>=a}function b(a,b,c){var d=this.\_every.\_originals\[b\];e.push(a);c\[b\]=(a/d+1)\*d}function c(a,b){e=e.concat(this.\_each.slice(b,1))}var d=this.\_trackedTime,e=\[\];n(this.\_each,a,c.bind(this));n(this.\_every,a,b.bind(this));e.sort(v).forEach(this.\_checkMark.bind(this))};c.prototype.\_checkMark=function(a){this.\_cache\[a\]|| (this.\_cache\[a\]=!0,this.emit("interval",{data:{time:a}}))};c.prototype.\_preventIdle=function(){this.\_tick||this.start();clearTimeout(this.\_idleTimer);this.\_idleTimer=this.\_resetIdleTimeout()};c.prototype.\_resetIdleTimeout=function(){return setTimeout(function(){this.pause()}.bind(this),this.\_idleAfter)}})(document,window); (function(e){var g=EngagementTimer({every:\[Number(google\_tag\_manager\["GTM-TC2LVR"\].macro(19))\],idleAfter:Number(google\_tag\_manager\["GTM-TC2LVR"\].macro(20)),engagementEvents:\["click","touchstart","scroll","keydown","mousemove"\],idleOnVisibilityChange:!0,max:Number(google\_tag\_manager\["GTM-TC2LVR"\].macro(21)),min:Number(google\_tag\_manager\["GTM-TC2LVR"\].macro(22))});g.on("interval",function(c){e.dataLayer.push({event:"engagementTimer",attributes:{counter:c.data.time}})});delete e.EngagementTimer})(window); !function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b.\_fbq||(b.\_fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=\[\],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)\[0\],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en\_US/fbevents.js");fbq("init","725955437490668");fbq("track","PageView");

![](https://www.facebook.com/tr?id=725955437490668&ev=PageView&noscript=1)

fbq("trackCustom","Referrer",{Source:google\_tag\_manager\["GTM-TC2LVR"\].macro(47),Medium:google\_tag\_manager\["GTM-TC2LVR"\].macro(48),Term:google\_tag\_manager\["GTM-TC2LVR"\].macro(49),Referrer:google\_tag\_manager\["GTM-TC2LVR"\].macro(50)});window.addEventListener("message",function(a){"hsFormCallback"===a.data.type&&"onFormSubmitted"===a.data.eventName&&window.dataLayer.push({event:"hubspot-form-success","hs-form-guid":a.data.id})});rudderanalytics=window.rudderanalytics=\[\];for(var methods="load page track identify alias group ready reset getAnonymousId setAnonymousId".split(" "),i=0;i<methods.length;i++){var method=methods\[i\];rudderanalytics\[method\]=function(a){return function(){rudderanalytics.push(\[a\].concat(Array.prototype.slice.call(arguments)))}}(method)}rudderanalytics.load("1gXi1ODmULYDEB5XJIm2TM24JId","https://rudder.netguru.com"); google\_tag\_manager\["GTM-TC2LVR"\].macro(23)&&rudderanalytics.identify(google\_tag\_manager\["GTM-TC2LVR"\].macro(24),{email:google\_tag\_manager\["GTM-TC2LVR"\].macro(25),company\_name:google\_tag\_manager\["GTM-TC2LVR"\].macro(26),company\_domain:google\_tag\_manager\["GTM-TC2LVR"\].macro(27),lifecycle\_stage:google\_tag\_manager\["GTM-TC2LVR"\].macro(28),netguru\_employee:google\_tag\_manager\["GTM-TC2LVR"\].macro(29),adblock:google\_tag\_manager\["GTM-TC2LVR"\].macro(30),interest\_in\_services:google\_tag\_manager\["GTM-TC2LVR"\].macro(31)}); rudderanalytics.page({content\_campaign:google\_tag\_manager\["GTM-TC2LVR"\].macro(32),content\_topics:google\_tag\_manager\["GTM-TC2LVR"\].macro(33),content\_publish\_date:google\_tag\_manager\["GTM-TC2LVR"\].macro(34),content\_modified\_date:google\_tag\_manager\["GTM-TC2LVR"\].macro(35),content\_blog\_author:google\_tag\_manager\["GTM-TC2LVR"\].macro(36),content\_word\_count:google\_tag\_manager\["GTM-TC2LVR"\].macro(45),social\_network:google\_tag\_manager\["GTM-TC2LVR"\].macro(46)}); (function(){window.ldfdr=window.ldfdr||{};(function(b,c,e,a){function f(g){var d=b.createElement(c);d.src=g;setTimeout(function(){a.parentNode.insertBefore(d,a)},1)}a=b.getElementsByTagName(c)\[0\];f(e)})(document,"script","https://sc.lfeeder.com/lftracker\_v1\_DzLR5a5Rbkx8BoQ2.js")})(); !function(t){function r(e){if(c\[e\])return c\[e\].exports;var n=c\[e\]={i:e,l:!1,exports:{}};return t\[e\].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var c={};r.m=t,r.c=c,r.i=function(t){return t},r.d=function(t,c,e){r.o(t,c)||Object.defineProperty(t,c,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var c=t&&t.\_\_esModule?function(){return t.default}:function(){return t};return r.d(c,"a",c),c},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="https://www.netguru.co/hubfs/js/",r(r.s=260)}({260:function(module,exports){function loadScript(scripts,callback){var script=scripts.shift();if(script||scripts.length>0)if(""===script.src)try{eval(script.textContent),window.hsVars=hsVars,loadScript(scripts,callback),script.parentNode.removeChild(script)}catch(t){callback(t)}else document.body.appendChild(script),script.onerror=function(t){callback(t)},script.onload=function(){loadScript(scripts,callback)};else callback(null)}var hbScripts=document.getElementById("footer-includes");awaitjQuery(function(){var t=hbScripts.content;if(t){t.removeChild(t.querySelector("script\[src^='https://code.jquery.com'\]"));var r=\[\].filter.call(t.querySelectorAll("script"),function(t,r){return r<3||""===t.src&&-1!==t.textContent.indexOf("hsVars")});r.unshift(r.pop()),loadScript(r,function(r){null===r&&hbScripts.parentNode.replaceChild(document.importNode(t,!0),hbScripts)})}})}}); hsjQuery = window\['jQuery'\]; (function () { window.addEventListener('load', function () { setTimeout(function () { var xhr = new XMLHttpRequest(); xhr.open('POST', '/\_hcms/perf', true /\*async\*/); xhr.setRequestHeader("Content-type", "application/json"); xhr.onreadystatechange = function () { // do nothing. }; var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection; function populateNetworkInfo(name, connection, info) { if (name in connection) { info\[name\] = connection\[name\]; } } var networkInfo = {}; if (connection) { \['type', 'effectiveType', 'downlink', 'rtt'\].forEach(function(name) { populateNetworkInfo(name, connection, networkInfo); }); } var perfData = { url: location.href, portal: 493098, content: 25219719295, group: -1, connection: networkInfo, timing: performance.timing }; xhr.send(JSON.stringify(perfData)); }, 3000); // Execute this 3 seconds after onload. }); })(); if (typeof hsVars !== 'undefined') { hsVars\['language'\] = 'en-us'; } var \_hsq = \_hsq || \[\]; \_hsq.push(\["setContentType", "blog-post"\]); \_hsq.push(\["setCanonicalUrl", "https:\\/\\/www.netguru.com\\/codestories\\/react-native-text-to-speech"\]); \_hsq.push(\["setPageId", "25219719295"\]); \_hsq.push(\["setContentMetadata", { "contentPageId": 25219719295, "legacyPageId": "25219719295", "contentFolderId": null, "contentGroupId": 5117769011, "abTestId": null, "languageVariantId": 25219719295, "languageCode": "en-us", }\]); var hsVars = { ticks: 1602906575683, page\_id: 25219719295, content\_group\_id: 5117769011, portal\_id: 493098, app\_hs\_base\_url: "https://app.hubspot.com", cp\_hs\_base\_url: "https://cp.hubspot.com", language: "en", analytics\_page\_type: "blog-post", category\_id: 3, folder\_id: 0, is\_hubspot\_user: false } function trackCustomTags() { // get the url and the keys to find var url = window.location.href; var keysToFind = \['utm\_source', 'utm\_medium', 'utm\_term', 'utm\_campaign', 'utm\_content', 'ad\_campaign', 'source', 'ad', 'campaign', 'ref', 'gclid'\]; var timestamp = Date.now() / 1000 | 0 for (key of keysToFind) { // if UTM tag is found in url if (url.indexOf(key + '=') > -1) { var valueFound = url.substr(url.indexOf(key + '=') + key.length + 1).split('&')\[0\]; // save custom UTM tags to localstorage localStorage.setItem(key, decodeURIComponent(valueFound)); // save first touch value only if it doesn't exist yet var first\_touch = localStorage.getItem(key + "\_first\_touch"); if (!first\_touch) { localStorage.setItem(key + "\_first\_touch", decodeURIComponent(valueFound)); } var versioned\_field = JSON.parse( localStorage.getItem(key + "\_versioned") ); // if field is empty (not Array), create empty Array if ( !(versioned\_field instanceof Array) ) { versioned\_field = \[\]; } // push value to Array versioned\_field.push({ "timestamp": timestamp, "value": decodeURIComponent(valueFound) }) localStorage.setItem(key + "\_versioned", JSON.stringify(versioned\_field)); } } // save referrer if (document.referrer && !document.referrer.includes("https://www.netguru.com")) { localStorage.setItem('referrer', document.referrer); var versioned\_field = JSON.parse( localStorage.getItem("referrer\_versioned") ); if ( !(versioned\_field instanceof Array) ) { versioned\_field = \[\]; } // push value to Array versioned\_field.push({ "timestamp": timestamp, "value": decodeURIComponent(document.referrer) }) localStorage.setItem("referrer\_versioned", JSON.stringify(versioned\_field)); } } function saveCustomTagsDataToHubspot() { var \_hsq = window.\_hsq = window.\_hsq || \[\]; // send localstorage UTM values to Hubspot \_hsq.push(\["identify",{ custom\_utm\_source: localStorage.getItem('utm\_source'), custom\_utm\_source\_versioned: localStorage.getItem('utm\_source\_versioned'), custom\_utm\_medium: localStorage.getItem('utm\_medium'), custom\_utm\_medium\_versioned: localStorage.getItem('utm\_medium\_versioned'), custom\_utm\_campaign: localStorage.getItem('utm\_campaign'), custom\_utm\_campaign\_versioned: localStorage.getItem('utm\_campaign\_versioned'), custom\_utm\_term: localStorage.getItem('utm\_term'), custom\_utm\_term\_versioned: localStorage.getItem('utm\_term\_versioned'), custom\_utm\_content: localStorage.getItem('utm\_content'), custom\_utm\_content\_versioned: localStorage.getItem('utm\_content\_versioned'), custom\_referrer: localStorage.getItem('referrer'), custom\_referrer\_versioned: localStorage.getItem('referrer\_versioned'), custom\_source: localStorage.getItem('source'), custom\_source\_versioned: localStorage.getItem('source\_versioned'), custom\_campaign: localStorage.getItem('campaign'), custom\_campaign\_versioned: localStorage.getItem('campaign\_versioned'), custom\_ad: localStorage.getItem('ad'), custom\_ad\_versioned: localStorage.getItem('ad\_versioned'), custom\_ref: localStorage.getItem('ref'), custom\_ref\_versioned: localStorage.getItem('ref\_versioned'), custom\_gclid: localStorage.getItem('gclid'), custom\_ad\_campaign\_first\_touch: localStorage.getItem('ad\_campaign\_first\_touch'), custom\_ad\_campaign: localStorage.getItem('ad\_campaign'), custom\_ad\_campaign\_versioned: localStorage.getItem('ad\_campaign\_versioned') }\]); } function fillFormsWithTags() { var inputs = document.getElementsByTagName('input'); for (input of inputs) { if (input.name.includes("custom\_") && input.type == "hidden") { input.value = localStorage.getItem(input.name.substring(7)); } } } \_hsq.push(\['addPrivacyConsentListener', function(consent) { if (consent.allowed) { trackCustomTags(); saveCustomTagsDataToHubspot(); setTimeout(function() { fillFormsWithTags() }, 10000); } }\]);

(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)\[0\]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en\_US/all.js#xfbml=1&status=0"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk')); !function(d,s,id){var js,fjs=d.getElementsByTagName(s)\[0\];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); if("".length>0)ga("set","userId","");

if("".length>0){fbq("track","Lead",{content\_name:""});ga("set","dimension2","");ga("send","event","Lifecycle stage","",{nonInteraction:true})};

if("Codestories".length>0){fbq("track","ViewContent",{content\_name:"Codestories"});ga("set","dimension3","Codestories");ga("send","event","Campaign name","Codestories",{nonInteraction:true})};

if("undefined"=="true"){fbq("track","ViewContent",{content\_type:"Netguru employee"});window.\_pq=window.\_pq||\[\];\_pq.push(\["track","Netguru employee"\]);ga("send","event","Netguru employee","true",{nonInteraction:true})};

!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b.\_fbq||(b.\_fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=\[\],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)\[0\],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en\_US/fbevents.js");fbq("init","725955437490668");fbq("track","PageView");

![](https://www.facebook.com/tr?id=725955437490668&ev=PageView&noscript=1)

fbq("track","ViewContent",{content\_type:google\_tag\_manager\["GTM-TC2LVR"\].macro(52)});ga(function(a){localStorage.setItem("ga\_clientId",ga.getAll()\[0\].get("clientId"));a=window.\_hsq=window.\_hsq||\[\];a.push(\["identify",{custom\_ga\_clientid:localStorage.getItem("ga\_clientId")}\])}); !function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b.\_fbq||(b.\_fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=\[\],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)\[0\],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en\_US/fbevents.js");fbq("init","725955437490668");fbq("track","PageView");

![](https://www.facebook.com/tr?id=725955437490668&ev=PageView&noscript=1)

fbq("trackCustom","EngagementTime",{Page:google\_tag\_manager\["GTM-TC2LVR"\].macro(56),Time:google\_tag\_manager\["GTM-TC2LVR"\].macro(57)}); !function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b.\_fbq||(b.\_fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=\[\],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)\[0\],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en\_US/fbevents.js");fbq("init","725955437490668");fbq("track","PageView");

![](https://www.facebook.com/tr?id=725955437490668&ev=PageView&noscript=1)

fbq("trackCustom","EngagementTime",{Page:google\_tag\_manager\["GTM-TC2LVR"\].macro(63),Time:google\_tag\_manager\["GTM-TC2LVR"\].macro(64)}); !function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b.\_fbq||(b.\_fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=\[\],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)\[0\],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en\_US/fbevents.js");fbq("init","725955437490668");fbq("track","PageView");

![](https://www.facebook.com/tr?id=725955437490668&ev=PageView&noscript=1)

fbq("trackCustom","EngagementTime",{Page:google\_tag\_manager\["GTM-TC2LVR"\].macro(75),Time:google\_tag\_manager\["GTM-TC2LVR"\].macro(76)});