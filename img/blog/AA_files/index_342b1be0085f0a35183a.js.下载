webpackJsonp([7],{"3YNU":function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(){J.on("input",function(){this.value.length?(G.hide(),tt.addClass(et)):(G.show(),tt.removeClass(et))}),G.on("click",function(){J.trigger("focus")}),tt.on("click",function(){if(!V.replyAuthor){var t=J.val(),e=$(".input-con")[0],i=$(e).attr("data-action");r(t,$(e).attr("data-object_id"),$(e).attr("data-reply_object_id"),i,$(e).attr("data-method"),!0,function(){J.val(""),G.show(),tt.removeClass(et),window.yxl.stat.send({name:"文章-详情页「提交回复」点击"})})}}),it.on("click",".comment-btn",function(t){t.preventDefault();var e=$(this).parents(".comment-item");if(e.find(nt).length)e.find(nt).remove();else{e.append('\n      <div class="reply-comment-m">\n        <div class="reply-textarea-con">\n            <textarea name="replyCommentInput" class="reply-comment-input" maxlength="200"></textarea>\n            <div class="reply-comment-placeHolder">\n                <p>回复TA～</p>\n                <p>（不超过200字）</p>\n            </div>\n        </div>\n        <button class="reply-comment-btn">回复</button>\n      </div>')}}),it.on("input",".reply-comment-input",function(){this.value.length?($(this).siblings(".reply-comment-placeHolder").hide(),$(this).parents(nt).find(".reply-comment-btn").addClass(et)):($(this).siblings(".reply-comment-placeHolder").show(),$(this).parents(nt).find(".reply-comment-btn").removeClass(et))}),it.on("click",".reply-comment-placeHolder",function(){$(this).siblings(".reply-comment-input").trigger("focus")}),it.on("click",".reply-comment-btn",function(){if(!V.replyComment){var t=$(this).parents(nt).find(".reply-comment-input").val(),e=$(this).parents(".comment-item").find(".comment-btn")[0],i=$(e).attr("data-action"),n=this;r(t,$(e).attr("data-object_id"),$(e).attr("data-reply_object_id"),i,$(e).attr("data-method"),!1,function(){$(n).parents(".comment-item").find(nt).remove(),window.yxl.stat.send({name:"文章-详情页「回复」点击"})})}}),it.on("click",".like-btn",function(t){var e=this;if(t.preventDefault(),1!==$(this).attr("loading")){var i=this;$(this).attr("loading",1),R.default.start(),E.axios.post(toggleCommentZanUrl,{comment_id:$(this).attr("data-pk")},W).then(function(t){$(e).attr("loading",0),R.default.done(),o(t,function(){var e=$($(i).find("span")[0]).text();if(1===t.data.data.is_like){$(i).addClass("like-btn-selected");var n=parseInt(e)+1;$(i).find("span").text(n)}else{$(i).removeClass("like-btn-selected");var a=parseInt(e)>0?parseInt(e)-1:0;$(i).find("span").text(a)}})},"").catch(function(t){console.log(t),R.default.done(),$(e).attr("loading",0)})}}),it.on("click",".comment-item .right-bottom a",function(t){var e=this;t.preventDefault(),(0,D.default)({title:"你确定举报吗",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",customClass:at}).then(function(t){t.value&&(R.default.start(),E.axios.post(jubaoCommentUrl,{comment_id:$(e).attr("data-pk")},W).then(function(t){R.default.done(),t.data.message&&(0,D.default)({title:t.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at})}).catch(function(t){R.default.done(),console.log(t)}))})}),$("#zanCon").on("click",function(){var t=this,e=this;1!==$(this).attr("loading")&&($(this).attr("loading",1),R.default.start(),E.axios.post(toggleArticleZanUrl,{article_id:articleId},W).then(function(i){$(t).attr("loading",0),R.default.done(),o(i,function(){if(1===i.data.data.is_like){var t=parseInt($("#zanNum").text());t+=1,$("#zanNum").text(t),$(e).addClass("selected"),window.yxl.stat.send({name:"文章-详情页「点赞」点击"})}else if(0===i.data.data.is_like){var n=parseInt($("#zanNum").text());n-=1,n=n<=0?0:n,$("#zanNum").text(n),$(e).removeClass("selected")}},"")}).catch(function(e){console.log(e),$(t).attr("loading",0),R.default.done(),(0,D.default)({title:"网络出错，请重试",type:"error",showConfirmButton:!1,timer:1e3,customClass:at})}))})}function s(){ot.on("click",function(){var t=this,e=this;1!==$(this).attr("loading")&&($(this).attr("loading",1),R.default.start(),E.axios.post(toggleArticleThemeFollowUrl,{id:$(this).attr("data-theme_id")},W).then(function(i){$(t).attr("loading",0),R.default.done(),o(i,function(){i.data.data.is_follow?($(e).text("已关注"),$(e).addClass("attentioned"),(0,D.default)({title:i.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at}),e.title="取消关注",window.yxl.stat.send({name:"文章-详情页-推荐主题「关注/取消关注」点击",properties:{"关注/取消关注":"关注"}})):($(e).text("关注"),$(e).removeClass("attentioned"),(0,D.default)({title:i.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at}),e.title="点击关注",window.yxl.stat.send({name:"文章-详情页-推荐主题「关注/取消关注」点击",properties:{"关注/取消关注":"取消关注"}}))},K)}).catch(function(e){$(t).attr("loading",0),R.default.done(),console.log(e)}))}),st.on("click",function(t){var e=this;t.preventDefault();var i=this;1!==$(this).attr("loading")&&($(this).attr("loading",1),R.default.start(),E.axios.post(toggleArticleAuthorFollowUrl,{user_id:$(this).attr("data-user-id")},W).then(function(t){$(e).attr("loading",0),R.default.done(),o(t,function(){1===t.data.data.is_follow?($(i).text("已关注"),$(i).addClass("selected"),(0,D.default)({title:t.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at}),i.title="取消关注",window.yxl.stat.send({name:"文章-详情页「关注ta/取消关注ta」点击",properties:{"关注/取消关注":"关注"}})):($(i).text("关注ta"),$(i).removeClass("selected"),(0,D.default)({title:t.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at}),i.title="关注ta",window.yxl.stat.send({name:"文章-详情页「关注ta/取消关注ta」点击",properties:{"关注/取消关注":"取消关注"}}))},Z)}).catch(function(t){$(e).attr("loading",0),R.default.done(),console.log(t)}))}),$(".tool-m a:last-child").on("click",function(t){t.preventDefault(),R.default.start(),window.yxl.stat.send({name:"文章-详情页「私信ta」点击"}),E.axios.get(authUserUrl,W).then(function(t){R.default.done();var e=t.data;0===e.code?(Q.fadeIn(200),$(".letter-modal-box .letter-content").focus()):40001===e.code?window.location.href=loginUrl+"?next="+window.location.href:window.activePhone.show()}).catch(function(t){console.log(t),R.default.done()})}),$("#letter-close-btn, .letter-modal-box .letter-mask, .letter-modal-box .cancel-btn").on("click",function(){Q.fadeOut(200)}),$(".send-btn").on("click",function(){var t=this;if(1!==$(this).attr("loading")){var e=$(this),i=e.data("id"),n=$(".letter-content").val();if(0===n.length)return void(0,D.default)({title:"发送内容不能为空喔！",type:"error",showConfirmButton:!1,timer:1e3,customClass:at});$(this).attr("loading",1),R.default.start(),E.axios.post(postUserMessageUrl,{other_id:i,content:n},W).then(function(e){$(t).attr("loading",0),R.default.done(),0===e.data.code?((0,D.default)({title:e.data.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at}),Q.fadeOut(200),$(".letter-content").val("")):(0,D.default)({title:e.data.message,type:"error",showConfirmButton:!1,timer:1e3,customClass:at})}).catch(function(e){$(t).attr("loading",0),R.default.done(),console.log(e)})}})}function o(t,e,i){switch(t.data.code){case 40001:var n=window.location.href;i===Z&&(n+="?operate=FollowAuthorType"),i===K&&(n+="?operate=FollowThemeType"),window.location.href=loginUrl+"?next="+encodeURIComponent(n);break;case 1:(0,D.default)({title:t.data.message,type:"error",showConfirmButton:!1,timer:1e3,customClass:at});break;case 0:e&&e();break;default:(0,D.default)({title:t.data.message,type:"error",showConfirmButton:!1,timer:1e3,customClass:at})}}function r(t,e,i,n,a,s,o){if(!t.length)return void(0,D.default)({title:"请输入评论内容",type:"info",showConfirmButton:!1,timer:1e3,customClass:at});var r=function(t){return 40001===t.data.code?void(window.location.href=loginUrl+"?next="+window.location.href):1===t.data.code?void(0,D.default)({title:t.data.message,type:"error",showConfirmButton:!1,timer:1e3,customClass:at}):(it.prepend(t.data),o&&o(),R.default.done(),void(s?V.replyAuthor=!1:V.replyComment=!1))},l=function(t){console.log(t),s?V.replyAuthor=!1:V.replyComment=!1,R.default.done()};if("post"===a){var c={content:t,object_id:e,reply_object_id:i};R.default.start(),E.axios.post(n,c,W).then(r).catch(l)}else{var d=n+"?object_id="+e+"&reply_object_id="+i+"&content="+t;R.default.start(),E.axios.get(d).then(r).catch(l)}}function l(){var t,e=0;$(".footer-PC").length&&(e=$($(".footer-PC")[0]).height()),$(window).scroll(function(){var i=$(document).height()-$(window).height()-200-e;$(window).scrollTop()>=i&&(clearTimeout(t),t=setTimeout(c,300))})}function c(){if(!P.isLoading&&!P.isNoMore){P.isLoading=!0,$("#loadmoreTips").hide(),$("#circleWrap").show();var t=articleCommentListUrl+"?article_id="+articleId+"&page="+P.page;E.axios.get(t,W).then(function(t){d(t)}).catch(function(t){console.log(t)})}}function d(t){t.data?(it.append(t.data),P.page++):(P.isNoMore=!0,$("#loadMoreDataM").hide()),P.isLoading=!1,$("#loadmoreTips").show(),$("#circleWrap").hide()}function h(){"1"===ot.attr("data-is_follow")&&ot.addClass("attentioned"),E.axios.get(articleUserStatusUrl+"?article_id="+articleId,W).then(function(t){console.log("获取文章状态成功");var e=t.data.data;console.log(e),$("#zanNum").text(e.zannum),e.is_zan&&$("#zanCon").addClass("selected"),e.is_follow&&(st.addClass("selected"),st.text("已关注")),e.is_favorite&&($(".collect").addClass("active"),$(".collect").html("已收藏")),e.reward_roles?($(".reward span").html(e.reward_num),$(".reward").attr("data-rawarNum",e.reward_num),1==+e.is_reward?$(".reward").addClass("active"):$(".reward").removeClass("active"),0==+e.reward_num?$(".reward").html("打赏"):$(".reward").html("打赏<span>("+e.reward_num+")</span>"),$(".reward").show()):$(".reward").remove()}).catch(function(t){console.log(t)})}function u(){$(".recommend-theme-m a.count").on("click",function(){window.yxl.stat.send({name:"文章-详情页-推荐主题「精选主题」点击"})}),$("#readList li").on("click",function(){window.yxl.stat.send({name:"文章-详情页-相关阅读「文章」点击"})}),$(".recommend-reading-m .read-title-con a").on("click",function(){window.yxl.stat.send({name:"文章-详情页-相关阅读「心理科普」点击"})}),$(".recommend-author-m #authorList a").on("click",function(){window.yxl.stat.send({name:"文章-详情页-相关作者「作者」点击"})})}function m(){var t=document.getElementsByClassName("edit"),e=t.length;if(e)for(var i=0;i<e;i++)!function(e){t[e].addEventListener("click",function(i){"A"===i.target.tagName.toUpperCase()&&i.preventDefault();var n=i.currentTarget,a=t[e].getAttribute("objectname"),s=n.getElementsByTagName("a")[0].getAttribute("href");"theme"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"主题"}}),"ceshi"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"测试"}}),"qa"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"问答"}}),"qingsu_teacher"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"倾听师"}}),"zixun_teacher"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"咨询师"}}),"fm"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"FM"}}),"article"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"文章"}}),"lesson"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"课程"}}),"fm_bodan"===a&&window.yxl.stat.send({name:"文章-详情页「贴片」点击",properties:{"业务分类":"FM播单"}}),window.open(s,"_blank")})}(i)}function p(){var t=document.getElementsByClassName("edit"),e=t.length;if(e)for(var i=0;i<e;i++){var n=t[i].getAttribute("objectId"),a=t[i].getAttribute("objectName");a.includes("theme")&&f(t[i],n,a),a.includes("ceshi")&&v(t[i],n,a),a.includes("qa")&&g(t[i],n,a),a.includes("qingsu_teacher")&&w(t[i],n,a),a.includes("zixun_teacher")&&b(t[i],n,a),a.includes("fm")&&k(t[i],n,a),a.includes("article")&&x(t[i],n,a),a.includes("lesson")&&y(t[i],n,a),a.includes("fm_bodan")&&C(t[i],n,a)}}function f(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='<div class="flex-image"><img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                <span id="type">主题</span>\n                </div>\n                <div class="flex-content">\n                    <p class="title">\n                        <span id="title">'+e.title+'</span>\n                    </p>\n                    <p class="sub-title sub-two-title">'+e.brief+'</p>\n                </div>\n                <div class="flex-play">\n                    <a href="'+e.detail_url+'">查看</a>\n                </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function v(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n                        <div class="flex-image">\n                        <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                        <span id="type">测试</span>\n\n                        </div>\n                        <div class="flex-content">\n                            <p class="title">\n                                <span id="title">'+e.title+'</span>\n                            </p>\n                            <p class="sub-title">'+e.viewnum+'已测</p>\n                            <p class="bottom-title">'+e.type_text+'</p>\n                        </div>\n                        <div class="flex-play">\n                            <a href="'+e.detail_url+'">去测</a>\n                        </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function g(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n              <div class="flex-image">\n              <img class="background-img" src="http://lapp-box5.xinli001.com/images/website-www/v4/answer.png" alt="">\n              <span id="type">问答</span>\n\n              </div>\n              <div class="flex-content">\n                  <p class="title">\n                      <span id="title">'+e.title+'</span>\n                  </p>\n                  <p class="sub-title"><span style="margin-right:5px">回答'+e.answernum+"</span><span>有用"+e.zannum+'</span></p>\n              </div>\n              <div class="flex-play">\n                  <a href="'+e.detail_url+'">讨论</a>\n              </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function w(t,e,i){$.get(lt,{object_id:e,object_name:i},function(i){var n="",a=document.createElement("p");a.className=rt,n='\n                  <div class="flex-image">\n                      <img class="background-img" src="'+i.avatar+'?x-oss-process=image/quality,Q_80" alt="">\n                      <span id="type">已认证</span>\n\n                      </div>\n                  <div class="flex-content">\n                      <p class="title">\n                          <span id="title">'+i.nickname+'</span>\n                      </p>\n                      <p class="sub-title">'+i.zizhi+'</p>\n                      <p class="bottom-title">获得'+i.like_ratenum+'次好评</p>\n                  </div>\n                  <div class="flex-play">\n                      <a href="https://static.xinli001.com/msite/index.html#/qingsu-teacher-page?id='+e+'&source=qingsuIndex&_version=null&cid=">TA的主页</a>\n                  </div>',t.innerHTML="",a.innerHTML=n,t.appendChild(a)})}function b(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n              <div class="flex-image">\n                  <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                  <span id="type">已认证</span>\n\n                  </div>\n              <div class="flex-content">\n                  <p class="title">\n                      <span id="title">'+e.nickname+'</span>\n                  </p>\n                  <p class="sub-title">'+e.honor+'</p>\n                  <p class="bottom-title">获得'+e.ratenum+'次好评</p>\n              </div>\n              <div class="flex-play">\n                  <a href="'+e.detail_url+'">TA的主页</a>\n              </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function y(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n                  <div class="flex-image">\n                      <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                      <span id="type">'+e.type_text+'</span>\n\n                      </div>\n                  <div class="flex-content">\n                      <p class="title">\n                          <span id="title">'+e.title+'</span>\n                      </p>\n                      <p class="sub-title">'+e.duration+'</p>\n                      <p class="bottom-title">'+e.keshi_title+'</p>\n                  </div>\n                  <div class="flex-play">\n                      <a href="'+e.detail_url+'">参加</a>\n                  </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function x(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n\n              <div class="flex-image">\n                  <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                  <span id="type">文章</span>\n\n                  </div>\n\n              <div class="flex-content">\n                  <p class="title">\n                      <span id="title">'+e.title+'</span>\n                  </p>\n                  <p class="bottom-title">'+e.author+'</p>\n              </div>\n              <div class="flex-play">\n                  <a href="'+e.detail_url+'">阅读</a>\n              </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function k(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n              <div class="flex-image">\n                  <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                  <span id="type">FM</span>\n\n                  </div>\n              <div class="flex-content">\n                  <p class="title">\n                      <span id="title">'+e.title+'</span>\n                  </p>\n                  <p class="sub-title">时长:'+(e.duration||"未知")+'</p>\n                  <p class="bottom-title">'+(e.bodan.title?"[播单:]"+e.bodan.title:"")+'</p>\n\n              </div>\n              <div class="flex-play">\n                  <a href="'+e.detail_url+'">播放</a>\n              </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function C(t,e,i){$.get(lt,{object_id:e,object_name:i},function(e){var i="",n=document.createElement("p");n.className=rt,i='\n              <div class="flex-image">\n                      <img class="background-img" src="'+e.cover+'?x-oss-process=image/quality,Q_80" alt="">\n                      <span id="type">播单</span>\n\n                      </div>\n              <div class="flex-content">\n                  <p class="title">\n                      <span id="title">'+e.title+'</span>\n                  </p>\n                  <p class="sub-title">'+e.broadcast.title+'</p>\n                  <p class="bottom-title">总长:'+e.duration+'</p>\n\n              </div>\n              <div class="flex-play">\n                  <a href="'+e.detail_url+'">查看</a>\n              </div>',t.innerHTML="",n.innerHTML=i,t.appendChild(n)})}function T(){a(),s(),h(),c(),u()}var _=i("woOf"),z=n(_);i("OtJs");var I=i("e7x4"),D=n(I),E=i("tGxy"),L=i("mw3O"),S=n(L),M=i("Eqnl"),N=n(M),j=i("GDq+"),q=i("Y81h"),R=n(q);i("Eyg4");var A=i("9Cnf"),F=i("9rTp"),H=n(F),O=i("dlmu"),Y=n(O),B=i("cwm1"),X=n(B);window.yxl={stat:new N.default},window.onload=function(){new Y.default($(".article-content-m")[0],{title:!1,navbar:1,toolbar:{prev:1,next:1,rotateRight:1}})};var U=(0,A.getRunTime)("//m.xinli001.com"),P={page:1,isNoMore:!1,isLoading:!1},W={headers:{"X-Requested-With":"XMLHttpRequest"}},V={replyAuthor:!1,replyComment:!1},Q=$(".letter-modal-box"),Z="FollowAuthorType",K="FollowThemeType",J=$("#replyInput"),G=$("#inputPlaceHolder"),tt=$(".reply-author"),et="active-btn",it=$("#commentList"),nt=".reply-comment-m",at="swal-customclass",st=$(".tool-m a:first-child"),ot=$(".desc-con button"),rt="modul-class",lt=U+"/common/get-object-info.json",ct='<div class="reward-popup-wrap">\n    <div class="reward-popup-div">\n        <div class="reward-popup-circle">\n            <img src="'+X.default+'" alt="">\n        </div>\n        <div class="reward-popup-ct">\n            <i class="yxl-font yxl-font-FM51delete close-reward"></i>\n            <div class="reward-popup-ct-title">每一种付出，都值得被鼓励</div>\n            <div class="reward-popup-ct-t">\n                <ul>\n                    <li class="active">1元</li>\n                    <li>2元</li>\n                    <li>5元</li>\n                </ul>\n            </div>\n            <input type="number" class="number-input" placeholder="或输入其他金额数字，1～100元" max="100" />\n            <div class="pay-div">\n                <ul>\n                    <li class="active">微信支付<span></span></li>\n                    <li>支付宝<span></span></li>\n                </ul>\n            </div>\n            <input type="button" class="pay-btn" value="去支付" />\n            <div class="Agreement"><a href="https://m.xinli001.com/qa/reward/agreement">同意《壹心理用户打赏/悬赏用户协议》</a></div>\n            <div class="tips">打赏是什么？如何开通</div>\n        </div>\n    </div>\n</div>';0===$(".reward-popup-wrap").length&&$("body").append(ct);0===$(".loadingDiv").length&&$("body").append('<div class="loadingDiv"><div class="mint-indicator-wrapper" style="padding: 15px;"><span class="mint-indicator-spin"><div class="mint-spinner-snake" style="border-top-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); height: 32px; width: 32px;"></div></span> <span class="mint-indicator-text" style="display: none;"></span></div></div>'),0===$(".payStatus").length&&$("body").append('<div class="payStatus"><div class="y-expert-p show" id="zf"><div class="bd">请根据你的付款情况点击以下按钮</div><div class="ft"><span id="dialog-confirm">已付款</span><span id="dialog-cancel">未付款</span></div></div></div>'),function(){var t={name:"qa-top-live",size:"1",_version:"5.3.8",_platform:"ios"};window.URLSearchParams=URLSearchParams;var e=new URLSearchParams(window.location.search),i=e.get("token");i&&(t.token=i);var n=(0,j.getRequestSign)(t),a=(0,z.default)(n.params,{sign:n.sign});E.axios.get(H.default.getAD,{params:a}).then(function(t){return t.data}).then(function(t){if(0==+t.code&&t.data.length>0){var e='<div class="top_ad"><a href="'+t.data[0].url+'">'+t.data[0].title+'<div class="play-wave">\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n      </div></a></div>';$(e).insertBefore(".main-container-bg")}})}(),$(".article-copyright .subtitle").eq(2).html("原文标题");var dt=document.querySelector(".qcode-img"),ht=void 0;dt&&window.addEventListener("scroll",function(){var t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;dt.getBoundingClientRect().top<73&&!ht?(ht=t,dt.style.position="fixed",dt.style.top="73px",dt.style.zIndex=1):ht&&ht>t&&(dt.style.position="static",ht=void 0)}),l(),$(".collect").click(function(){var t=this;window.articleId&&E.axios.post(H.default.favourite,{article_id:window.articleId},W).then(function(t){return t.data}).then(function(e){0===e.code&&(1===e.data.is_fav?($(t).addClass("active"),$(t).html("已收藏"),(0,D.default)({title:e.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at})):($(t).html("收藏"),$(t).removeClass("active"),(0,D.default)({title:e.message,type:"success",showConfirmButton:!1,timer:1e3,customClass:at})))}).catch(function(t){console.log(t)})});var ut=window.articleId,mt=null;window.navigator.userAgent.indexOf("yixinliApp");(function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var i=t.substr(1),n=i.split("&"),a=0;a<n.length;a++)e[n[a].split("=")[0]]=unescape(n[a].split("=")[1]);return e})().pay_callback&&window.close(),$(".tips").click(function(){var t=(0,A.getRunTime)("//static.xinli001.com");window.location.href=window.location.protocol+"//"+t+"/msite/index.html#/open-reward"}),$(".reward-popup-wrap").click(function(t){$(t.target).hasClass("reward-popup-wrap")&&$(".reward-popup-wrap").hide()}),$(".reward").click(function(){return window.baseInfo.authuser_id?(ut=$(this).attr("data-objectid"))?void(window.baseInfo&&(window.baseInfo.userId==window.baseInfo.authuser_id?window.toast("不能给自己打赏"):(window.yxl.stat.send({name:"文章-「打赏」点击"}),$(".reward-popup-ct-t ul li").removeClass("active"),$(".reward-popup-ct-t ul li").eq(0).addClass("active"),$(".pay-div li").removeClass("active"),$(".pay-div li").eq(0).addClass("active"),$(".number-input").val(""),$(".reward-popup-wrap").show()))):void window.toast("没有打赏对象~"):(window.toast("未登录，稍后为您跳转到登录页面"),void setTimeout(function(){var t=H.default.login+"?next="+encodeURIComponent(window.location.href);window.location.href=t},1500))}),$(".close-reward").click(function(){$(".reward-popup-wrap").hide()}),$(".reward-popup-ct-t ul li").click(function(t){$(this).addClass("active"),$(".number-input").val(""),$(this).siblings().removeClass("active")}),$(".pay-div ul li").click(function(t){$(this).addClass("active"),$(this).siblings().removeClass("active")}),$(".number-input").on("input",function(){if(0===parseInt($(this).val())&&$(this).val(""),$(this).val().indexOf(".")>-1&&$(this).val().split(".").length>=2){var t=parseFloat($(".number-input").val());$(".number-input").val(""),$(".number-input").val(t)}$(".reward-popup-ct-t ul li").removeClass("active"),$(this).val($(this).val().replace(/[^\d\.]/g,"")),$(this).val($(this).val().replace(/^\./g,"")),$(this).val($(this).val().replace(/\.{2,}/g,".")),$(this).val($(this).val().replace(".","$#$").replace(/\./g,"").replace("$#$",".")),$(this).val($(this).val().replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")),/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test($(this).val())&&(0===parseInt($(this).val())&&$(this).val(""),parseFloat($(this).val())>100&&(100===parseInt($(this).val().substring(0,3))?$(this).val(100):$(this).val($(this).val().substring(0,2))))}),$(".number-input").blur(function(){var t=parseFloat($(".number-input").val());$(".number-input").val(""),$(".number-input").val(t)}),$(".pay-btn").click(function(){var t=(0,A.getPlatform)();if(console.log(ut),!ut)return window.toast("缺少打赏对象"),!1;var e={price:"",payway:"",object_id:ut,object_name:"article.reward",agreement:"yes",open_form:"yixinli_pc",pay_succes_redirect:encodeURIComponent(window.location.href.split("?")[0]+"?pay_callback=1")};if($(".reward-popup-ct-t li").hasClass("active"))$(".reward-popup-ct-t li").each(function(t,i){if($(i).hasClass("active"))return e.price=parseInt($(i).html()),!1});else{if(parseFloat($(".number-input").val())<=0||""===$(".number-input").val().trim())return window.toast("请输入打赏金额"),!1;e.price=$(".number-input").val()}$(".pay-div li").each(function(t,i){if($(i).hasClass("active")){var n=0===t?"weixin":"alipay";return e.payway=n,!1}});var i=window.open("about:blank");E.axios.post(H.default.pay,S.default.stringify(e)).then(function(e){0==+e.data.code?!t.isYixinliApp&&e.data.data.pay_action&&($(".payStatus").show(),mt=e.data.data.dingdan_id,i.location.href=e.data.data.pay_action):window.toast(e.data.message)}).catch(function(t){window.toast(t)})}),$("#dialog-confirm").click(function(){if(!mt)return window.toast("请勿违规操作！"),!1;E.axios.post(H.default.payStatus,S.default.stringify({id:mt,object_name:"article.reward"})).then(function(t){if(0==+t.data.code){$(".payStatus").hide(),$(".reward-popup-wrap").hide();var e=parseInt($(".reward").attr("data-rawarnum"))+1;$(".reward span").html("("+e+")"),window.toast("打赏成功，感谢真诚和爱~")}else $(".payStatus").hide(),window.toast("您没有完成打赏支付！")}).catch(function(t){console.log(t)})}),$("#dialog-cancel").click(function(){$(".payStatus").hide()}),$(function(){function t(){for(var t=location.search.length>0?location.search.substring(1):"",e={},i=t.length?t.split("&"):[],n=null,a=null,s=null,o=0,r=i.length;o<r;o++)n=i[o].split("="),a=decodeURIComponent(n[0]),s=decodeURIComponent(n[1]),a.length&&(e[a]=s);return e}if(window.yxl.stat.send({name:"文章-「文章详情页」访问"}),T(),l(),p(),m(),t().operate){var e=t().operate;e===Z&&st.trigger("click"),e===K&&ot.trigger("click");var i="operate="+e,n=new RegExp(i,"g");history.replaceState({},"",location.href.replace(n,""))}})},"9rTp":function(t,e,i){"use strict";var n=i("9Cnf"),a=window.navigator.userAgent,s=(0,n.getRunTime)("//www.xinli001.com"),o=(a.toLocaleLowerCase().indexOf("yixinliapp"),(0,n.getRunTime)("//account.xinli001.com")),r=(0,n.getRunTime)("//yiapi.xinli001.com");t.exports={articleIndex:s+"/common/get-object-info.json",isLogin:s+"/ajax/get-user-header",favourite:s+"/ajax/article-fav-toggle.json",pay:s+"/zhifu/reward-create-dingdan",payStatus:s+"/zhifu/reward-pay-callback",login:o+"/login",getAD:r+"/v5/yi/get-ad-lists.json"}},OtJs:function(t,e){},cwm1:function(t,e,i){t.exports=i.p+"static/img/f0163938785a574d85ac6fcba5ae0606.png"},dlmu:function(t,e,i){"use strict";/*!
 * Viewer.js v1.3.2
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-01-24T11:01:33.473Z
 */
function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function r(t){return"string"==typeof t}function l(t){return"number"==typeof t&&!dt(t)}function c(t){return void 0===t}function d(t){return"object"===n(t)&&null!==t}function h(t){if(!d(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&ht.call(i,"isPrototypeOf")}catch(t){return!1}}function u(t){return"function"==typeof t}function m(t,e){if(t&&u(e))if(Array.isArray(t)||l(t.length)){var i,n=t.length;for(i=0;i<n&&!1!==e.call(t,t[i],i,t);i+=1);}else d(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)});return t}function p(t,e){var i=t.style;m(e,function(t,e){mt.test(e)&&l(t)&&(t+="px"),i[e]=t})}function f(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function v(t,e){if(e){if(l(t.length))return void m(t,function(t){v(t,e)});if(t.classList)return void t.classList.add(e);var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function g(t,e){if(e)return l(t.length)?void m(t,function(t){g(t,e)}):t.classList?void t.classList.remove(e):void(t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function w(t,e,i){if(e)return l(t.length)?void m(t,function(t){w(t,e,i)}):void(i?v(t,e):g(t,e))}function b(t){return t.replace(pt,"$1-$2").toLowerCase()}function y(t,e){return d(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(b(e)))}function x(t,e,i){d(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(b(e)),i)}function $(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(lt).forEach(function(e){if(!ft){var s=t.listeners;s&&s[e]&&s[e][i]&&(a=s[e][i],delete s[e][i],0===Object.keys(s[e]).length&&delete s[e],0===Object.keys(s).length&&delete t.listeners)}t.removeEventListener(e,a,n)})}function k(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(lt).forEach(function(e){if(n.once&&!ft){var s=t.listeners,o=void 0===s?{}:s;a=function(){delete o[e][i],t.removeEventListener(e,a,n);for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];i.apply(t,r)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],n),o[e][i]=a,t.listeners=o}t.addEventListener(e,a,n)})}function C(t,e,i){var n;return u(Event)&&u(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(n)}function T(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function _(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,s=t.translateY,o=[];l(a)&&0!==a&&o.push("translateX(".concat(a,"px)")),l(s)&&0!==s&&o.push("translateY(".concat(s,"px)")),l(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),l(i)&&1!==i&&o.push("scaleX(".concat(i,")")),l(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var r=o.length?o.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function z(t){return r(t)?t.replace(/^.*\//,"").replace(/[?&#].*$/,""):""}function I(t,e){var i=document.createElement("img");if(t.naturalWidth&&!vt)return e(t.naturalWidth,t.naturalHeight),i;var n=document.body||document.documentElement;return i.onload=function(){e(i.width,i.height),vt||n.removeChild(i)},i.src=t.src,vt||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(i)),i}function D(t){switch(t){case 2:return W;case 3:return P;case 4:return U;default:return""}}function E(t){var e=ut({},t),i=[];return m(t,function(t,n){delete e[n],m(e,function(e){var n=Math.abs(t.startX-e.startX),a=Math.abs(t.startY-e.startY),s=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),r=Math.sqrt(n*n+a*a),l=Math.sqrt(s*s+o*o),c=(l-r)/r;i.push(c)})}),i.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),i[0]}function L(t,e){var i=t.pageX,n=t.pageY,a={endX:i,endY:n};return e?a:ut({timeStamp:Date.now(),startX:i,startY:n},a)}function S(t){var e=0,i=0,n=0;return m(t,function(t){var a=t.startX,s=t.startY;e+=a,i+=s,n+=1}),e/=n,i/=n,{pageX:e,pageY:i}}Object.defineProperty(e,"__esModule",{value:!0});var M={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,zoom:null,zoomed:null},N="undefined"!=typeof window,j=N?window:{},q=!!N&&"ontouchstart"in j.document.documentElement,R=!!N&&"PointerEvent"in j,A="".concat("viewer","-active"),F="".concat("viewer","-close"),H="".concat("viewer","-fade"),O="".concat("viewer","-fixed"),Y="".concat("viewer","-fullscreen"),B="".concat("viewer","-fullscreen-exit"),X="".concat("viewer","-hide"),U="".concat("viewer","-hide-md-down"),P="".concat("viewer","-hide-sm-down"),W="".concat("viewer","-hide-xs-down"),V="".concat("viewer","-in"),Q="".concat("viewer","-invisible"),Z="".concat("viewer","-loading"),K="".concat("viewer","-move"),J="".concat("viewer","-open"),G="".concat("viewer","-show"),tt="".concat("viewer","-transition"),et=q?"touchstart":"mousedown",it=q?"touchmove":"mousemove",nt=q?"touchend touchcancel":"mouseup",at=R?"pointerdown":et,st=R?"pointermove":it,ot=R?"pointerup pointercancel":nt,rt="".concat("viewer","Action"),lt=/\s\s*/,ct=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"],dt=Number.isNaN||j.isNaN,ht=Object.prototype.hasOwnProperty,ut=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return d(t)&&i.length>0&&i.forEach(function(e){d(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},mt=/^(?:width|height|left|top|marginLeft|marginTop)$/,pt=/([a-z\d])([A-Z])/g,ft=function(){var t=!1;if(N){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});j.addEventListener("test",i,n),j.removeEventListener("test",i,n)}return t}(),vt=j.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(j.navigator.userAgent),gt={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var t,e=this.options,i=this.parent;e.inline&&(t={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=t),!this.fulled&&t||(t=this.containerData),this.viewerData=ut({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&p(this.viewer,this.viewerData)},initList:function(){var t=this,e=this.element,i=this.options,n=this.list,a=[];m(this.images,function(e,n){var s=e.src,o=e.alt||z(s),l=i.url;r(l)?l=e.getAttribute(l):u(l)&&(l=l.call(t,e)),(s||l)&&a.push("<li><img"+' src="'.concat(s||l,'"')+' role="button" data-viewer-action="view"'+' data-index="'.concat(n,'"')+' data-original-url="'.concat(l||s,'"')+' alt="'.concat(o,'"')+"></li>")}),n.innerHTML=a.join(""),this.items=n.getElementsByTagName("li"),m(this.items,function(e){var n=e.firstElementChild;x(n,"filled",!0),i.loading&&v(e,Z),k(n,"load",function(n){i.loading&&g(e,Z),t.loadImage(n)},{once:!0})}),i.transition&&k(e,"viewed",function(){v(n,tt)},{once:!0})},renderList:function(t){var e=t||this.index,i=this.items[e].offsetWidth||30,n=i+1;p(this.list,ut({width:n*this.length},_({translateX:(this.viewerData.width-i)/2-n*e})))},resetList:function(){var t=this.list;t.innerHTML="",g(t,tt),p(t,_({translateX:0}))},initImage:function(t){var e,i=this,n=this.options,a=this.image,s=this.viewerData,o=this.footer.offsetHeight,r=s.width,l=Math.max(s.height-o,o),c=this.imageData||{};this.imageInitializing={abort:function(){e.onload=null}},e=I(a,function(e,a){var s=e/a,o=r,d=l;i.imageInitializing=!1,l*s>r?d=r/s:o=l*s,o=Math.min(.9*o,e),d=Math.min(.9*d,a);var h={naturalWidth:e,naturalHeight:a,aspectRatio:s,ratio:o/e,width:o,height:d,left:(r-o)/2,top:(l-d)/2},u=ut({},h);n.rotatable&&(h.rotate=c.rotate||0,u.rotate=0),n.scalable&&(h.scaleX=c.scaleX||1,h.scaleY=c.scaleY||1,u.scaleX=1,u.scaleY=1),i.imageData=h,i.initialImageData=u,t&&t()})},renderImage:function(t){var e=this,i=this.image,n=this.imageData;if(p(i,ut({width:n.width,height:n.height,marginLeft:n.left,marginTop:n.top},_(n))),t)if((this.viewing||this.zooming)&&this.options.transition){var a=function(){e.imageRendering=!1,t()};this.imageRendering={abort:function(){$(i,"transitionend",a)}},k(i,"transitionend",a,{once:!0})}else t()},resetImage:function(){if(this.viewing||this.viewed){var t=this.image;this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null}}},wt={bind:function(){var t=this.options,e=this.viewer,i=this.canvas,n=this.element.ownerDocument;k(e,"click",this.onClick=this.click.bind(this)),k(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),k(e,"dragstart",this.onDragStart=this.dragstart.bind(this)),k(i,at,this.onPointerDown=this.pointerdown.bind(this)),k(n,st,this.onPointerMove=this.pointermove.bind(this)),k(n,ot,this.onPointerUp=this.pointerup.bind(this)),k(n,"keydown",this.onKeyDown=this.keydown.bind(this)),k(window,"resize",this.onResize=this.resize.bind(this)),t.toggleOnDblclick&&k(i,"dblclick",this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,e=this.viewer,i=this.canvas,n=this.element.ownerDocument;$(e,"click",this.onClick),$(e,"wheel",this.onWheel,{passive:!1,capture:!0}),$(e,"dragstart",this.onDragStart),$(i,at,this.onPointerDown),$(n,st,this.onPointerMove),$(n,ot,this.onPointerUp),$(n,"keydown",this.onKeyDown),$(window,"resize",this.onResize),t.toggleOnDblclick&&$(i,"dblclick",this.onDblclick)}},bt={click:function(t){var e=t.target,i=this.options,n=this.imageData,a=y(e,rt);switch(q&&t.isTrusted&&e===this.canvas&&clearTimeout(this.clickCanvasTimeout),a){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(y(e,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-n.scaleX||-1);break;case"flip-vertical":this.scaleY(-n.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(q&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle())},load:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var e=this.element,i=this.options,n=this.image,a=this.index,s=this.viewerData;g(n,Q),i.loading&&g(this.canvas,Z),n.style.cssText="height:0;"+"margin-left:".concat(s.width/2,"px;")+"margin-top:".concat(s.height/2,"px;")+"max-width:none!important;position:absolute;width:0;",this.initImage(function(){w(n,K,i.movable),w(n,tt,i.transition),t.renderImage(function(){t.viewed=!0,t.viewing=!1,u(i.viewed)&&k(e,"viewed",i.viewed,{once:!0}),C(e,"viewed",{originalImage:t.images[a],index:a,image:n})})})},loadImage:function(t){var e=t.target,i=e.parentNode,n=i.offsetWidth||30,a=i.offsetHeight||50,s=!!y(e,"filled");I(e,function(t,i){var o=t/i,r=n,l=a;a*o>n?s?r=a*o:l=n/o:s?l=n/o:r=a*o,p(e,ut({width:r,height:l},_({translateX:(n-r)/2,translateY:(a-l)/2})))})},keydown:function(t){var e=this.options;if(this.fulled&&e.keyboard)switch(t.keyCode||t.which||t.charCode){case 27:this.played?this.stop():e.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(e.loop);break;case 38:t.preventDefault(),this.zoom(e.zoomRatio,!0);break;case 39:this.next(e.loop);break;case 40:t.preventDefault(),this.zoom(-e.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle())}},dragstart:function(t){"img"===t.target.tagName.toLowerCase()&&t.preventDefault()},pointerdown:function(t){var e=this.options,i=this.pointers,n=t.buttons,a=t.button;if(!(!this.viewed||this.showing||this.viewing||this.hiding||l(n)&&1!==n||l(a)&&0!==a||t.ctrlKey)){t.preventDefault(),t.changedTouches?m(t.changedTouches,function(t){i[t.identifier]=L(t)}):i[t.pointerId||0]=L(t);var s=!!e.movable&&"move";Object.keys(i).length>1?s="zoom":"touch"!==t.pointerType&&"touchstart"!==t.type||!this.isSwitchable()||(s="switch"),!e.transition||"move"!==s&&"zoom"!==s||g(this.image,tt),this.action=s}},pointermove:function(t){var e=this.pointers,i=this.action;this.viewed&&i&&(t.preventDefault(),t.changedTouches?m(t.changedTouches,function(t){ut(e[t.identifier]||{},L(t,!0))}):ut(e[t.pointerId||0]||{},L(t,!0)),this.change(t))},pointerup:function(t){var e,i=this,n=this.options,a=this.action,s=this.pointers;t.changedTouches?m(t.changedTouches,function(t){e=s[t.identifier],delete s[t.identifier]}):(e=s[t.pointerId||0],delete s[t.pointerId||0]),a&&(t.preventDefault(),!n.transition||"move"!==a&&"zoom"!==a||v(this.image,tt),this.action=!1,q&&"zoom"!==a&&e&&Date.now()-e.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){C(i.image,"dblclick")},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){C(i.canvas,"click")},50)))))},resize:function(){var t=this;if(this.isShown&&!this.hiding&&(this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();m(this.player.getElementsByTagName("img"),function(e){k(e,"load",t.loadImage.bind(t),{once:!0}),C(e,"load")})}},wheel:function(t){var e=this;if(this.viewed&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,n=1;t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,!0,t)}}},yt={show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(t),this;if(u(i.show)&&k(e,"show",i.show,{once:!0}),!1===C(e,"show")||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var n=this.viewer;if(g(n,X),i.transition&&!t){var a=this.shown.bind(this);this.transitioning={abort:function(){$(n,"transitionend",a),g(n,V)}},v(n,tt),n.offsetWidth,k(n,"transitionend",a,{once:!0}),v(n,V)}else v(n,V),this.shown();return this},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,i=this.options;if(i.inline||this.hiding||!this.isShown&&!this.showing)return this;if(u(i.hide)&&k(e,"hide",i.hide,{once:!0}),!1===C(e,"hide"))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var n=this.viewer;if(i.transition&&!t){var a=this.hidden.bind(this),s=function(){k(n,"transitionend",a,{once:!0}),g(n,V)};this.transitioning={abort:function(){this.viewed?$(this.image,"transitionend",s):$(n,"transitionend",a)}},this.viewed?(k(this.image,"transitionend",s,{once:!0}),this.zoomTo(0,!1,!1,!0)):s()}else g(n,V),this.hidden();return this},view:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(e=Number(e)||0,!this.isShown)return this.index=e,this.show();if(this.hiding||this.played||e<0||e>=this.length||this.viewed&&e===this.index)return this;this.viewing&&this.viewing.abort();var i=this.element,n=this.options,a=this.title,s=this.canvas,o=this.items[e],r=o.querySelector("img"),l=y(r,"originalUrl"),c=r.getAttribute("alt"),d=document.createElement("img");if(d.src=l,d.alt=c,u(n.view)&&k(i,"view",n.view,{once:!0}),!1===C(i,"view",{originalImage:this.images[e],index:e,image:d})||!this.isShown||this.hiding||this.played)return this;this.image=d,g(this.items[this.index],A),v(o,A),this.viewed=!1,this.index=e,this.imageData={},v(d,Q),n.loading&&v(s,Z),s.innerHTML="",s.appendChild(d),this.renderList(),a.innerHTML="";var h,m=function(){var e=t.imageData,i=Array.isArray(n.title)?n.title[1]:n.title;a.innerHTML=u(i)?i.call(t,d,e):"".concat(c," (").concat(e.naturalWidth," × ").concat(e.naturalHeight,")")};return k(i,"viewed",m,{once:!0}),this.viewing={abort:function(){$(i,"viewed",m),d.complete?this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort():($(d,"load",h),this.timeout&&clearTimeout(this.timeout))}},d.complete?this.load():(k(d,"load",h=this.load.bind(this),{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){g(d,Q),t.timeout=!1},1e3)),this},prev:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.index-1;return e<0&&(e=t?this.length-1:0),this.view(e),this},next:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.length-1,i=this.index+1;return i>e&&(i=t?0:e),this.view(i),this},move:function(t,e){var i=this.imageData;return this.moveTo(c(t)?t:i.left+Number(t),c(e)?e:i.top+Number(e)),this},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.movable){var n=!1;l(t)&&(i.left=t,n=!0),l(e)&&(i.top=e,n=!0),n&&this.renderImage()}return this},zoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.imageData;return t=Number(t),t=t<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,e,i),this},zoomTo:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.element,o=this.options,r=this.pointers,c=this.imageData,d=c.width,h=c.height,m=c.left,p=c.top,f=c.naturalWidth,v=c.naturalHeight;if(t=Math.max(0,t),l(t)&&this.viewed&&!this.played&&(a||o.zoomable)){if(!a){var g=Math.max(.01,o.minZoomRatio),w=Math.min(100,o.maxZoomRatio);t=Math.min(Math.max(t,g),w)}n&&t>.95&&t<1.05&&(t=1);var b=f*t,y=v*t,x=b-d,$=y-h,_=d/f;if(u(o.zoom)&&k(s,"zoom",o.zoom,{once:!0}),!1===C(s,"zoom",{ratio:t,oldRatio:_,originalEvent:n}))return this;if(this.zooming=!0,n){var z=T(this.viewer),I=r&&Object.keys(r).length?S(r):{pageX:n.pageX,pageY:n.pageY};c.left-=x*((I.pageX-z.left-m)/d),c.top-=$*((I.pageY-z.top-p)/h)}else c.left-=x/2,c.top-=$/2;c.width=b,c.height=y,c.ratio=t,this.renderImage(function(){e.zooming=!1,u(o.zoomed)&&k(s,"zoomed",o.zoomed,{once:!0}),C(s,"zoomed",{ratio:t,oldRatio:_,originalEvent:n})}),i&&this.tooltip()}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var e=this.imageData;return t=Number(t),l(t)&&this.viewed&&!this.played&&this.options.rotatable&&(e.rotate=t,this.renderImage()),this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.scalable){var n=!1;l(t)&&(i.scaleX=t,n=!0),l(e)&&(i.scaleY=e,n=!0),n&&this.renderImage()}return this},play:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var i=this.options,n=this.player,a=this.loadImage.bind(this),s=[],o=0,r=0;if(this.played=!0,this.onLoadWhenPlay=a,e&&this.requestFullscreen(),v(n,G),m(this.items,function(t,e){var l=t.querySelector("img"),c=document.createElement("img");c.src=y(l,"originalUrl"),c.alt=l.getAttribute("alt"),o+=1,v(c,H),w(c,tt,i.transition),f(t,A)&&(v(c,V),r=e),s.push(c),k(c,"load",a,{once:!0}),n.appendChild(c)}),l(i.interval)&&i.interval>0){o>1&&function e(){t.playing=setTimeout(function(){g(s[r],V),r+=1,r=r<o?r:0,v(s[r],V),e()},i.interval)}()}return this},stop:function(){var t=this;if(!this.played)return this;var e=this.player;return this.played=!1,clearTimeout(this.playing),m(e.getElementsByTagName("img"),function(e){$(e,"load",t.onLoadWhenPlay)}),g(e,G),e.innerHTML="",this.exitFullscreen(),this},full:function(){var t=this,e=this.options,i=this.viewer,n=this.image,a=this.list;return!this.isShown||this.played||this.fulled||!e.inline?this:(this.fulled=!0,this.open(),v(this.button,B),e.transition&&(g(a,tt),this.viewed&&g(n,tt)),v(i,O),i.setAttribute("style",""),p(i,{zIndex:e.zIndex}),this.initContainer(),this.viewerData=ut({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){v(n,tt),v(a,tt)},0)})}),this)},exit:function(){var t=this,e=this.options,i=this.viewer,n=this.image,a=this.list;return this.isShown&&!this.played&&this.fulled&&e.inline?(this.fulled=!1,this.close(),g(this.button,B),e.transition&&(g(a,tt),this.viewed&&g(n,tt)),g(i,O),p(i,{zIndex:e.zIndexInline}),this.viewerData=ut({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){v(n,tt),v(a,tt)},0)})}),this):this},tooltip:function(){var t=this,e=this.options,i=this.tooltipBox,n=this.imageData;return this.viewed&&!this.played&&e.tooltip?(i.textContent="".concat(Math.round(100*n.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):e.transition?(this.fading&&C(i,"transitionend"),v(i,G),v(i,H),v(i,tt),i.offsetWidth,v(i,V)):v(i,G),this.tooltipping=setTimeout(function(){e.transition?(k(i,"transitionend",function(){g(i,G),g(i,H),g(i,tt),t.fading=!1},{once:!0}),g(i,V),t.fading=!0):g(i,G),t.tooltipping=!1},1e3),this):this},toggle:function(){return 1===this.imageData.ratio?this.zoomTo(this.initialImageData.ratio,!0):this.zoomTo(1,!0),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=ut({},this.initialImageData),this.renderImage()),this},update:function(){var t=this.element,e=this.options,i=this.isImg;if(i&&!t.parentNode)return this.destroy();var n=[];if(m(i?[t]:t.querySelectorAll("img"),function(t){e.filter?e.filter(t)&&n.push(t):n.push(t)}),!n.length)return this;if(this.images=n,this.length=n.length,this.ready){var a=[];if(m(this.items,function(t,e){var i=t.querySelector("img"),s=n[e];s?s.src!==i.src&&a.push(e):a.push(e)}),p(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var s=a.indexOf(this.index);s>=0?(this.viewed=!1,this.view(Math.max(this.index-(s+1),0))):v(this.items[this.index],A)}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var t=this.element,e=this.options;return t.viewer?(this.destroyed=!0,this.ready?(this.played&&this.stop(),e.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):e.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),e.inline||$(t,"click",this.onStart),t.viewer=void 0,this):this}},xt={open:function(){var t=this.body;v(t,J),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyPaddingRight)||0),"px")},close:function(){var t=this.body;g(t,J),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,e=this.options;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,u(e.shown)&&k(t,"shown",e.shown,{once:!0}),!1!==C(t,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var t=this.element,e=this.options;this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),v(this.viewer,X),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(u(e.hidden)&&k(t,"hidden",e.hidden,{once:!0}),C(t,"hidden"))},requestFullscreen:function(){var t=this.element.ownerDocument;if(this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)){var e=t.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var e=this.options,i=this.pointers,n=i[Object.keys(i)[0]],a=n.endX-n.startX,s=n.endY-n.startY;switch(this.action){case"move":this.move(a,s);break;case"zoom":this.zoom(E(i),!1,t);break;case"switch":this.action="switched";var o=Math.abs(a);o>1&&o>Math.abs(s)&&(this.pointers={},a>1?this.prev(e.loop):a<-1&&this.next(e.loop))}m(i,function(t){t.startX=t.endX,t.startY=t.endY})},isSwitchable:function(){var t=this.imageData,e=this.viewerData;return this.length>1&&t.left>=0&&t.top>=0&&t.width<=e.width&&t.height<=e.height}},$t=j.Viewer,kt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e||1!==e.nodeType)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=ut({},M,h(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.init()}return o(t,[{key:"init",value:function(){var t=this,e=this.element,i=this.options;if(!e.viewer){e.viewer=this;var n="img"===e.tagName.toLowerCase(),a=[];m(n?[e]:e.querySelectorAll("img"),function(e){u(i.filter)?i.filter.call(t,e)&&a.push(e):a.push(e)}),this.isImg=n,this.length=a.length,this.images=a;var s=e.ownerDocument,o=s.body||s.documentElement;if(this.body=o,this.scrollbarWidth=window.innerWidth-s.documentElement.clientWidth,this.initialBodyPaddingRight=window.getComputedStyle(o).paddingRight,c(document.createElement("viewer").style.transition)&&(i.transition=!1),i.inline){var r=0,l=function(){if((r+=1)===t.length){var e;t.initializing=!1,t.delaying={abort:function(){clearTimeout(e)}},e=setTimeout(function(){t.delaying=!1,t.build()},0)}};this.initializing={abort:function(){m(a,function(t){t.complete||$(t,"load",l)})}},m(a,function(t){t.complete?l():k(t,"load",l,{once:!0})})}else k(e,"click",this.onStart=function(e){var n=e.target;"img"!==n.tagName.toLowerCase()||u(i.filter)&&!i.filter.call(t,n)||t.view(t.images.indexOf(n))})}}},{key:"build",value:function(){if(!this.ready){var t=this.element,e=this.options,i=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="viewer-container" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-viewer-action="mix"></div><div class="viewer-player"></div></div>';var a=n.querySelector(".".concat("viewer","-container")),s=a.querySelector(".".concat("viewer","-title")),o=a.querySelector(".".concat("viewer","-toolbar")),d=a.querySelector(".".concat("viewer","-navbar")),f=a.querySelector(".".concat("viewer","-button")),g=a.querySelector(".".concat("viewer","-canvas"));if(this.parent=i,this.viewer=a,this.title=s,this.toolbar=o,this.navbar=d,this.button=f,this.canvas=g,this.footer=a.querySelector(".".concat("viewer","-footer")),this.tooltipBox=a.querySelector(".".concat("viewer","-tooltip")),this.player=a.querySelector(".".concat("viewer","-player")),this.list=a.querySelector(".".concat("viewer","-list")),v(s,e.title?D(Array.isArray(e.title)?e.title[0]:e.title):X),v(d,e.navbar?D(e.navbar):X),w(f,X,!e.button),e.backdrop&&(v(a,"".concat("viewer","-backdrop")),e.inline||"static"===e.backdrop||x(g,rt,"hide")),r(e.className)&&e.className&&e.className.split(lt).forEach(function(t){v(a,t)}),e.toolbar){var y=document.createElement("ul"),$=h(e.toolbar),T=ct.slice(0,3),_=ct.slice(7,9),z=ct.slice(9);$||v(o,D(e.toolbar)),m($?e.toolbar:ct,function(t,i){var n=$&&h(t),a=$?b(i):t,s=n&&!c(t.show)?t.show:t;if(s&&(e.zoomable||-1===T.indexOf(a))&&(e.rotatable||-1===_.indexOf(a))&&(e.scalable||-1===z.indexOf(a))){var o=n&&!c(t.size)?t.size:t,r=n&&!c(t.click)?t.click:t,d=document.createElement("li");d.setAttribute("role","button"),v(d,"".concat("viewer","-").concat(a)),u(r)||x(d,rt,a),l(s)&&v(d,D(s)),-1!==["small","large"].indexOf(o)?v(d,"".concat("viewer","-").concat(o)):"play"===a&&v(d,"".concat("viewer","-large")),u(r)&&k(d,"click",r),y.appendChild(d)}}),o.appendChild(y)}else v(o,X);if(!e.rotatable){var I=o.querySelectorAll('li[class*="rotate"]');v(I,Q),m(I,function(t){o.appendChild(t)})}if(e.inline)v(f,Y),p(a,{zIndex:e.zIndexInline}),"static"===window.getComputedStyle(i).position&&p(i,{position:"relative"}),i.insertBefore(a,t.nextSibling);else{v(f,F),v(a,O),v(a,H),v(a,X),p(a,{zIndex:e.zIndex});var E=e.container;r(E)&&(E=t.ownerDocument.querySelector(E)),E||(E=this.body),E.appendChild(a)}if(e.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,u(e.ready)&&k(t,"ready",e.ready,{once:!0}),!1===C(t,"ready"))return void(this.ready=!1);this.ready&&e.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=$t,t}},{key:"setDefaults",value:function(t){ut(M,h(t)&&t)}}]),t}();ut(kt.prototype,gt,wt,bt,yt,xt),e.default=kt}},["3YNU"]);