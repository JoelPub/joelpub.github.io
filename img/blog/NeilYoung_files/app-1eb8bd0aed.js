var tnlInfo={};!function(e){e.$=e.$||{},e.master=e.master||{},e.$={$document:$(document),$window:$(window),$body:$("body"),$canonical:null},e.$.$canonical=e.$.$document.find("#canonical-url-link"),e.variable={member:{tutorial_article_id:51338}};try{var n=$("#tnl_info").html()||"{}";tnlInfo=JSON.parse(n)}catch(e){console.log(e)}e.master={bind:function(){$.ajaxSetup({cache:!1,headers:{"X-CSRF-Token":$("meta[name=_token]").attr("content")},xhrFields:{withCredentials:!0}}),e.$.$document.on("click",".menu-btn, .menu-menuBtn",function(){$(".menu-btn").toggleClass("rotate-out"),$(".menu-menuBtn").toggleClass("menu-menuBtn-rotate"),$("#tnl-menu").fadeToggle(400)}),e.$.$document.on("scroll",function(){var e=$(window).scrollTop();e>50&&($(".top-zone").addClass("short-top-zone"),$(".menu-menuBtn").addClass("short-top-menuBtn")),e<50&&($(".top-zone").removeClass("short-top-zone"),$(".menu-menuBtn").removeClass("short-top-menuBtn"))}),e.$.$document.on("click",".select .placeholder",function(){var e=$(this).closest(".select");e.hasClass("is-open")?e.removeClass("is-open"):(e.addClass("is-open"),$(".select.is-open").not(e).removeClass("is-open"))}),e.$.$document.on("click",".select ul>li",function(){$(this).closest(".select").removeClass("is-open").find(".placeholder").text($(this).text())}),e.$.$document.on("mouseover",".select",function(){$(this).addClass("is-open")}),e.$.$document.on("mouseleave",".select",function(){$(this).removeClass("is-open")}),e.$.$document.on("keypress",".search-input",function(e){13==e.which&&window.open("/search/"+$(this).val(),"_self")})}},e.$.$document.ready(function(){e.master.bind()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.member=e.member||{},e.member.auth=e.member.auth||{},e.member.auth=function(e){this.$.App=e},e.member.auth.prototype={constructor:e.member.auth,$:{},variable:{LoginMemberInfo:{}},init:function(){this.bind()},bind:function(){this.bindCollection.getLoginMemberInfo.init(this),this.bindCollection.memberBtn.init(this)},bindCollection:{getLoginMemberInfo:{parent:null,init:function(e){this.parent=e,this.bindGetLoginMemberInfo()},bindGetLoginMemberInfo:function(){var e=this.parent;if(!localStorage.getItem("user_login_info"))return void $('[data-auth="member"]').hide();$('[data-auth="guest"]').hide(),$.ajax({type:"get",url:"/api/member/login-info",data:{},success:function(t){if(0!=t.data.LoginMemberInfo.length){var n=JSON.parse(t.data.LoginMemberInfo);e.variable.LoginMemberInfo=n,$(".member-btn").addClass("active"),$(".member").addClass("active"),$('[data-auth="guest"]').hide(),$('[data-auth="member"]').show(),$(".header-user-avatar").attr("src",n.info.avatar)}},error:function(e){}})}},memberBtn:{parent:null,init:function(e){this.parent=e,this.bindMemberBtn()},bindMemberBtn:function(){var e=$(".member-btn"),t=$(".member-block");e.on("click",function(){t.toggleClass("active")})}}}},e.$.$document.ready(function(){var t=e.$.$document.find(".member-btn");t.length&&(e.member.auth=new e.member.auth(t),e.member.auth.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.Util=t.Util||{},t.Util={getImgSize:function(t,e){var n=new Image;n.onload=function(){var t=n.height,r=n.width,o={height:t,width:r};e&&e(o)},n.src=t},merge:function(e,n,r,o){var i,a=o||[],c=void 0===r?2:r,e=e||{};for(i in n)n.hasOwnProperty(i)&&t.Util.indexOf(a,i)<0&&("object"==typeof e[i]&&c?t.Util.merge(e[i],n[i],c-1,a):(e[i]=n[i],a.push(n[i])));return e},mixin:function(e,n){t.Util.merge(e.prototype,n.prototype)},indexOf:function(t,e,n){for(var r=t.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&t[n]!==e;n++);return r<=n?-1:n},inArray:function(t,e){return!(void 0===t||"string"==typeof t&&"number"==typeof t||!this.isArray(e))&&e.indexOf(t)>=0},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isNumber:function(t){return!isNaN(t)},diffArray:function(t,e){var n=[];if(this.isArray(t)&&this.isArray(e))for(var r in t){var o=t[r];this.inArray(o,e)||n.push(o)}return n},splice:function(t,e){if(void 0!==t&&this.isArray(e)){var n=e.indexOf(t);n>=0&&e.splice(n,1)}return e},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){return 0===Object.keys(t).length&&t.constructor===Object},cloneObject:function(t){var e=this.isObject(t),n=this.isArray(t);return e||n?JSON.parse(JSON.stringify(t)):{}},ObjectSize:function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},paddingLeft:function(t,e){return t.toString().length>=e?t:"0"+t},eventStop:function(t){return!!t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!0)},convertFloatPercentFormat:function(t,e,n){n=n||100,e=e||2;var r=parseFloat(t)||0;return r*=n,r.toFixed(e)+" %"},uuid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},pointerEventToXY:function(t){var e={x:0,y:0};if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=n.pageX,e.y=n.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e.x=t.pageX,e.y=t.pageY);return e},sleep:function(t){for(var e=(new Date).getTime();e+t>=(new Date).getTime(););},forceRefreshInitScrollTop:function(){$(window).on("unload",function(){$(window).scrollTop(0)}),"scrollRestoration"in history&&(history.scrollRestoration="manual")},getArticleWordCount:function(t){function e(t){ret="";for(var n=t.childNodes.length,r=0;r<n;r++){var o=t.childNodes[r];8!=o.nodeType&&"SCRIPT"!==o.nodeName&&(ret+=1!=o.nodeType?o.nodeValue:e(o))}return ret}try{if(t=t||0,0===document.getElementsByClassName("article-content").length)return 0;var n=e(document.getElementsByClassName("article-content")[t]).replace(/(?:\r\n|\r|\n)/g,"");return(n.trim().match(/\w+/g)||[]).length+n.trim().replace(/\w+/g,"").split(" ").join("").length}catch(t){return console.log(t),0}},getURLRelativePath:function(t){return t=t.replace(location.origin,"")}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.device=e.device||{},e.device={getDeviceType:function(){return e.$.$window.width()>=777?"desktops":"phones"}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.dom=e.dom||{},e.dom={resetHeight:function(n){if("desktops"==e.device.getDeviceType()){var o=$(n),t=o.map(function(){return $(this).height()}).get(),i=Math.max.apply(null,t),l="<style>"+n+"{height:"+i+"px}</style>";$("head").append(l)}},scrollTo:function(e,n,o){return e.animate({scrollTop:e.scrollTop()-e.offset().top+n.offset().top},void 0==o?1e3:o),this},scrollGuard:function(e){return e.on("wheel",function(e){var n=$(this);return e.originalEvent.deltaY<0?n.scrollTop()>0:n.scrollTop()+n.innerHeight()<n[0].scrollHeight}),this},stopScrollGuard:function(e){e.off("wheel")},disableScroll:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",e.dom.preventDefault,!1),window.onwheel=e.dom.preventDefault,window.onmousewheel=document.onmousewheel=e.dom.preventDefault,window.ontouchmove=e.dom.preventDefault,document.onkeydown=e.dom.preventDefaultForScrollKeys},preventDefault:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},preventDefaultForScrollKeys:function(n){if({37:1,38:1,39:1,40:1}[n.keyCode])return e.dom.preventDefault(n),!1},enableScroll:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",e.dom.preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null},PopupCenter:function(e,n,o,t){var i=void 0!=window.screenLeft?window.screenLeft:screen.left,l=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var r=width/2-o/2+i,d=height/2-t/2+l,u=window.open(e,n,"scrollbars=yes, width="+o+", height="+t+", top="+d+", left="+r);return window.focus&&u.focus(),u},getBody:function(){return window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body")},isInFrame:function(){try{return window.self!==window.top}catch(e){return!0}}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.social=t.social||{},t.social={bind:function(){t.$.$document.on("click",".sharepopup",function(t){var n=$(this),i=n.attr("data-title"),o=n.attr("data-url"),a=n.attr("data-type"),e=n.attr("name");i=encodeURIComponent(i),o=encodeURIComponent(o),window.open("/sharepage?title="+i+"&url="+o+"&type="+a,e,"width=600,height=500,scrollbars=yes")})},init:function(){t.social.bind()}},t.social.init()}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.advertisement=e.advertisement||{};e.advertisement={dfp:{show:function(e){var g,t,a,o,i,n,l,s,d,r;t=e.slot_name,a=e.ad_size_list,s=e.ad_slot_id,d=e.add_size_list||[],o=e.target||[],i=o.category||[],n=o.tag||[],l=o.author||[],r=o.feature||"",googletag.cmd.push(function(){if(d.length){var e,o=googletag.sizeMapping();for(var p in d)d.hasOwnProperty(p)&&(e=d[p],o=o.addSize(e[0],e[1]));o=o.build(),g=googletag.defineSlot(t,a,s).defineSizeMapping(o).addService(googletag.pubads())}else g=googletag.defineSlot(t,a,s).addService(googletag.pubads());i.length&&(g=g.setTargeting("category",i)),n.length&&(g=g.setTargeting("tag",n)),l.length&&(g=g.setTargeting("author",l)),r.length&&(g=g.setTargeting("feature",r)),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices(),googletag.display(s),googletag.pubads().refresh([g])})}}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.lazyLoading=n.lazyLoading||{},n.lazyLoading={init:function(){function i(){n.$.$document.find(".lazy_loading_container:not(.active.render) img")}i(),n.$.$document.ajaxSuccess(function(){i()})}},n.$.$document.ready(function(){})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.url=e.url||{},e.url=function(){},e.url.prototype={constructor:e.url,variable:{path:"",subDomain:"",domain:"",url:""},init:function(){var e,t,i;e=window.location.host.split("."),t=e[0],e.splice(0,1),i=e.join("."),this.variable.path=window.location.pathname,this.variable.subDomain=t,this.variable.domain=i},getAjaxUrl:function(){return this.variable.url="//api."+this.variable.domain+"/web/"+this.variable.subDomain+this.variable.path,sessionStorage.getItem("type")&&(this.variable.url+="/"+sessionStorage.getItem("type")),sessionStorage.getItem("type")&&sessionStorage.getItem("date")&&(this.variable.url+="/"+sessionStorage.getItem("date")),this.variable.url},getNotDomainAjaxUrl:function(){return this.variable.url="//api."+this.variable.domain+"/web"+this.variable.path,sessionStorage.getItem("type")&&(this.variable.url+="/"+sessionStorage.getItem("type")),sessionStorage.getItem("type")&&sessionStorage.getItem("date")&&(this.variable.url+="/"+sessionStorage.getItem("date")),this.variable.url},getApiDomainUrl:function(){return"//api."+this.variable.domain},getDomain:function(){return this.variable.domain},getSubDomain:function(){return this.variable.subDomain},getCookieDomain:function(){return"."+this.variable.domain},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}},e.url=new e.url,e.url.init()}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
var TnlAnalyticsData;!function(a){a.analytics=a.analytics||{},a.analytics={variable:{parseLyCount:0,parseLyMaxCount:5,parseLyRequest:!1,parseLyFunction:[]},sendEvent:function(a,n,e,t){try{ga("send","event",a,n,e,t,{nonInteraction:!0})}catch(a){console.log(a)}},sendMemberTrackPageView:function(a){try{document.sendTrack({action:a})}catch(a){console.log(a)}},sendParseLyCallback:function(a){var n=this;try{a(),this.variable.parseLyCount=0}catch(e){if(this.variable.parseLyCount>this.variable.parseLyMaxCount)return this.variable.parseLyCount=0,!1;this.variable.parseLyCount++,setTimeout(function(){n.sendParseLyCallback(a)},3e3)}}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.auth=t.auth||{},t.auth=function(){},t.auth.prototype={constructor:t.auth,$:{},variable:{login_type:"normal",member:{},salon_token:null},init:function(){this.$.registerPrivacyModal=t.$.$document.find("#tnl-register-privacy"),this.$.registerEmailVerifyError=t.$.$document.find("#tnl-register-email-verify-error"),this.$.termsModal=t.$.$document.find("#tnl-terms"),this.$.termsReturn=t.$.$document.find("#tnl-terms-return"),this.$.termsNext=t.$.$document.find("#tnl-terms-next"),this.$.registerRegisterReturn=t.$.$document.find("#tnl-register-return"),this.$.registerGoFurther=t.$.$document.find("#tnl-register-go-further"),this.$.signupModal=t.$.$document.find("#tnl-sign-up"),this.$.signupError=t.$.$document.find("#tnl-sign-up-error"),this.$.loginModal=t.$.$document.find("#tnl-login"),this.$.loginError=t.$.$document.find("#tnl-login-error"),this.$.loginRightTop=t.$.$document.find("#tnl-login-right-top"),this.$.loginHamburger=t.$.$document.find("#tnl-login-hamburger"),this.$.loginMobileHamburger=t.$.$document.find("#tnl-login-mobile-hamburger"),this.$.actionItem=null,this.variable.member=JSON.parse($("meta[name='tnl:member']").attr("content")),this.bind()},bind:function(){var e=this;t.$.$document.on("click",".tnl-submit-btn:not(.disabled)",function(){$(this).parents("form").submit()}),t.$.$document.on("click",".login-modal",function(){e.variable.login_type="normal",e.fetchTemplate(function(){e.settingLoginModalInfo(),$.when(e.showLoginModal()).then(function(){e.$.signupModal.hide()})})}),t.$.$document.on("click","#tnl-login .member-remove",function(){e.$.loginModal.fadeOut(400)}),t.$.$document.on("click","#tnl-terms .member-remove",function(){e.$.termsModal.fadeOut(400)}),t.$.$document.on("click",".sign-up-modal",function(){e.fetchTemplate(function(){e.showSignupModal()})}),t.$.$document.on("click","#tnl-sign-up .member-remove",function(){e.fetchTemplate(function(){e.$.signupModal.fadeOut(400)})}),t.$.$document.on("click",".tnl-btn",function(){e.fetchTemplate(function(){$.when(e.showSignupModal()).then(function(){e.$.loginModal.hide()})})}),t.$.$document.on("click",".fb-sign-in-process-btn",function(){window.location.href="/auth/member/login/fb"}),t.$.$document.on("click",".google-sign-in-process-btn",function(){window.location.href="/auth/member/login/google"}),t.$.$document.on("click","#tnl-terms-check",function(t){$(this).is(":checked")?e.$.termsNext.removeClass("disabled"):e.$.termsNext.addClass("disabled")}),t.$.$document.on("click",".tnl-subscribe-article",function(t){e.variable.login_type="article";var n=$(this),i=n.data("id");n.prev(".tnl-subscribe-loader").length&&n.hide().prev(".tnl-subscribe-loader").fadeIn(300),n.hasClass("unscribe")?$.ajax({url:"/favorite/article/"+i,type:"POST",success:function(t){if(n.fadeIn(300).prev(".tnl-subscribe-loader").hide(),"error"==t.status)return e.$.actionItem=n,e.ajaxError(t),!1;if(n.removeClass("unscribe"),"article-top"==n.data("position"))n.find("span").text(n.data("unfollow")),n.parents(".article-zone").find("span.tnl-subscribe-article").removeClass("unscribe");else if("article-bottom"==n.data("position")){var i=n.parents(".article-zone").find("a.tnl-subscribe-article");i.removeClass("unscribe").find("span").text(i.data("unfollow"))}}}):$.ajax({url:"/favorite/article/"+i,type:"DELETE",success:function(t){if(n.fadeIn(300).prev(".tnl-subscribe-loader").hide(),"error"==t.status)return e.$.actionItem=n,e.ajaxError(t),!1;if(n.addClass("unscribe"),"article-top"==n.data("position"))n.find("span").text(n.data("follow")),n.parents(".article-zone").find("span.tnl-subscribe-article").addClass("unscribe");else if("article-bottom"==n.data("position")){var i=n.parents(".article-zone").find("a.tnl-subscribe-article");i.addClass("unscribe").find("span").text(i.data("follow"))}}})}),t.$.$document.on("click",".tnl-subscribe-author",function(t){e.variable.login_type="author";var n=$(this),i=n.data("id");n.prev(".tnl-subscribe-loader").length&&n.hide().prev(".tnl-subscribe-loader").fadeIn(300),n.hasClass("unfollow-author")?$.ajax({url:"/favorite/author/"+i,type:"POST",success:function(t){if(n.fadeIn(300).prev(".tnl-subscribe-loader").hide(),"error"==t.status)return e.$.actionItem=n,e.ajaxError(t),!1;if(n.removeClass("unfollow-author"),"article-top"==n.data("position"))n.find("span").text(n.data("unfollow")),n.parents(".article-zone").find("span.tnl-subscribe-author").removeClass("unfollow-author");else if("article-bottom"==n.data("position")){var i=n.parents(".article-zone").find("a.tnl-subscribe-author");i.removeClass("unfollow-author").find("span").text(i.data("unfollow"))}}}):$.ajax({url:"/favorite/author/"+i,type:"DELETE",success:function(t){if(n.fadeIn(300).prev(".tnl-subscribe-loader").hide(),"error"==t.status)return e.$.actionItem=n,e.ajaxError(t),!1;if(n.addClass("unfollow-author"),"article-top"==n.data("position"))n.find("span").text(n.data("follow")),n.parents(".article-zone").find("span.tnl-subscribe-author").addClass("unfollow-author");else if("article-bottom"==n.data("position")){var i=n.parents(".article-zone").find("a.tnl-subscribe-author");i.addClass("unfollow-author").find("span").text(i.data("follow"))}}})}),t.$.$document.on("click","#tnl-terms-return",function(t){e.$.termsModal.fadeOut(400)}),t.$.$document.on("click","#tnl-terms-next",function(t){var n=$(this);if(n.hasClass("disabled"))return!1;n.parent().find(".tnl-terms-loader").fadeIn(300),$.ajax({url:"/auth/member/agree/privacy",type:"POST",success:function(t){if(n.parent().find(".tnl-terms-loader").fadeOut(300),"error"==t.status)return!1;e.registerPrivacy()},error:function(t){console.log(t)}})}),t.$.$document.on("click","#tnl-register-return, #tnl-register-go-further, #tnl-register-privacy .member-remove",function(t){if("tnl-register-go-further"!=$(this).attr("id"))null!=e.$.actionItem&&e.$.actionItem.trigger("click"),e.$.registerPrivacyModal.fadeOut(400);else if(null!=e.$.actionItem){var n=e.$.actionItem.data("id"),i=e.variable.login_type;$.ajax({url:"/favorite/"+i+"/"+n,type:"POST",success:function(t){if("error"==t.status)return!1;window.location.href="https://www.thenewslens.com/article/51338"}})}else window.location.href="https://www.thenewslens.com/article/51338"}),t.$.$document.on("submit","#tnl-sign-up-form",function(n){t.Util.eventStop(n);var i=$(this);i.find(".tnl-sign-up-loader").fadeIn(300),$.ajax({url:i.attr("action"),method:i.attr("method"),data:{full_name:i.find("input[name='full-name']").val(),email:i.find("input[name='email']").val(),password:i.find("input[name='password']").val(),password_confirmation:i.find("input[name='password-confirmation']").val()},success:function(t){if(i.find(".tnl-sign-up-loader").fadeOut(300),"error"==t.status)return e.signupFail(t),!1;e.login(t)}})}),t.$.$document.on("submit","#tnl-login-form",function(n){t.Util.eventStop(n);var i=$(this);i.find(".tnl-login-loader").fadeIn(300),$.ajax({url:i.attr("action"),method:i.attr("method"),data:{email:i.find("input[name='email']").val(),password:i.find("input[name='password']").val()},success:function(t){if(i.find(".tnl-login-loader").fadeOut(300),"error"==t.status)return e.loginFail(t),!1;e.login(t)}})}),t.$.$document.on("click",".signout",function(t){$('[data-auth="guest"]').show(),$('[data-auth="member"]').hide(),localStorage.removeItem("user_login_info")}),t.$.$document.on("click",".tnl-resend-confirmation",function(n){t.Util.eventStop(n);var i=$(this);e.$.registerEmailVerifyError.find(".tnl-register-email-verify-loader").fadeIn(300),i.parent().hide(),$.ajax({url:"/auth/member/confirmation/resend",method:"POST",success:function(t){if(e.$.registerEmailVerifyError.find(".tnl-register-email-verify-loader").fadeOut(300),i.parent().show(),"error"==t.status)return e.ajaxError(t),!1;e.$.registerEmailVerifyError.find("p:eq(0)").text(t.message)}})}),window.addEventListener("message",function(n){~n.origin.indexOf(t.url.variable.domain)&&("login_success"==n.data.status&&e.login(n.data),"login_error"==n.data.status&&e.loginFail(n.data))})},ajaxError:function(t){var e=t.error_code,n=this;switch(e){case 100001002:n.fetchTemplate(function(){n.settingLoginModalInfo(),n.showLoginModal()});break;case 100001004:n.fetchTemplate(function(){n.showTermsModal()})}},fetchTemplate:function(e){var n=this;0==t.$.$document.find("#tnl-login").length?t.API.Setting.Template.getTemplate("member-login",function(i){i&&i.result&&i.result.view&&(t.$.$body.append(i.result.view),n.$.registerEmailVerifyError=t.$.$document.find("#tnl-register-email-verify-error"),n.$.registerPrivacyModal=t.$.$document.find("#tnl-register-privacy"),n.$.loginModal=t.$.$document.find("#tnl-login"),n.$.loginError=t.$.$document.find("#tnl-login-error"),n.$.loginRightTop=t.$.$document.find("#tnl-login-right-top"),n.$.loginHamburger=t.$.$document.find("#tnl-login-hamburger"),n.$.loginMobileHamburger=t.$.$document.find("#tnl-login-mobile-hamburger"),n.$.signupModal=t.$.$document.find("#tnl-sign-up"),n.$.signupError=t.$.$document.find("#tnl-sign-up-error"),n.$.termsModal=t.$.$document.find("#tnl-terms"),n.$.termsReturn=t.$.$document.find("#tnl-terms-return"),n.$.termsNext=t.$.$document.find("#tnl-terms-next"),n.$.registerRegisterReturn=t.$.$document.find("#tnl-register-return"),n.$.registerGoFurther=t.$.$document.find("#tnl-register-go-further")),e&&e()}):e&&e()},registerPrivacy:function(){var t=this,e=t.$.registerPrivacyModal.find("h1");e.text(e.data(t.variable.login_type)),null!=t.variable.salon_token&&(window.location.href="/salon/signup?token="+t.variable.salon_token),$.when(t.showSuccessModal()).then(function(){t.$.termsModal.hide()})},terms:function(){var e=this;e.$.loginModal=t.$.$document.find("#tnl-login"),e.$.signupModal=t.$.$document.find("#tnl-sign-up"),$.when(e.showTermsModal()).then(function(){e.$.loginModal.hide(),e.$.signupModal.hide()})},storeMemberInfo:function(t){this.variable.member=t},login:function(e){var n=e.member;this.storeMemberInfo(n),$(".member-btn").addClass("active"),$(".member").addClass("active"),$('[data-auth="guest"]').hide(),$('[data-auth="member"]').show(),$(".header-user-avatar").attr("src",n.info.avatar),localStorage.setItem("user_login_info",n.id),null!=e.salon_token&&(this.variable.salon_token=e.salon_token),"Y"!=this.variable.member.privacy_status?this.terms():(null!=this.$.actionItem&&this.$.actionItem.trigger("click"),this.$.loginModal&&this.$.loginModal.fadeOut(400),this.$.signupModal&&this.$.signupModal.fadeOut(400),null!=this.variable.salon_token&&(window.location.href="/salon/signup?token="+this.variable.salon_token)),t.subscribe&&void 0!==t.subscribe.changeEmail&&t.subscribe.changeEmail(e.email)},loginFail:function(e){console.log(e),this.$.signupModal=t.$.$document.find("#tnl-sign-up"),this.$.signupError=t.$.$document.find("#tnl-sign-up-error"),this.$.loginModal=t.$.$document.find("#tnl-login"),this.$.loginError=t.$.$document.find("#tnl-login-error"),this.$.loginModal.is(":visible")?(this.$.loginError.find("ul li").text(e.error_message),this.$.loginError.show()):this.$.signupModal.is(":visible")&&(this.$.signupError.find("ul li").text(e.error_message),this.$.signupError.show())},settingLoginModalInfo:function(){var t=this.$.loginModal.find("h1");t.text(t.data(this.variable.login_type));var e=this.$.loginModal.find("p.tnl-login-message"),n=this.$.loginError.find("ul li");"normal"!=this.variable.login_type?(this.$.loginModal.find(".fa-check").show(),n.text(n.data(this.variable.login_type)),e.text(""),this.$.loginError.show()):(this.$.loginModal.find(".fa-check").hide(),e.text(e.data(this.variable.login_type)),n.text(""),this.$.loginError.hide())},signupFail:function(t){console.log(t),this.$.signupError.find("ul li").text(t.error_message),this.$.signupError.show()},showLoginModal:function(){this.$.loginModal.fadeIn(400)},showSignupModal:function(){this.$.signupModal.fadeIn(400)},showTermsModal:function(){this.$.termsModal.fadeIn(400)},showSuccessModal:function(){this.$.registerPrivacyModal.fadeIn(400)}},t.$.$document.ready(function(){if(t.auth=new t.auth,t.auth.init(),t.auth.variable.member.id&&t.auth.login({member:t.auth.variable.member}),$("#login_result").length>0){var e=JSON.parse($("#login_result").text()),n=e.json;if("error"==n.status)return t.auth.loginFail(n),!1;t.auth.login(n)}else localStorage.removeItem("user_login_info")})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function translateBody(e){for(var t=(e||document.body).childNodes,r=0;r<t.length;r++)3===t[r].nodeType&&/[\u4e00-\u9fa5]/g.test(t[r].textContent)?t[r].textContent=Exchange(t[r].textContent):"INPUT"===t[r].tagName?t[r].outerHTML=Exchange(t[r].outerHTML):1!==t[r].nodeType||stopDOM.includes(t[r].tagName)||translateBody(t[r])}function Exchange(e){var t,r="",n="万与丑专业丛东丝丢两严丧个丬丰临为丽举么义乌乐乔习乡书买乱争于亏云亘亚产亩亲亵亸亿仅从仑仓仪们价众优伙会伛伞伟传伤伥伦伧伪伫体余佣佥侠侣侥侦侧侨侩侪侬俣俦俨俩俪俭债倾偬偻偾偿傥傧储傩儿兑兖党兰关兴兹养兽冁内冈册写军农冢冯冲决况冻净凄凉凌减凑凛几凤凫凭凯击凼凿刍划刘则刚创删别刬刭刽刿剀剂剐剑剥剧劝办务劢动励劲劳势勋勐勚匀匦匮区医华协单卖卢卤卧卫却卺厂厅历厉压厌厍厕厢厣厦厨厩厮县参叆叇双发变叙叠叶号叹叽吁后吓吕吗吣吨听启吴呒呓呕呖呗员呙呛呜咏咔咙咛咝咤咴咸哌响哑哒哓哔哕哗哙哜哝哟唛唝唠唡唢唣唤唿啧啬啭啮啰啴啸喷喽喾嗫呵嗳嘘嘤嘱噜噼嚣嚯团园囱围囵国图圆圣圹场坂坏块坚坛坜坝坞坟坠垄垅垆垒垦垧垩垫垭垯垱垲垴埘埙埚埝埯堑堕塆墙壮声壳壶壸处备复够头夸夹夺奁奂奋奖奥妆妇妈妩妪妫姗姜娄娅娆娇娈娱娲娴婳婴婵婶媪嫒嫔嫱嬷孙学孪宁宝实宠审宪宫宽宾寝对寻导寿将尔尘尧尴尸尽层屃屉届属屡屦屿岁岂岖岗岘岙岚岛岭岳岽岿峃峄峡峣峤峥峦崂崃崄崭嵘嵚嵛嵝嵴巅巩巯币帅师帏帐帘帜带帧帮帱帻帼幂幞干并广庄庆庐庑库应庙庞废庼廪开异弃张弥弪弯弹强归当录彟彦彻径徕御忆忏忧忾怀态怂怃怄怅怆怜总怼怿恋恳恶恸恹恺恻恼恽悦悫悬悭悯惊惧惨惩惫惬惭惮惯愍愠愤愦愿慑慭憷懑懒懔戆戋戏戗战戬户扎扑扦执扩扪扫扬扰抚抛抟抠抡抢护报担拟拢拣拥拦拧拨择挂挚挛挜挝挞挟挠挡挢挣挤挥挦捞损捡换捣据捻掳掴掷掸掺掼揸揽揿搀搁搂搅携摄摅摆摇摈摊撄撑撵撷撸撺擞攒敌敛数斋斓斗斩断无旧时旷旸昙昼昽显晋晒晓晔晕晖暂暧札术朴机杀杂权条来杨杩杰极构枞枢枣枥枧枨枪枫枭柜柠柽栀栅标栈栉栊栋栌栎栏树栖样栾桊桠桡桢档桤桥桦桧桨桩梦梼梾检棂椁椟椠椤椭楼榄榇榈榉槚槛槟槠横樯樱橥橱橹橼檐檩欢欤欧歼殁殇残殒殓殚殡殴毁毂毕毙毡毵氇气氢氩氲汇汉污汤汹沓沟没沣沤沥沦沧沨沩沪沵泞泪泶泷泸泺泻泼泽泾洁洒洼浃浅浆浇浈浉浊测浍济浏浐浑浒浓浔浕涂涌涛涝涞涟涠涡涢涣涤润涧涨涩淀渊渌渍渎渐渑渔渖渗温游湾湿溃溅溆溇滗滚滞滟滠满滢滤滥滦滨滩滪漤潆潇潋潍潜潴澜濑濒灏灭灯灵灾灿炀炉炖炜炝点炼炽烁烂烃烛烟烦烧烨烩烫烬热焕焖焘煅煳熘爱爷牍牦牵牺犊犟状犷犸犹狈狍狝狞独狭狮狯狰狱狲猃猎猕猡猪猫猬献獭玑玙玚玛玮环现玱玺珉珏珐珑珰珲琎琏琐琼瑶瑷璇璎瓒瓮瓯电画畅畲畴疖疗疟疠疡疬疮疯疱疴痈痉痒痖痨痪痫痴瘅瘆瘗瘘瘪瘫瘾瘿癞癣癫癯皑皱皲盏盐监盖盗盘眍眦眬着睁睐睑瞒瞩矫矶矾矿砀码砖砗砚砜砺砻砾础硁硅硕硖硗硙硚确硷碍碛碜碱碹磙礼祎祢祯祷祸禀禄禅离秃秆种积称秽秾稆税稣稳穑穷窃窍窑窜窝窥窦窭竖竞笃笋笔笕笺笼笾筑筚筛筜筝筹签简箓箦箧箨箩箪箫篑篓篮篱簖籁籴类籼粜粝粤粪粮糁糇紧絷纟纠纡红纣纤纥约级纨纩纪纫纬纭纮纯纰纱纲纳纴纵纶纷纸纹纺纻纼纽纾线绀绁绂练组绅细织终绉绊绋绌绍绎经绐绑绒结绔绕绖绗绘给绚绛络绝绞统绠绡绢绣绤绥绦继绨绩绪绫绬续绮绯绰绱绲绳维绵绶绷绸绹绺绻综绽绾绿缀缁缂缃缄缅缆缇缈缉缊缋缌缍缎缏缐缑缒缓缔缕编缗缘缙缚缛缜缝缞缟缠缡缢缣缤缥缦缧缨缩缪缫缬缭缮缯缰缱缲缳缴缵罂网罗罚罢罴羁羟羡翘翙翚耢耧耸耻聂聋职聍联聩聪肃肠肤肷肾肿胀胁胆胜胧胨胪胫胶脉脍脏脐脑脓脔脚脱脶脸腊腌腘腭腻腼腽腾膑臜舆舣舰舱舻艰艳艹艺节芈芗芜芦苁苇苈苋苌苍苎苏苘苹茎茏茑茔茕茧荆荐荙荚荛荜荞荟荠荡荣荤荥荦荧荨荩荪荫荬荭荮药莅莜莱莲莳莴莶获莸莹莺莼萚萝萤营萦萧萨葱蒇蒉蒋蒌蓝蓟蓠蓣蓥蓦蔷蔹蔺蔼蕲蕴薮藁藓虏虑虚虫虬虮虽虾虿蚀蚁蚂蚕蚝蚬蛊蛎蛏蛮蛰蛱蛲蛳蛴蜕蜗蜡蝇蝈蝉蝎蝼蝾螀螨蟏衅衔补衬衮袄袅袆袜袭袯装裆裈裢裣裤裥褛褴襁襕见观觃规觅视觇览觉觊觋觌觍觎觏觐觑觞触觯詟誉誊讠计订讣认讥讦讧讨让讪讫训议讯记讱讲讳讴讵讶讷许讹论讻讼讽设访诀证诂诃评诅识诇诈诉诊诋诌词诎诏诐译诒诓诔试诖诗诘诙诚诛诜话诞诟诠诡询诣诤该详诧诨诩诪诫诬语诮误诰诱诲诳说诵诶请诸诹诺读诼诽课诿谀谁谂调谄谅谆谇谈谊谋谌谍谎谏谐谑谒谓谔谕谖谗谘谙谚谛谜谝谞谟谠谡谢谣谤谥谦谧谨谩谪谫谬谭谮谯谰谱谲谳谴谵谶谷豮贝贞负贠贡财责贤败账货质贩贪贫贬购贮贯贰贱贲贳贴贵贶贷贸费贺贻贼贽贾贿赀赁赂赃资赅赆赇赈赉赊赋赌赍赎赏赐赑赒赓赔赕赖赗赘赙赚赛赜赝赞赟赠赡赢赣赪赵赶趋趱趸跃跄跖跞践跶跷跸跹跻踊踌踪踬踯蹑蹒蹰蹿躏躜躯车轧轨轩轪轫转轭轮软轰轱轲轳轴轵轶轷轸轹轺轻轼载轾轿辀辁辂较辄辅辆辇辈辉辊辋辌辍辎辏辐辑辒输辔辕辖辗辘辙辚辞辩辫边辽达迁过迈运还这进远违连迟迩迳迹适选逊递逦逻遗遥邓邝邬邮邹邺邻郁郄郏郐郑郓郦郧郸酝酦酱酽酾酿释里鉅鉴銮錾钆钇针钉钊钋钌钍钎钏钐钑钒钓钔钕钖钗钘钙钚钛钝钞钟钠钡钢钣钤钥钦钧钨钩钪钫钬钭钮钯钰钱钲钳钴钵钶钷钸钹钺钻钼钽钾钿铀铁铂铃铄铅铆铈铉铊铋铍铎铏铐铑铒铕铗铘铙铚铛铜铝铞铟铠铡铢铣铤铥铦铧铨铪铫铬铭铮铯铰铱铲铳铴铵银铷铸铹铺铻铼铽链铿销锁锂锃锄锅锆锇锈锉锊锋锌锍锎锏锐锑锒锓锔锕锖锗错锚锜锞锟锠锡锢锣锤锥锦锨锩锫锬锭键锯锰锱锲锳锴锵锶锷锸锹锺锻锼锽锾锿镀镁镂镃镆镇镈镉镊镌镍镎镏镐镑镒镕镖镗镙镚镛镜镝镞镟镠镡镢镣镤镥镦镧镨镩镪镫镬镭镮镯镰镱镲镳镴镶长门闩闪闫闬闭问闯闰闱闲闳间闵闶闷闸闹闺闻闼闽闾闿阀阁阂阃阄阅阆阇阈阉阊阋阌阍阎阏阐阑阒阓阔阕阖阗阘阙阚阛队阳阴阵阶际陆陇陈陉陕陧陨险随隐隶隽难雏雠雳雾霁霉霭靓静靥鞑鞒鞯鞴韦韧韨韩韪韫韬韵页顶顷顸项顺须顼顽顾顿颀颁颂颃预颅领颇颈颉颊颋颌颍颎颏颐频颒颓颔颕颖颗题颙颚颛颜额颞颟颠颡颢颣颤颥颦颧风飏飐飑飒飓飔飕飖飗飘飙飚飞飨餍饤饥饦饧饨饩饪饫饬饭饮饯饰饱饲饳饴饵饶饷饸饹饺饻饼饽饾饿馀馁馂馃馄馅馆馇馈馉馊馋馌馍馎馏馐馑馒馓馔馕马驭驮驯驰驱驲驳驴驵驶驷驸驹驺驻驼驽驾驿骀骁骂骃骄骅骆骇骈骉骊骋验骍骎骏骐骑骒骓骔骕骖骗骘骙骚骛骜骝骞骟骠骡骢骣骤骥骦骧髅髋髌鬓魇魉鱼鱽鱾鱿鲀鲁鲂鲄鲅鲆鲇鲈鲉鲊鲋鲌鲍鲎鲏鲐鲑鲒鲓鲔鲕鲖鲗鲘鲙鲚鲛鲜鲝鲞鲟鲠鲡鲢鲣鲤鲥鲦鲧鲨鲩鲪鲫鲬鲭鲮鲯鲰鲱鲲鲳鲴鲵鲶鲷鲸鲹鲺鲻鲼鲽鲾鲿鳀鳁鳂鳃鳄鳅鳆鳇鳈鳉鳊鳋鳌鳍鳎鳏鳐鳑鳒鳓鳔鳕鳖鳗鳘鳙鳛鳜鳝鳞鳟鳠鳡鳢鳣鸟鸠鸡鸢鸣鸤鸥鸦鸧鸨鸩鸪鸫鸬鸭鸮鸯鸰鸱鸲鸳鸴鸵鸶鸷鸸鸹鸺鸻鸼鸽鸾鸿鹀鹁鹂鹃鹄鹅鹆鹇鹈鹉鹊鹋鹌鹍鹎鹏鹐鹑鹒鹓鹔鹕鹖鹗鹘鹚鹛鹜鹝鹞鹟鹠鹡鹢鹣鹤鹥鹦鹧鹨鹩鹪鹫鹬鹭鹯鹰鹱鹲鹳鹴鹾麦麸黄黉黡黩黪黾",a="萬與醜專業叢東絲丟兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳猛勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚呼嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場阪壞塊堅壇壢壩塢墳墜壟壟壚壘墾坰堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖怵懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫拋摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆糊溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢佘疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓著睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜矽碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郤郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽";if(!isCurrentEncodingCN){var o=[a,n];n=o[0],a=o[1]}for(var l=0;l<e.length;l++)t=n.indexOf(e[l]),r+=-1===t?e[l]:a[t];return r}function translatePage(){isCurrentEncodingCN=isLanCN,isLanCN=!isLanCN,localStorage.setItem("isLanCN",isLanCN),translateBody(),changeLanTextState()}function changeLanTextState(){var e=document.querySelectorAll(".lanText-tw"),t=document.querySelectorAll(".lanText-cn"),r=localStorage.getItem("isLanCN");if("true"===r){var n,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){n.value.classList.add("active")}}catch(e){a.e(e)}finally{a.f()}var o,l=_createForOfIteratorHelper(e);try{for(l.s();!(o=l.n()).done;){o.value.classList.remove("active")}}catch(e){l.e(e)}finally{l.f()}}if("false"===r||null===r){var i,c=_createForOfIteratorHelper(t);try{for(c.s();!(i=c.n()).done;){i.value.classList.remove("active")}}catch(e){c.e(e)}finally{c.f()}var s,u=_createForOfIteratorHelper(e);try{for(u.s();!(s=u.n()).done;){s.value.classList.add("active")}}catch(e){u.e(e)}finally{u.f()}}}var isCurrentEncodingCN=isLanCN=!0,isLanCN=!0,stopDOM=["BR","TIME","IMG","CANVAS","SCRIPT"],toogleBtns=document.querySelectorAll(".toggleLan_tw_cn"),translatePageFn=function(e){translatePage(),e.preventDefault()},initLanguage=function(){var e,t=_createForOfIteratorHelper(toogleBtns);try{for(t.s();!(e=t.n()).done;){e.value.addEventListener("click",translatePageFn,!1)}}catch(e){t.e(e)}finally{t.f()}null===localStorage.getItem("isLanCN")||"false"===localStorage.getItem("isLanCN")?(isLanCN=!1,changeLanTextState()):(translatePage(),translatePage(),changeLanTextState())};document.addEventListener("DOMContentLoaded",initLanguage);
!function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return s(i||t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){e.exports={VERSION:"1.0.0",DEV_ID:"i5iSjo",VERSION_PARAM:"&_av",USAGE_PARAM:"&_au",NULL_DIMENSION:"(not set)"}},{}],2:[function(t,e,i){function n(){console.error("Warning! Requiring the `autotrack` plugin no longer requires  all sub-plugins by default.\nSee https://goo.gl/XsXPg5 for details.")}t("../provide")("autotrack",n)},{"../provide":12}],3:[function(t,e,i){function n(t,e){l.track(t,l.plugins.CLEAN_URL_TRACKER),this.opts=s({stripQuery:!1,queryDimensionIndex:null,indexFilename:null,trailingSlash:null},e),this.tracker=t,this.overrideTrackerBuildHitTask()}var s=t("object-assign"),r=t("dom-utils/lib/parse-url"),o=t("../constants"),a=t("../provide"),l=t("../usage");n.prototype.cleanUrlTask=function(t){var e=t.get("location"),i=t.get("page"),n=r(i||e),s=n.pathname,a=s;if(this.opts.indexFilename){var l=a.split("/");this.opts.indexFilename==l[l.length-1]&&(l[l.length-1]="",a=l.join("/"))}if("remove"==this.opts.trailingSlash)a=a.replace(/\/+$/,"");else if("add"==this.opts.trailingSlash){var h=/\.\w+$/.test(a);h||"/"==a.substr(-1)||(a+="/")}this.opts.stripQuery&&this.opts.queryDimensionIndex&&t.set("dimension"+this.opts.queryDimensionIndex,n.query||o.NULL_DIMENSION),t.set("page",a+(this.opts.stripQuery?"":n.search))},n.prototype.overrideTrackerBuildHitTask=function(){this.originalTrackerBuildHitTask=this.tracker.get("buildHitTask"),this.tracker.set("buildHitTask",function(t){this.cleanUrlTask(t),this.originalTrackerBuildHitTask(t)}.bind(this))},n.prototype.remove=function(){this.tracker.set("sendHitTask",this.originalTrackerSendHitTask)},a("cleanUrlTracker",n)},{"../constants":1,"../provide":12,"../usage":13,"dom-utils/lib/parse-url":22,"object-assign":23}],4:[function(t,e,i){function n(t,e){if(a.track(t,a.plugins.EVENT_TRACKER),window.addEventListener){this.opts=s({events:["click"],fieldsObj:{},attributePrefix:"ga-",hitFilter:null},e),this.tracker=t,this.handleEvents=this.handleEvents.bind(this);var i="["+this.opts.attributePrefix+"on]";this.delegates={},this.opts.events.forEach(function(t){this.delegates[t]=r(document,t,i,this.handleEvents,{composed:!0,useCapture:!0})}.bind(this))}}var s=t("object-assign"),r=t("dom-utils/lib/delegate"),o=t("../provide"),a=t("../usage"),l=t("../utilities").createFieldsObj,h=t("../utilities").getAttributeFields;n.prototype.handleEvents=function(t,e){var i=this.opts.attributePrefix;if(t.type==e.getAttribute(i+"on")){var n={transport:"beacon"},r=h(e,i),o=s({},this.opts.fieldsObj,r),a=r.hitType||"event";this.tracker.send(a,l(n,o,this.tracker,this.opts.hitFilter,e))}},n.prototype.remove=function(){Object.keys(this.delegates).forEach(function(t){this.delegates[t].destroy()}.bind(this))},o("eventTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"dom-utils/lib/delegate":18,"object-assign":23}],5:[function(t,e,i){function n(t,e){l.track(t,l.plugins.IMPRESSION_TRACKER),window.IntersectionObserver&&window.MutationObserver&&(this.opts=o({elements:null,rootMargin:"0px",fieldsObj:{},attributePrefix:"ga-",hitFilter:null},e),this.tracker=t,this.handleDomMutations=this.handleDomMutations.bind(this),this.handleIntersectionChanges=this.handleIntersectionChanges.bind(this),this.handleDomElementAdded=this.handleDomElementAdded.bind(this),this.handleDomElementRemoved=this.handleDomElementRemoved.bind(this),this.items=[],this.elementMap={},this.thresholdMap={},c(function(){this.observeElements(this.opts.elements)}.bind(this)))}function s(t,e){if(0===t){var i=e.intersectionRect;return i.top>0||i.bottom>0||i.left>0||i.right>0}return e.intersectionRatio>=t}function r(t){return o({threshold:0,trackFirstImpressionOnly:!0},"string"==typeof t?{id:t}:t)}var o=t("object-assign"),a=t("../provide"),l=t("../usage"),h=t("../utilities").createFieldsObj,c=t("../utilities").domReady,d=t("../utilities").getAttributeFields;n.prototype.observeElements=function(t){var e=this.deriveDataFromElements(t);this.items=this.items.concat(e.items),this.elementMap=o({},e.elementMap,this.elementMap),this.thresholdMap=o({},e.thresholdMap,this.thresholdMap),e.items.forEach(function(t){var e=this.thresholdMap[t.threshold]=this.thresholdMap[t.threshold]||new IntersectionObserver(this.handleIntersectionChanges,{rootMargin:this.opts.rootMargin,threshold:[+t.threshold]}),i=this.elementMap[t.id]||(this.elementMap[t.id]=document.getElementById(t.id));i&&e.observe(i)}.bind(this)),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.handleDomMutations),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})),requestAnimationFrame(function(){})},n.prototype.unobserveElements=function(t){var e=[],i=[];if(this.items.forEach(function(n){t.some(function(t){var e=r(t);return e.id===n.id&&e.threshold===n.threshold&&e.trackFirstImpressionOnly===n.trackFirstImpressionOnly})?i.push(n):e.push(n)}),!e.length)return this.unobserveAllElements();var n=this.deriveDataFromElements(e),s=this.deriveDataFromElements(i);this.items=n.items,this.elementMap=n.elementMap,this.thresholdMap=n.thresholdMap,i.forEach(function(t){if(!n.elementMap[t.id]){var e=s.thresholdMap[t.threshold],i=s.elementMap[t.id];i&&e.unobserve(i),n.thresholdMap[t.threshold]||s.thresholdMap[t.threshold].disconnect()}})},n.prototype.unobserveAllElements=function(){Object.keys(this.thresholdMap).forEach(function(t){this.thresholdMap[t].disconnect()}.bind(this)),this.mutationObserver.disconnect(),this.mutationObserver=null,this.items=[],this.elementMap={},this.thresholdMap={}},n.prototype.deriveDataFromElements=function(t){var e=[],i={},n={};return t.length&&t.forEach(function(t){var s=r(t);e.push(s),n[s.id]=this.elementMap[s.id]||null,i[s.threshold]=this.thresholdMap[s.threshold]||null}.bind(this)),{items:e,elementMap:n,thresholdMap:i}},n.prototype.observeElement=function(t){var e=this.elementMap[t]||(this.elementMap[t]=document.getElementById(t));e&&this.intersectionObserver.observe(e)},n.prototype.handleDomMutations=function(t){for(var e,i=0;e=t[i];i++){for(var n,s=0;n=e.removedNodes[s];s++)this.walkNodeTree(n,this.handleDomElementRemoved);for(var r,o=0;r=e.addedNodes[o];o++)this.walkNodeTree(r,this.handleDomElementAdded)}},n.prototype.walkNodeTree=function(t,e){1==t.nodeType&&t.id in this.elementMap&&e(t.id);for(var i,n=0;i=t.childNodes[n];n++)this.walkNodeTree(i,e)},n.prototype.handleIntersectionChanges=function(t){for(var e,i=[],n=0;e=t[n];n++)for(var r,o=0;r=this.items[o];o++)e.target.id===r.id&&s(r.threshold,e)&&(this.handleImpression(r.id),r.trackFirstImpressionOnly&&i.push(r));i.length&&this.unobserveElements(i)},n.prototype.handleImpression=function(t){var e=document.getElementById(t),i={transport:"beacon",eventCategory:"Viewport",eventAction:"impression",eventLabel:t},n=o({},this.opts.fieldsObj,d(e,this.opts.attributePrefix));this.tracker.send("event",h(i,n,this.tracker,this.opts.hitFilter,e))},n.prototype.handleDomElementAdded=function(t){var e=this.elementMap[t]=document.getElementById(t);this.items.forEach(function(i){t==i.id&&this.thresholdMap[i.threshold].observe(e)}.bind(this))},n.prototype.handleDomElementRemoved=function(t){var e=this.elementMap[t];this.items.forEach(function(i){t==i.id&&this.thresholdMap[i.threshold].unobserve(e)}.bind(this)),this.elementMap[t]=null},n.prototype.remove=function(){this.unobserveAllElements()},a("impressionTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"object-assign":23}],6:[function(t,e,i){function n(t,e){h.track(t,h.plugins.MEDIA_QUERY_TRACKER),window.matchMedia&&(this.opts=r({definitions:null,changeTemplate:this.changeTemplate,changeTimeout:1e3,fieldsObj:{},hitFilter:null},e),d(this.opts.definitions)&&(this.opts.definitions=u(this.opts.definitions),this.tracker=t,this.changeListeners=[],this.processMediaQueries()))}function s(t){return p[t]?p[t]:(p[t]=window.matchMedia(t),p[t])}var r=t("object-assign"),o=t("debounce"),a=t("../constants"),l=t("../provide"),h=t("../usage"),c=t("../utilities").createFieldsObj,d=t("../utilities").isObject,u=t("../utilities").toArray,p={};n.prototype.processMediaQueries=function(){this.opts.definitions.forEach(function(t){if(t.name&&t.dimensionIndex){var e=this.getMatchName(t);this.tracker.set("dimension"+t.dimensionIndex,e),this.addChangeListeners(t)}}.bind(this))},n.prototype.getMatchName=function(t){var e;return t.items.forEach(function(t){s(t.media).matches&&(e=t)}),e?e.name:a.NULL_DIMENSION},n.prototype.addChangeListeners=function(t){t.items.forEach(function(e){var i=s(e.media),n=o(function(){this.handleChanges(t)}.bind(this),this.opts.changeTimeout);i.addListener(n),this.changeListeners.push({mql:i,fn:n})}.bind(this))},n.prototype.handleChanges=function(t){var e=this.getMatchName(t),i=this.tracker.get("dimension"+t.dimensionIndex);if(e!==i){this.tracker.set("dimension"+t.dimensionIndex,e);var n={eventCategory:t.name,eventAction:"change",eventLabel:this.opts.changeTemplate(i,e)};this.tracker.send("event",c(n,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},n.prototype.remove=function(){for(var t,e=0;t=this.changeListeners[e];e++)t.mql.removeListener(t.fn)},n.prototype.changeTemplate=function(t,e){return t+" => "+e},l("mediaQueryTracker",n)},{"../constants":1,"../provide":12,"../usage":13,"../utilities":14,debounce:16,"object-assign":23}],7:[function(t,e,i){function n(t,e){l.track(t,l.plugins.OUTBOUND_FORM_TRACKER),window.addEventListener&&(this.opts=s({formSelector:"form",shouldTrackOutboundForm:this.shouldTrackOutboundForm,fieldsObj:{},attributePrefix:"ga-",hitFilter:null},e),this.tracker=t,this.delegate=r(document,"submit","form",this.handleFormSubmits.bind(this),{composed:!0,useCapture:!0}))}var s=t("object-assign"),r=t("dom-utils/lib/delegate"),o=t("dom-utils/lib/parse-url"),a=t("../provide"),l=t("../usage"),h=t("../utilities").createFieldsObj,c=t("../utilities").getAttributeFields,d=t("../utilities").withTimeout;n.prototype.handleFormSubmits=function(t,e){var i=o(e.action).href,n={transport:"beacon",eventCategory:"Outbound Form",eventAction:"submit",eventLabel:i};if(this.opts.shouldTrackOutboundForm(e,o)){navigator.sendBeacon||(t.preventDefault(),n.hitCallback=d(function(){e.submit()}));var r=s({},this.opts.fieldsObj,c(e,this.opts.attributePrefix));this.tracker.send("event",h(n,r,this.tracker,this.opts.hitFilter,e))}},n.prototype.shouldTrackOutboundForm=function(t,e){var i=e(t.action);return i.hostname!=location.hostname&&"http"==i.protocol.slice(0,4)},n.prototype.remove=function(){this.delegate.destroy()},a("outboundFormTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"dom-utils/lib/delegate":18,"dom-utils/lib/parse-url":22,"object-assign":23}],8:[function(t,e,i){function n(t,e){l.track(t,l.plugins.OUTBOUND_LINK_TRACKER),window.addEventListener&&(this.opts=s({events:["click"],linkSelector:"a, area",shouldTrackOutboundLink:this.shouldTrackOutboundLink,fieldsObj:{},attributePrefix:"ga-",hitFilter:null},e),this.tracker=t,this.handleLinkInteractions=this.handleLinkInteractions.bind(this),this.delegates={},this.opts.events.forEach(function(t){this.delegates[t]=r(document,t,this.opts.linkSelector,this.handleLinkInteractions,{composed:!0,useCapture:!0})}.bind(this)))}var s=t("object-assign"),r=t("dom-utils/lib/delegate"),o=t("dom-utils/lib/parse-url"),a=t("../provide"),l=t("../usage"),h=t("../utilities").createFieldsObj,c=t("../utilities").getAttributeFields;n.prototype.handleLinkInteractions=function(t,e){if(this.opts.shouldTrackOutboundLink(e,o)){navigator.sendBeacon||(e.target="_blank");var i=e.getAttribute("href")||e.getAttribute("xlink:href"),n=o(i),r={transport:"beacon",eventCategory:"Outbound Link",eventAction:t.type,eventLabel:n.href},a=s({},this.opts.fieldsObj,c(e,this.opts.attributePrefix));this.tracker.send("event",h(r,a,this.tracker,this.opts.hitFilter,e))}},n.prototype.shouldTrackOutboundLink=function(t,e){var i=t.getAttribute("href")||t.getAttribute("xlink:href"),n=e(i);return n.hostname!=location.hostname&&"http"==n.protocol.slice(0,4)},n.prototype.remove=function(){Object.keys(this.delegates).forEach(function(t){this.delegates[t].destroy()}.bind(this))},a("outboundLinkTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"dom-utils/lib/delegate":18,"dom-utils/lib/parse-url":22,"object-assign":23}],9:[function(t,e,i){function n(t,e){o.track(t,o.plugins.PAGE_VISIBILITY_TRACKER),window.addEventListener&&(this.opts=s({sessionTimeout:h,changeTemplate:this.changeTemplate,hiddenMetricIndex:null,visibleMetricIndex:null,fieldsObj:{},hitFilter:null},e),this.tracker=t,this.visibilityState=document.visibilityState,this.lastVisibilityChangeTime=+new Date,this.handleVisibilityStateChange=this.handleVisibilityStateChange.bind(this),this.overrideTrackerSendMethod(),this.overrideTrackerSendHitTask(),document.addEventListener("visibilitychange",this.handleVisibilityStateChange))}var s=t("object-assign"),r=t("../provide"),o=t("../usage"),a=t("../utilities").createFieldsObj,l=t("../utilities").isObject,h=30;n.prototype.handleVisibilityStateChange=function(){var t;if(this.prevVisibilityState=this.visibilityState,this.visibilityState=document.visibilityState,this.sessionHasTimedOut()){if("hidden"==this.visibilityState)return;"visible"==this.visibilityState&&(t={transport:"beacon"},this.tracker.send("pageview",a(t,this.opts.fieldsObj,this.tracker,this.opts.hitFilter)))}else{var e=Math.round((new Date-this.lastVisibilityChangeTime)/1e3)||1;t={transport:"beacon",eventCategory:"Page Visibility",eventAction:"change",eventLabel:this.opts.changeTemplate(this.prevVisibilityState,this.visibilityState),eventValue:e},"hidden"==this.visibilityState&&(t.nonInteraction=!0);var i=this.opts[this.prevVisibilityState+"MetricIndex"];i&&(t["metric"+i]=e),this.tracker.send("event",a(t,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}this.lastVisibilityChangeTime=+new Date},n.prototype.sessionHasTimedOut=function(){var t=(new Date-this.lastHitTime)/6e4;return this.opts.sessionTimeout<t},n.prototype.overrideTrackerSendMethod=function(){this.originalTrackerSendMethod=this.tracker.send,this.tracker.send=function(){var t=Array.prototype.slice.call(arguments),e=t[0];if("pageview"!=(l(e)?e.hitType:e)&&this.sessionHasTimedOut()){var i={transport:"beacon"};this.originalTrackerSendMethod.call(this.tracker,"pageview",a(i,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}this.originalTrackerSendMethod.apply(this.tracker,t)}.bind(this)},n.prototype.overrideTrackerSendHitTask=function(){this.originalTrackerSendHitTask=this.tracker.get("sendHitTask"),this.lastHitTime=+new Date,this.tracker.set("sendHitTask",function(t){this.originalTrackerSendHitTask(t),this.lastHitTime=+new Date}.bind(this))},n.prototype.changeTemplate=function(t,e){return t+" => "+e},n.prototype.remove=function(){this.tracker.set("sendHitTask",this.originalTrackerSendHitTask),this.tracker.send=this.originalTrackerSendMethod,document.removeEventListener("visibilitychange",this.handleVisibilityStateChange)},r("pageVisibilityTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"object-assign":23}],10:[function(t,e,i){function n(t,e){o.track(t,o.plugins.SOCIAL_WIDGET_TRACKER),window.addEventListener&&(this.opts=s({fieldsObj:{},hitFilter:null},e),this.tracker=t,this.addWidgetListeners=this.addWidgetListeners.bind(this),this.addTwitterEventHandlers=this.addTwitterEventHandlers.bind(this),this.handleTweetEvents=this.handleTweetEvents.bind(this),this.handleFollowEvents=this.handleFollowEvents.bind(this),this.handleLikeEvents=this.handleLikeEvents.bind(this),this.handleUnlikeEvents=this.handleUnlikeEvents.bind(this),"complete"!=document.readyState?window.addEventListener("load",this.addWidgetListeners):this.addWidgetListeners())}var s=t("object-assign"),r=t("../provide"),o=t("../usage"),a=t("../utilities").createFieldsObj;n.prototype.addWidgetListeners=function(){window.FB&&this.addFacebookEventHandlers(),window.twttr&&this.addTwitterEventHandlers()},n.prototype.addTwitterEventHandlers=function(){try{twttr.ready(function(){twttr.events.bind("tweet",this.handleTweetEvents),twttr.events.bind("follow",this.handleFollowEvents)}.bind(this))}catch(t){}},n.prototype.removeTwitterEventHandlers=function(){try{twttr.ready(function(){twttr.events.unbind("tweet",this.handleTweetEvents),twttr.events.unbind("follow",this.handleFollowEvents)}.bind(this))}catch(t){}},n.prototype.addFacebookEventHandlers=function(){try{FB.Event.subscribe("edge.create",this.handleLikeEvents),FB.Event.subscribe("edge.remove",this.handleUnlikeEvents)}catch(t){}},n.prototype.removeFacebookEventHandlers=function(){try{FB.Event.unsubscribe("edge.create",this.handleLikeEvents),FB.Event.unsubscribe("edge.remove",this.handleUnlikeEvents)}catch(t){}},n.prototype.handleTweetEvents=function(t){if("tweet"==t.region){var e=t.data.url||t.target.getAttribute("data-url")||location.href,i={transport:"beacon",socialNetwork:"Twitter",socialAction:"tweet",socialTarget:e};this.tracker.send("social",a(i,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},n.prototype.handleFollowEvents=function(t){if("follow"==t.region){var e=t.data.screen_name||t.target.getAttribute("data-screen-name"),i={transport:"beacon",socialNetwork:"Twitter",socialAction:"follow",socialTarget:e};this.tracker.send("social",a(i,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},n.prototype.handleLikeEvents=function(t){var e={transport:"beacon",socialNetwork:"Facebook",socialAction:"like",socialTarget:t};this.tracker.send("social",a(e,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))},n.prototype.handleUnlikeEvents=function(t){var e={transport:"beacon",socialNetwork:"Facebook",socialAction:"unlike",socialTarget:t};this.tracker.send("social",a(e,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))},n.prototype.remove=function(){window.removeEventListener("load",this.addWidgetListeners),this.removeFacebookEventHandlers(),this.removeTwitterEventHandlers()},r("socialWidgetTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"object-assign":23}],11:[function(t,e,i){function n(t,e){a.track(t,a.plugins.URL_CHANGE_TRACKER),history.pushState&&window.addEventListener&&(this.opts=r({shouldTrackUrlChange:this.shouldTrackUrlChange,fieldsObj:{},hitFilter:null},e),this.tracker=t,this.path=s(),this.updateTrackerData=this.updateTrackerData.bind(this),this.originalPushState=history.pushState,history.pushState=function(t,e){h(t)&&e&&(t.title=e),this.originalPushState.apply(history,arguments),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(t,e){h(t)&&e&&(t.title=e),this.originalReplaceState.apply(history,arguments),this.updateTrackerData(!1)}.bind(this),window.addEventListener("popstate",this.updateTrackerData))}function s(){return location.pathname+location.search}var r=t("object-assign"),o=t("../provide"),a=t("../usage"),l=t("../utilities").createFieldsObj,h=t("../utilities").isObject;n.prototype.updateTrackerData=function(t){t=!1!==t,setTimeout(function(){var e=this.path,i=s();if(e!=i&&this.opts.shouldTrackUrlChange.call(this,i,e)&&(this.path=i,this.tracker.set({page:i,title:h(history.state)&&history.state.title||document.title}),t)){var n={transport:"beacon"};this.tracker.send("pageview",l(n,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}}.bind(this),0)},n.prototype.shouldTrackUrlChange=function(t,e){return t&&e},n.prototype.remove=function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.tracker=null,this.opts=null,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null},o("urlChangeTracker",n)},{"../provide":12,"../usage":13,"../utilities":14,"object-assign":23}],12:[function(t,e,i){var n=t("./constants"),s=t("./utilities");(window.gaDevIds=window.gaDevIds||[]).push(n.DEV_ID),e.exports=function(t,e){var i=window.GoogleAnalyticsObject||"ga";window[i]=window[i]||function(){(window[i].q=window[i].q||[]).push(arguments)},window[i]("provide",t,e),window.gaplugins=window.gaplugins||{},window.gaplugins[s.capitalize(t)]=e}},{"./constants":1,"./utilities":14}],13:[function(t,e,i){function n(t){return parseInt(t||"0",16).toString(2)}function s(t){return parseInt(t||"0",2).toString(16)}function r(t,e){if(t.length<e)for(var i=e-t.length;i;)t="0"+t,i--;return t}function o(t,e){return t.substr(0,e)+1+t.substr(e+1)}function a(t,e){var i=t.get(h.USAGE_PARAM),a=r(n(i),d);a=o(a,d-e),t.set(h.USAGE_PARAM,s(a))}function l(t){t.set(h.VERSION_PARAM,h.VERSION)}var h=t("./constants"),c={CLEAN_URL_TRACKER:1,EVENT_TRACKER:2,IMPRESSION_TRACKER:3,MEDIA_QUERY_TRACKER:4,OUTBOUND_FORM_TRACKER:5,OUTBOUND_LINK_TRACKER:6,PAGE_VISIBILITY_TRACKER:7,SOCIAL_WIDGET_TRACKER:8,URL_CHANGE_TRACKER:9},d=9;e.exports={track:function(t,e){l(t),a(t,e)},plugins:c}},{"./constants":1}],14:[function(t,e,i){var n=t("object-assign"),s=t("dom-utils/lib/get-attributes"),r={createFieldsObj:function(t,e,i,s,r){if("function"==typeof s){var o=i.get("buildHitTask");return{buildHitTask:function(i){i.set(t,null,!0),i.set(e,null,!0),s(i,r),o(i)}}}return n({},t,e)},getAttributeFields:function(t,e){var i=s(t),n={};return Object.keys(i).forEach(function(t){if(0===t.indexOf(e)&&t!=e+"on"){var s=i[t];"true"==s&&(s=!0),"false"==s&&(s=!1);var o=r.camelCase(t.slice(e.length));n[o]=s}}),n},domReady:function(t){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):t()},withTimeout:function(t,e){var i=!1,n=function(){i||(i=!0,t())};return setTimeout(n,e||2e3),n},camelCase:function(t){return t.replace(/[\-\_]+(\w?)/g,function(t,e){return e.toUpperCase()})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},isObject:function(t){return"object"==typeof t&&null!==t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},toArray:function(t){return r.isArray(t)?t:[t]}};e.exports=r},{"dom-utils/lib/get-attributes":19,"object-assign":23}],15:[function(t,e,i){function n(){return(new Date).getTime()}e.exports=Date.now||n},{}],16:[function(t,e,i){var n=t("date-now");e.exports=function(t,e,i){function s(){var c=n()-l;c<e&&c>0?r=setTimeout(s,e-c):(r=null,i||(h=t.apply(a,o),r||(a=o=null)))}var r,o,a,l,h;return null==e&&(e=100),function(){a=this,o=arguments,l=n();var c=i&&!r;return r||(r=setTimeout(s,e)),c&&(h=t.apply(a,o),a=o=null),h}}},{"date-now":15}],17:[function(t,e,i){var n=t("./matches"),s=t("./parents");e.exports=function(t,e,i){if(t&&1==t.nodeType&&e)for(var r,o=(i?[t]:[]).concat(s(t)),a=0;r=o[a];a++)if(n(r,e))return r}},{"./matches":20,"./parents":21}],18:[function(t,e,i){var n=t("./closest"),s=t("./matches");e.exports=function(t,e,i,r,o){o=o||{};var a=function(t){if(o.composed&&"function"==typeof t.composedPath)for(var e,a=t.composedPath(),l=0;e=a[l];l++)1==e.nodeType&&s(e,i)&&(h=e);else var h=n(t.target,i,!0);h&&r.call(h,t,h)};return t.addEventListener(e,a,o.useCapture),{destroy:function(){t.removeEventListener(e,a,o.useCapture)}}}},{"./closest":17,"./matches":20}],19:[function(t,e,i){e.exports=function(t){var e={};if(!t||1!=t.nodeType)return e;var i=t.attributes;if(0===i.length)return{};for(var n,s=0;n=i[s];s++)e[n.name]=n.value;return e}},{}],20:[function(t,e,i){function n(t,e){if("string"!=typeof e)return!1;if(r)return r.call(t,e);for(var i,n=t.parentNode.querySelectorAll(e),s=0;i=n[s];s++)if(i==t)return!0;return!1}var s=window.Element.prototype,r=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector;e.exports=function(t,e){if(t&&1==t.nodeType&&e){if("string"==typeof e||1==e.nodeType)return t==e||n(t,e);if("length"in e)for(var i,s=0;i=e[s];s++)if(t==i||n(t,i))return!0}return!1}},{}],21:[function(t,e,i){e.exports=function(t){for(var e=[];t&&t.parentNode&&1==t.parentNode.nodeType;)e.push(t=t.parentNode);return e}},{}],22:[function(t,e,i){var n=RegExp(":(80|443)$"),s=document.createElement("a"),r={};e.exports=function t(e){if(e=e&&"."!=e?e:location.href,r[e])return r[e];if(s.href=e,"."==e.charAt(0))return t(s.href);var i=s.protocol&&":"!=s.protocol?s.protocol:location.protocol,o="80"==s.port||"443"==s.port?"":s.port;o="0"==o?"":o;var a=""==s.host?location.host:s.host,l=""==s.hostname?location.hostname:s.hostname;a=a.replace(n,"");var h=s.origin?s.origin:i+"//"+a,c="/"==s.pathname.charAt(0)?s.pathname:"/"+s.pathname;return r[e]={hash:s.hash,host:a,hostname:l,href:s.href,origin:h,pathname:c,port:o,protocol:i,search:s.search,fragment:s.hash.slice(1),path:c+s.search,query:s.search.slice(1)}}},{}],23:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,o,a=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var h in i)s.call(i,h)&&(a[h]=i[h]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(i);for(var c=0;c<o.length;c++)r.call(i,o[c])&&(a[o[c]]=i[o[c]])}}return a}},{}],24:[function(t,e,i){t("./plugins/clean-url-tracker"),t("./plugins/event-tracker"),t("./plugins/impression-tracker"),t("./plugins/media-query-tracker"),t("./plugins/outbound-form-tracker"),t("./plugins/outbound-link-tracker"),t("./plugins/page-visibility-tracker"),t("./plugins/social-widget-tracker"),t("./plugins/url-change-tracker"),t("./plugins/autotrack")},{"./plugins/autotrack":2,"./plugins/clean-url-tracker":3,"./plugins/event-tracker":4,"./plugins/impression-tracker":5,"./plugins/media-query-tracker":6,"./plugins/outbound-form-tracker":7,"./plugins/outbound-link-tracker":8,"./plugins/page-visibility-tracker":9,"./plugins/social-widget-tracker":10,"./plugins/url-change-tracker":11}]},{},[24]);
window.fbAsyncInit=function(){var e=$("meta[property='fb:app_id']").attr("content");$.ajaxSetup({cache:!0}),$.getScript("https://connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:e,version:"v6.0"})}),FB.Event.subscribe("comment.create",function(e){var t=null;e&&e.href&&(t=e.href),ga("send",{hitType:"event",eventCategory:"WebFacebookCommentCreate",eventAction:t,eventLabel:null,nonInteraction:!0}),document.sendTrack({action:"web_facebook_comment_create"})})},function(e,t,n){var c,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(c=e.createElement(t),c.id=n,c.src="//connect.facebook.net/zh_TW/sdk.js",o.parentNode.insertBefore(c,o))}(document,"script","facebook-jssdk");
if("international"!=Tnl.url.getSubDomain()){!function(e,t,n,a,o,s,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(n),i=t.getElementsByTagName(n)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(s,i)}(window,document,"script",0,"ga"),ga("create","UA-41537444-1","thenewslens.com"),ga("require","displayfeatures"),"undefined"!=typeof Tracker&&ga("set","dimension9",Tracker.get_uu_id()),!tnlInfo||tnlInfo.customGAPageview,ga("create","UA-41537444-5","thenewslens.com","memberTracker");var testAd=document.createElement("div");testAd.innerHTML="&nbsp;",testAd.className="adsbox",document.body.appendChild(testAd),window.setTimeout(function(){if(0===testAd.offsetHeight){ga("send","event","Blocking Ads","Yes","ADBlock",{nonInteraction:!0});for(var e,t,n=[".help-tnl-container-970_250",".help-tnl-container-300_250",".help-tnl-container-728_90"],a=0;a<n.length;a++)t=n[a],e=$(t),e.each(function(e,t){t.innerHTML='<a href="https://goo.gl/QffWXx" target="_blank"><div class="help-tnl"></div></a>'})}"function"==typeof testAd.remove?testAd.remove():testAd.outerHTML=""},100)}
window.dataLayer=window.dataLayer||[],window.gtmdataLayer=window.gtmdataLayer||[],"international"!=Tnl.url.getSubDomain()&&(function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TSZ536",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer"),function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TSR7ZS2",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer"));
!function(t){t.gtmDatalayer=t.gtmDatalayer||{},t.gtmDatalayer={init:function(){tnlInfo.datalayer_sets=tnlInfo.datalayer_sets||{},tnlInfo.datalayer_sets.authSSOUser=0,tnlInfo.datalayer_sets.dmpStatus=1,gtmdataLayer.push(tnlInfo.datalayer_sets),this.setGtmDataLayerMemberId(),"international"==t.url.getSubDomain()?function(t,a,e,n,r){t[n]=t[n]||[],t[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=a.getElementsByTagName(e)[0],o=a.createElement(e);o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id=GTM-TBTPDGH&l=gtmdataLayer",s.parentNode.insertBefore(o,s)}(window,document,"script","gtmdataLayer"):function(t,a,e,n,r){t[n]=t[n]||[],t[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=a.getElementsByTagName(e)[0],o=a.createElement(e);o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id=GTM-K2K4RSX&l=gtmdataLayer",s.parentNode.insertBefore(o,s)}(window,document,"script","gtmdataLayer")},setGtmDataLayerMemberId:function(){if(tnlInfo.datalayer_sets=tnlInfo.datalayer_sets||{},!localStorage.getItem("user_login_info"))return gtmdataLayer.push({authUser:0}),void(tnlInfo.datalayer_sets.authUser=0);$.ajax({type:"get",url:"/api/member/login-info",data:{},success:function(t){var a=0;if(0!=t.data.LoginMemberInfo.length){a=JSON.parse(t.data.LoginMemberInfo).id}gtmdataLayer.push({authUser:a}),tnlInfo.datalayer_sets.authUser=a},error:function(t){}})}},t.gtmDatalayer.init()}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.Config=n.Config||{},n.Config=function(){},n.Config.prototype={constructor:n.Config,variable:{wineLegalTagName:"未滿十八歲請勿飲酒"},init:function(){}},n.$.$document.ready(function(){n.Config=new n.Config,n.Config.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.Bind=n.Bind||{},n.Bind=function(){},n.Bind.prototype={constructor:n.Bind,$:{template:{}},variable:{},init:function(){this.CategoryList.init(),this.bindCollection.Menu.init(this)},bindCollection:{Menu:{parent:null,init:function(n){this.parent=n,this.bindChannelMenu()},bindChannelMenu:function(){$(".js-search-btn").click(function(){document.querySelector("body").offsetWidth<767&&($("body").removeClass("main-wrap"),$(".js-menu-search").fadeToggle(400),$(".js-menu").fadeOut(400),$(".header").removeClass("active"),$(".js-menu-search input").trigger("focus"))}),$(".fa-bars").click(function(){$("body").toggleClass("main-wrap"),$(".header").toggleClass("active"),$(".js-menu").fadeToggle(400),$(".js-menu-search").fadeOut(400)}),n.$.$document.on("scroll",function(){var t=n.$.$window.scrollTop();t>50&&$(".header").addClass("short"),t<50&&$(".header").removeClass("short")})}}},CategoryList:{$:{template:{}},init:function(){return this.bind(),this},initDom:function(){},bind:function(){n.$.$document.on("click",".more-tags-btn",function(t){n.Util.eventStop(t),$(this).parent().parent().addClass("show-tags-box")})}},Progressbar:{$:{template:{}},init:function(){return this.initDom(),this.bind(),this},initDom:function(){this.$.$ScrollProgressBarContainer=n.$.$document.find("#scroll_progress_bar_container"),this.$.$ScrollProgressBarRate=this.$.$ScrollProgressBarContainer.find("#scroll_progress_bar_rate"),this.$.$TitleBar=n.$.$document.find("#title-bar")},bind:function(){var t,e=this,i=0;n.$.$document.on("scroll",function(){t=n.$.$window.scrollTop(),t>i?e.showProgressBar():e.hideProgressBar(),t<=0&&e.hideProgressBar(),i=t})},setReadPercent:function(n){n=parseInt(n),n<=0&&(n=0),n>=100&&(n=100),this.$.$ScrollProgressBarRate.css("width",n+"%")},setReadTitle:function(n){this.$.$TitleBar.html(n)},showProgressBar:function(){this.$.$ScrollProgressBarContainer.hasClass("fadeOut")||this.$.$ScrollProgressBarContainer.addClass("fadeOut")},hideProgressBar:function(){this.$.$ScrollProgressBarContainer.hasClass("fadeOut")&&this.$.$ScrollProgressBarContainer.removeClass("fadeOut")}}},n.$.$document.ready(function(){n.Bind=new n.Bind,n.Bind.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.API=t.API||{},t.API=function(){},t.API.prototype={constructor:t.API,$:{template:{}},variable:{},init:function(){},Setting:{Template:{getTemplate:function(t,n){$.ajax({type:"get",url:"/api/setting/template/"+t,data:{},success:function(t){n&&n(t)},error:function(t){console.log(t)}})}}}},t.$.$document.ready(function(){t.API=new t.API,t.API.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
window.onload=function(){$("#tnl-infinite-article-app")&&function(){document.querySelectorAll("iframe").forEach(function(a){if("https://editor-static.thenewslens.com/james/primary_school/index.html?v=0.3"===a.src){var e=$(a),r=$(a.parentNode);r.removeClass("op-social"),r.addClass("iframe-primary-school-wrapper js-iframe-primary-school-wrapper"),e.addClass("iframe-primary-school js-iframe-primary-school")}if("https://editor-static.thenewslens.com/james/primary_school/KeyColumns2.html"===a.src){var e=$(a),r=$(a.parentNode);r.removeClass("op-social"),r.addClass("iframe-key-columns-wrapper js-iframe-key-columns-wrapper"),e.addClass("iframe-key-columns js-iframe-key-columns")}})}()};
!function(e){e.article=e.article||{},e.article.common=e.article.common||{},e.article.common=function(e){this.$.App=e},e.article.common.prototype={constructor:e.article.common,$:{},variable:{},init:function(){this.initDom(),this.bind(),this.analytics(),this.action(),this.listenEditorStaticMessage(),this.listenBackendScrollMessage(),this.listenEmbedlyMessage(),this.sendBackendScrollMessage()},initDom:function(){this.$.$ArticleComponentCollection=this.$.App.find(".article-component-section")},analytics:function(){try{fbq("track","ViewContent")}catch(e){}},listenEmbedlyMessage:function(){function e(e){if(!e.data||"string"!=typeof e.data)return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}var i=document.querySelector("iframe");if(!i||"iframe.resize"!==t.context)return!1;null===(i=document.querySelector("iframe[src='"+t.src+"']"))&&(i=document.querySelector("iframe[src='"+t.src.replace(/^https?:\/\//,"//")+"']"));var n=t.height;i.offsetWidth;i.height=n}window.addEventListener("message",e,!1)},listenEditorStaticMessage:function(){function e(e){if("https://editor-static.thenewslens.com"===e.origin){var t=JSON.parse(e.data),i=t.height,n=t.src;document.querySelectorAll("iframe[src='"+n+"']")[0].height=i}}window.addEventListener("message",e,!1)},listenBackendScrollMessage:function(){function e(e){if("http://tnl.back.dev"===e.origin||"http://admin.thenewslens.com"===e.origin){var t=JSON.parse(e.data);if("scroll"===t.message){var i=t.x;document.documentElement.scrollTop=document.body.scrollTop=i}}}window.addEventListener("message",e,!1)},sendBackendScrollMessage:function(){if(e.dom.isInFrame()){var t=document.referrer,i=t.split("/"),n=i[0],o=i[2],a=n+"//"+o;if(-1===t.search("http://tnl.back.dev")&&-1===t.search("http://admin.thenewslens.com"))return;window.addEventListener("scroll",function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,i=JSON.stringify({message:"scroll",x:t,url:document.location.href});window.parent.postMessage(i,a)})}},action:function(){if(Cookies){var t=Cookies.get("font_size_favorite");t&&this.changeArticleFontStyle(t),tnlInfo&&tnlInfo.page_id&&tnlInfo.page_id==e.variable.member.tutorial_article_id&&Cookies.set("is_read_member_tutorial_article",1,{expires:9999,domain:"."+e.url.getDomain()})}if($(".FormsBox").length>0){var i=!1;if($(".FormsBox").each(function(){""==$(this).html()&&$(this).data("forms_id")>0&&(i=!0)}),i){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src","/js/FormsScripts/script.js"),document.getElementsByTagName("head")[0].appendChild(n)}}},changeArticleFontStyle:function(t){var i,n="";switch(t){case"giant-font":i="giant-font",n="big-font huge-font giant-font";break;case"huge-font":i="huge-font",n="big-font huge-font";break;case"big-font":i="big-font",n="big-font";break;default:case"normal-font":i="normal-font",e.$.$body.removeClass("big-font huge-font giant-font")}e.$.$body.addClass(n),Cookies&&Cookies.set("font_size_favorite",i,{expires:180,domain:e.url.getCookieDomain(),path:"/"})},bind:function(){var t=this;this.bindCollection.wineLegal.init(this),this.bindCollection.isAdultConfirm.init(this);try{fbq("track","AddToWishlist",{domain:"www",category:tnlInfo.main_category})}catch(e){}if(e.$.$document.on("click",".more-tags",function(t){e.Util.eventStop(t);var i=$(this);i.prev().find("a").removeClass("beforehidden").show(),i.parent().hasClass("visible-xs")&&i.prev().attr("class","tags-active"),i.hide()}),e.$.$document.on("click",".restricted-img",function(t){e.Util.eventStop(t),$(this).removeClass("restricted-img")}),e.$.$document.on("click",".article-next",function(t){e.Util.eventStop(t);var i=$(this).parents("a").attr("href"),n=$(this).parents(".article-zone").data("id");ga("send","event","ArticleCategoryClick",n,{hitCallback:function(){window.location.href=i}})}),e.$.$document.on("submit",".post-subscribe",function(t){t.preventDefault(),e.$.$document.off("submit",".post-subscribe");var i=$(this);ga("send","event","SubscribeSubmit","Article",{hitCallback:function(){i.submit()}})}),e.$.$document.on("click",".morecommentsbtn",function(e){console.log(e);var t=$(this),i=t.data("id");t.remove(),document.getElementById("comment-"+i).contentWindow.resetHeight()}),e.$.$document.on("click",".commentsbtn",function(i){e.Util.eventStop(i);var n=$(this),o=n.data("url"),a=n.data("title"),s=n.height();if("guavanthropology"==n.data("user"))return n.find("span").text("此作者不提供留言功能"),!1;if(window.DISQUS)$old_disqus=t.$.App.find("#disqus_thread"),$old_disqus.parent().css({"margin-bottom":$old_disqus.height()-s}).addClass("more-box").find(".commentsbtn").show(),$old_disqus.insertAfter(n),DISQUS.reset({reload:!0,config:function(){this.page.url=o,this.page.title=a,this.callbacks.onReady.push(function(){Waypoint.refreshAll()})}});else{$('<div id="disqus_thread"></div>').insertAfter(n),disqus_url=o,disqus_title=a;var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://"+disqus_shortname+".disqus.com/embed.js",$("head").append(r),Waypoint.refreshAll()}n.parent().removeClass("more-box").css({"margin-bottom":0}),n.hide()}),e.$.$document.on("click",".font-btn",function(i){e.Util.eventStop(i),e.$.$body.hasClass("giant-font")?t.changeArticleFontStyle("normal-font"):e.$.$body.hasClass("huge-font")?t.changeArticleFontStyle("giant-font"):e.$.$body.hasClass("big-font")?t.changeArticleFontStyle("huge-font"):t.changeArticleFontStyle("big-font")}),e.$.$document.on("click",".speak-to-you",function(t){function i(e,t){e.html('<audio src="'+t+'" style="max-width:173px;" controls></audio>'),c.hide(),e.removeClass("speak-to-you")}e.Util.eventStop(t);var n=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/,o=$(this),a=o.data("mp3"),s=o.data("pid"),r=o.find(".LTTA-text"),c=o.find(".LTTA-loader");e.analytics.sendEvent("tts","click",s,1),r.hide(),c.show(),n.test(a)?i(o,a):$.ajax({url:"//admin.thenewslens.com/"+s+"/gettingMp3",dataType:"jsonp",type:"GET"}).done(function(e){i(o,e.mp3)})}),e.$.$document.on("initBeforeAfterImage",function(e){t.initBeforeAfterImage()}),e.$.$window.on("resize",function(e){t.initBeforeAfterImage()}),e.$.$document.ready(function(){t.initBeforeAfterImage()}),this.bindBeforeAfterImage(),this.bindPhotoSwipe(),e.$.$document.on("click",".footnote-a, .footnote-back",function(e){e.preventDefault();var t=$(this),i=t.attr("href"),n=$(i),o=t.offset().top-t.parent().parent().offset().top+25;if("footnote-back"==t.attr("class"))return void t.parent().fadeOut(450);n.css("top",o),n.fadeToggle(450)}),e.$.$document.has(".article-Follow-up-black")||e.$.$document.has(".article-Follow-up")){var i=$(".article-Follow-up-black,.article-Follow-up"),n=i.find("li").length;n>9&&(i.append('<div class="articleRefelenceMoreBtn btn">More</div>'),e.$.$document.on("click",".articleRefelenceMoreBtn",function(e){$(this).parent().addClass("show")}))}},bindCollection:{isAdultConfirm:{parent:null,$:{},init:function(e){this.parent=e,this.setIsAdultConfirm()},setIsAdultConfirm:function(t){!t&&tnlInfo&&tnlInfo.x18&&(t=tnlInfo.x18),!store.get("alreadyAdult")&&t&&e.API.Setting.Template.getTemplate("isAdultMask",function(t){if(t&&t.result&&t.result.view){e.$.$body.append(t.result.view);var i=e.$.$document.find("#adult-check-section");i.fadeIn(700),e.$.$body.addClass("non-scroll"),e.$.$document.on("click",".already-18x",function(){i.fadeOut(700),e.$.$body.removeClass("non-scroll"),store.set("alreadyAdult",!0)}),e.$.$document.on("click",".not-yet-18x",function(){window.history.back()})}})}},wineLegal:{parent:null,$:{},init:function(e){this.parent=e,this.setWineLegal()},setWineLegal:function(t){var i=this,n=tnlInfo.tags_array;t&&(n=t.split(", ")),n||(n=[]),this.$.$wineLegalContainer&&this.$.$wineLegalContainer.length?e.Util.inArray(e.Config.variable.wineLegalTagName,n)?this.$.$wineLegalContainer.removeClass("wine-legal-disable").show():this.$.$wineLegalContainer.addClass("wine-legal-disable").show():e.Util.inArray(e.Config.variable.wineLegalTagName,n)&&e.API.Setting.Template.getTemplate("isWineLegal",function(t){t&&t.result&&t.result.view&&(e.$.$body.append(t.result.view),i.$.$wineLegalContainer=e.$.$document.find("#tnl-wine-legal"),i.$.$wineLegalContainer.length&&i.setWineLegal())})}}},initBeforeAfterImage:function(){var e,t,i,n=this,o="rect(0px {right}px {bottom}px 0px)";this.$.ImageBeforeAfter={},this.$.ImageBeforeAfterList=$(".img-switch-box"),n.$.ImageBeforeAfterList.length&&n.$.ImageBeforeAfterList.each(function(a,s){s.dataset.ibas_position=a,n.$.ImageBeforeAfter[a]={},n.$.ImageBeforeAfter[a].section=n.$.ImageBeforeAfterList.eq(a),n.$.ImageBeforeAfter[a].first_image=n.$.ImageBeforeAfter[a].section.find("img:first-child"),n.$.ImageBeforeAfter[a].controller=n.$.ImageBeforeAfter[a].section.find(".img-controller"),e=n.$.ImageBeforeAfter[a].section.width(),t=n.$.ImageBeforeAfter[a].section.height(),i=o.replace("{right}",e/2),i=i.replace("{bottom}",t),n.$.ImageBeforeAfter[a].first_image.css("clip",i),n.$.ImageBeforeAfter[a].controller.css("left",e/2+"px")})},bindBeforeAfterImage:function(){var t,i,n,o=this,a=!1,s="rect(0px {right}px {bottom}px 0px)";e.$.$document.on("touchstart mousedown",".img-controller",function(e){a=!0}),e.$.$document.on("touchend touchcancel mouseup",".img-controller",function(e){a=!1}),e.$.$document.on("mouseleave mouseup",".img-switch-box",function(e){a=!1}),e.$.$document.on("mousemove touchmove",".img-switch-box",function(r){if(!a)return!1;if((i=this.dataset.ibas_position)&&o.$.ImageBeforeAfter[i]){n=o.$.ImageBeforeAfter[i],t=e.Util.pointerEventToXY(r);var c=t.x-n.first_image.offset().left,l=n.first_image.height(),f=n.first_image.width();c<=0&&(a=!1,c=0),c>=f&&(a=!1,c=f),cssRect=s.replace("{right}",c),cssRect=cssRect.replace("{bottom}",l),n.first_image.css("clip",cssRect),n.controller.css("left",c+"px")}})},bindPhotoSwipe:function(){var t=this,i=!1;e.$.$document.on("click",".article-img-container img:not(a img)",function(n){if(i)return i;i=!0,e.Util.eventStop(n);var o,a=$(this),s=a.attr("src-org"),r=(a.attr("src-lg"),""),c=$(window).height(),l=[];t.fetchPhotoSwipeTemplate(function(){switch(o||(o=document.querySelectorAll(".pswp")[0]),e.device.getDeviceType()){case"phones":case"desktops":r=s;break;default:console.log("DD")}e.Util.getImgSize(r,function(e){var t=e.width,n=e.height;l.push({src:r,w:t,h:n});var a=c/n,s={getDoubleTapZoom:function(e,t){return a}},f=new PhotoSwipe(o,PhotoSwipeUI_Default,l,s);f.init(),f.zoomTo(a,{x:f.viewportSize.x/2,y:f.viewportSize.y/2}),i=!1})})})},fetchPhotoSwipeTemplate:function(t){var i=this;this.$.PhotoSwipeSection?t&&t():e.API.Setting.Template.getTemplate("photo-swipe",function(n){n&&n.result&&n.result.view&&(e.$.$body.append(n.result.view),i.$.PhotoSwipeSection=e.$.$document.find("#photo-swipe-section")),t&&t()})},bindVideoArticle:function(){},bindNormalArticle:function(){}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.tools={notAllowSponsorContent:["businesses","business","official-blog"],getSessionStorage:function(t){return sessionStorage.getItem(t)},hasSessionStorage:function(t){return null!==sessionStorage.getItem(t)},isNotAllowSponsorContent:function(){return t.Util.inArray(this.getSessionStorage("page"),this.notAllowSponsorContent)},getInfiniteScrollUrl:function(t,e,o){o=o||!1;var i,n,s;if(i=window.location.host.split("."),n=i[0],i.splice(0,1),s=i.join("."),o&&!this.isNotAllowSponsorContent())return"//api."+s+"/web/"+n+"/specialInfinite/"+t;if(!this.isNotAllowSponsorContent())return"//api."+s+"/web/"+n+"/infinite/"+t+"?page="+e;var r="//api."+s+"/web/"+n+"/list/";return this.hasSessionStorage("page")?(r+=this.getSessionStorage("page")+"/"+t,this.hasSessionStorage("type")&&(r+="/"+this.getSessionStorage("type"),this.hasSessionStorage("date")&&(r+="/"+this.getSessionStorage("date"))),r):r+"direct/"+t+"?page="+e},getRelatedBoxURL:function(t){var e,o;return e=window.location.host.split("."),o=e[0],e.splice(0,1),"//api."+e.join(".")+"/web/"+o+"/related/"+t},getFeatureURL:function(t,e){var o,i;return o=window.location.host.split("."),i=o[0],o.splice(0,1),"//api."+o.join(".")+"/web/"+i+"/feature/"+t+"/"+e},getPromotionUrl:function(t){var e,o;return e=window.location.host.split("."),o=e[0],e.splice(0,1),"//api."+e.join(".")+"/web/"+o+"/promotion/"+t}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.common=t.article.common||{},t.article.ArticleAnalytics=function(t){this.$.App=t},t.article.ArticleAnalytics.prototype={constructor:t.article.ArticleAnalytics,$:{App:null},state:{PostsCollection:{}},init:function(){this.initDOM(),this.initSetting()},initDOM:function(){this.$.$ArticleComponentCollection=this.$.App.find(".article-component-section")},initSetting:function(){var t=this;if(this.$.$ArticleComponentCollection.each(function(e,o){var i=o.dataset.postId,s={is_sent_ga_pageview:!1,post_id:o.dataset.postId,title:o.dataset.title,seoTitle:o.dataset.seoTitle,author:o.dataset.author,categoryKeywords:o.dataset.categoryKeywords,mainCategoryKeyword:o.dataset.mainCategoryKeyword,eventTagKeywords:o.dataset.eventTagKeywords,postTypeKeyword:o.dataset.postTypeKeyword,postTypeSlug:o.dataset.postTypeSlug,typeKeyword:o.dataset.typekeyword,tagKeywords:o.dataset.tagKeywords,channelTopicKeyword:o.dataset.channelTopicKeyword,url:o.dataset.url};t.state.PostsCollection[i]=s}),tnlInfo&&tnlInfo.post_id){var e=tnlInfo.post_id;t.state.PostsCollection[e].url=location.href,this.sendArticleToGoogleAnalytics(tnlInfo.post_id)}},sendArticleToGoogleAnalytics:function(e){console.log("[Send Article GA] Start",e);var o=this.state.PostsCollection[e];if(!o||o.is_sent_ga_pageview)return console.log("[Send Article GA] Stop",e),!1;console.log("[Send Article GA] Success",e),this.state.PostsCollection[e].is_sent_ga_pageview=!0;var i=o.seoTitle,s=o.url,n=t.Util.getURLRelativePath(s);ga("set","title",i),ga("set","location",s),ga("set","page",n),ga("set","dimension1",o.author),ga("set","dimension2",o.categoryKeywords),o.channelTopicKeyword&&o.channelTopicKeyword.length&&ga("set","dimension8",o.channelTopicKeyword),o.tagKeywords&&o.tagKeywords.length&&ga("set","dimension10",o.tagKeywords),o.eventTagKeywords&&o.eventTagKeywords.length&&ga("set","dimension11",o.eventTagKeywords),t.analytics.sendEvent("visit","author",o.author),t.analytics.sendEvent("visit","category",o.categoryKeywords),t.analytics.sendEvent("visit","classification",o.postTypeKeyword),o.postTypeSlug.length&&t.analytics.sendEvent("ArticleTypeVisit",o.postTypeSlug)}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.articleInfiniteRecommend=t.article.articleInfiniteRecommend||{},t.article.articleInfiniteRecommend=function(t){this.$.App=t},t.article.articleInfiniteRecommend.prototype={constructor:t.article.articleInfiniteRecommend,$:{App:null,$Progressbar:null,$ArticleComponentCollection:null},config:{fetch_recommend_article_reading_progress_threshold:.7},state:{previous_intersection_ratio:null,previous_reading_progress:null,is_get_infinite_scroll_recommend_article:!1,current_reading:{index:0,post_id:null,title:""},PostsCollection:{}},init:function(){this.initDOM(),this.initSetting(),this.bind()},initDOM:function(){this.$.$Progressbar=t.Bind.Progressbar.init(),this.$.$ArticleComponentCollection=t.article.common.$.$ArticleComponentCollection,this.$.$InfiniteArticleListSection=this.$.App.find(".infinite-article-list-section")},initSetting:function(){var t=this;this.$.$ArticleComponentCollection.each(function(e,i){var n=i.dataset.postId;t.state.PostsCollection[n]={post_id:i.dataset.postId,title:i.dataset.title,seoTitle:i.dataset.seoTitle,url:i.dataset.url,tagKeywords:i.dataset.tagKeywords,is18xArticle:!!i.dataset.is18xArticle,$ArticleComponent:$(i)}});var e=tnlInfo.post_id;t.state.PostsCollection[e].url=location.href,t.state.current_reading.post_id=e,this.settingCurrentReading(tnlInfo.post_id)},settingCurrentReading:function(e){console.log("[Set current Reading]",e);var i=this.state.PostsCollection[e];if(!i)return!1;if(this.state.current_reading.post_id==e)return!1;this.state.current_reading.post_id=i.post_id,this.state.current_reading.title=i.title,t.article.ArticleAnalytics.sendArticleToGoogleAnalytics(e),t.article.common.bindCollection.wineLegal.setWineLegal(i.tagKeywords),t.article.common.bindCollection.isAdultConfirm.setIsAdultConfirm(i.is18xArticle),this.$.$Progressbar.setReadTitle(i.title);var n=t.Util.getURLRelativePath(i.url);History.replaceState(null,i.seoTitle,n);var r=tnlInfo.infinite_datalayer_sets||{};r.authSSOUser=0,r.authUser=tnlInfo.datalayer_sets.authUser,r.dmpStatus=1,r.event="InfiniteScroll",gtmdataLayer.push(r)},bind:function(){this.bindCollection.InfiniteScroll.init(this)},bindCollection:{InfiniteScroll:{parent:null,init:function(t){this.parent=t;this.bindArticleReadingObserve(),this.bindArticleRecommendObserve()},observedArticleReadingProcess:function(t){var e=this.parent,i=t.element,n=t.progress,r=t.index,s=i.dataset.postId,o=100*n;e.$.$Progressbar.setReadPercent(o),e.state.current_reading.index!=r&&(e.settingCurrentReading(s),e.state.current_reading.index=r),0==r&&$(".infinite-post-section").hide(),t.progress>.7&&$(".infinite-post-section").show()},fetchArticleInfiniteResource:function(e,i){var n=this.parent;if(e.progress>n.config.fetch_recommend_article_reading_progress_threshold){if(n.state.is_get_infinite_scroll_recommend_article)return!1;n.state.is_get_infinite_scroll_recommend_article=!0;var r="/api/article/recommend/related/"+tnlInfo.post_id;$.ajax({type:"GET",url:r,data:{},cache:!0,contentType:"application/json"}).success(function(e){"success"==e.status&&(t.$.$document.find("#infinite-article-recommend-section").html(e.data.recommend_html),initLanguage());var n={action:"destroy.scroll"};i&&i(n)})}},bindArticleRecommendObserve:function(){var t=(this.parent,this),e=scrollama();return e.setup({step:"#infinite-article-list-section",threshold:100,progress:!0}).onStepProgress(function(i){t.fetchArticleInfiniteResource(i,function(t){(t.action="destroy.scroll")&&e.destroy()})}),!0},bindArticleReadingObserve:function(){var t=(this.parent,this);scrollama().setup({step:".article-component-section",offset:.9,threshold:100,progress:!0}).onStepProgress(function(e){t.observedArticleReadingProcess(e)})}}}},t.$.$document.ready(function(){var e=t.$.$document.find("#tnl-infinite-article-app");if(e.length){try{var i=tnlInfo.targets.post.tag_name;i.push(tnlInfo.targets.post.category_name),i.push(tnlInfo.targets.post.type_name),tp.push(["setTags",i]),tp.push(["setContentCreated",tnlInfo.publish_time_iso_8601]),tp.push(["setContentAuthor",tnlInfo.author_name]),tp.push(["setContentIsNative",tnlInfo.is_sponsor])}catch(t){}t.article.common=new t.article.common(e),t.article.common.init(),t.article.ArticleAnalytics=new t.article.ArticleAnalytics(e),t.article.ArticleAnalytics.init(),t.article.articleInfiniteRecommend=new t.article.articleInfiniteRecommend(e),t.article.articleInfiniteRecommend.init()}})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.video=t.article.video||{},t.article.video=function(t){this.$.App=t},t.article.video.prototype={constructor:t.article.video,$:{},variable:{reading_track_interval_num:4,reading_track:[]},init:function(){this.initTracking(),this.initDom(),this.analytics(),this.bind()},initDom:function(){this.$.$videoArticleContainer=this.$.App.find("#tnl-video-article-container"),this.$.$videoArticleContent=this.$.$videoArticleContainer.find("article"),"desktops"==t.device.getDeviceType()&&(this.$.videoPlayer=this.$.App.find("#tnl-article-video-player"),this.$.videoPlayerBox=this.$.videoPlayer.parent(),this.$.videoPlayerBox.height(this.$.videoPlayer.height()),this.scrollAndPlayRightBottom())},initTracking:function(){for(var t=this.variable.reading_track_interval_num,i=1;i<t;i++)this.variable.reading_track.push({threshold:(i/t*100).toFixed(0),isTrigger:!1})},bind:function(){this.bindCollection.ScrollProgress.init(this)},bindCollection:{ScrollProgress:{parent:null,init:function(t){this.parent=t,this.bindScrollProgress()},bindScrollProgress:function(){var i=this.parent,e=t.Bind.Progressbar.init(),n=i.$.$videoArticleContainer.scrollTop(),o=i.$.$videoArticleContainer.height()-t.$.$window.outerHeight();t.$.$document.on("scroll",function(){var i=t.$.$window.scrollTop()-n,r=i/o*100;e.setReadPercent(r)})}}},analytics:function(){var t=this.$.App.data("typekeyword");t&&ga("send","event","ArticleTypeVisit",t,null,{nonInteraction:!0}),fbq("track","ViewContent")},scrollAndPlayRightBottom:function(){var t=this;new Waypoint.Inview({element:t.$.videoPlayerBox,enter:function(i){"up"==i&&t.$.videoPlayer.removeAttr("style")},exited:function(i){"down"==i&&t.$.videoPlayer.css({position:"fixed",bottom:"30px",left:"30px",width:"400px",zIndex:"1000"})}})}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-article-video");if(i.length){var e=tnlInfo.targets.post.tag_name;e.push(tnlInfo.targets.post.category_name),e.push(tnlInfo.targets.post.type_name),tp.push(["setTags",e]),tp.push(["setContentCreated",tnlInfo.publish_time_iso_8601]),tp.push(["setContentAuthor",tnlInfo.author_name]),tp.push(["setContentIsNative",tnlInfo.is_sponsor]),t.article.common=new t.article.common(i),t.article.common.init(),t.article.ArticleAnalytics=new t.article.ArticleAnalytics(i),t.article.ArticleAnalytics.init(),t.article.video=new t.article.video(i),t.article.video.init()}})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.featureArticle=t.article.featureArticle||{},t.article.featureArticle=function(t){this.$.App=t},t.article.featureArticle.prototype={constructor:t.article.featureArticle,$:{},variable:{},init:function(){this.initDOM(),this.bind()},initDOM:function(){this.$.$ArticleFeatureContainer=this.$.App.find("#tnl-article-feature-container"),this.$.$FeatureArticleContentSection=this.$.$ArticleFeatureContainer.find("#tnl-feature-article-content-section"),this.$.$FeatureArticleContent=this.$.$ArticleFeatureContainer.find("article")},bind:function(){this.bindCollection.ScrollProgress.init(this)},bindCollection:{ScrollProgress:{parent:null,init:function(t){this.parent=t,this.bindScrollProgress()},bindScrollProgress:function(){var e=this.parent,i=t.Bind.Progressbar.init(),n=e.$.$FeatureArticleContentSection.scrollTop(),r=e.$.$FeatureArticleContentSection.height()-t.$.$window.outerHeight();t.$.$document.on("scroll",function(){var e=t.$.$window.scrollTop()-n,l=e/r*100;i.setReadPercent(l)})}}}},t.$.$document.ready(function(){var e=t.$.$document.find("#tnl-feature-article-app");if(e.length){var i=tnlInfo.targets.post.tag_name;i.push(tnlInfo.targets.post.category_name),i.push(tnlInfo.targets.post.type_name),tp.push(["setTags",i]),tp.push(["setContentCreated",tnlInfo.publish_time_iso_8601]),tp.push(["setContentAuthor",tnlInfo.author_name]),tp.push(["setContentIsNative",tnlInfo.is_sponsor]),t.article.common=new t.article.common(e),t.article.common.init(),t.article.ArticleAnalytics=new t.article.ArticleAnalytics(e),t.article.ArticleAnalytics.init(),t.article.featureArticle=new t.article.featureArticle(e),t.article.featureArticle.init()}})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.featureArticleList=t.article.featureArticleList||{},t.article.featureArticleList=function(t){this.$.App=t},t.article.featureArticleList.prototype={constructor:t.article.featureArticleList,$:{},variable:{},init:function(){this.initDOM(),this.bind()},initDOM:function(){this.$.$ArticleListMaskPhoto=this.$.App.find(".mask > img"),this.$.$ProjectCategorySubCategory=this.$.App.find(".project-category-sub-category"),this.$.$ProjectCategorySubCategorySection=this.$.App.find(".project-category-sub-category-section")},bind:function(){this.bindCollection.ProjectShow.init(this),this.bindCollection.ProjectEditorPickPost.init(this),this.bindCollection.ProjectCategoryPost.init(this)},bindCollection:{ProjectCategoryPost:{parent:null,init:function(t){this.parent=t,this.bindProjectCategoryMenu()},bindProjectCategoryMenu:function(){this.parent}},ProjectEditorPickPost:{parent:null,init:function(t){this.parent=t,this.bindProjectEditorPickShowMore()},bindProjectEditorPickShowMore:function(){t.$.$document.on("click",".editors-pick-more",function(t){$this=$(this),$this.toggle(),$this.parent().addClass("show-more")})}},ProjectShow:{parent:null,init:function(t){this.parent=t,this.bindProjectScrollBar()},bindProjectScrollBar:function(){var i=this.parent;t.$.$document.on("scroll",function(){var e=t.$.$window.scrollTop(),o="translateY("+.2*e+"px)";i.$.$ArticleListMaskPhoto.css("transform",o)})}}}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-feature-article-list-app");i.length&&(t.article.common=new t.article.common(i),t.article.common.init(),t.article.featureArticleList=new t.article.featureArticleList(i),t.article.featureArticleList.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.interactiveArticle=t.article.interactiveArticle||{},t.article.interactiveArticle=function(t){this.$.App=t},t.article.interactiveArticle.prototype={constructor:t.article.interactiveArticle,$:{},variable:{},init:function(){}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-interactive-article");i.length&&(t.article.common=new t.article.common(i),t.article.common.init(),t.article.ArticleAnalytics=new t.article.ArticleAnalytics(i),t.article.ArticleAnalytics.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.article=t.article||{},t.article.promotion=t.article.promotion||{},t.article.promotion=function(t){this.$.App=t},t.article.promotion.prototype={constructor:t.article.promotion,$:{},variable:{},init:function(){this.bind()},bind:function(){this.bindCollection.Quiz.init(this)},bindCollection:{Quiz:{parent:null,init:function(t){this.parent=t,this.bindQuiz()},bindQuiz:function(){var i=this.parent,n=t.article.tools.getPromotionUrl("article");$.ajax({type:"get",url:n,data:{},success:function(t){if(t.status&&t.data&&t.data.html){var n=i.$.App.find("#article-bottom-social-button-section");n.length&&n.before(t.data.html)}},error:function(t){console.log(t)}})}}}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-article-normal");i.length&&(t.article.promotion=new t.article.promotion(i),t.article.promotion.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.member=e.member||{},e.member.common=e.member.common||{},e.member.common=function(e){this.$.App=e},e.member.common.prototype={constructor:e.member.common,$:{},variable:{},init:function(){"Y"!=e.auth.variable.member.privacy_status&&e.auth.fetchTemplate(function(){e.auth.$.termsModal.find(".member-remove").remove(),e.auth.showTermsModal()});var t=this.$.App;this.$.editModal=t.find(".edit-profile-container"),this.$.editSuccess=t.find("#tnl-member-edit-success"),this.$.editReturn=t.find("#tnl-member-edit-return"),this.$.avatarPreview=t.find("#tnl-member-avatar-preview"),this.$.avatarSave=t.find("#tnl-member-edit-avatar-save"),this.$.editAlert=t.find("#tnl-member-edit-alert"),this.$.editLoader=t.find("#tnl-member-edit-loader"),this.bind()},bind:function(){var t=this;e.$.$document.on("click","#tnl-terms-return",function(e){History.back()}),e.$.$document.on("click",".tnl-member-edit-modal",function(){t.$.editModal.fadeIn(300)}),e.$.$document.on("click","#tnl-member-edit-success",function(){if($(this).hasClass("disabled"))return!1;t.$.App.find("#update-profile-form").submit()}),e.$.$document.on("click","#tnl-member-edit-return",function(){t.$.App.find(".edit-profile-container").fadeOut(400)}),e.$.$document.on("submit","#update-profile-form",function(i){e.Util.eventStop(i);var a=$(this);t.$.editLoader.fadeIn(300),t.$.editSuccess.addClass("disabled"),a.ajaxSubmit({success:function(e){if(t.$.editLoader.fadeOut(300),t.$.editSuccess.removeClass("disabled"),"error"==e.status)return t.ajaxFail(e),!1;window.location.reload()}})}),e.$.$document.on("change","#tnl-member-edit-upload",function(){t.$.App.find("#upload-avatar-form").submit()}),e.$.$document.on("submit","#upload-avatar-form",function(i){e.Util.eventStop(i);var a=$(this);t.$.editLoader.fadeIn(300),t.$.editSuccess.addClass("disabled"),t.$.avatarPreview.hide(),a.ajaxSubmit({success:function(e){if(t.$.editLoader.fadeOut(300),t.$.editSuccess.removeClass("disabled"),"error"==e.status)return t.ajaxFail(e),!1;t.$.avatarPreview.attr("src",e.avatar_absolute).show(),t.$.avatarSave.val(e.avatar_relative)}})})},ajaxFail:function(e){console.log(e),this.$.editAlert.find("ul").html("<li>"+e.error_message+"</li>")}}}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.member=e.member||{},e.member.trackArticle=e.member.trackArticle||{},e.member.trackArticle=function(e){this.$.App=e},e.member.trackArticle.prototype={constructor:e.member.trackArticle,$:{},variable:{page:2,ajaxStart:!1},init:function(){sessionStorage.setItem("page","favorite/article"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),this.$.moreContainer=this.$.App.find(".more-box"),this.$.listContainer=this.$.App.find("#list-container"),this.bind()},bind:function(){var e=this;e.$.App;e.$.moreContainer.on("click",function(){1!=e.variable.ajaxStart&&(e.variable.ajaxStart=!0,$.ajax({type:"GET",url:e.parseAjaxUrl(),data:{html:1,page:e.variable.page},contentType:"application/json"}).success(function(t){e.$.listContainer.append(t.html),t.current_page>=t.last_page?e.$.moreContainer.hide():e.$.moreContainer.show(),e.variable.page++,e.variable.ajaxStart=!1}))})},parseAjaxUrl:function(){return e.url.getNotDomainAjaxUrl()}},e.$.$document.ready(function(){var t=e.$.$document.find("#tnl-member-track-article");t.length&&(e.member.common=new e.member.common(t),e.member.common.init(),e.member.trackArticle=new e.member.trackArticle(t),e.member.trackArticle.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.member=e.member||{},e.member.trackAuthorArticle=e.member.trackAuthorArticle||{},e.member.trackAuthorArticle=function(e){this.$.App=e},e.member.trackAuthorArticle.prototype={constructor:e.member.trackAuthorArticle,$:{},variable:{page:2,ajaxStart:!1},init:function(){sessionStorage.setItem("page","favorite/author-article"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),this.$.moreContainer=this.$.App.find(".more-box"),this.$.listContainer=this.$.App.find("#list-container"),this.bind()},bind:function(){var e=this;e.$.App;e.$.moreContainer.on("click",function(){1!=e.variable.ajaxStart&&(e.variable.ajaxStart=!0,$.ajax({type:"GET",url:e.parseAjaxUrl(),data:{html:1,page:e.variable.page},contentType:"application/json"}).success(function(t){e.$.listContainer.append(t.html),t.current_page>=t.last_page?e.$.moreContainer.hide():e.$.moreContainer.show(),e.variable.page++,e.variable.ajaxStart=!1}))})},parseAjaxUrl:function(){return e.url.getNotDomainAjaxUrl()}},e.$.$document.ready(function(){var t=e.$.$document.find("#tnl-member-track-author-article");t.length&&(e.member.common=new e.member.common(t),e.member.common.init(),e.member.trackAuthorArticle=new e.member.trackAuthorArticle(t),e.member.trackAuthorArticle.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.member=t.member||{},t.member.trackAuthorEdit=t.member.trackAuthorEdit||{},t.member.trackAuthorEdit=function(t){this.$.App=t},t.member.trackAuthorEdit.prototype={constructor:t.member.trackAuthorEdit,$:{},variable:{},init:function(){t.dom.resetHeight(".authors-container .col-md-4"),this.bind()},bind:function(){t.$.$document.on("click",".tnl-author-follow",function(o){t.Util.eventStop(o);var e=$(this),n=e.data("id");e.data("lock")||(e.data("lock",!0),e.hasClass("unfollow-btn")?$.ajax({url:"/favorite/author/"+n,type:"DELETE",success:function(t){console.log(t),e.text(e.data("follow")),e.addClass("follow-btn").removeClass("unfollow-btn")},error:function(t){console.log(t)},complete:function(){e.data("lock",!1)}}):$.ajax({url:"/favorite/author/"+n,type:"POST",success:function(t){console.log(t),e.text(e.data("unfollow")),e.addClass("unfollow-btn").removeClass("follow-btn")},error:function(t){console.log(t)},complete:function(){e.data("lock",!1)}}))})}},t.$.$document.ready(function(){var o=t.$.$document.find("#tnl-member-track-author");o.length&&(t.member.common=new t.member.common(o),t.member.common.init(),t.member.trackAuthorEdit=new t.member.trackAuthorEdit(o),t.member.trackAuthorEdit.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.member=e.member||{},e.member.subscribe=e.member.subscribe||{},e.member.subscribe=function(e){this.$.App=e},e.member.subscribe.prototype={constructor:e.member.subscribe,$:{},variable:{},init:function(){var e=this.$.App;this.$.$dailyTW=e.find('input[name="dailyTW"]'),this.$.$weekHot=e.find('input[name="weekHot"]'),this.$.$weekIntl=e.find('input[name="weekIntl"]'),this.$.$member=e.find('input[name="member"]'),this.$.$dailyIntlEng=e.find('input[name="dailyIntlEng"]'),this.$.$editorsPick=e.find('input[name="editorsPick"]'),this.$.$currentEventPick=e.find('input[name="currentEventPick"]'),this.$.$editorsPickHK=e.find('input[name="editorsPickHK"]'),this.$.$weekArtist=e.find('input[name="weekArtist"]'),this.$.subscribeBtn=e.find("#tnl-member-subscribe-submit"),this.$.subscribeMessage=e.find("#tnl-member-subscribe-submit-message"),this.bind()},bind:function(){var i=this;e.$.$document.on("click",".tnl-member-resend-confirmation",function(t){e.Util.eventStop(t);var n=$(this);i.$.App.find(".tnl-member-email-verify-loader").fadeIn(300),n.parent().hide(),$.ajax({url:"/auth/member/confirmation/resend",method:"POST",success:function(e){if(i.$.App.find(".tnl-member-email-verify-loader").fadeOut(300),"error"==e.status)return!1;var t=i.$.App.find(".tnl-member-email-verify-message");t.html(e.message+t.find("a")[0].outerHTML),t.show()}})}),e.$.$document.on("click",".tnl-member-resend-subscribe",function(t){e.Util.eventStop(t);var n=$(this);i.$.App.find(".tnl-member-email-verify-loader").fadeIn(300),n.parent().hide(),$.ajax({url:"/auth/member/confirmation/resend",method:"POST",success:function(e){if(i.$.App.find(".tnl-member-email-verify-loader").fadeOut(300),"error"==e.status)return!1;var t=i.$.App.find(".tnl-member-subscribe-message");t.html(e.message+t.find("a")[0].outerHTML),t.show()}})}),e.$.$document.on("click","#tnl-member-subscribe-submit",function(){i.$.App.find("#subscribe-form").submit()}),e.$.$document.on("submit","#subscribe-form",function(t){e.Util.eventStop(t);var n=$(this);i.$.subscribeBtn.attr("disabled",""),i.$.App.find(".tnl-member-subscribe-submit-loader").fadeIn(300);var r=i.$.App.find("#member-email").val().trim();if(!r.length)return alert("Please fill your email address"),!1;if(!validator.isEmail(r))return alert("Email format error, please check again."),!1;var s={dailyTW:i.$.$dailyTW.is(":checked")?1:0,weekHot:i.$.$weekHot.is(":checked")?1:0,weekIntl:i.$.$weekIntl.is(":checked")?1:0,dailyIntlEng:i.$.$dailyIntlEng.is(":checked")?1:0,member:i.$.$member.is(":checked")?1:0,editorsPick:i.$.$editorsPick.is(":checked")?1:0,currentEventPick:i.$.$currentEventPick.is(":checked")?1:0,editorsPickHK:i.$.$editorsPickHK.is(":checked")?1:0,weekArtist:i.$.$weekArtist.is(":checked")?1:0};return $.ajax({url:n.attr("action"),method:"PUT",data:{email:r,subscription:s},success:function(t){if(i.$.subscribeBtn.attr("disabled",!1),i.$.App.find(".tnl-member-subscribe-submit-loader").fadeOut(300),"error"==t.status)return e.auth.ajaxError(t),i.$.subscribeMessage.html("<p>"+t.error_message+"</p>"),!1;i.$.subscribeMessage.html('<span><i class="fa fa-check-circle"></i>'+t.output+"</span>").show(),i.$.App.find("input.styled-checkbox.changed").removeClass("changed")}}),!1})}},e.$.$document.ready(function(){var i=e.$.$document.find("#tnl-member-subscribe");i.length&&(e.member.common=new e.member.common(i),e.member.common.init(),e.member.subscribe=new e.member.subscribe(i),e.member.subscribe.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.salon=n.salon||{},n.salon.loginMember=n.salon.loginMember||{},n.salon.loginMember=function(n){this.$.App=n},n.salon.loginMember.prototype={constructor:n.salon.loginMember,$:{},variable:{},init:function(){this.$.App;$("#tnl-salon-login #tnl-login .member-remove").click(function(){window.location.href="http://www.thenewslens.com"}),$($("<div/>").addClass("logo").append($("<a/>").attr("href","https://www.thenewslens.com/").addClass("gtm-track").attr("data-gtm-category","salon_signup_close").attr("data-gtm-label","logo").append($("<img/>").attr("src","https://image3.thenewslens.com/assets/web/publisher-photo-1.png")))).insertBefore($("#tnl-salon-login #tnl-login .member-remove")),$("#tnl-salon-login #tnl-login .member-zone h1").html("TNL 網路沙龍會員登入"),$("#tnl-salon-login #tnl-login .member-zone .tnl-login-message").html("第一步：登入關鍵評論網會員"),$("#tnl-salon-login #tnl-login").show(),this.bind()},bind:function(){}},n.$.$document.ready(function(){var o=n.$.$document.find("#tnl-salon-login");o.length&&(n.salon.loginMember=new n.salon.loginMember(o),n.salon.loginMember.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.salon=n.salon||{},n.salon.signup=n.salon.signup||{},n.salon.signup=function(n){this.$.App=n},n.salon.signup.prototype={constructor:n.salon.signup,$:{},variable:{},init:function(){this.$.App;$(".popup_copy_modal .close").click(function(){$(".popup_copy_modal").fadeOut()}),$(".popup_copy").click(function(){$(".popup_copy_modal").fadeIn()}),this.bind()},bind:function(){n.$.$document.on("click",".tnl-salon-sign-up-submit-btn",function(){$(this).parents("form").submit()}),n.$.$document.on("submit","#tnl-salon-sign-up-form",function(t){n.Util.eventStop(t);var i=$(this);if(!i.find("#salon_policy").is(":checked"))return alert("請同意並閱讀TNL 網路沙龍守則"),!1;i.find(".tnl-sign-up-loader").fadeIn(300),$.ajax({url:i.attr("action"),method:i.attr("method"),data:{nickname:i.find("input[name='nickname']").val(),company:i.find("input[name='company']").val(),job_title:i.find("input[name='job_title']").val(),introduction:$("textarea#introduction").val()},success:function(n){if(i.find(".tnl-sign-up-loader").fadeOut(300),"error"==n.status)return alert(n.error_message),!1;"success"==n.status&&(window.location.href="/salon/article")}})})}},n.$.$document.ready(function(){var t=n.$.$document.find("#salon_signup");t.length&&(n.salon.signup=new n.salon.signup(t),n.salon.signup.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.salon=n.salon||{},n.salon.profile=n.salon.profile||{},n.salon.profile=function(n){this.$.App=n},n.salon.profile.prototype={constructor:n.salon.profile,$:{},variable:{},init:function(){this.$.App;n.$.$document.on("click","#tnl-member-profile-submit-btn",function(){$(this).parents("form").submit()}),this.bind()},bind:function(){n.$.$document.on("click","#tnl-member-profile-submit",function(){$(this).parents("form").submit()}),n.$.$document.on("submit","#tnl-salon-profile-form",function(n){n.preventDefault();var t=$(this);if(""==t.find("input[name='nickname']").val())return alert("請輸入留言顯示名稱"),!1;$.ajax({url:t.attr("action"),method:t.attr("method"),data:{nickname:t.find("input[name='nickname']").val(),company:t.find("input[name='company']").val(),job_title:t.find("input[name='job_title']").val(),introduction:$("textarea#introduction").val(),reply_comment_notice:t.find("#reply_comment_notice").is(":checked")?1:0,article_response_notice:t.find("#article_response_notice").is(":checked")?1:0},success:function(n){if("error"==n.status)return alert(n.error_message),!1;alert("更新成功"),window.location.reload()}})})}},n.$.$document.ready(function(){var t=n.$.$document.find("#salon_profile");t.length&&(n.salon.profile=new n.salon.profile(t),n.salon.profile.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(i){i.salon=i.salon||{},i.salon.main=i.salon.main||{},i.salon.main=function(i){this.$.App=i},i.salon.main.prototype={constructor:i.salon.main,$:{},variable:{},init:function(){var i=(this.$.App,!1);(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(i=!0),function(t){$(".sc-content a ").each(function(){if(function(i){var t=i.match(/[^\x00-\xff]/g,"rr");return i.length+(t?t.length:0)}($(this).text())>t&&0==i){var a=$(this).text();$(this).html(a.substr(0,t)+'<span class="more">... 查看更多</span>')}else $(this).html($(this).text())})}(80),function(t){$(" .c-content a").each(function(){if(function(i){var t=i.match(/[^\x00-\xff]/g,"rr");return i.length+(t?t.length:0)}($(this).text())>t&&0==i){var a=$(this).text();$(this).html(a.substr(0,t)+'<span class="more">... 查看更多</span>')}else $(this).html($(this).text())})}(33),localStorage.getItem("is_closed")||$("#main_header").append('<div class="tooltip right" role="tooltip">\n<div class="tooltip-arrow"></div> \n<div class="tooltip-inner">  來看看現在最多留言的文章是哪一篇，並點擊留言參與討論吧！下滑也可以看到更多的最新留言喔！ </div> \n<div class="close"><i class="fas icon-bars fa-times"></i></div>\n</div>'),$(".tooltip").click(function(){localStorage.setItem("is_closed",1),$(".tooltip").fadeOut()}),this.bind()},bind:function(){}},i.$.$document.ready(function(){var t=i.$.$document.find(".salon_leading , .GniMember");t.length&&(i.salon.main=new i.salon.main(t),i.salon.main.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.index=e.index||{},e.index={init:function(){null!=document.getElementById("tnl-index")&&e.index.call()},call:function(){function e(){var e=(window.location.pathname,window.location.host.split(".")),t=e[0];return"//api."+e[1]+"."+e[2]+"/web/"+t+"/index"}$(".slider").each(function(){function e(e){var a,n;t(),o.is(":animated")||l===e||(s[l].removeClass("active"),s[e].addClass("active"),e>l?(n="100%",a="-100%"):(n="-100%",a="100%"),i.eq(e).css({display:"block",left:n}),o.animate({left:a},function(){i.eq(l).css({display:"none"}),i.eq(e).css({left:0}),o.css({left:0}),l=e}))}function t(){clearTimeout(a),a=setTimeout(function(){e(l<i.length-1?l+1:0)},4e3)}var a,n=$(this),o=n.find(".slide_group"),i=n.find(".slide"),s=[],l=0;$(".next_btn").on("click",function(){e(l<i.length-1?l+1:0)}),$(".previous_btn").on("click",function(){e(0!==l?l-1:3)}),$.each(i,function(t){var a=$('<a class="slide_btn">&bull;</a>');t===l&&a.addClass("active"),a.on("click",function(){e(t)}).appendTo(".slide_buttons"),s.push(a)}),t()}),sessionStorage.setItem("page","index"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date");var t=2,a=!1;$(".more-index-posts").on("click",function(){1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),$.ajax({type:"GET",url:e()+"?page="+t,contentType:"application/json"}).success(function(e){t++,$(".more-box").before(e.html),$(".more-box").data("ajaxStart",!1),$(".more-box").hide();var n,o,i,s,l;for(var d in e.dfp_advertisement_config_list){s=e.dfp_advertisement_config_list[d];for(var c in s)n=s[c].slot_name,i=s[c].ad_size_list,o=s[c].ad_slot_id,googletag.cmd.push(function(){l=googletag.defineSlot(n,i,o).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(o),googletag.pubads().refresh([l])})}a=!0}))}),$(window).scroll(function(){$(window).scrollTop()+300>=$(document).height()-$(window).height()&&a&&1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),$.ajax({type:"GET",url:e()+"?page="+t,contentType:"application/json"}).success(function(e){t++,$(".more-box").before(e.html);var a,n,o,i,s;for(var l in e.dfp_advertisement_config_list){i=e.dfp_advertisement_config_list[l];for(var d in i)a=i[d].slot_name,o=i[d].ad_size_list,n=i[d].ad_slot_id,googletag.cmd.push(function(){s=googletag.defineSlot(a,o,n).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(n),googletag.pubads().refresh([s])})}$(window).data("ajaxStart",!1)}))})}},e.$.$document.ready(function(){e.index.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.author=e.author||{},e.author=function(e){this.$.App=e},e.author.prototype={constructor:e.author,$:{},variable:{page:2,ajaxStart:!1},init:function(){sessionStorage.setItem("page","author"),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date"),this.$.filterContainer=this.$.App.find(".filter-container"),this.$.timeFilterContainer=this.$.App.find(".time-filter-container"),this.$.moreContainer=this.$.App.find(".more-box"),this.$.listContainer=this.$.App.find("#list-container"),this.$.filterMonth=this.$.App.find("#filter-month"),this.bind()},bind:function(){var e=this,t=e.$.App;e.$.moreContainer.on("click",function(){1!=e.variable.ajaxStart&&(e.variable.ajaxStart=!0,$.ajax({type:"GET",url:e.parseAjaxUrl(),data:{html:1,page:e.variable.page},contentType:"application/json"}).success(function(t){e.$.listContainer.append(t.html),t.current_page>=t.last_page?e.$.moreContainer.hide():e.$.moreContainer.show(),e.variable.page++,e.variable.ajaxStart=!1}))}),t.find("#filter-latest").on("click",function(){e.$.filterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date"),e.$.timeFilterContainer.is(":visible")&&e.$.timeFilterContainer.slideToggle(400),e.sendFilterAjax()}),t.find("#filter-hot").on("click",function(){e.$.filterContainer.find("li.active").removeClass("active"),e.$.timeFilterContainer.find("li.active").removeClass("active"),e.$.filterMonth.addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","hot"),sessionStorage.setItem("date","month"),e.$.timeFilterContainer.is(":visible")||e.$.timeFilterContainer.slideToggle(400),e.sendFilterAjax()}),t.find("#filter-social").on("click",function(){e.$.filterContainer.find("li.active").removeClass("active"),e.$.timeFilterContainer.find("li.active").removeClass("active"),e.$.filterMonth.addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","social"),sessionStorage.setItem("date","month"),e.$.timeFilterContainer.is(":visible")||e.$.timeFilterContainer.slideToggle(400),e.sendFilterAjax()}),t.find("#filter-today").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","today"),e.sendFilterAjax()}),t.find("#filter-week").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","week"),e.sendFilterAjax()}),t.find("#filter-month").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","month"),e.sendFilterAjax()}),t.find("#filter-year").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","year"),e.sendFilterAjax()}),t.find("#filter-last-year").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","lastYear"),e.sendFilterAjax()}),t.find("#filter-history").on("click",function(){e.$.timeFilterContainer.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","history"),e.sendFilterAjax()});var a=$(".author-pick");$(window).width()<768&&a.each(function(){function e(e,i){0==f&&-1==e&&(f=s),f==s-1&&1==e?f=0:f+=e;var a=r*-f;t.css("transform","translateX("+a+"px)"),i.find("li").removeClass("active"),i.find("li").eq(f).addClass("active")}var t=$(this).find(".flex-row"),n=t.find(".list-container"),s=n.length;if(1!=s){var r=a.width(),o=r*s;t.css("width",o),n.css("width",r);var l="";for(i=0;i<s;i++)0==i?l+="<li class='active'></li>":l+="<li></li>";var c=$(this),d=new Hammer(c[0]),f=0;$(this).append("<ul>"+l+"</ul>"),d.on("swipeleft swiperight ",function(t){"swipeleft"==t.type&&e(1,c),"swiperight"==t.type&&e(-1,c)})}}),t.find(".btn-author-subscribe").on("click",function(){$(this).toggleClass("unsubscribe")});var n=$(".author-header .description"),s=n.height();if(console.log(s),s>250){n.addClass("hidden"),n.append('<div class="more-btn">more...</div>');$(".author-header .more-btn").on("click",function(){$(this).fadeOut(0),n.removeClass("hidden")})}},parseAjaxUrl:function(){return e.url.getAjaxUrl()},sendFilterAjax:function(){var e=this;$.ajax({type:"GET",url:e.parseAjaxUrl(),data:{html:1},contentType:"application/json"}).success(function(t){e.$.listContainer.html(t.html),t.current_page>=t.last_page?e.$.moreContainer.hide():e.$.moreContainer.show(),e.variable.page=1})}},e.$.$document.ready(function(){var t=e.$.$document.find("#tnl-author");t.length&&(e.author=new e.author(t),e.author.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.authors=t.authors||{},t.authors={init:function(){null!=document.getElementById("tnl-authors")&&t.authors.call()},call:function(){t.dom.resetHeight(".authors-container .col-md-4")}},t.$.$document.ready(function(){t.authors.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.business=e.business||{},e.business={init:function(){null!=document.getElementById("tnl-business")&&e.business.call()},call:function(){function e(){var e=window.location.pathname.replace("/business-blog","/author"),t=window.location.host.split("."),s=t[0],n=t[1]+"."+t[2];return null!=sessionStorage.getItem("type")&&null!=sessionStorage.getItem("date")?"//api."+n+"/web/"+s+e+"/"+sessionStorage.getItem("type")+"/"+sessionStorage.getItem("date"):null!=sessionStorage.getItem("type")?"//api."+n+"/web/"+s+e+"/"+sessionStorage.getItem("type"):"//api."+n+"/web/"+s+e}var t=$(".more-box"),s=1;window.location.pathname.split("/")[2];sessionStorage.setItem("page","business"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),t.on("click",function(){console.log(1!=$(this).data("ajaxStart")),1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),s++,$.ajax({type:"GET",url:e()+"?html=1&page="+s,contentType:"application/json"}).success(function(e){$("#list-container").append(e.html),e.current_page>=e.last_page?t.hide():t.show(),t.data("ajaxStart",!1)}))})}},e.$.$document.ready(function(){e.business.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(s){s.businessList=s.businessList||{},s.businessList={init:function(){null!=document.getElementById("tnl-business-list")&&s.businessList.call()},call:function(){sessionStorage.setItem("page","businesses"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date")}},s.$.$document.ready(function(){s.businessList.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.category=e.category||{},e.category={init:function(){document.getElementById("tnl-category")},call:function(){function e(){$.ajax({type:"GET",url:t()+"?html=1",contentType:"application/json"}).success(function(e){$("#list-container").html(e.html),e.current_page>=e.last_page?s.hide():s.show(),o=1})}function t(){var e=window.location.pathname,t=window.location.host.split("."),i=t[0],a=t[1]+"."+t[2];return null!=sessionStorage.getItem("type")&&null!=sessionStorage.getItem("date")?"//api."+a+"/web/"+i+e+"/"+sessionStorage.getItem("type")+"/"+sessionStorage.getItem("date"):null!=sessionStorage.getItem("type")?"//api."+a+"/web/"+i+e+"/"+sessionStorage.getItem("type"):"//api."+a+"/web/"+i+e}var i=$(".filter-container"),a=$(".time-filter-container"),s=$(".more-box"),o=1,n=window.location.pathname.split("/")[1],l=window.location.pathname.split("/")[2];l?sessionStorage.setItem("page","category-"+l):sessionStorage.setItem("page",n),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date"),s.on("click",function(){console.log(1!=$(this).data("ajaxStart")),1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),o++,$.ajax({type:"GET",url:t()+"?html=1&page="+o,contentType:"application/json"}).success(function(e){$("#list-container").append(e.html),e.current_page>=e.last_page?s.hide():s.show(),s.data("ajaxStart",!1)}))}),$("#filter-latest").on("click",function(){i.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date"),a.is(":visible")&&a.slideToggle(400),e()}),$("#filter-hot").on("click",function(){i.find("li.active").removeClass("active"),a.find("li.active").removeClass("active"),$("#filter-month").addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","hot"),sessionStorage.setItem("date","month"),a.is(":visible")||a.slideToggle(400),e()}),$("#filter-social").on("click",function(){i.find("li.active").removeClass("active"),a.find("li.active").removeClass("active"),$("#filter-month").addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","social"),sessionStorage.setItem("date","month"),a.is(":visible")||a.slideToggle(400),e()}),$("#filter-today").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","today"),e()}),$("#filter-week").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","week"),e()}),$("#filter-month").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","month"),e()}),$("#filter-year").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","year"),e()}),$("#filter-last-year").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","lastYear"),e()}),$("#filter-history").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","history"),e()})}},e.$.$document.ready(function(){e.category.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.categoryList=e.categoryList||{},e.categoryList={state:{filterSection:{$filterContainer:!1,$filterBoxRelateTimeHotSection:!1,$filterBoxRelateTimeSocialSection:!1,$filterPublishDateSection:!1},filter_date:{year:0,month:0},text:{default_month_placeholder:""}},$:{},init:function(){null!=document.querySelector(".category_list")&&(e.categoryList.initDom(),e.categoryList.bind(),e.categoryList.initSelector())},initDom:function(){this.$.$filterContainer=e.$.$document.find("#time-filter-container"),this.$.$filterBoxRelateTimeHotSection=e.$.$document.find("#filter-box-relate-time-hot"),this.$.$filterBoxRelateTimeSocialSection=e.$.$document.find("#filter-box-relate-time-social"),this.$.$filterPublishDateSection=e.$.$document.find("#filter-box-publish-date"),this.$.$CategoryFilterTrigger=e.$.$document.find(".category_filter_trigger"),this.$.$SelectMonthSection=e.$.$document.find(".select_month_section"),this.$.$TimeSelectorBtn=e.$.$document.find(".time-selector-btn"),this.$.$SelectYearPlaceholder=e.$.$document.find(".select_year_placeholder"),this.$.$SelectMonthPlaceholder=e.$.$document.find(".select_month_placeholder"),this.$.$SelectMonthDropDownMenuFirstOption=e.$.$document.find(".select_month_drop_down_menu > option").eq(0),this.state.text.default_month_placeholder=this.$.$SelectMonthPlaceholder.html(),this.$.$filterContainer.is(":visible")&&(this.state.filterSection.$filterContainer=!0),this.$.$filterBoxRelateTimeHotSection.is(":visible")&&(this.state.filterSection.$filterBoxRelateTimeHotSection=!0),this.$.$filterBoxRelateTimeSocialSection.is(":visible")&&(this.state.filterSection.$filterBoxRelateTimeSocialSection=!0),this.$.$filterPublishDateSection.is(":visible")&&(this.state.filterSection.$filterPublishDateSection=!0)},initSelector:function(){var t,i,o,n,l,c,r=[],a=new Date,s=a.getFullYear();for(t=2013;t<=s;t++)r.push(t);if(tnlInfo&&tnlInfo.category){if(tnlInfo.category.publish_date_list)for(var $ in r)t=r[$],tnlInfo.category.publish_date_list[t]||(o=".select_year_li_"+t,l=".select_year_option_"+t,e.$.$document.find(o).hide(),e.$.$document.find(l).hide());tnlInfo.category.select_list&&(t=tnlInfo.category.select_list.year,i=tnlInfo.category.select_list.month,o=".select_year_li_"+t,n=".select_month_li_"+i,l=".select_year_option_"+t,c=".select_month_option_"+i,$SelectYearLi=e.$.$document.find(o),$SelectYearLi.trigger("click"),$SelectMonthLi=e.$.$document.find(n),$SelectMonthLi.trigger("click"),$SelectYearOption=e.$.$document.find(l),$SelectYearOption.prop("selected",!0),$SelectMonthOption=e.$.$document.find(c),$SelectMonthOption.prop("selected",!0),this.setYearMonthSelector(t))}},setYearMonthSelector:function(t){if(tnlInfo&&t&&tnlInfo.category&&tnlInfo.category.publish_date_list&&tnlInfo.category.publish_date_list[t]){var i,o,n,l=tnlInfo.category.publish_date_list[t];for(i=1;i<=12;i++)o=".select_month_li_"+i,n=".select_month_option_"+i,-1==l.indexOf(i)?(e.$.$document.find(o).hide(),e.$.$document.find(n).hide()):(e.$.$document.find(o).show(),e.$.$document.find(n).show());0==this.state.filter_date.month&&(this.$.$SelectMonthPlaceholder.html(this.state.text.default_month_placeholder),this.$.$SelectMonthDropDownMenuFirstOption.prop("selected",!0))}},setMonthSelectorToDefault:function(){this.state.filter_date.month=0,this.$.$TimeSelectorBtn.addClass("unable")},bind:function(){var t=this;e.$.$document.on("click",".select_year_li",function(e){var i=this.dataset.year;t.state.filter_date.year=i,t.setMonthSelectorToDefault(),t.setYearMonthSelector(i),t.$.$SelectMonthSection.removeClass("unable")}),e.$.$document.on("click",".select_month_li",function(e){t.state.filter_date.month=this.dataset.month,t.$.$TimeSelectorBtn.removeClass("unable")}),e.$.$document.on("change",".select_year_drop_down_menu",function(e){var i=$(this),o=i.find("option:selected"),n=o.val();t.state.filter_date.year=n,t.setMonthSelectorToDefault(),t.setYearMonthSelector(n),t.$.$SelectMonthSection.removeClass("unable")}),e.$.$document.on("change",".select_month_drop_down_menu",function(e){var i=$(this),o=i.find("option:selected");t.state.filter_date.month=o.val(),t.$.$SelectMonthSection.removeClass("unable")}),e.$.$document.on("click",".time-selector-btn",function(e){var i,o=tnlInfo.category&&tnlInfo.category.base_url,n=t.state.filter_date.year,l=t.state.filter_date.month;o&&n>0&&l>0&&(i=o+"/year/{year}/month/{month}",i=i.replace(/\{year\}/gi,n),i=i.replace(/\{month\}/gi,l),location.href=i)}),e.$.$document.on("click",".category_filter_trigger",function(i){var o,n,l=$(this),c=!0,r=!0,a={$filterBoxRelateTimeHotSection:!1,$filterBoxRelateTimeSocialSection:!1,$filterPublishDateSection:!1},s=l.data("filter-type");switch(t.$.$CategoryFilterTrigger.removeClass("active"),l.addClass("active"),s){case"PublishTime":r=!1,c=!1;break;case"hot":a.$filterBoxRelateTimeHotSection=!0;break;case"social":a.$filterBoxRelateTimeSocialSection=!0;break;case"publish_date":a.$filterPublishDateSection=!0}for(n in a)o=a[n],t.state.filterSection[n]&&!o&&(t.$[n].slideToggle(400),t.state.filterSection[n]=o);for(n in a)o=a[n],!t.state.filterSection[n]&&o&&(t.$[n].slideToggle(400),t.state.filterSection[n]=o);r!=t.state.filterSection.$filterContainer&&(t.$.$filterContainer.slideToggle(400),t.state.filterSection.$filterContainer=r),c&&e.Util.eventStop(i)})}},e.$.$document.ready(function(){e.categoryList.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.job=e.job||{},e.job={init:function(){null!=document.getElementById("tnl-job")&&e.job.call()},call:function(){sessionStorage.removeItem("page"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),e.$.$document.on("click",".jobs-list li",function(){var e=$(this).index()+1,n=$(".standard-container").eq(e);$("body, html").animate({scrollTop:$(n).offset().top-80},700)})}},e.$.$document.ready(function(){e.job.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.officialBlog=e.officialBlog||{},e.officialBlog={init:function(){null!=document.getElementById("tnl-official-blog")&&e.officialBlog.call()},call:function(){function e(){$.ajax({type:"GET",url:t()+"?html=1",contentType:"application/json"}).success(function(e){$("#list-container").html(e.html),e.current_page>=e.last_page?s.hide():s.show(),o=1})}function t(){var e=window.location.pathname,t=window.location.host.split("."),i=t[0],a=t[1]+"."+t[2];return null!=sessionStorage.getItem("type")&&null!=sessionStorage.getItem("date")?"//api."+a+"/web/"+i+e+"/"+sessionStorage.getItem("type")+"/"+sessionStorage.getItem("date"):null!=sessionStorage.getItem("type")?"//api."+a+"/web/"+i+e+"/"+sessionStorage.getItem("type"):"//api."+a+"/web/"+i+e}sessionStorage.setItem("page","official-blog"),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date");var i=$(".filter-container"),a=$(".time-filter-container"),s=$(".more-box"),o=1;s.on("click",function(){console.log(1!=$(this).data("ajaxStart")),1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),o++,$.ajax({type:"GET",url:t()+"?html=1&page="+o,contentType:"application/json"}).success(function(e){$("#list-container").append(e.html),e.current_page>=e.last_page?s.hide():s.show(),s.data("ajaxStart",!1)}))}),$("#filter-latest").on("click",function(){i.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","latest"),sessionStorage.removeItem("date"),a.is(":visible")&&a.slideToggle(400),e()}),$("#filter-hot").on("click",function(){i.find("li.active").removeClass("active"),a.find("li.active").removeClass("active"),$("#filter-month").addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","hot"),sessionStorage.setItem("date","month"),a.is(":visible")||a.slideToggle(400),e()}),$("#filter-social").on("click",function(){i.find("li.active").removeClass("active"),a.find("li.active").removeClass("active"),$("#filter-month").addClass("active"),$(this).addClass("active"),sessionStorage.setItem("type","social"),sessionStorage.setItem("date","month"),a.is(":visible")||a.slideToggle(400),e()}),$("#filter-today").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","today"),e()}),$("#filter-week").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","week"),e()}),$("#filter-month").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","month"),e()}),$("#filter-year").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","year"),e()}),$("#filter-last-year").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","lastYear"),e()}),$("#filter-history").on("click",function(){a.find("li.active").removeClass("active"),$(this).addClass("active"),sessionStorage.setItem("date","history"),e()})}},e.$.$document.ready(function(){e.officialBlog.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.press=e.press||{},e.press={init:function(){null!=document.getElementById("tnl-press")&&e.press.call()},call:function(){function e(){var e,t="",s=window.location.host.split("."),a=s[0],n=s[1]+"."+s[2],o=window.location.pathname.split("/");for(var i in o)e=o[i],e.length&&(t+="/"+e);return null!=sessionStorage.getItem("type")&&null!=sessionStorage.getItem("date")?"//api."+n+"/web/"+a+t+"/"+sessionStorage.getItem("type")+"/"+sessionStorage.getItem("date"):null!=sessionStorage.getItem("type")?"//api."+n+"/web/"+a+t+"/"+sessionStorage.getItem("type"):"//api."+n+"/web/"+a+t}sessionStorage.setItem("page","press"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date");var t=$(".more-box"),s=1;t.on("click",function(){console.log(1!=$(this).data("ajaxStart")),1!=$(this).data("ajaxStart")&&($(this).data("ajaxStart",!0),s++,$.ajax({type:"GET",url:e()+"?html=1&page="+s,contentType:"application/json"}).success(function(e){$("#list-container").append(e.html),e.current_page>=e.last_page?t.hide():t.show(),t.data("ajaxStart",!1)}))})}},e.$.$document.ready(function(){e.press.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.tag=t.tag||{},t.tag={init:function(){null!=document.getElementById("tnl-tag")&&t.tag.call()},call:function(){t.dom.resetHeight(".row .col-sm-4")}},t.$.$document.ready(function(){t.tag.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.video=e.video||{},e.video={init:function(){null!=document.getElementById("tnl-video")&&e.video.call()},call:function(){sessionStorage.removeItem("page"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),e.dom.resetHeight(".col-sm-4")}},e.$.$document.ready(function(){e.video.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.videoCategory=e.videoCategory||{},e.videoCategory={init:function(){null!=document.getElementById("tnl-video-category")&&e.videoCategory.call()},call:function(){$(".filter-container"),$(".sub-filter-container"),$(".time-filter-container");sessionStorage.removeItem("page"),sessionStorage.removeItem("type"),sessionStorage.removeItem("date"),e.dom.resetHeight(".videoCat-container .col-sm-4")}},e.$.$document.ready(function(){e.videoCategory.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(i){i.subscribe=i.subscribe||{},i.subscribe=function(i){this.$.App=i},i.subscribe.prototype={constructor:i.subscribe,$:{},variable:{},init:function(){var i=this.$.App;this.$.$mailchimpBtn=i.find("#mailchimp-submit"),this.$.$mailchimpOutput=i.find("#mailchimp-output"),this.$.$email=i.find("#mailchimp-email"),this.$.$dailyTW=i.find('input[name="dailyTW"]'),this.$.$weekHot=i.find('input[name="weekHot"]'),this.$.$weekIntl=i.find('input[name="weekIntl"]'),this.$.$dailyIntlEng=i.find('input[name="dailyIntlEng"]'),this.$.$member=i.find('input[name="member"]'),this.$.$editorsPick=i.find('input[name="editorsPick"]'),this.$.$currentEventPick=i.find('input[name="currentEventPick"]'),this.$.$editorsPickHK=i.find('input[name="editorsPickHK"]'),this.$.$weekArtist=i.find('input[name="weekArtist"]'),this.bind()},bind:function(){var t=this;i.$.$document.on("submit","#subscribe-form",function(e){i.Util.eventStop(e);var n=$(this),a=t.$.$email.val().trim();if(!a.length)return alert("Please fill your email address"),!1;if(!validator.isEmail(a))return alert("Email format error, please check again."),!1;var r={dailyTW:t.$.$dailyTW.is(":checked")?1:0,weekHot:t.$.$weekHot.is(":checked")?1:0,weekIntl:t.$.$weekIntl.is(":checked")?1:0,dailyIntlEng:t.$.$dailyIntlEng.is(":checked")?1:0,member:t.$.$member.is(":checked")?1:0,editorsPick:t.$.$editorsPick.is(":checked")?1:0,currentEventPick:t.$.$currentEventPick.is(":checked")?1:0,editorsPickHK:t.$.$editorsPickHK.is(":checked")?1:0,weekArtist:t.$.$weekArtist.is(":checked")?1:0};return t.$.$mailchimpBtn.attr("disabled",""),t.$.$mailchimpOutput.html('<i class="fa fa-cog fa-spin fa-2x fa-fw margin-bottom" style="margin-top: 5px;"></i>'),$.ajax({url:n.attr("action"),method:"POST",data:{email:a,subscription:r},success:function(e){if(t.$.$mailchimpBtn.attr("disabled",!1),"error"==e.status)return i.auth.ajaxError(e),t.$.$mailchimpOutput.html("<p>"+e.error_message+"</p>"),!1;t.$.$mailchimpOutput.html("<p>"+e.output+"</p>")},error:function(i){console.log(i)}}),!1})},changeEmail:function(i){this.$.App.find('input[name="email"]').val(i).attr("readonly",!0).attr("disabled",!0)}},i.$.$document.ready(function(){var t=i.$.$document.find("#tnl-subscribe");t.length&&(i.subscribe=new i.subscribe(t),i.subscribe.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.search=n.search||{},n.search={init:function(){null!=document.getElementById("tnl-search")&&n.search.call()},call:function(){fbq("track","Search")}},n.$.$document.ready(function(){n.search.init()})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.forgetPassword=t.forgetPassword||{},t.forgetPassword=function(t){this.$.App=t},t.forgetPassword.prototype={constructor:t.forgetPassword,$:{},variable:{ajaxStart:!1},init:function(){this.$.$memberAlertContainer=this.$.App.find(".member-alert-container"),this.$.$memberAlertMessage=this.$.App.find(".member-alert-container ul li"),this.$.$submitFormBtn=this.$.App.find(".tnl-submit-btn"),this.bind()},bind:function(){var e=this;t.$.$document.on("submit","#tnl-forget-password-form",function(r){if(t.Util.eventStop(r),e.variable.ajaxStart)return!1;e.variable.ajaxStart=!0,e.$.$submitFormBtn.addClass("disabled");var a=$(this);a.find(".tnl-forget-password-loader").fadeIn(300),$.ajax({url:a.attr("action"),method:a.attr("method"),data:{email:a.find("input[name='email']").val()},success:function(t){if(a.find(".tnl-forget-password-loader").fadeOut(300),"error"==t.status)return console.log(t),!1;e.$.$memberAlertMessage.text(t.message),e.$.$memberAlertContainer.show(),e.changeAjaxStart()}})})},changeAjaxStart:function(){var t=this;setTimeout(function(){t.$.$submitFormBtn.removeClass("disabled"),t.variable.ajaxStart=!1},5e3)}},t.$.$document.ready(function(){var e=t.$.$document.find("#tnl-forget-password");e.length&&(t.forgetPassword=new t.forgetPassword(e),t.forgetPassword.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.resetPassword=t.resetPassword||{},t.resetPassword=function(t){this.$.App=t},t.resetPassword.prototype={constructor:t.resetPassword,$:{},variable:{ajaxStart:!1},init:function(){this.$.$memberAlertContainer=this.$.App.find(".member-alert-container"),this.$.$memberAlertMessage=this.$.App.find(".member-alert-container ul li"),this.$.$submitFormBtn=this.$.App.find(".tnl-submit-btn"),this.bind()},bind:function(){var e=this;t.$.$document.on("submit","#tnl-reset-password-form",function(s){if(t.Util.eventStop(s),e.variable.ajaxStart)return!1;e.variable.ajaxStart=!0,e.$.$submitFormBtn.addClass("disabled");var a=$(this);a.find(".tnl-reset-password-loader").fadeIn(300),$.ajax({url:a.attr("action"),method:a.attr("method"),data:{password:a.find("input[name='password']").val(),password_confirmation:a.find("input[name='password_confirmation']").val(),token:a.find("input[name='token']").val()},success:function(t){if(a.find(".tnl-reset-password-loader").fadeOut(300),"error"==t.status)return console.log(t),!1;e.$.$memberAlertMessage.text(t.message),e.$.$memberAlertContainer.show(),e.changeAjaxStart()}})})},changeAjaxStart:function(){var t=this;setTimeout(function(){t.$.$submitFormBtn.removeClass("disabled"),t.variable.ajaxStart=!1},5e3)}},t.$.$document.ready(function(){var e=t.$.$document.find("#tnl-reset-password");e.length&&(t.resetPassword=new t.resetPassword(e),t.resetPassword.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.security=t.security||{},t.security=t.security||{},t.security=function(t){this.$.$App=t},t.security.prototype={constructor:t.security,$:{template:{}},variable:{},init:function(){this.initDom(),this.bind()},initDom:function(){this.$.$SecurityCountDown=this.$.$App.find("#count-down"),this.$.$SecurityProgressBar=this.$.$App.find("#security-progress-bar")},bind:function(){this.bindUnderAttack()},bindUnderAttack:function(){var i=this;t.$.$document.ready(function(){function t(){n>-1&&(i.$.$SecurityCountDown.text(n),n--,setTimeout(t,1100))}var n=5;i.$.$SecurityProgressBar.css("width","100%"),t()})}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-security");i.length&&(t.security=new t.security(i),t.security.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(n){n.tldr=n.tldr||{},n.tldr=function(n){this.$.App=n},n.tldr.prototype={constructor:n.tldr,$:{},variable:{},init:function(){this.bind()},bind:function(){var n=$(window),t=$(".mask > img");n.on("scroll",function(){var r=n.scrollTop(),i="translateY("+.2*r+"px)";t.css("transform",i)})}},n.$.$document.ready(function(){var t=n.$.$document.find("#tnl-tldr");t.length&&(n.tldr=new n.tldr(t),n.tldr.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(t){t.tldrPosts=t.tldrPosts||{},t.tldrPosts=function(t){this.$.App=t},t.tldrPosts.prototype={constructor:t.tldrPosts,$:{},variable:{},init:function(){this.bind()},bind:function(){function t(t,e){for(i=0;i<t+1;i++)e.append("<li></li>");e.find("li").eq(0).addClass("active")}function e(t){var e=C+t;if(!(e<=-1||e>=w+1)){if(C=e,C==w?x.fadeOut(300):x.fadeIn(300),m.find("li").removeClass("active"),m.find("li").eq(e).addClass("active"),0==e)return b.addClass("first-view"),void u.removeClass("active");for(u.removeClass("active"),e++,i=0;i<e-1;i++)u.eq(i).addClass("active")}}var s=$(window),n=$(".mask > img");s.on("scroll",function(){var t=s.scrollTop(),i="translateY("+.2*t+"px)";n.css("transform",i)});var r=$(".cards-index-section .zone"),a=$(".cards-slider-container"),o=$(".cards-slider-box"),d=$(".cards-navi-dot ul"),l=o.length,c=Math.ceil(l/4),f=r.width(),v=f/4,h=v*l,p=$(window).width(),u=($(window).height(),$(".each-card")),w=u.length,m=$(".card-navi-dot ul"),C=($(".cards-body-slider"),0),g=$(".card-section");p>776&&g.length>1?(t(c,d),a.css("width",h),o.css("width",v)):t(w,m);var y=document.getElementsByClassName("cards-body-slider");if(y.length>0){var P=new Hammer(y[0]),b=($(".swipe-tip"),$(".first-view")),T=$(".next-tip");P.on("swipeleft swiperight ",function(t){if($(".first-view").length>0&&"swipeleft"==t.type)return b.removeClass("first-view"),void e(1);if(T.hasClass("active")&&"swiperight"==t.type)return void T.removeClass("active");if(T.hasClass("active")&&"swipeleft"==t.type){var i=$(".next-article-link").attr("href");window.location.href=i}return"swipeleft"==t.type?(e(1),!1):"swiperight"==t.type?(e(-1),!1):void 0});var x=$(".right"),k=$(".left");x.on("click",function(){if(0==C)return b.removeClass("first-view"),void e(1);e(1)}),k.on("click",function(){e(-1)})}}},t.$.$document.ready(function(){var i=t.$.$document.find("#tnl-tldrPosts");i.length&&(tp.push(["setContentCreated",tnlInfo.Tldr.published_at]),tp.push(["setContentAuthor",tnlInfo.Tldr.user.DName]),t.tldrPosts=new t.tldrPosts(i),t.tldrPosts.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
!function(e){e.aces2017=e.aces2017||{},e.aces2017.member=e.aces2017.member||{},e.aces2017.member=function(e){this.$.App=e},e.aces2017.member.prototype={constructor:e.aces2017.member,$:{},variable:{},init:function(){this.initDom(),this.bind()},initDom:function(){this.$.termsNext=e.$.$document.find("#tnl-aces2017-terms-next"),this.$.MemberAccountMessageInfo=e.$.$document.find("#member-account-message-info")},bind:function(){this.BindCollection.MemberSignUp.init(this),this.BindCollection.MemberTerms.init(this),this.BindCollection.MemberVerifyEmail.init(this),this.BindCollection.MemberSignIn.init(this)},BindCollection:{MemberSignIn:{parent:null,variable:{resend_status:!1},init:function(e){this.parent=e,this.bindMemberSignIn()},bindMemberSignIn:function(){this.parent;window.addEventListener("message",function(n){~n.origin.indexOf(e.url.variable.domain)&&(console.log(n.data),"login_success"==n.data.status&&(console.log("success"),window.location="/events/aces2017/booking-ticket"),"login_error"==n.data.status&&alert(n.data.error_message))}),e.$.$document.on("click",".fb-aces2017-sign-up-btn",function(n){e.Util.eventStop(n);e.dom.PopupCenter("/events/aces2017/auth/member/facebook/sign-in","Facebook Login","600","450")}),e.$.$document.on("click",".google-aces2017-sign-up-btn",function(n){e.Util.eventStop(n);e.dom.PopupCenter("/events/aces2017/auth/member/google/sign-in","Google Login","600","450")}),e.$.$document.on("click",".tnl-aces2017-sign-in-btn",function(n){e.Util.eventStop(n),window.location="/events/aces2017/auth/member/sign-in"}),e.$.$document.on("click",".tnl-aces2017-sign-up-btn",function(n){e.Util.eventStop(n),window.location="/events/aces2017/auth/member/sign-up"}),e.$.$document.on("click",".tnl-aces2017-sign-in-process-btn:not(.disabled)",function(){$(this).parents("form").submit()}),e.$.$document.on("submit","#tnl-aces2017-sign-in-form",function(n){e.Util.eventStop(n);var t=$(this);t.find(".tnl-sign-in-loader").fadeIn(300),$.ajax({url:t.attr("action"),method:t.attr("method"),data:{email:t.find("input[name='email']").val(),password:t.find("input[name='password']").val()},success:function(e){t.find(".tnl-sign-in-loader").fadeOut(300),"success"==e.status?(console.log("success"),window.location="/events/aces2017/booking-ticket"):alert(e.error_message)}})})}},MemberVerifyEmail:{parent:null,variable:{resend_status:!1,check_status:!1},init:function(e){this.parent=e,this.bindMemberVerifyEmail()},bindMemberVerifyEmail:function(){var n=this.parent,t=this;e.$.$document.on("click","#tnl-aces2017-go-to-get-ticket-btn",function(i){if(e.Util.eventStop(i),t.variable.check_status)return void alert("檢查中，請稍候...");t.variable.check_status=!0,n.$.App.find(".tnl-sign-up-loader").fadeIn(300),n.$.MemberAccountMessageInfo.fadeOut(300),$.ajax({url:"/events/aces2017/auth/confirmation/verify-mail-status",method:"POST",success:function(e){if(console.log(e),n.$.App.find(".tnl-sign-up-loader").fadeOut(300),"error"==e.status)return alert(e.error_message),!1;t.variable.check_status=!1,"N"==e.message.email_verify_status?n.$.MemberAccountMessageInfo.fadeIn(300):window.location="/events/aces2017/booking-ticket"}})}),e.$.$document.on("click",".tnl-aces2017-resend-confirmation",function(i){e.Util.eventStop(i);var s=$(this);if(t.variable.resend_status)return void alert("寄送驗證信中，請稍候...");t.variable.resend_status=!0,n.$.App.find(".tnl-sign-up-loader").fadeIn(300),s.parent().hide(),$.ajax({url:"/events/aces2017/auth/confirmation/verify-mail-resend",method:"POST",success:function(e){if(console.log(e),n.$.App.find(".tnl-sign-up-loader").fadeOut(300),s.parent().show(),"error"==e.status)return alert(e.error_message),!1;alert("驗證信重寄成功"),t.variable.resend_status=!1}})})}},MemberTerms:{parent:null,init:function(e){this.parent=e,this.bindMemberTerms()},bindMemberTerms:function(){var n=this.parent;e.$.$document.on("click","#tnl-aces2017-terms-check",function(e){$(this).is(":checked")?n.$.termsNext.removeClass("disabled"):n.$.termsNext.addClass("disabled")}),e.$.$document.on("click","#tnl-aces2017-terms-return",function(e){window.location="https://aces2017.thenewslens.com/"}),e.$.$document.on("click","#tnl-aces2017-terms-next",function(e){var n=$(this);if(n.hasClass("disabled"))return alert("尚未勾選同意隱私權"),!1;n.parent().find(".tnl-terms-loader").fadeIn(300),$.ajax({url:"/events/aces2017/auth/member/agree-privacy",type:"POST",success:function(e){if(n.parent().find(".tnl-terms-loader").fadeOut(300),"error"==e.status)return alert(e.error_message),!1;window.location="/events/aces2017/auth/confirmation/verify-mail"},error:function(e){console.log(e)}})})}},MemberSignUp:{parent:null,init:function(e){this.parent=e,this.bindMemberAuth()},bindMemberAuth:function(){this.parent;console.log("bind auth"),e.$.$document.on("click",".tnl-aces2017-member-sign-up-submit-btn:not(.disabled)",function(){$(this).parents("form").submit()}),e.$.$document.on("submit","#tnl-aces2017-sign-up-form",function(n){e.Util.eventStop(n);var t=$(this);t.find(".tnl-sign-up-loader").fadeIn(300),$.ajax({url:t.attr("action"),method:t.attr("method"),data:{full_name:t.find("input[name='full-name']").val(),email:t.find("input[name='email']").val(),password:t.find("input[name='password']").val(),password_confirmation:t.find("input[name='password-confirmation']").val()},success:function(e){console.log(e),t.find(".tnl-sign-up-loader").fadeOut(300),"success"==e.status?(console.log("success"),window.location="/events/aces2017/auth/member/terms"):alert(e.error_message)}})})}}}},e.$.$document.ready(function(){var n=e.$.$document.find("#tnl-aces2017-member-auth");n.length&&(e.aces2017.member=new e.aces2017.member(n),e.aces2017.member.init())})}("undefined"!=typeof Tnl?Tnl:this.Tnl={});
try{if(tnlInfo=tnlInfo||{},tnlInfo&&tnlInfo.page_id&&!tnlInfo.is_draft){var content_insight_sites={1:"1382",2:"2172",3:"2173",4:"2174"},content_insight_id=content_insight_sites[tnlInfo.SID];tnlInfo=tnlInfo||{},tnlInfo.post_title=tnlInfo.post_title||"",tnlInfo.main_category=tnlInfo.main_category||"",tnlInfo.publish_time=tnlInfo.publish_time||"",tnlInfo.author_name=tnlInfo.author_name||"",tnlInfo.tags_list=tnlInfo.tags_list||"";var maincontent_selector="#article-title-{post_id}, #article-content-{post_id}";maincontent_selector=maincontent_selector.replace(new RegExp("{post_id}","g"),tnlInfo.page_id);var _ain={id:content_insight_id,url:window.location.href,postid:tnlInfo.page_id,maincontent:maincontent_selector,title:tnlInfo.post_title,pubdate:tnlInfo.publish_time,authors:tnlInfo.author_name,sections:tnlInfo.main_category,tags:tnlInfo.tracking_tags_list,comments:"0",word_count:Tnl.Util.getArticleWordCount().toString()};!function(t,n){var o=t.createElement(n);o.type="text/javascript",o.async=!0,o.src=("https:"==t.location.protocol?"https://d7d3cf2e81d293050033-3dfc0615b0fd7b49143049256703bfce.ssl.cf1.rackcdn.com":"http://t.contentinsights.com")+"/stf.js";var e=t.getElementsByTagName(n)[0];e.parentNode.insertBefore(o,e)}(document,"script")}}catch(t){console.log("== Content Insight ==",t)}