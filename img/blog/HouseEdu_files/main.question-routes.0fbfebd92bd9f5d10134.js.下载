(window.webpackJsonp=window.webpackJsonp||[]).push([[10],Array(1784).concat([function(e,t,n){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return i(e)?e:K(e)}function r(e){return s(e)?e:W(e)}function a(e){return c(e)?e:G(e)}function o(e){return i(e)&&!l(e)?e:J(e)}function i(e){return!(!e||!e[d])}function s(e){return!(!e||!e[p])}function c(e){return!(!e||!e[f])}function l(e){return s(e)||c(e)}function u(e){return!(!e||!e[h])}t(r,n),t(a,n),t(o,n),n.isIterable=i,n.isKeyed=s,n.isIndexed=c,n.isAssociative=l,n.isOrdered=u,n.Keyed=r,n.Indexed=a,n.Set=o;var d="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",h="@@__IMMUTABLE_ORDERED__@@",b=5,m=1<<b,v=m-1,g={},y={value:!1},O={value:!1};function j(e){return e.value=!1,e}function w(e){e&&(e.value=!0)}function C(){}function k(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),a=0;a<n;a++)r[a]=e[a+t];return r}function S(e){return void 0===e.size&&(e.size=e.__iterate(A)),e.size}function N(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?S(e)+t:t}function A(){return!0}function T(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function _(e,t){return x(e,t,0)}function E(e,t){return x(e,t,t)}function x(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var I=0,M=1,R=2,D="function"==typeof Symbol&&Symbol.iterator,L="@@iterator",P=D||L;function B(e){this.next=e}function z(e,t,n,r){var a=0===e?t:1===e?n:[t,n];return r?r.value=a:r={value:a,done:!1},r}function q(){return{value:void 0,done:!0}}function F(e){return!!Q(e)}function U(e){return e&&"function"==typeof e.next}function V(e){var t=Q(e);return t&&t.call(e)}function Q(e){var t=e&&(D&&e[D]||e[L]);if("function"==typeof t)return t}function H(e){return e&&"number"==typeof e.length}function K(e){return null==e?oe():i(e)?e.toSeq():function(e){var t=ce(e)||"object"==typeof e&&new te(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function W(e){return null==e?oe().toKeyedSeq():i(e)?s(e)?e.toSeq():e.fromEntrySeq():ie(e)}function G(e){return null==e?oe():i(e)?s(e)?e.entrySeq():e.toIndexedSeq():se(e)}function J(e){return(null==e?oe():i(e)?s(e)?e.entrySeq():e:se(e)).toSetSeq()}B.prototype.toString=function(){return"[Iterator]"},B.KEYS=I,B.VALUES=M,B.ENTRIES=R,B.prototype.inspect=B.prototype.toSource=function(){return this.toString()},B.prototype[P]=function(){return this},t(K,n),K.of=function(){return K(arguments)},K.prototype.toSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq {","}")},K.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},K.prototype.__iterate=function(e,t){return le(this,e,t,!0)},K.prototype.__iterator=function(e,t){return ue(this,e,t,!0)},t(W,K),W.prototype.toKeyedSeq=function(){return this},t(G,K),G.of=function(){return G(arguments)},G.prototype.toIndexedSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq [","]")},G.prototype.__iterate=function(e,t){return le(this,e,t,!1)},G.prototype.__iterator=function(e,t){return ue(this,e,t,!1)},t(J,K),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},K.isSeq=ae,K.Keyed=W,K.Set=J,K.Indexed=G;var Y,X,$,Z="@@__IMMUTABLE_SEQ__@@";function ee(e){this._array=e,this.size=e.length}function te(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function re(e){this._iterator=e,this._iteratorCache=[]}function ae(e){return!(!e||!e[Z])}function oe(){return Y||(Y=new ee([]))}function ie(e){var t=Array.isArray(e)?new ee(e).fromEntrySeq():U(e)?new re(e).fromEntrySeq():F(e)?new ne(e).fromEntrySeq():"object"==typeof e?new te(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function se(e){var t=ce(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function ce(e){return H(e)?new ee(e):U(e)?new re(e):F(e)?new ne(e):void 0}function le(e,t,n,r){var a=e._cache;if(a){for(var o=a.length-1,i=0;i<=o;i++){var s=a[n?o-i:i];if(!1===t(s[1],r?s[0]:i,e))return i+1}return i}return e.__iterateUncached(t,n)}function ue(e,t,n,r){var a=e._cache;if(a){var o=a.length-1,i=0;return new B(function(){var e=a[n?o-i:i];return i++>o?{value:void 0,done:!0}:z(t,r?e[0]:i-1,e[1])})}return e.__iteratorUncached(t,n)}function de(e,t){return t?function e(t,n,r,a){return Array.isArray(n)?t.call(a,r,G(n).map(function(r,a){return e(t,r,a,n)})):fe(n)?t.call(a,r,W(n).map(function(r,a){return e(t,r,a,n)})):n}(t,e,"",{"":e}):pe(e)}function pe(e){return Array.isArray(e)?G(e).map(pe).toList():fe(e)?W(e).map(pe).toMap():e}function fe(e){return e&&(e.constructor===Object||void 0===e.constructor)}function he(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function be(e,t){if(e===t)return!0;if(!i(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||c(e)!==c(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!l(e);if(u(e)){var r=e.entries();return t.every(function(e,t){var a=r.next().value;return a&&he(a[1],e)&&(n||he(a[0],t))})&&r.next().done}var a=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{a=!0;var o=e;e=t,t=o}var d=!0,p=t.__iterate(function(t,r){if(n?!e.has(t):a?!he(t,e.get(r,g)):!he(e.get(r,g),t))return d=!1,!1});return d&&e.size===p}function me(e,t){if(!(this instanceof me))return new me(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(X)return X;X=this}}function ve(e,t){if(!e)throw new Error(t)}function ge(e,t,n){if(!(this instanceof ge))return new ge(e,t,n);if(ve(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if($)return $;$=this}}function ye(){throw TypeError("Abstract")}function Oe(){}function je(){}function we(){}K.prototype[Z]=!0,t(ee,G),ee.prototype.get=function(e,t){return this.has(e)?this._array[N(this,e)]:t},ee.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,a=0;a<=r;a++)if(!1===e(n[t?r-a:a],a,this))return a+1;return a},ee.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,a=0;return new B(function(){return a>r?{value:void 0,done:!0}:z(e,a,n[t?r-a++:a++])})},t(te,W),te.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},te.prototype.has=function(e){return this._object.hasOwnProperty(e)},te.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,a=r.length-1,o=0;o<=a;o++){var i=r[t?a-o:o];if(!1===e(n[i],i,this))return o+1}return o},te.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,a=r.length-1,o=0;return new B(function(){var i=r[t?a-o:o];return o++>a?{value:void 0,done:!0}:z(e,i,n[i])})},te.prototype[h]=!0,t(ne,G),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=V(n),a=0;if(U(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,a++,this););return a},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=V(n);if(!U(r))return new B(q);var a=0;return new B(function(){var t=r.next();return t.done?t:z(e,a++,t.value)})},t(re,G),re.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,a=this._iteratorCache,o=0;o<a.length;)if(!1===e(a[o],o++,this))return o;for(;!(n=r.next()).done;){var i=n.value;if(a[o]=i,!1===e(i,o++,this))break}return o},re.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,a=0;return new B(function(){if(a>=r.length){var t=n.next();if(t.done)return t;r[a]=t.value}return z(e,a,r[a++])})},t(me,G),me.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},me.prototype.get=function(e,t){return this.has(e)?this._value:t},me.prototype.includes=function(e){return he(this._value,e)},me.prototype.slice=function(e,t){var n=this.size;return T(e,t,n)?this:new me(this._value,E(t,n)-_(e,n))},me.prototype.reverse=function(){return this},me.prototype.indexOf=function(e){return he(this._value,e)?0:-1},me.prototype.lastIndexOf=function(e){return he(this._value,e)?this.size:-1},me.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},me.prototype.__iterator=function(e,t){var n=this,r=0;return new B(function(){return r<n.size?z(e,r++,n._value):{value:void 0,done:!0}})},me.prototype.equals=function(e){return e instanceof me?he(this._value,e._value):be(e)},t(ge,G),ge.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},ge.prototype.get=function(e,t){return this.has(e)?this._start+N(this,e)*this._step:t},ge.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},ge.prototype.slice=function(e,t){return T(e,t,this.size)?this:(e=_(e,this.size),(t=E(t,this.size))<=e?new ge(0,0):new ge(this.get(e,this._end),this.get(t,this._end),this._step))},ge.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},ge.prototype.lastIndexOf=function(e){return this.indexOf(e)},ge.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,a=t?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===e(a,o,this))return o+1;a+=t?-r:r}return o},ge.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,a=t?this._start+n*r:this._start,o=0;return new B(function(){var i=a;return a+=t?-r:r,o>n?{value:void 0,done:!0}:z(e,o++,i)})},ge.prototype.equals=function(e){return e instanceof ge?this._start===e._start&&this._end===e._end&&this._step===e._step:be(this,e)},t(ye,n),t(Oe,ye),t(je,ye),t(we,ye),ye.Keyed=Oe,ye.Indexed=je,ye.Set=we;var Ce="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function ke(e){return e>>>1&1073741824|3221225471&e}function Se(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t,n,r=typeof e;if("number"===r){var a=0|e;for(a!==e&&(a^=4294967295*e);e>4294967295;)a^=e/=4294967295;return ke(a)}if("string"===r)return e.length>Me?(void 0===(n=Le[t=e])&&(n=Ne(t),De===Re&&(De=0,Le={}),De++,Le[t]=n),n):Ne(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===r)return function(e){var t;if(Ee&&void 0!==(t=Ae.get(e)))return t;if(void 0!==(t=e[Ie]))return t;if(!_e){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ie]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++xe,1073741824&xe&&(xe=0),Ee)Ae.set(e,t);else{if(void 0!==Te&&!1===Te(e))throw new Error("Non-extensible objects are not allowed as keys.");if(_e)Object.defineProperty(e,Ie,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ie]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ie]=t}}return t}(e);if("function"==typeof e.toString)return Ne(e.toString());throw new Error("Value type "+r+" cannot be hashed.")}function Ne(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ke(t)}var Ae,Te=Object.isExtensible,_e=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Ee="function"==typeof WeakMap;Ee&&(Ae=new WeakMap);var xe=0,Ie="__immutablehash__";"function"==typeof Symbol&&(Ie=Symbol(Ie));var Me=16,Re=255,De=0,Le={};function Pe(e){ve(e!==1/0,"Cannot perform this action with an infinite size.")}function Be(e){return null==e?$e():ze(e)&&!u(e)?e:$e().withMutations(function(t){var n=r(e);Pe(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function ze(e){return!(!e||!e[Fe])}t(Be,Oe),Be.prototype.toString=function(){return this.__toString("Map {","}")},Be.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Be.prototype.set=function(e,t){return Ze(this,e,t)},Be.prototype.setIn=function(e,t){return this.updateIn(e,g,function(){return t})},Be.prototype.remove=function(e){return Ze(this,e,g)},Be.prototype.deleteIn=function(e){return this.updateIn(e,function(){return g})},Be.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Be.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=function e(t,n,r,a){var o=t===g,i=n.next();if(i.done){var s=o?r:t,c=a(s);return c===s?t:c}ve(o||t&&t.set,"invalid keyPath");var l=i.value,u=o?g:t.get(l,g),d=e(u,n,r,a);return d===u?t:d===g?t.remove(l):(o?$e():t).set(l,d)}(this,nn(e),t,n);return r===g?void 0:r},Be.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$e()},Be.prototype.merge=function(){return rt(this,void 0,arguments)},Be.prototype.mergeWith=function(t){var n=e.call(arguments,1);return rt(this,t,n)},Be.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,$e(),function(e){return"function"==typeof e.merge?e.merge.apply(e,n):n[n.length-1]})},Be.prototype.mergeDeep=function(){return rt(this,at,arguments)},Be.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return rt(this,ot(t),n)},Be.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,$e(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]})},Be.prototype.sort=function(e){return _t(Ht(this,e))},Be.prototype.sortBy=function(e,t){return _t(Ht(this,t,e))},Be.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new C)},Be.prototype.asImmutable=function(){return this.__ensureOwner()},Be.prototype.wasAltered=function(){return this.__altered},Be.prototype.__iterator=function(e,t){return new Ge(this,e,t)},Be.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},Be.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Xe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Be.isMap=ze;var qe,Fe="@@__IMMUTABLE_MAP__@@",Ue=Be.prototype;function Ve(e,t){this.ownerID=e,this.entries=t}function Qe(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function He(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Ke(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function We(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function Ge(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ye(e._root)}function Je(e,t){return z(e,t[0],t[1])}function Ye(e,t){return{node:e,index:0,__prev:t}}function Xe(e,t,n,r){var a=Object.create(Ue);return a.size=e,a._root=t,a.__ownerID=n,a.__hash=r,a.__altered=!1,a}function $e(){return qe||(qe=Xe(0))}function Ze(e,t,n){var r,a;if(e._root){var o=j(y),i=j(O);if(r=et(e._root,e.__ownerID,0,void 0,t,n,o,i),!i.value)return e;a=e.size+(o.value?n===g?-1:1:0)}else{if(n===g)return e;a=1,r=new Ve(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=a,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Xe(a,r):$e()}function et(e,t,n,r,a,o,i,s){return e?e.update(t,n,r,a,o,i,s):o===g?e:(w(s),w(i),new We(t,r,[a,o]))}function tt(e){return e.constructor===We||e.constructor===Ke}function nt(e,t,n,r,a){if(e.keyHash===r)return new Ke(t,r,[e.entry,a]);var o,i=(0===n?e.keyHash:e.keyHash>>>n)&v,s=(0===n?r:r>>>n)&v,c=i===s?[nt(e,t,n+b,r,a)]:(o=new We(t,r,a),i<s?[e,o]:[o,e]);return new Qe(t,1<<i|1<<s,c)}function rt(e,t,n){for(var a=[],o=0;o<n.length;o++){var s=n[o],c=r(s);i(s)||(c=c.map(function(e){return de(e)})),a.push(c)}return it(e,t,a)}function at(e,t,n){return e&&e.mergeDeep&&i(t)?e.mergeDeep(t):he(e,t)?e:t}function ot(e){return function(t,n,r){if(t&&t.mergeDeepWith&&i(n))return t.mergeDeepWith(e,n);var a=e(t,n,r);return he(t,a)?t:a}}function it(e,t,n){return 0===(n=n.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,g,function(e){return e===g?n:t(e,n,r)})}:function(t,n){e.set(n,t)},a=0;a<n.length;a++)n[a].forEach(r)}):e.constructor(n[0])}function st(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function ct(e,t,n,r){var a=r?e:k(e);return a[t]=n,a}Ue[Fe]=!0,Ue.delete=Ue.remove,Ue.removeIn=Ue.deleteIn,Ve.prototype.get=function(e,t,n,r){for(var a=this.entries,o=0,i=a.length;o<i;o++)if(he(n,a[o][0]))return a[o][1];return r},Ve.prototype.update=function(e,t,n,r,a,o,i){for(var s=a===g,c=this.entries,l=0,u=c.length;l<u&&!he(r,c[l][0]);l++);var d=l<u;if(d?c[l][1]===a:s)return this;if(w(i),(s||!d)&&w(o),!s||1!==c.length){if(!d&&!s&&c.length>=lt)return function(e,t,n,r){e||(e=new C);for(var a=new We(e,Se(n),[n,r]),o=0;o<t.length;o++){var i=t[o];a=a.update(e,0,void 0,i[0],i[1])}return a}(e,c,r,a);var p=e&&e===this.ownerID,f=p?c:k(c);return d?s?l===u-1?f.pop():f[l]=f.pop():f[l]=[r,a]:f.push([r,a]),p?(this.entries=f,this):new Ve(e,f)}},Qe.prototype.get=function(e,t,n,r){void 0===t&&(t=Se(n));var a=1<<((0===e?t:t>>>e)&v),o=this.bitmap;return 0==(o&a)?r:this.nodes[st(o&a-1)].get(e+b,t,n,r)},Qe.prototype.update=function(e,t,n,r,a,o,i){void 0===n&&(n=Se(r));var s=(0===t?n:n>>>t)&v,c=1<<s,l=this.bitmap,u=0!=(l&c);if(!u&&a===g)return this;var d=st(l&c-1),p=this.nodes,f=u?p[d]:void 0,h=et(f,e,t+b,n,r,a,o,i);if(h===f)return this;if(!u&&h&&p.length>=ut)return function(e,t,n,r,a){for(var o=0,i=new Array(m),s=0;0!==n;s++,n>>>=1)i[s]=1&n?t[o++]:void 0;return i[r]=a,new He(e,o+1,i)}(e,p,l,s,h);if(u&&!h&&2===p.length&&tt(p[1^d]))return p[1^d];if(u&&h&&1===p.length&&tt(h))return h;var y=e&&e===this.ownerID,O=u?h?l:l^c:l|c,j=u?h?ct(p,d,h,y):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var a=new Array(r),o=0,i=0;i<r;i++)i===t&&(o=1),a[i]=e[i+o];return a}(p,d,y):function(e,t,n,r){var a=e.length+1;if(r&&t+1===a)return e[t]=n,e;for(var o=new Array(a),i=0,s=0;s<a;s++)s===t?(o[s]=n,i=-1):o[s]=e[s+i];return o}(p,d,h,y);return y?(this.bitmap=O,this.nodes=j,this):new Qe(e,O,j)},He.prototype.get=function(e,t,n,r){void 0===t&&(t=Se(n));var a=(0===e?t:t>>>e)&v,o=this.nodes[a];return o?o.get(e+b,t,n,r):r},He.prototype.update=function(e,t,n,r,a,o,i){void 0===n&&(n=Se(r));var s=(0===t?n:n>>>t)&v,c=a===g,l=this.nodes,u=l[s];if(c&&!u)return this;var d=et(u,e,t+b,n,r,a,o,i);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<dt)return function(e,t,n,r){for(var a=0,o=0,i=new Array(n),s=0,c=1,l=t.length;s<l;s++,c<<=1){var u=t[s];void 0!==u&&s!==r&&(a|=c,i[o++]=u)}return new Qe(e,a,i)}(e,l,p,s)}else p++;var f=e&&e===this.ownerID,h=ct(l,s,d,f);return f?(this.count=p,this.nodes=h,this):new He(e,p,h)},Ke.prototype.get=function(e,t,n,r){for(var a=this.entries,o=0,i=a.length;o<i;o++)if(he(n,a[o][0]))return a[o][1];return r},Ke.prototype.update=function(e,t,n,r,a,o,i){void 0===n&&(n=Se(r));var s=a===g;if(n!==this.keyHash)return s?this:(w(i),w(o),nt(this,e,t,n,[r,a]));for(var c=this.entries,l=0,u=c.length;l<u&&!he(r,c[l][0]);l++);var d=l<u;if(d?c[l][1]===a:s)return this;if(w(i),(s||!d)&&w(o),s&&2===u)return new We(e,this.keyHash,c[1^l]);var p=e&&e===this.ownerID,f=p?c:k(c);return d?s?l===u-1?f.pop():f[l]=f.pop():f[l]=[r,a]:f.push([r,a]),p?(this.entries=f,this):new Ke(e,this.keyHash,f)},We.prototype.get=function(e,t,n,r){return he(n,this.entry[0])?this.entry[1]:r},We.prototype.update=function(e,t,n,r,a,o,i){var s=a===g,c=he(r,this.entry[0]);return(c?a===this.entry[1]:s)?this:(w(i),s?void w(o):c?e&&e===this.ownerID?(this.entry[1]=a,this):new We(e,this.keyHash,[r,a]):(w(o),nt(this,e,t,Se(r),[r,a])))},Ve.prototype.iterate=Ke.prototype.iterate=function(e,t){for(var n=this.entries,r=0,a=n.length-1;r<=a;r++)if(!1===e(n[t?a-r:r]))return!1},Qe.prototype.iterate=He.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,a=n.length-1;r<=a;r++){var o=n[t?a-r:r];if(o&&!1===o.iterate(e,t))return!1}},We.prototype.iterate=function(e,t){return e(this.entry)},t(Ge,B),Ge.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,a=t.index++;if(r.entry){if(0===a)return Je(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,a<=n)return Je(e,r.entries[this._reverse?n-a:a])}else if(n=r.nodes.length-1,a<=n){var o=r.nodes[this._reverse?n-a:a];if(o){if(o.entry)return Je(e,o.entry);t=this._stack=Ye(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var lt=m/4,ut=m/2,dt=m/4;function pt(e){var t=wt();if(null==e)return t;if(ft(e))return e;var n=a(e),r=n.size;return 0===r?t:(Pe(r),r>0&&r<m?jt(0,r,b,null,new mt(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function ft(e){return!(!e||!e[ht])}t(pt,je),pt.of=function(){return this(arguments)},pt.prototype.toString=function(){return this.__toString("List [","]")},pt.prototype.get=function(e,t){if((e=N(this,e))>=0&&e<this.size){var n=St(this,e+=this._origin);return n&&n.array[e&v]}return t},pt.prototype.set=function(e,t){return function(e,t,n){if((t=N(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Nt(e,t).set(0,n):Nt(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,a=e._root,o=j(O);return t>=Tt(e._capacity)?r=Ct(r,e.__ownerID,0,t,n,o):a=Ct(a,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=a,e._tail=r,e.__hash=void 0,e.__altered=!0,e):jt(e._origin,e._capacity,e._level,a,r):e}(this,e,t)},pt.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},pt.prototype.insert=function(e,t){return this.splice(e,0,t)},pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=b,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):wt()},pt.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Nt(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},pt.prototype.pop=function(){return Nt(this,0,-1)},pt.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Nt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},pt.prototype.shift=function(){return Nt(this,1)},pt.prototype.merge=function(){return At(this,void 0,arguments)},pt.prototype.mergeWith=function(t){var n=e.call(arguments,1);return At(this,t,n)},pt.prototype.mergeDeep=function(){return At(this,at,arguments)},pt.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return At(this,ot(t),n)},pt.prototype.setSize=function(e){return Nt(this,0,e)},pt.prototype.slice=function(e,t){var n=this.size;return T(e,t,n)?this:Nt(this,_(e,n),E(t,n))},pt.prototype.__iterator=function(e,t){var n=0,r=Ot(this,t);return new B(function(){var t=r();return t===yt?{value:void 0,done:!0}:z(e,n++,t)})},pt.prototype.__iterate=function(e,t){for(var n,r=0,a=Ot(this,t);(n=a())!==yt&&!1!==e(n,r++,this););return r},pt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?jt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},pt.isList=ft;var ht="@@__IMMUTABLE_LIST__@@",bt=pt.prototype;function mt(e,t){this.array=e,this.ownerID=t}bt[ht]=!0,bt.delete=bt.remove,bt.setIn=Ue.setIn,bt.deleteIn=bt.removeIn=Ue.removeIn,bt.update=Ue.update,bt.updateIn=Ue.updateIn,bt.mergeIn=Ue.mergeIn,bt.mergeDeepIn=Ue.mergeDeepIn,bt.withMutations=Ue.withMutations,bt.asMutable=Ue.asMutable,bt.asImmutable=Ue.asImmutable,bt.wasAltered=Ue.wasAltered,mt.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&v;if(r>=this.array.length)return new mt([],e);var a,o=0===r;if(t>0){var i=this.array[r];if((a=i&&i.removeBefore(e,t-b,n))===i&&o)return this}if(o&&!a)return this;var s=kt(this,e);if(!o)for(var c=0;c<r;c++)s.array[c]=void 0;return a&&(s.array[r]=a),s},mt.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,a=n-1>>>t&v;if(a>=this.array.length)return this;if(t>0){var o=this.array[a];if((r=o&&o.removeAfter(e,t-b,n))===o&&a===this.array.length-1)return this}var i=kt(this,e);return i.array.splice(a+1),r&&(i.array[a]=r),i};var vt,gt,yt={};function Ot(e,t){var n=e._origin,r=e._capacity,a=Tt(r),o=e._tail;return i(e._root,e._level,0);function i(e,s,c){return 0===s?function(e,i){var s=i===a?o&&o.array:e&&e.array,c=i>n?0:n-i,l=r-i;return l>m&&(l=m),function(){if(c===l)return yt;var e=t?--l:c++;return s&&s[e]}}(e,c):function(e,a,o){var s,c=e&&e.array,l=o>n?0:n-o>>a,u=1+(r-o>>a);return u>m&&(u=m),function(){for(;;){if(s){var e=s();if(e!==yt)return e;s=null}if(l===u)return yt;var n=t?--u:l++;s=i(c&&c[n],a-b,o+(n<<a))}}}(e,s,c)}}function jt(e,t,n,r,a,o,i){var s=Object.create(bt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=a,s.__ownerID=o,s.__hash=i,s.__altered=!1,s}function wt(){return vt||(vt=jt(0,0,b))}function Ct(e,t,n,r,a,o){var i,s=r>>>n&v,c=e&&s<e.array.length;if(!c&&void 0===a)return e;if(n>0){var l=e&&e.array[s],u=Ct(l,t,n-b,r,a,o);return u===l?e:((i=kt(e,t)).array[s]=u,i)}return c&&e.array[s]===a?e:(w(o),i=kt(e,t),void 0===a&&s===i.array.length-1?i.array.pop():i.array[s]=a,i)}function kt(e,t){return t&&e&&t===e.ownerID?e:new mt(e?e.array.slice():[],t)}function St(e,t){if(t>=Tt(e._capacity))return e._tail;if(t<1<<e._level+b){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&v],r-=b;return n}}function Nt(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new C,a=e._origin,o=e._capacity,i=a+t,s=void 0===n?o:n<0?o+n:a+n;if(i===a&&s===o)return e;if(i>=s)return e.clear();for(var c=e._level,l=e._root,u=0;i+u<0;)l=new mt(l&&l.array.length?[void 0,l]:[],r),u+=1<<(c+=b);u&&(i+=u,a+=u,s+=u,o+=u);for(var d=Tt(o),p=Tt(s);p>=1<<c+b;)l=new mt(l&&l.array.length?[l]:[],r),c+=b;var f=e._tail,h=p<d?St(e,s-1):p>d?new mt([],r):f;if(f&&p>d&&i<o&&f.array.length){for(var m=l=kt(l,r),g=c;g>b;g-=b){var y=d>>>g&v;m=m.array[y]=kt(m.array[y],r)}m.array[d>>>b&v]=f}if(s<o&&(h=h&&h.removeAfter(r,0,s)),i>=p)i-=p,s-=p,c=b,l=null,h=h&&h.removeBefore(r,0,i);else if(i>a||p<d){for(u=0;l;){var O=i>>>c&v;if(O!==p>>>c&v)break;O&&(u+=(1<<c)*O),c-=b,l=l.array[O]}l&&i>a&&(l=l.removeBefore(r,c,i-u)),l&&p<d&&(l=l.removeAfter(r,c,p-u)),u&&(i-=u,s-=u)}return e.__ownerID?(e.size=s-i,e._origin=i,e._capacity=s,e._level=c,e._root=l,e._tail=h,e.__hash=void 0,e.__altered=!0,e):jt(i,s,c,l,h)}function At(e,t,n){for(var r=[],o=0,s=0;s<n.length;s++){var c=n[s],l=a(c);l.size>o&&(o=l.size),i(c)||(l=l.map(function(e){return de(e)})),r.push(l)}return o>e.size&&(e=e.setSize(o)),it(e,t,r)}function Tt(e){return e<m?0:e-1>>>b<<b}function _t(e){return null==e?It():Et(e)?e:It().withMutations(function(t){var n=r(e);Pe(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Et(e){return ze(e)&&u(e)}function xt(e,t,n,r){var a=Object.create(_t.prototype);return a.size=e?e.size:0,a._map=e,a._list=t,a.__ownerID=n,a.__hash=r,a}function It(){return gt||(gt=xt($e(),wt()))}function Mt(e,t,n){var r,a,o=e._map,i=e._list,s=o.get(t),c=void 0!==s;if(n===g){if(!c)return e;i.size>=m&&i.size>=2*o.size?(a=i.filter(function(e,t){return void 0!==e&&s!==t}),r=a.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=a.__ownerID=e.__ownerID)):(r=o.remove(t),a=s===i.size-1?i.pop():i.set(s,void 0))}else if(c){if(n===i.get(s)[1])return e;r=o,a=i.set(s,[t,n])}else r=o.set(t,i.size),a=i.set(i.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=a,e.__hash=void 0,e):xt(r,a)}function Rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Dt(e){this._iter=e,this.size=e.size}function Lt(e){this._iter=e,this.size=e.size}function Pt(e){this._iter=e,this.size=e.size}function Bt(e){var t=Zt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=en,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===R){var r=e.__iterator(t,n);return new B(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===M?I:M,n)},t}function zt(e,t,n){var r=Zt(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,a){var o=e.get(r,g);return o===g?a:t.call(n,o,r,e)},r.__iterateUncached=function(r,a){var o=this;return e.__iterate(function(e,a,i){return!1!==r(t.call(n,e,a,i),a,o)},a)},r.__iteratorUncached=function(r,a){var o=e.__iterator(R,a);return new B(function(){var a=o.next();if(a.done)return a;var i=a.value,s=i[0];return z(r,s,t.call(n,i[1],s,e),a)})},r}function qt(e,t){var n=Zt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Bt(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=en,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function Ft(e,t,n,r){var a=Zt(e);return r&&(a.has=function(r){var a=e.get(r,g);return a!==g&&!!t.call(n,a,r,e)},a.get=function(r,a){var o=e.get(r,g);return o!==g&&t.call(n,o,r,e)?o:a}),a.__iterateUncached=function(a,o){var i=this,s=0;return e.__iterate(function(e,o,c){if(t.call(n,e,o,c))return s++,a(e,r?o:s-1,i)},o),s},a.__iteratorUncached=function(a,o){var i=e.__iterator(R,o),s=0;return new B(function(){for(;;){var o=i.next();if(o.done)return o;var c=o.value,l=c[0],u=c[1];if(t.call(n,u,l,e))return z(a,r?l:s++,u,o)}})},a}function Ut(e,t,n,r){var a=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),T(t,n,a))return e;var o=_(t,a),i=E(n,a);if(o!=o||i!=i)return Ut(e.toSeq().cacheResult(),t,n,r);var s,c=i-o;c==c&&(s=c<0?0:c);var l=Zt(e);return l.size=0===s?s:e.size&&s||void 0,!r&&ae(e)&&s>=0&&(l.get=function(t,n){return(t=N(this,t))>=0&&t<s?e.get(t+o,n):n}),l.__iterateUncached=function(t,n){var a=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var i=0,c=!0,l=0;return e.__iterate(function(e,n){if(!c||!(c=i++<o))return l++,!1!==t(e,r?n:l-1,a)&&l!==s}),l},l.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var a=0!==s&&e.__iterator(t,n),i=0,c=0;return new B(function(){for(;i++<o;)a.next();if(++c>s)return{value:void 0,done:!0};var e=a.next();return r||t===M?e:z(t,c-1,t===I?void 0:e.value[1],e)})},l}function Vt(e,t,n,r){var a=Zt(e);return a.__iterateUncached=function(a,o){var i=this;if(o)return this.cacheResult().__iterate(a,o);var s=!0,c=0;return e.__iterate(function(e,o,l){if(!s||!(s=t.call(n,e,o,l)))return c++,a(e,r?o:c-1,i)}),c},a.__iteratorUncached=function(a,o){var i=this;if(o)return this.cacheResult().__iterator(a,o);var s=e.__iterator(R,o),c=!0,l=0;return new B(function(){var e,o,u;do{if((e=s.next()).done)return r||a===M?e:z(a,l++,a===I?void 0:e.value[1],e);var d=e.value;o=d[0],u=d[1],c&&(c=t.call(n,u,o,i))}while(c);return a===R?e:z(a,o,u,e)})},a}function Qt(e,t,n){var r=Zt(e);return r.__iterateUncached=function(r,a){var o=0,s=!1;return function e(c,l){var u=this;c.__iterate(function(a,c){return(!t||l<t)&&i(a)?e(a,l+1):!1===r(a,n?c:o++,u)&&(s=!0),!s},a)}(e,0),o},r.__iteratorUncached=function(r,a){var o=e.__iterator(r,a),s=[],c=0;return new B(function(){for(;o;){var e=o.next();if(!1===e.done){var l=e.value;if(r===R&&(l=l[1]),t&&!(s.length<t)||!i(l))return n?e:z(r,c++,l,e);s.push(o),o=l.__iterator(r,a)}else o=s.pop()}return{value:void 0,done:!0}})},r}function Ht(e,t,n){t||(t=tn);var r=s(e),a=0,o=e.toSeq().map(function(t,r){return[r,t,a++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?W(o):c(e)?G(o):J(o)}function Kt(e,t,n){if(t||(t=tn),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Wt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Wt(t,e,n)?n:e})}function Wt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function Gt(e,t,r){var a=Zt(e);return a.size=new ee(r).map(function(e){return e.size}).min(),a.__iterate=function(e,t){for(var n,r=this.__iterator(M,t),a=0;!(n=r.next()).done&&!1!==e(n.value,a++,this););return a},a.__iteratorUncached=function(e,a){var o=r.map(function(e){return e=n(e),V(a?e.reverse():e)}),i=0,s=!1;return new B(function(){var n;return s||(n=o.map(function(e){return e.next()}),s=n.some(function(e){return e.done})),s?{value:void 0,done:!0}:z(e,i++,t.apply(null,n.map(function(e){return e.value})))})},a}function Jt(e,t){return ae(e)?t:e.constructor(t)}function Yt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Xt(e){return Pe(e.size),S(e)}function $t(e){return s(e)?r:c(e)?a:o}function Zt(e){return Object.create((s(e)?W:c(e)?G:J).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function tn(e,t){return e>t?1:e<t?-1:0}function nn(e){var t=V(e);if(!t){if(!H(e))throw new TypeError("Expected iterable or array-like: "+e);t=V(n(e))}return t}function rn(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var i=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ve(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(a,i),a.size=i.length,a._name=t,a._keys=i,a._defaultValues=e}this._map=Be(o)},a=r.prototype=Object.create(an);return a.constructor=r,r}t(_t,Be),_t.of=function(){return this(arguments)},_t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},_t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},_t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):It()},_t.prototype.set=function(e,t){return Mt(this,e,t)},_t.prototype.remove=function(e){return Mt(this,e,g)},_t.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},_t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},_t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},_t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?xt(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},_t.isOrderedMap=Et,_t.prototype[h]=!0,_t.prototype.delete=_t.prototype.remove,t(Rt,W),Rt.prototype.get=function(e,t){return this._iter.get(e,t)},Rt.prototype.has=function(e){return this._iter.has(e)},Rt.prototype.valueSeq=function(){return this._iter.valueSeq()},Rt.prototype.reverse=function(){var e=this,t=qt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Rt.prototype.map=function(e,t){var n=this,r=zt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},Rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Xt(this):0,function(a){return e(a,t?--n:n++,r)}),t)},Rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(M,t),r=t?Xt(this):0;return new B(function(){var a=n.next();return a.done?a:z(e,t?--r:r++,a.value,a)})},Rt.prototype[h]=!0,t(Dt,G),Dt.prototype.includes=function(e){return this._iter.includes(e)},Dt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},Dt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t),r=0;return new B(function(){var t=n.next();return t.done?t:z(e,r++,t.value,t)})},t(Lt,J),Lt.prototype.has=function(e){return this._iter.includes(e)},Lt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Lt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t);return new B(function(){var t=n.next();return t.done?t:z(e,t.value,t.value,t)})},t(Pt,W),Pt.prototype.entrySeq=function(){return this._iter.toSeq()},Pt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Yt(t);var r=i(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},Pt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t);return new B(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Yt(r);var a=i(r);return z(e,a?r.get(0):r[0],a?r.get(1):r[1],t)}}})},Dt.prototype.cacheResult=Rt.prototype.cacheResult=Lt.prototype.cacheResult=Pt.prototype.cacheResult=en,t(rn,Oe),rn.prototype.toString=function(){return this.__toString(sn(this)+" {","}")},rn.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},rn.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},rn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=on(this,$e()))},rn.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+sn(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:on(this,n)},rn.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:on(this,t)},rn.prototype.wasAltered=function(){return this._map.wasAltered()},rn.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},rn.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},rn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?on(this,t,e):(this.__ownerID=e,this._map=t,this)};var an=rn.prototype;function on(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function sn(e){return e._name||e.constructor.name||"Record"}function cn(e){return null==e?bn():ln(e)&&!u(e)?e:bn().withMutations(function(t){var n=o(e);Pe(n.size),n.forEach(function(e){return t.add(e)})})}function ln(e){return!(!e||!e[dn])}an.delete=an.remove,an.deleteIn=an.removeIn=Ue.removeIn,an.merge=Ue.merge,an.mergeWith=Ue.mergeWith,an.mergeIn=Ue.mergeIn,an.mergeDeep=Ue.mergeDeep,an.mergeDeepWith=Ue.mergeDeepWith,an.mergeDeepIn=Ue.mergeDeepIn,an.setIn=Ue.setIn,an.update=Ue.update,an.updateIn=Ue.updateIn,an.withMutations=Ue.withMutations,an.asMutable=Ue.asMutable,an.asImmutable=Ue.asImmutable,t(cn,we),cn.of=function(){return this(arguments)},cn.fromKeys=function(e){return this(r(e).keySeq())},cn.prototype.toString=function(){return this.__toString("Set {","}")},cn.prototype.has=function(e){return this._map.has(e)},cn.prototype.add=function(e){return fn(this,this._map.set(e,!0))},cn.prototype.remove=function(e){return fn(this,this._map.remove(e))},cn.prototype.clear=function(){return fn(this,this._map.clear())},cn.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)o(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},cn.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return o(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.every(function(e){return e.includes(n)})||e.remove(n)})})},cn.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return o(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.some(function(e){return e.includes(n)})&&e.remove(n)})})},cn.prototype.merge=function(){return this.union.apply(this,arguments)},cn.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},cn.prototype.sort=function(e){return mn(Ht(this,e))},cn.prototype.sortBy=function(e,t){return mn(Ht(this,t,e))},cn.prototype.wasAltered=function(){return this._map.wasAltered()},cn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},cn.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},cn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},cn.isSet=ln;var un,dn="@@__IMMUTABLE_SET__@@",pn=cn.prototype;function fn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function hn(e,t){var n=Object.create(pn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function bn(){return un||(un=hn($e()))}function mn(e){return null==e?jn():vn(e)?e:jn().withMutations(function(t){var n=o(e);Pe(n.size),n.forEach(function(e){return t.add(e)})})}function vn(e){return ln(e)&&u(e)}pn[dn]=!0,pn.delete=pn.remove,pn.mergeDeep=pn.merge,pn.mergeDeepWith=pn.mergeWith,pn.withMutations=Ue.withMutations,pn.asMutable=Ue.asMutable,pn.asImmutable=Ue.asImmutable,pn.__empty=bn,pn.__make=hn,t(mn,cn),mn.of=function(){return this(arguments)},mn.fromKeys=function(e){return this(r(e).keySeq())},mn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},mn.isOrderedSet=vn;var gn,yn=mn.prototype;function On(e,t){var n=Object.create(yn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function jn(){return gn||(gn=On(It()))}function wn(e){return null==e?Tn():Cn(e)?e:Tn().unshiftAll(e)}function Cn(e){return!(!e||!e[Sn])}yn[h]=!0,yn.__empty=jn,yn.__make=On,t(wn,je),wn.of=function(){return this(arguments)},wn.prototype.toString=function(){return this.__toString("Stack [","]")},wn.prototype.get=function(e,t){var n=this._head;for(e=N(this,e);n&&e--;)n=n.next;return n?n.value:t},wn.prototype.peek=function(){return this._head&&this._head.value},wn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):An(e,t)},wn.prototype.pushAll=function(e){if(0===(e=a(e)).size)return this;Pe(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):An(t,n)},wn.prototype.pop=function(){return this.slice(1)},wn.prototype.unshift=function(){return this.push.apply(this,arguments)},wn.prototype.unshiftAll=function(e){return this.pushAll(e)},wn.prototype.shift=function(){return this.pop.apply(this,arguments)},wn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Tn()},wn.prototype.slice=function(e,t){if(T(e,t,this.size))return this;var n=_(e,this.size),r=E(t,this.size);if(r!==this.size)return je.prototype.slice.call(this,e,t);for(var a=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=a,this._head=o,this.__hash=void 0,this.__altered=!0,this):An(a,o)},wn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?An(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},wn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},wn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new B(function(){if(r){var t=r.value;return r=r.next,z(e,n++,t)}return{value:void 0,done:!0}})},wn.isStack=Cn;var kn,Sn="@@__IMMUTABLE_STACK__@@",Nn=wn.prototype;function An(e,t,n,r){var a=Object.create(Nn);return a.size=e,a._head=t,a.__ownerID=n,a.__hash=r,a.__altered=!1,a}function Tn(){return kn||(kn=An(0))}function _n(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}Nn[Sn]=!0,Nn.withMutations=Ue.withMutations,Nn.asMutable=Ue.asMutable,Nn.asImmutable=Ue.asImmutable,Nn.wasAltered=Ue.wasAltered,n.Iterator=B,_n(n,{toArray:function(){Pe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new Dt(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Rt(this,!0)},toMap:function(){return Be(this.toKeyedSeq())},toObject:function(){Pe(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return _t(this.toKeyedSeq())},toOrderedSet:function(){return mn(s(this)?this.valueSeq():this)},toSet:function(){return cn(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Lt(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return wn(s(this)?this.valueSeq():this)},toList:function(){return pt(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return Jt(this,function(e,t){var n=s(e),a=[e].concat(t).map(function(e){return i(e)?n&&(e=r(e)):e=n?ie(e):se(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===a.length)return e;if(1===a.length){var o=a[0];if(o===e||n&&s(o)||c(e)&&c(o))return o}var l=new ee(a);return n?l=l.toKeyedSeq():c(e)||(l=l.toSetSeq()),(l=l.flatten(!0)).size=a.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),l}(this,t))},includes:function(e){return this.some(function(t){return he(t,e)})},entries:function(){return this.__iterator(R)},every:function(e,t){Pe(this.size);var n=!0;return this.__iterate(function(r,a,o){if(!e.call(t,r,a,o))return n=!1,!1}),n},filter:function(e,t){return Jt(this,Ft(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(r,a,o){if(e.call(t,r,a,o))return n=[a,r],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return Pe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Pe(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""}),t},keys:function(){return this.__iterator(I)},map:function(e,t){return Jt(this,zt(this,e,t))},reduce:function(e,t,n){var r,a;return Pe(this.size),arguments.length<2?a=!0:r=t,this.__iterate(function(t,o,i){a?(a=!1,r=t):r=e.call(n,r,t,o,i)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Jt(this,qt(this,!0))},slice:function(e,t){return Jt(this,Ut(this,e,t,!0))},some:function(e,t){return!this.every(Rn(e),t)},sort:function(e){return Jt(this,Ht(this,e))},values:function(){return this.__iterator(M)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return S(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Be().asMutable();return e.__iterate(function(a,o){r.update(t.call(n,a,o,e),0,function(e){return e+1})}),r.asImmutable()}(this,e,t)},equals:function(e){return be(this,e)},entrySeq:function(){var e=this;if(e._cache)return new ee(e._cache);var t=e.toSeq().map(Mn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Rn(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(A)},flatMap:function(e,t){return Jt(this,function(e,t,n){var r=$t(e);return e.toSeq().map(function(a,o){return r(t.call(n,a,o,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return Jt(this,Qt(this,e,!0))},fromEntrySeq:function(){return new Pt(this)},get:function(e,t){return this.find(function(t,n){return he(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,a=nn(e);!(n=a.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,g):g)===g)return t}return r},groupBy:function(e,t){return function(e,t,n){var r=s(e),a=(u(e)?_t():Be()).asMutable();e.__iterate(function(o,i){a.update(t.call(n,o,i,e),function(e){return(e=e||[]).push(r?[i,o]:o),e})});var o=$t(e);return a.map(function(t){return Jt(e,o(t))})}(this,e,t)},has:function(e){return this.get(e,g)!==g},hasIn:function(e){return this.getIn(e,g)!==g},isSubset:function(e){return e="function"==typeof e.includes?e:n(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:n(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(In).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return Kt(this,e)},maxBy:function(e,t){return Kt(this,t,e)},min:function(e){return Kt(this,e?Dn(e):Bn)},minBy:function(e,t){return Kt(this,t?Dn(t):Bn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Jt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Jt(this,Vt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Rn(e),t)},sortBy:function(e,t){return Jt(this,Ht(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Jt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Jt(this,function(e,t,n){var r=Zt(e);return r.__iterateUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterate(r,a);var i=0;return e.__iterate(function(e,a,s){return t.call(n,e,a,s)&&++i&&r(e,a,o)}),i},r.__iteratorUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterator(r,a);var i=e.__iterator(R,a),s=!0;return new B(function(){if(!s)return{value:void 0,done:!0};var e=i.next();if(e.done)return e;var a=e.value,c=a[0],l=a[1];return t.call(n,l,c,o)?r===R?e:z(r,c,l,e):(s=!1,{value:void 0,done:!0})})},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Rn(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=u(e),n=s(e),r=t?1:0;return function(e,t){return t=Ce(t,3432918353),t=Ce(t<<15|t>>>-15,461845907),t=Ce(t<<13|t>>>-13,5),t=Ce((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=ke((t=Ce(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+zn(Se(e),Se(t))|0}:function(e,t){r=r+zn(Se(e),Se(t))|0}:t?function(e){r=31*r+Se(e)|0}:function(e){r=r+Se(e)|0}),r)}(this))}});var En=n.prototype;En[d]=!0,En[P]=En.values,En.__toJS=En.toArray,En.__toStringMapper=Ln,En.inspect=En.toSource=function(){return this.toString()},En.chain=En.flatMap,En.contains=En.includes,function(){try{Object.defineProperty(En,"length",{get:function(){if(!n.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),_n(r,{flip:function(){return Jt(this,Bt(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return he(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return he(t,e)})},mapEntries:function(e,t){var n=this,r=0;return Jt(this,this.toSeq().map(function(a,o){return e.call(t,[o,a],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Jt(this,this.toSeq().flip().map(function(r,a){return e.call(t,r,a,n)}).flip())}});var xn=r.prototype;function In(e,t){return t}function Mn(e,t){return[t,e]}function Rn(e){return function(){return!e.apply(this,arguments)}}function Dn(e){return function(){return-e.apply(this,arguments)}}function Ln(e){return"string"==typeof e?JSON.stringify(e):e}function Pn(){return k(arguments)}function Bn(e,t){return e<t?1:e>t?-1:0}function zn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return xn[p]=!0,xn[P]=En.entries,xn.__toJS=En.toObject,xn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Ln(e)},_n(a,{toKeyedSeq:function(){return new Rt(this,!1)},filter:function(e,t){return Jt(this,Ft(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return Jt(this,qt(this,!1))},slice:function(e,t){return Jt(this,Ut(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=_(e,e<0?this.count():this.size);var r=this.slice(0,e);return Jt(this,1===n?r:r.concat(k(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return Jt(this,Qt(this,e,!1))},get:function(e,t){return(e=N(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=N(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Jt(this,function(e,t){var n=Zt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var a=this,o=0;return e.__iterate(function(e,r){return(!o||!1!==n(t,o++,a))&&!1!==n(e,o++,a)},r),o},n.__iteratorUncached=function(n,r){var a,o=e.__iterator(M,r),i=0;return new B(function(){return(!a||i%2)&&(a=o.next()).done?a:i%2?z(n,i++,t):z(n,i++,a.value,a)})},n}(this,e))},interleave:function(){var e=[this].concat(k(arguments)),t=Gt(this.toSeq(),G.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Jt(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Jt(this,Vt(this,e,t,!1))},zip:function(){return Jt(this,Gt(this,Pn,[this].concat(k(arguments))))},zipWith:function(e){var t=k(arguments);return t[0]=this,Jt(this,Gt(this,e,t))}}),a.prototype[f]=!0,a.prototype[h]=!0,_n(o,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=En.includes,_n(W,r.prototype),_n(G,a.prototype),_n(J,o.prototype),_n(Oe,r.prototype),_n(je,a.prototype),_n(we,o.prototype),{Iterable:n,Seq:K,Collection:ye,Map:Be,OrderedMap:_t,List:pt,Stack:wn,Set:cn,OrderedSet:mn,Record:rn,Range:ge,Repeat:me,is:he,fromJS:de}}()},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var a=n(1893),o=n(1832),i=n(1998),s=n(1784),c=n(1797),l=s.OrderedSet,u=s.Record,d=s.Stack,p=u({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:d(),selection:null,treeMap:null,undoStack:d()}),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._immutable=t}return e.createEmpty=function(t){return e.createWithContent(o.createFromText(""),t)},e.createWithContent=function(t,n){var r=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:d(),redoStack:d(),decorator:n||null,selection:c.createEmpty(r)})},e.create=function(t){var n=t.currentContent,a=t.decorator,o=r({},t,{treeMap:b(n,a),directionMap:i.getDirectionMap(n)});return new e(new p(o))},e.set=function(t,n){return new e(t.getImmutable().withMutations(function(e){var r=e.get("decorator"),o=r;null===n.decorator?o=null:n.decorator&&(o=n.decorator);var i=n.currentContent||t.getCurrentContent();if(o!==r){var s,c=e.get("treeMap");return s=o&&r?function(e,t,n,r,o){return n.merge(t.toSeq().filter(function(t){return r.getDecorations(t,e)!==o.getDecorations(t,e)}).map(function(t){return a.generate(e,t,r)}))}(i,i.getBlockMap(),c,o,r):b(i,o),void e.merge({decorator:o,treeMap:s,nativelyRenderedContent:null})}i!==t.getCurrentContent()&&e.set("treeMap",function(e,t,n,r){var o=e.getCurrentContent().set("entityMap",n),i=o.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter(function(e,t){return e!==i.get(t)}).map(function(e){return a.generate(o,e,r)}))}(t,i.getBlockMap(),i.getEntityMap(),o)),e.merge(n)}))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),a=e.getBlockForKey(n);if(r>0)return a.getInlineStyleAt(r-1);if(a.getLength())return a.getInlineStyleAt(0);return m(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),a=e.getBlockForKey(n);if(r<a.getLength())return a.getInlineStyleAt(r);if(r>0)return a.getInlineStyleAt(r-1);return m(e,n)}(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return h(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),h(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent().getLastBlock(),r=n.getKey(),a=n.getLength();return e.acceptSelection(t,new c({anchorKey:r,anchorOffset:a,focusKey:r,focusOffset:a,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(t,n,r){if(t.getCurrentContent()===n)return t;var a="insert-characters"!==r,o=i.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:o,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:a,inlineStyleOverride:null});var s=t.getSelection(),c=t.getCurrentContent(),l=t.getUndoStack(),u=n;s!==c.getSelectionAfter()||function(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(t,r)?(l=l.push(c),u=u.set("selectionBefore",s)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(u=u.set("selectionBefore",c.getSelectionBefore()));var p=t.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(r)&&(p=null);var f={currentContent:u,directionMap:o,undoStack:l,redoStack:d(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:a,inlineStyleOverride:p};return e.set(t,f)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var a=t.getCurrentContent(),o=i.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:o,undoStack:n.shift(),redoStack:t.getRedoStack().push(a),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:a.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var a=t.getCurrentContent(),o=i.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:o,undoStack:t.getUndoStack().push(a),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();function h(e,t,n){return f.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function b(e,t){return e.getBlockMap().map(function(n){return a.generate(e,n,t)}).toOrderedMap()}function m(e,t){var n=e.getBlockMap().reverse().skipUntil(function(e,n){return n===t}).skip(1).skipUntil(function(e,t){return e.getLength()}).first();return n?n.getInlineStyleAt(n.getLength()-1):l()}e.exports=f},function(e,t,n){"use strict";var r=n(1787),a=n(1987),o=n(1793),i=n(1784),s=n(1988),c=n(1990),l=n(1816),u=n(1993),d=n(1994),p=n(382),f=n(1995),h=n(1890),b=n(1996),m=n(1997),v=i.OrderedSet,g={replaceText:function(e,t,n,a,o){var i=h(e,t),s=b(i,t),c=r.create({style:a||v(),entity:o||null});return d(s,s.getSelectionAfter(),n,c)},insertText:function(e,t,n,r,a){return t.isCollapsed()||p(!1),g.replaceText(e,t,n,r,a)},moveText:function(e,t,n){var r=l(e,t),a=g.removeRange(e,t,"backward");return g.replaceWithFragment(a,n,r)},replaceWithFragment:function(e,t,n){var r=h(e,t),a=b(r,t);return u(a,a.getSelectionAfter(),n)},removeRange:function(e,t,n){var r,a,i=void 0,s=void 0;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),a=t.getFocusKey(),i=e.getBlockForKey(r),s=e.getBlockForKey(a);var l=t.getStartOffset(),u=t.getEndOffset(),d=i.getEntityAt(l),p=s.getEntityAt(u-1);if(r===a&&d&&d===p){var f=c(e.getEntityMap(),i,s,t,n);return b(e,f)}var m=t;o.draft_segmented_entities_behavior&&(m=c(e.getEntityMap(),i,s,t,n));var v=h(e,m);return b(v,m)},splitBlock:function(e,t){var n=h(e,t),r=b(n,t);return m(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return a.add(e,t,n)},removeInlineStyle:function(e,t,n){return a.remove(e,t,n)},setBlockType:function(e,t,n){return f(e,t,function(e){return e.merge({type:n,depth:0})})},setBlockData:function(e,t,n){return f(e,t,function(e){return e.merge({data:n})})},mergeBlockData:function(e,t,n){return f(e,t,function(e){return e.merge({data:e.getData().merge(n)})})},applyEntity:function(e,t,n){var r=h(e,t);return s(r,t,n)}};e.exports=g},function(e,t,n){"use strict";var r=n(1784),a=r.Map,o=r.OrderedSet,i=r.Record,s=o(),c={style:s,entity:null},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getStyle=function(){return this.get("style")},t.prototype.getEntity=function(){return this.get("entity")},t.prototype.hasStyle=function(e){return this.getStyle().includes(e)},t.applyStyle=function(e,n){var r=e.set("style",e.getStyle().add(n));return t.create(r)},t.removeStyle=function(e,n){var r=e.set("style",e.getStyle().remove(n));return t.create(r)},t.applyEntity=function(e,n){var r=e.getEntity()===n?e:e.set("entity",n);return t.create(r)},t.create=function(e){if(!e)return u;var n=a({style:s,entity:null}).merge(e),r=d.get(n);if(r)return r;var o=new t(n);return d=d.set(n,o),o},t}(i(c)),u=new l,d=a([[a(c),u]]);l.EMPTY=u,e.exports=l},function(e,t,n){"use strict";var r=n(1787),a=n(1784),o=n(1806),i=a.List,s=a.Map,c=a.OrderedSet,l=a.Record,u=a.Repeat,d=c(),p={parent:null,characterList:i(),data:s(),depth:0,key:"",text:"",type:"unstyled",children:i(),prevSibling:null,nextSibling:null},f=function(e,t){return e.getStyle()===t.getStyle()},h=function(e,t){return e.getEntity()===t.getEntity()},b=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=i(u(r.EMPTY,n.length))),e},m=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,b(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.getChildKeys=function(){return this.get("children")},t.prototype.getParentKey=function(){return this.get("parent")},t.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")},t.prototype.getNextSiblingKey=function(){return this.get("nextSibling")},t.prototype.findStyleRanges=function(e,t){o(this.getCharacterList(),f,e,t)},t.prototype.findEntityRanges=function(e,t){o(this.getCharacterList(),h,e,t)},t}(l(p));e.exports=m},function(e,t,n){"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},function(e,t,n){"use strict";var r=n(1985),a=n(1805),o=n(1787),i=n(2001),s=n(1795),c=n(1832),l=n(1835),u=n(1896),d=n(2002),p=n(1898),f=n(1817),h=n(1786),b=n(1894),m=n(1785),v=n(1842),g=n(1912),y=n(1797),O=n(2063),j={Editor:d,EditorBlock:p,EditorState:m,CompositeDecorator:i,Entity:f,EntityInstance:b,BlockMapBuilder:a,CharacterMetadata:o,ContentBlock:s,ContentState:c,SelectionState:y,AtomicBlockUtils:r,KeyBindingUtil:v,Modifier:h,RichUtils:g,DefaultDraftBlockRenderMap:l,DefaultDraftInlineStyle:u,convertFromHTML:n(1910),convertFromRaw:n(2066),convertToRaw:O,genKey:n(1792),getDefaultKeyBinding:n(1913),getVisibleSelectionRect:n(2071)};e.exports=j},function(e,t,n){"use strict";var r=n(2008),a=n(2011),o=n(2012),i=n(2013);function s(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var o=n.slice(e.length);return!!t&&(o=r?r(o):o,a.contains(o,t))}function c(e){return"Windows"===r.platformName?e.replace(/^\s*NT/,""):e}var l={isBrowser:function(e){return s(r.browserName,r.browserFullVersion,e)},isBrowserArchitecture:function(e){return s(r.browserArchitecture,null,e)},isDevice:function(e){return s(r.deviceName,null,e)},isEngine:function(e){return s(r.engineName,r.engineVersion,e)},isPlatform:function(e){return s(r.platformName,r.platformFullVersion,e,c)},isPlatformArchitecture:function(e){return s(r.platformArchitecture,null,e)}};e.exports=o(l,i)},function(e,t,n){"use strict";var r={},a=Math.pow(2,24);e.exports=function(){for(var e=void 0;void 0===e||r.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*a).toString(32);return r[e]=!0,e}},function(e,t,n){"use strict";var r=n(1986);e.exports=r},,function(e,t,n){"use strict";var r=n(1787),a=n(1784),o=n(1806),i=a.List,s=a.Map,c=a.OrderedSet,l=a.Record,u=a.Repeat,d=c(),p=l({key:"",type:"unstyled",text:"",characterList:i(),depth:0,data:s()}),f=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=i(u(r.EMPTY,n.length))),e},h=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,f(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.findStyleRanges=function(e,t){o(this.getCharacterList(),b,e,t)},t.prototype.findEntityRanges=function(e,t){o(this.getCharacterList(),m,e,t)},t}(p);function b(e,t){return e.getStyle()===t.getStyle()}function m(e,t){return e.getEntity()===t.getEntity()}e.exports=h},function(e,t,n){"use strict";var r=n(382),a=55296,o=56319,i=56320,s=57343,c=/[\uD800-\uDFFF]/;function l(e){return a<=e&&e<=s}function u(e){return c.test(e)}function d(e,t){return 1+l(e.charCodeAt(t))}function p(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!u(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var a=0;if(t>0){for(;t>0&&a<r;t--)a+=d(e,a);if(a>=r)return""}else if(t<0){for(a=r;t<0&&0<a;t++)a-=d(e,a-1);a<0&&(a=0)}var o=r;if(n<r)for(o=a;n>0&&o<r;n--)o+=d(e,o);return e.substring(a,o)}var f={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=d(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:d,hasSurrogateUnit:u,isCodeUnitInSurrogateRange:l,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||r(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),c=e.charCodeAt(t+1);return a<=n&&n<=o&&i<=c&&c<=s},strlen:function(e){if(!u(e))return e.length;for(var t=0,n=0;n<e.length;n+=d(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return p(e,t=t<n?t:n,r)},substr:p};e.exports=f},function(e,t,n){"use strict";var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),a=this.getFocusKey();if(r===a&&r===e){var o=this.getStartOffset();return t<=this.getEndOffset()&&o<=n}if(e!==r&&e!==a)return!1;var i=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=i&&n>=i},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}((0,n(1784).Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(/\//g,"-")}e.exports=function(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).map(r).join(" "):Array.prototype.map.call(arguments,r).join(" ")}},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n.n(d),f=n(18),h=n(11),b=n.n(h),m=n(1969),v=n.n(m),g=n(272),y=n.n(g),O=n(1771),j=n(2191),w=n(2192),C=n(10),k=function(e){return p.a.createElement(C.a,e,p.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};k.defaultProps={name:"Share"};var S=k,N=n(56),A=n(15),T=n(16),_=n(119),E=n(49),x=n(168),I=n(522),M=n(23),R=n(21);n(1971);function D(e){return e&&e.startsWith("//")?"https:".concat(e):e}function L(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}var P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={qrCodeUrl:"",url:""},n.togglerRef=p.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.onTogglerClick,r=e.disabled;return!1!==t()&&!r},n.handleTogglerClick=function(e){n.shouldShowMenu()?(n.loadQrcodeImage(),n.onShare(e)):e.preventDefault()},n.open=function(e){n.shouldShowMenu()&&(n.loadQrcodeImage(),n.menu.popover.open(),n.onShare(e))},n.onShare=function(){var e=n.props,t=e.id,r=e.type,a=e.getShareText,o=e.zaShareId;a(t,r),T.default.trackEvent(n.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:R.R[r]},o&&{id:o}))},n.copyLink=function(){var e=n.props,t=e.type,r=e.title,a=e.authorName,o=e.href,i=e.showNotification,s=E.b[t]||"",c=r?"".concat(r," - "):"",l=a&&"匿名用户"!==a&&s?"".concat(a,"的").concat(s," - "):"",u=o?Object(_.toAbsoluteUrl)(o):n.url();v()("".concat(c).concat(l,"知乎\n").concat(D(u))),i("链接复制成功！")},n.url=function(){var e=n.props,t=e.id,r=e.type;return D(Object(_.toAbsoluteUrl)(n.props.url))||"".concat(location.origin,"/").concat(r,"/").concat(t)},n.loadQrcodeImage=function(){var e=n.state.qrCodeUrl;if(!e){var t="".concat(location.protocol,"//www.zhihu.com/"),r=n.url();e="".concat(t,"qrcode?").concat(L({url:"".concat(r).concat("#showWechatShareTip")})),n.setState({qrCodeUrl:e,url:r})}},n.shareToWeibo=function(){var e={appKey:"3063806388"},t=n.props.shareText;t&&(e.title=t);var r="http://service.weibo.com/share/share.php?".concat(L(e));window.open(r,"_blank","width=615,height=505")||(location.href=r)},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,a=t.positionStatus,o=t.toggler,i=t.type,s=t.disabled,l=this.state.qrCodeUrl,u=Object(c.b)("div",{className:b()("ShareMenu-toggler",r)},l&&Object(c.b)("img",{className:"ShareMenu-fakeQRCode",src:l,alt:"微信二维码"}),Object(d.cloneElement)(o,{onMouseEnter:this.loadQrcodeImage,disabled:s,ref:this.togglerRef}));return Object(c.b)(p.a.Fragment,null,Object(c.b)(x.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(c.b)(N.c,{className:b()("ShareMenu",n),positionStatus:a,ref:function(t){e.menu=t},toggler:u,onClick:this.handleTogglerClick},Object(c.b)(N.b,{className:"ShareMenu-button",onClick:this.copyLink},Object(c.b)(O.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===i||Object(c.b)(N.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},Object(c.b)(j.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),Object(c.b)(N.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},Object(c.b)(A.c,{className:"ShareMenu-button",preset:"plain"},Object(c.b)(w.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),Object(c.b)("img",{className:"ShareMenu-qrCode",src:l,alt:"微信二维码"}))))}}]),t}(d.Component);P.propTypes={toggler:u.a.node,onTogglerClick:u.a.func,zaShareId:u.a.number},P.defaultProps={toggler:Object(c.b)(A.c,{preset:"plain",icon:S,label:"分享"}),onTogglerClick:y.a};t.a=Object(f.connect)(function(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts["".concat(r).concat(n)]}},{showNotification:M.h,getShareText:I.b})(P)},function(e,t,n){"use strict";var r=n(22),a=n(24),o=n(4),i=n(5),s=n(8),c=n(6),l=n(7),u=n(0),d=n(1),p=n(483),f=n(168),h=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={ref:null},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,o=t.children,i=Object(a.a)(t,["tabIndex","children"]),s=this.state.ref;return Object(u.b)(p.a,Object(r.default)({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},i),Object(u.b)(f.d.Provider,{value:s},o))}}]),t}(d.Component);h.defaultProps={tabIndex:0};var b=h;n.d(t,"a",function(){return b})},function(e,t,n){var r=n(823),a=n(1802);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(a.prototype),o.prototype.constructor=o,e.exports=o},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(823),a=n(1802),o=4294967295;function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}i.prototype=r(a.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(2),l=n.n(c),u=n(1),d=n.n(u),p=n(19),f=n.n(p),h=n(39),b=n.n(h),m=n(61),v=n.n(m),g=n(385),y=n(2112),O=n(1845),j=(n(1871),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isInputing:!1,value:n.props.value||""},n.handleChange=function(e){n.setState({value:Object(g.cutStringWidth)(e.target.value,30)})},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,r=t.value,a=this.props.onChange,o=!n&&!r,i=!n&&r;return d.a.createElement("div",{className:"Editable-VideoTitleInput-container"},d.a.createElement(O.a,null,d.a.createElement("div",{className:f()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":o}),onClick:function(){return e.setState({isInputing:!0})}},o&&d.a.createElement(y.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&d.a.createElement("div",{className:f()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!r})},r||"好的标题可以获得更多的推荐及关注者"),n&&d.a.createElement("input",{className:"Editable-VideoTitleInput",value:r,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),a(t.target.value)}}),i&&d.a.createElement(y.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),t}(u.Component)),w=n(1810),C=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={shown:!1},n.handleObserve=function(e){(e[0].isIntersecting||e[0].intersectionRatio>0)&&n.setState({shown:!0})},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,r=e.children;return this.state.shown?r:d.a.createElement(w.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||d.a.createElement("div",{style:{height:"1px"}}))}}]),t}(u.Component);C.propTypes={placeholder:l.a.element,rootMargin:l.a.string},C.defaultProps={rootMargin:"200px"};var k=C,S=n(2113),N=n(1872),A=n.n(N),T=function(e){var t=e.className;return d.a.createElement("svg",{viewBox:"0 0 72 72",className:t},d.a.createElement("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),d.a.createElement("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},_=(n(1873),function(){return d.a.createElement("div",{className:"VideoCardPlayButton"},d.a.createElement(T,{className:"VideoCardPlayButton-icon"}))}),E=function(e){var t=e.fileSize;return d.a.createElement("div",{className:"VideoCardPlayButton-withFileSize--outer"},d.a.createElement("span",{className:"VideoCardPlayButton-withFileSize"},d.a.createElement(S.a,{center:!0,size:14}),t?A()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};function x(e){var t=e.thumbnail,n=e.isLens,r=e.canPlay;return n||r?t&&"string"==typeof t?d.a.createElement("img",{src:t,alt:"视频封面"}):t||null:d.a.createElement(T,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}n(1874);var I=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isMobile:!1,playerShown:!1,playerLoading:!1},n.handlePlay=function(e){e.preventDefault();var t=n.props,r=t.interactive,a=t.isConverting,o=t.isLens,i=t.playerUrl,s=t.onPlayFailed,c=t.onLensPlay,l=t.onBeforePlay;r&&!a&&(i||!s?l?Promise.resolve(l()).then(function(e){!1!==e&&n.play()}):o&&c&&c()||n.play():s())},n.handlePlayerLoad=function(){n.loadingCount--,0===n.loadingCount&&n.setState({playerLoading:!1})},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.setState({isMobile:v()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){return this.props.isLens}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.onLensPlay,a=e.onBeforePlay;return t&&n&&!(r||a)}},{key:"showContent",value:function(){var e=this.props,t=e.content,n=e.isLens,r=e.title;return!e.isVideoTitleEditable&&(!n||Boolean(t||r))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.title,a=e.thumbnail,o=e.source,i=e.url,s=e.showPlayButton,c=e.usePlayButtonWithFileSize,l=e.fileSize,u=e.rightBottomButton,p=e.isVideoTitleEditable,h=e.onVideoTitleChange,b=e.isConverting,m=e.content,v=this.canPlay(),g=this.inlinePlayer(),y=d.a.createElement(x,{thumbnail:a,isLens:n,canPlay:v}),O=s&&!b&&(c?d.a.createElement(E,{fileSize:l}):d.a.createElement(_,null)),w=d.a.createElement("div",{className:"VideoCard-layout"},v?d.a.createElement("div",{className:"VideoCard-video"},d.a.createElement("div",{className:"VideoCard-video-content"},g?this.renderPlayer():d.a.createElement("div",{className:f()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!a}),onClick:this.handlePlay},y,O,u))):d.a.createElement("div",{className:"VideoCard-poster"},y),this.showContent()&&(m||d.a.createElement("div",{className:"VideoCard-content"},d.a.createElement("div",{className:"VideoCard-title"},r),this.showDescription()&&d.a.createElement("div",{className:"VideoCard-description"},o&&d.a.createElement("span",{className:"VideoCard-source"},o),d.a.createElement("span",{className:"VideoCard-badge"},"视频")))),p&&d.a.createElement(j,{value:r,onChange:h}));return n?w:t?d.a.createElement("a",{className:"VideoCard-link",href:i,target:"_blank",rel:"noopener noreferrer"},w):d.a.createElement("div",{className:"VideoCard-link"},w)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,r=t.playerUrl,a=t.onIframeRef,o=t.useMSE,i=b.a.stringify({autoplay:e&&"lens"===n,useMSE:o});return d.a.createElement(k,{placeholder:d.a.createElement("div",{className:"VideoCard-player"})},d.a.createElement("div",{className:"VideoCard-player"},d.a.createElement("iframe",{ref:a,frameBorder:0,allowFullScreen:!0,src:"".concat(r,"?").concat(i),onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,r=this.state,a=r.isMobile,o=r.playerShown,i=r.playerLoading;return d.a.createElement("div",{className:f()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":a})},this.renderContent(),o&&d.a.createElement("div",{className:f()("VideoCard-overlay",{"is-loading":i})},this.renderPlayer(!0)),d.a.createElement("div",{className:f()("VideoCard-mask",{"is-shown":i})}))}}]),t}(u.Component);I.propTypes={interactive:l.a.bool,showPlayButton:l.a.bool,usePlayButtonWithFileSize:l.a.bool,fileSize:l.a.number,onPlay:l.a.func,onPlayFailed:l.a.func,onLensPlay:l.a.func,onBeforePlay:l.a.func,rightBottomButton:l.a.oneOfType([l.a.element,l.a.string]),thumbnail:l.a.oneOfType([l.a.element,l.a.string]),content:l.a.object},I.defaultProps={interactive:!0,showPlayButton:!0};var M=I;n.d(t,"b",function(){return M}),n.d(t,"a",function(){return T})},function(e,t,n){"use strict";var r=n(1784).OrderedMap,a={createFromArray:function(e){return r(e.map(function(e){return[e.getKey(),e]}))}};e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(e.size){var a=0;e.reduce(function(e,o,i){return t(e,o)||(n(e)&&r(a,i),a=i),o}),n(e.last())&&r(a,e.count())}}},function(e,t,n){"use strict";e.exports=function(e){return"handled"===e||!0===e}},function(e,t,n){"use strict";var r=n(1786);e.exports=function(e,t,n){var a=e.getSelection(),o=e.getCurrentContent(),i=a;if(a.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return o}else if(e.isSelectionAtStartOfContent())return o;if((i=t(e))===a)return o}return r.removeRange(o,i,n)}},function(e,t,n){"use strict";var r=n(29),a=n(24),o=n(22),i=n(0),s=n(1),c=n.n(s),l=n(1849),u=n(32),d=n.n(u),p=n(31),f=n(54),h=n(16),b=n(1826),m=n(1830),v=n(96);var g,y="function"==typeof Image,O={},j=y?v(function(e){return new Promise(function(t){return n=e,r=function(e,n){O[e]=n,t(n)},(a=new Image).onload=function(){var e=a.width>0&&a.height>0;r(n,e)},a.onerror=function(){r(n,!1)},void(a.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,r,a})}):function(){return Promise.resolve(!1)},w=function(e){var t=O[e],n=Object(s.useState)(t||!1),a=Object(r.a)(n,2),o=a[0],i=a[1];return y&&void 0===t&&j(e).then(i),o},C=n(4),k=n(5),S=n(8),N=n(6),A=n(7),T=n(19),_=n.n(T),E=n(3),x=n(1827),I=n.n(x),M=n(71),R=n.n(M),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.a;return function(n){return I()(function(r){function a(){var e,n;Object(C.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(S.a)(this,(e=Object(N.a)(a)).call.apply(e,[this].concat(o)))).key=t(),n}return Object(A.a)(a,r),Object(k.a)(a,[{key:"render",value:function(){return c.a.createElement(n,Object.assign({},this.props,Object(E.a)({},e,this.key)))}}]),a}(c.a.Component),n)}},L=n(1875),P=n(242),B=n.n(P),z=function(e,t){return function(n){var r,a=(r=[],{value:{},listen:function(e){r.push(e)},unlisten:function(e){r=r.filter(function(t){return t!==e})},emit:function(e){this.value=e,r.forEach(function(t){return t(e)})}}),o=Object(L.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),i=function(e,t){return e?B()(e,function(e){return function(){return t(e.apply(void 0,arguments))}}):{dispatch:t}}(t,function(e){return a.emit(e(a.value))}),s=Object.assign(function(t){return c.a.createElement(o,{source:a},function(r){return c.a.createElement(n,Object.assign({},t,e({value:r,source:a},t),i))})},{source:a});return I()(s,n)}};!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(g||(g={}));var q=function(e){return c.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),c.a.createElement("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),c.a.createElement("svg",Object.assign({x:16,y:18.5},e),c.a.createElement("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},F=function(e){return c.a.createElement("svg",Object.assign({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),c.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.a.createElement("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),c.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),c.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},c.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),c.a.createElement("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),c.a.createElement("svg",{x:"16",y:"18.5"},c.a.createElement("g",{fill:"#ffffff"},c.a.createElement("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),c.a.createElement("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},c.a.createElement("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),c.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},U=function(e){return c.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),c.a.createElement("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),c.a.createElement("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},V=(n(1922),function(){return new Promise(requestAnimationFrame)}),Q=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){var t=n.props,r=t.gifKey,a=t.src,o=t.onLoadStart,i=t.onSuccess,s=t.onFailed,c=t.onClick,l=t.onPlayChange,u=t.loadState,d=t.isPlaying;c&&c(e),l&&l(d),n.canPlay?n.props.updateGif({gifKey:r,isPlaying:!d}):u!==g.Loading&&(n.props.updateGif({gifKey:r,loadState:g.Loading}),o&&o(),Promise.all([Object(f.loadImage)(a),V().then(V)]).then(function(){i&&i(),n.props.updateGif({gifKey:r,isPlaying:!0,loadState:g.Ok})}).catch(function(e){s&&s(e),n.props.updateGif({gifKey:r,loadState:g.Failed})}))},n}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e,t=this.props,n=t.poster,r=t.src,a=t.size,o=t.loadState,i=t.isPlaying,s=t.onRef,l=this.canPlay&&i,u=o===g.Loading,d=o===g.Failed;return u?e=c.a.createElement(F,{className:"GifPlayer-icon"}):d?e=c.a.createElement(U,{className:"GifPlayer-icon"}):i||(e=c.a.createElement(q,{className:"GifPlayer-icon"})),e&&(this.lastIcon=e),c.a.createElement("div",{className:_()("GifPlayer",{isPlaying:i}),"data-size":a,onClick:this.handleClick,ref:s},c.a.createElement("img",{className:"ztext-gif",role:"presentation",src:l?r:n,"data-thumbnail":n,"data-size":a}),e||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===g.Ok}}]),t}(c.a.Component);Q.defaultProps={isPlaying:!1,loadState:g.Initial};var H=D("gifKey")(z(function(e,t){return e.value[t.gifKey]},{updateGif:function(e){return function(t){var n=e.gifKey,r=e.isPlaying,a=d()(e,["gifKey","isPlaying"]),o=Object.assign({},t);if(r)for(var i=0,s=Object.keys(o);i<s.length;i++){var c=s[i],l=o[c];c!==n&&l.isPlaying&&(o[c]=Object.assign({},l,{isPlaying:!1}))}return Object.assign({},o,Object(E.a)({},n,Object.assign({},t[n],{isPlaying:r},a)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(Q)),K=function(e,t){h.default.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},W=function(e){var t=e.src,n=e.useWebP,a=void 0===n?"auto":n,o=e.onRef,i=e.onLoadStateChange,l=d()(e,["src","useWebP","onRef","onLoadStateChange"]),u=Object(s.useState)(null),p=Object(r.a)(u,2),v=p[0],g=p[1],y=w("animation");Object(s.useEffect)(function(){v&&h.default.setModule(v,{module:"GifItem"})},[v]),Object(m.a)(v,function(){h.default.trackCardShow(v,{element:"Card"})});var O=Object(f.imgUrl)(t,{extension:("auto"===a?y:a)?"webp":"gif"});return c.a.createElement(H,Object.assign({src:O,onRef:Object(s.useCallback)(Object(b.a)(o,g),[]),onPlayChange:function(e){e||h.default.trackEvent(v,{action:"Click",element:"Image"})},onLoadStart:function(){i&&i("loadstart",O)},onSuccess:function(){K(v,"Success"),i&&i("load",O)},onFailed:function(){K(v,"Fail"),i&&i("error",O)}},l))},G=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).Component,n=void 0===t?W:t,a=Object(s.useState)(null),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var r=t.map(function(e){return function(e){var t=e.dataset,n=t.thumbnail,r={src:n,poster:n,size:t.size},a=document.createElement("div");return a.className="RichText-gifPlaceholder",e.parentNode.replaceChild(a,e),{data:r,target:a}}(e)}).map(function(e,t){var r=e.data,a=e.target;return Object(p.createPortal)(c.a.createElement(n,Object.assign({key:t},r)),a)});l(r)}}},[e]),i},J=n(493),Y=n(1923),X=n.n(Y),$=n(82),Z=n.n($),ee=n(103),te=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),r=document.createElement("span");return e.parentNode.replaceChild(r,e),{target:r,data:{id:t,name:n}}},ne=function(e){var t=Object(s.useState)(null),n=Object(r.a)(t,2),a=n[0],o=n[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(te).map(function(e,t){var n=e.data,r=e.target;return Object(p.createPortal)(Object(i.b)(ee.a,{key:t,user:n}),r)});o(n)}}},[e]),a},re=n(1821),ae=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,r={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};r=e.getAttribute("data-lens-id")?Object.assign({},r,{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign({},r,{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(r=Object.assign({},r,{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var a=document.createElement("div");return e.parentNode.replaceChild(a,e),{target:a,data:r}},oe=function(e){var t=Object(s.useState)(null),n=Object(r.a)(t,2),a=n[0],o=n[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var n=t.map(ae).map(function(e,t){var n=e.data,r=e.target;return Object(p.createPortal)(Object(i.b)(re.a,{key:t,data:n}),r)});o(n)}}},[e]),a},ie=(n(1927),{}),se=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),r=n.split(".")[1],a="webp"===r||"gif"===r?r:"image",o=Object($.statGenerator)({appName:"heifetz"})("".concat(a,".unknown.RichText"));switch(e){case"loadstart":ie[n]=Date.now();break;case"load":if(ie[n]){var i="".concat(o,".success");Z.a.increment({raw:"".concat(i,".cnt")}),Z.a.timing(i,Date.now()-ie[n]),delete ie[n]}break;case"timeout":if(ie[n]){var s="".concat(o,".timeout.cnt");Z.a.increment({raw:s}),delete ie[n]}break;case"error":if(ie[n]){var c="".concat(o,".failure.cnt");Z.a.increment({raw:c}),delete ie[n]}}},ce=function(e){return Object(i.b)(W,Object(o.default)({onLoadStateChange:se},e))};t.a=function(e){var t=e.ecommerce,n=Object(a.a)(e,["ecommerce"]),u=Object(s.useState)(null),d=Object(r.a)(u,2),p=d[0],f=d[1];return Object(i.b)(c.a.Fragment,null,Object(i.b)(l.a,Object(o.default)({},n,{onRef:f,lazyLoadImageProps:{onLoadStateChange:se}})),G(p,{Component:ce}),oe(p),ne(p),Object(J.d)(p,{ecommerce:t,Component:X.a}))}},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(2),l=n.n(c),u=n(1),d=n(31),p=(n(1822),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleObserve=function(e){var t=n.props.onObserve;t&&t(e)},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.target=Object(d.findDOMNode)(this),this.observer=this.createObserver(),this.observer.observe(this.target)}},{key:"componentWillUnmount",value:function(){this.target&&this.observer.unobserve(this.target)}},{key:"createObserver",value:function(){var e=this.props,t={root:e.root,rootMargin:e.rootMargin,threshold:e.threshold};return new window.IntersectionObserver(this.handleObserve,t)}},{key:"render",value:function(){return this.props.children}}]),t}(u.Component));p.propTypes={root:l.a.object,rootMargin:l.a.string,threshold:l.a.oneOfType([l.a.number,l.a.arrayOf(l.a.number)]),onObserve:l.a.func},t.a=p},,function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n.n(d),f=n(2225),h=n(15),b=n(16),m=n(63),v=n(168),g=(n(1972),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).buttonRef=p.a.createRef(),n.handleClick=function(e){var t=n.props,r=t.zaInfos,a=r.toggleComment,o=r.getCommentAction,i=t.positionStatus,s=t.onClick,c=t.commentsShown;if(b.default.trackEvent(n.buttonRef.current,Object.assign({action:o?o(!c):"Comment",element:"Button",is_intent:!0},a&&{id:a})),s){var l="fixed"===i?"fixed":"bottom",u={commentsShown:!n.props.commentsShown,commentsAutoFocus:!(e instanceof KeyboardEvent),commentPattern:l};e instanceof KeyboardEvent&&"bottom"===l&&n.buttonRef.current.focus(),s(e,u)}},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.count,a=t.commentsShown,o=t.commentClosed;a?e="收起评论":e=r&&!o?"".concat(Object(m.formatNumber)(r)," 条评论"):"添加评论";return Object(c.b)(p.a.Fragment,null,Object(c.b)(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(c.b)(h.c,{onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:f.a,label:e}))}}]),t}(d.Component));g.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},g.defaultProps={zaInfos:{},onInstance:function(){return null}},t.a=g},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n(196),f=n(282),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handlePackup=function(){var e=n.props.onClose;window.scrollTo(0,n.originPageYOffset),e&&e()},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.showPackupButton,r=e.parent,a=e.commentPattern,o=e.commentInputPosition,i=e.onClose,s=e.byComment,l=e.needLoadCommentPermission,u=e.isMobile,d=e.onOrderChange,h=e.onItemLike,b=e.onPaginationClick,m=e.autoFocus,v=e.onMount,g=e.zaInfo;return t?"bottom"===a?Object(c.b)(f.a,{autoFocus:m,parent:r,commentPattern:a,commentInputPosition:o,showPackupButton:n,handlePackupButton:this.handlePackup,needLoadCommentPermission:l,isMobile:u,onOrderChange:d,onItemLike:h,onPaginationClick:b,onMount:v,zaInfo:g}):Object(c.b)(p.b,{size:"fullPage",onClose:i,maskClosable:!1},t&&"fixed"===a&&Object(c.b)(f.a,{parent:r,commentPattern:a,byComment:s,needLoadCommentPermission:l,onOrderChange:d,onItemLike:h,onPaginationClick:b,onMount:v,zaInfo:g})):null}}]),t}(d.Component);h.propTypes={byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,showPackupButton:u.a.bool,commentPattern:u.a.string,commentInputPosition:u.a.oneOf(["top","bottom"]),onClose:u.a.func,needLoadCommentPermission:u.a.bool,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,autoFocus:u.a.bool,onMount:u.a.func,zaInfo:u.a.object},h.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=h},function(e,t,n){"use strict";e.exports=n(1862)},function(e,t,n){"use strict";var r=n(24),a=n(22),o=n(4),i=n(5),s=n(8),c=n(6),l=n(7),u=n(0),d=n(2),p=n.n(d),f=n(1),h=n.n(f),b=n(18),m=n(11),v=n.n(m),g=n(15),y=n(1804),O=n(1783),j=n(484),w=n(199),C=n(1888),k=n(1850),S=n(1810),N=n(197),A=n(498),T=n(54),_=n(16),E=n(168),x=n(68),I=n.n(x),M=n(138),R=n(1770),D=(n(1962),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,a=e.content,o=this.hintInfo,i=o&&"danger"===o.type;return Object(u.b)("div",{className:v()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i},Object(u.b)("span",{className:"SharePopover-arrow"}),Object(u.b)("div",{className:v()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||r(a)}},Object(u.b)(R.a,{className:"SharePopover-quote",size:24}),Object(u.b)("span",{className:"SharePopover-main"},"发送到百科下的摘录"),o&&Object(u.b)("span",{className:"SharePopover-hint"},o.text)))}},{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}}]),t}(f.Component));D.propTypes={content:p.a.string,top:p.a.number,visible:p.a.bool};var L=D,P=n(29),B=n(196),z=n(1937),q=n(1957),F=n(1736),U=(n(1965),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={topics:[],active:!1},n.handleTopicsChange=function(e){(0,n.props.onChange)(e),n.setState(function(t){return Object.assign({},t,{topics:e})})},n.handleToggleActive=function(){n.setState(function(e){return Object.assign({},e,{active:!e.active})})},n.handleActive=function(){n.setState(function(e){return Object.assign({},e,{active:!0})},n.topicInputFocus)},n.handleBlur=function(){n.setState(function(e){return Object.assign({},e,{active:!1})},n.topicInputBlur)},n.topicInputFocus=function(){return n.topicsInput&&n.topicsInput.focus()},n.topicInputBlur=function(){return n.topicsInput&&n.topicsInput.blur()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.topics;return Object(u.b)("div",{className:v()("TopicSelect",{"TopicSelect--select":this.hasSelectTopic})},this.shouldShowTopicInput?Object(u.b)(q.a,{value:t,onRef:function(t){e.topicsInput=t},onChange:this.handleTopicsChange,onBlur:this.handleBlur}):Object(u.b)(g.c,{className:"TopicSelect-placeholderButton",label:"添加话题",icon:F.a,preset:"plain",color:"blue",onClick:this.handleActive}))}},{key:"hasSelectTopic",get:function(){return 1===this.state.topics.length}},{key:"shouldShowTopicInput",get:function(){var e=this.state,t=e.topics;return e.active||1===t.length}}]),t}(f.Component)),V=(n(1966),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={topics:[]},n.handleChangeTopics=function(e){n.setState(function(t){return Object.assign({},t,{topics:e})})},n.handleSubmit=function(){var e=Object(P.a)(n.state.topics,1)[0].urlToken;(0,n.props.onSubmit)(e)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,a=e.title,o=e.url,i=e.onClose,s=e.content,c=e.visible;return Object(u.b)(B.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm"},c&&Object(u.b)(f.Fragment,null,Object(u.b)(z.a,{type:t,author:n,member:r,title:a,url:o,content:s,theme:"scroll"}),Object(u.b)(U,{onChange:this.handleChangeTopics}),Object(u.b)("div",{className:"AbstractForm-footer"},Object(u.b)(g.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit},"确定"))))}},{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}}]),t}(f.Component));V.propTypes={type:p.a.string.isRequired,author:p.a.object,currentUser:p.a.object,title:p.a.string.isRequired,content:p.a.string.isRequired,url:p.a.string.isRequired,visible:p.a.bool.isRequired,onClose:p.a.func.isRequired,onSubmit:p.a.func.isRequired};var Q,H,K,W,G=n(132),J=n(154),Y=Object(J.b)()(Q=Object(b.connect)(null,{createAbstract:G.c})((K=H=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},n.handlePopoverShow=function(e,t){if(!n.hasAddBaikeSummaryPermission)return null;_.default.trackCardShow(null,{id:6115}),n.setState(function(n){return Object.assign({},n,{top:t,content:e,popoverVisible:!0})})},n.handlePopoverClose=function(){if(!n.hasAddBaikeSummaryPermission)return null;n.setState(function(e){return Object.assign({},e,{popoverVisible:!1})})},n.handleAbstractModalClose=function(){n.setState(function(e){return Object.assign({},e,{abstractModalVisible:!1})})},n.handleAbstractSelected=function(e){_.default.trackEvent(null,{id:6116,action:"Send"}),n.setState(function(t){return Object.assign({},t,{content:e,popoverVisible:!1,abstractModalVisible:!0})})},n.handleCreateAbstract=function(e){var t=n.props,r=t.type,a=t.objectId,o=t.createAbstract,i=n.state.content;_.default.trackEvent(null,{id:6117,action:"Submit"}),o({type:r,token:a,topicId:e,content:i}).then(function(){n.setState(function(e){return Object.assign({},e,{content:i,popoverVisible:!1,abstractModalVisible:!1})})})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,r;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=(r=Object(M.a)(I.a.mark(function r(a){var o,i;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise(function(e){setTimeout(function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())},0)});case 2:(o=r.sent)?(i=a.target===e?a.offsetY:a.offsetY+a.target.offsetTop+30,t(o,i)):n();case 4:case"end":return r.stop()}},r)})),function(e){return r.apply(this,arguments)})}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,a=e.abstractModalVisible,o=this.props,i=o.type,s=o.author,c=o.currentUser,l=o.title,d=o.url,p=o.isCopyable;return this.hasAddBaikeSummaryPermission?Object(u.b)(f.Fragment,null,Object(u.b)(L,{top:n,visible:t,content:r,isCopyable:p,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(u.b)(V,{type:i,onSubmit:this.handleCreateAbstract,author:s,visible:a,onClose:this.handleAbstractModalClose,currentUser:c,title:l,url:d,content:r})):null}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}}]),t}(f.Component),H.propTypes={type:p.a.string.isRequired,author:p.a.object.isRequired,currentUser:p.a.object.isRequired,title:p.a.string.isRequired,url:p.a.string.isRequired,objectId:p.a.number.isRequired,isCopyable:p.a.bool},H.defaultProps={isCopyable:!0},Q=K))||Q)||Q,X=n(271),$=n(30),Z=n(514),ee=n(27),te=n(1809),ne=(n(1967),Object(b.connect)(function(e,t){return{isCurrentUser:Object(ee.g)(e,t.data.author)}})(W=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(c.a)(t).call(this))).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object($.default)(e)),e.handleCopy=e.handleCopy.bind(Object($.default)(e)),e.handleTipClose=e.handleTipClose.bind(Object($.default)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?a+e:e+a,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),o=a.toString().trim(),i=this.getRangeHtml(a);if(o&&!(o.length<128)){var s=o.length>=512,c=this.getCopyHtml(i,t,n,s),l=this.getCopyText(o,t,n,s),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+c),u.setData("text/plain",l),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=c;var p=d.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),r.selectAllChildren(p),setTimeout(function(){document.body.removeChild(p),r.removeAllRanges(),r.addRange(a)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),o=this.randomRange(44,66);if(!(a.length<=o)){e.preventDefault(),e.stopPropagation();var i,s=r.getBoundingClientRect(),c=window.pageYOffset,l=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var p=this.props.viewPort,f=s.top+c,h=s.bottom+c,b=c+p.top+52,m=c+p.bottom-52;h<b?i=b-52:h<m?i=h:(d="top",i=f>b&&f<m?f:m+52)}var v=-1!==l?l+3:s.left+(s.right-s.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,o=n.id,i=n.question,s=n.reshipmentSettings,c=n.relationship,l=(c=void 0===c?{}:c).isAuthor,d=c.isAuthorized,p=t.isCurrentUser,f="";if("article"===a?f="https://zhuanlan.zhihu.com/p/".concat(o):"answer"===a&&(f="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(o)),!p&&!l)switch(s){case"disallowed":this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!d){this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(o)},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,f,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,r=e.html,a=e.children,o=e.onClick,i=e.className,s=e.itemProp,c=e.style,l=e.prefix,d=e.ecommerce,p=this.state,f=p.tipShown,h=p.tipContent,b=p.tipX,m=p.tipY,v=p.tipPosition;return Object(u.b)("div",{ref:t,onClick:o,className:i,style:c},l,Object(u.b)(te.a,{itemProp:s,tag:n,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:d}),a,Object(u.b)(Z.a,{shown:f,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:b,y:m,position:v,content:h,className:"CopyrightRichText-tooltip"}))}}]),t}(f.Component))||W);ne.propTypes={onRef:p.a.func,viewPort:p.a.object};var re=ne,ae=n(1821),oe=n(481),ie=n(26),se=n(821),ce=n.n(se),le=n(151);function ue(){var e=Object(oe.a)(["发布于",""]);return ue=function(){return e},e}function de(){var e=Object(oe.a)(["编辑于",""]);return de=function(){return e},e}function pe(){var e=Object(oe.a)(["发布于",""]);return pe=function(){return e},e}var fe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick;return Object(u.b)("div",{className:"ContentItem-time"},Object(u.b)(ie.Link,{to:t,target:"_blank",onClick:a},Object(u.b)("span",{"data-tooltip":ce()(pe(),Object(le.toDateTimeString)(n))},r!==n?ce()(de(),Object(le.toSmartDateTimeString)(r)):ce()(ue(),Object(le.toSmartDateTimeString)(n)))))}}]),t}(f.Component);fe.propTypes={href:p.a.string,created:p.a.number,updated:p.a.number,onClick:p.a.func};var he,be,me,ve=fe,ge=n(55),ye=n(523),Oe=n(389);n(1968);n.d(t,"a",function(){return ve});var je=/.*?(class="link-box")/,we=800,Ce=400;var ke=Object(b.connect)(function(e){return{isMobile:Object(ge.d)(e)}},{updateReadStatus:ye.b})((me=be=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state=Object.assign({},n.getInitTruncatedState(n.props),{shouldSticky:!1,offset:0}),n.richContentRef=h.a.createRef(),n.truncateContent=function(){var e=n.props.isMobile?Ce:we,t=n.props.expandedHeight||e;(!n.content||n.content.scrollHeight<t)&&n.setState({isTruncated:!1,isExpanded:!1}),n.content&&n.content.scrollHeight>n.content.offsetHeight&&n.setState({contentCollapsed:!0})},n.updateStateInBrowser=function(){var e=n.props,t=e.excerpt,r=e.html,a=e.expanded,o=e.cover,i=e.unescapable,s=e.limit,c=e.limitWithImage,l=e.truncateHTMLOptions,u=e.truncateDisabled,d=!0,p=n.state.truncatedContent;if(t&&(je.test(t)||u))p=t;else if(!i){var f=o?c:s,h=n.truncate(r,f,l);d=h.isTruncated,p=h.content}return{isTruncated:d,isExpanded:r&&a,truncatedContent:p,previewImg:null}},n.checkOpenInAppStyle=function(e){},n.toggle=function(e){n.isCollapsed()?n.handleExpand(e):n.handleCollapse(e)},n.handleExpand=function(e){var t=n.props.zaIds.expand;_.default.trackEvent(n.richContentRef.current,Object.assign({action:"Expand",name:e&&e.target.textContent},t&&{id:t}));var r=n.props.onExpand;if(r)r(e);else{var a=n.props,o=a.onToggleExpend,i=a.data,s=i.type,c=i.id;n.context.currentUser&&Object(Oe.c)("article"===s?"post":s,c,Oe.a);o&&o(!0),n.setState({isExpanded:!0},function(){"article"===s&&Object(N.onViewedOnce)(n.richContentRef.current,function(){_.default.trackEvent(n.richContentRef.current,{action:"ReadFinish"})})})}},n.handleCollapse=function(){var e=n.props.onToggleExpend;_.default.trackEvent(n.richContentRef.current,{action:"Collapse",element:"Button"});e&&e(!1),n.setState({isExpanded:!1},function(){return n.checkOpenInAppStyle(!1)})},n.handlePreview=function(e){var t=n.state,r=t.isExpanded,a=t.isTruncated&&!r,o=e.target;!a&&"IMG"===o.tagName&&o.classList.contains("zh-lightbox-thumb")&&n.setState({previewImg:o})},n.handlePositionStatusChange=function(e){var t=n.props.onPositionStatusChange;t&&(t(e),n.checkOpenInAppStyle("fixed"===e))},n.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var r=t>0;r!==n.state.shouldSticky&&(n.setState({shouldSticky:r}),r||n.checkOpenInAppStyle(!1))}},n.handleTrunObserve=function(e){var t=n.props,r=t.data,a=(r.type,r.id,t.updateReadStatus,e[0]),o=a.intersectionRatio,i=a.isIntersecting;n.truncateComputed||(o>0||i)&&(setTimeout(function(){return n.truncateContent()}),n.truncateComputed=!0)},n.isCollapsed=function(){var e=n.props,t=e.after,r=e.before,a=e.unescapable,o=n.state,i=o.isExpanded,s=o.isTruncated;return!r&&!t||a?s&&!i:!i},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(N.onViewedOnce)(this.richContentRef.current,function(){var t=e.props,n=t.data,r=n.type,a=n.id,o=t.expanded;e.context.currentUser&&o&&Object(Oe.c)("article"===r?"post":r,a,Oe.a)}),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,s=window.innerHeight,c=a<s?i-o:r-(s-i);window.scrollTo(0,this.scroll+c),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(A.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,s=t.onClick,c=t.videoData,l=t.needExpandArrow,d=void 0===l||l,p=this.state,f=p.isExpanded,h=p.isTruncated,b=p.shouldSticky,m=p.offset;if(!f)return[r&&h&&!c&&Object(u.b)(g.c,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:s||this.handleExpand},i,d&&Object(u.b)(O.a,{className:"ContentItem-arrowIcon",center:!0})),n&&Object(u.b)(X.a,{key:"actions"},n)];var v=(n||!a)&&Object(u.b)(X.a,{className:"RichContent-actions"},n,!a&&Object(u.b)(g.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},Object(u.b)("span",{className:"RichContent-collapsedText"},"收起"),Object(u.b)(O.a,{className:"ContentItem-arrowIcon is-active",center:!0})));return b&&v?Object(u.b)(w.a,{offset:m,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange},v):v}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,o=t.data,i=t.itemProp,s=void 0===i?"text":i,c=t.expandText,l=void 0===c?"阅读全文":c,d=t.onClick,p=t.prefix,f=t.unescapable,h=(t.isSearchContent,t.collapsedHeight),b=t.ecommerce,m=t.canAbstract,y=this.state,w=y.truncatedContent,k=y.previewImg,N=y.viewPort,A=y.contentCollapsed,T=this.isCollapsed(),_=w||r,E="answer"===o.type?Object(C.a)(n):n,x=T?_:E,I={},M=Object(u.b)(re,Object(a.default)({itemProp:s,key:T,className:v()("RichContent-inner",{"RichContent-inner--collapsed":A}),style:T&&f?{maxHeight:h}:null,tag:"span",onRef:function(t){e.content=t},data:o,html:x,viewPort:N,prefix:p},T&&{onClick:d||this.handleExpand},I,{ecommerce:b}),m&&Object(u.b)(Y,this.abstractProps),!f&&T&&Object(u.b)(g.c,{preset:"plain",className:"ContentItem-more"},l,Object(u.b)(O.a,{className:"ContentItem-arrowIcon",center:!0})),k&&Object(u.b)(j.a,{img:k,onClose:function(){return e.setState({previewImg:null})}}));return f?Object(u.b)(S.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},M):M}},{key:"render",value:function(){var e=this.props,n=e.unescapable,r=e.after,a=e.before,o=e.extra,i=e.cover,s=e.hasVideo,c=e.renderCanExpandExtra,l=e.className,d=e.videoData,p=e.handleClickVideoMoreButton,h=this.state.isExpanded,b=this.isCollapsed(),m=d?Object(u.b)(f.Fragment,null,Object(u.b)(ae.a,{data:d}),Object(u.b)("p",{className:"RichContent-videoMore",onClick:p},"点击查看全文")):this.renderText(),g=h?Object(u.b)(S.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve},m):m;return Object(u.b)("div",{className:v()("RichContent",l,{"is-collapsed":b,"RichContent--unescapable":n}),ref:this.richContentRef,onClick:this.handlePreview},Object(u.b)(E.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!b&&a,!n&&b&&i&&Object(u.b)(t.Cover,{url:i,hasVideo:s,onClick:this.handleExpand}),g,o||"function"==typeof c&&c(h,this.handleExpand),!b&&r,this.renderActions())}},{key:"abstractProps",get:function(){var e=this.props.data;return{objectId:e.id,type:e.type,author:e.author,title:e.question.title,url:e.url,isCopyable:e.isCopyable}}}]),t}(f.Component),be.contextTypes={currentUser:p.a.object},be.propTypes={unescapable:p.a.bool,expanded:p.a.bool,noCollapsed:p.a.bool,limit:p.a.number,limitWithImage:p.a.number,collapsedHeight:p.a.number,html:p.a.string,excerpt:p.a.string,truncateDisabled:p.a.bool,before:p.a.node,after:p.a.node,prefix:p.a.node,extra:p.a.node,renderCanExpandExtra:p.a.func,topExcludedHeight:p.a.number,onPositionStatusChange:p.a.func,type:p.a.string,data:p.a.object,canAbstract:p.a.bool,cover:p.a.string,hasVideo:p.a.bool,truncateHTMLOptions:p.a.object,expandText:p.a.string,onToggleExpend:p.a.func,videoData:p.a.object,handleClickVideoMoreButton:p.a.func,zaIds:p.a.shape({expand:p.a.number})},be.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},be.Cover=function(e){var t=e.url,n=e.hasVideo,o=Object(r.a)(e,["url","hasVideo"]);return Object(u.b)("div",Object(a.default)({className:v()("RichContent-cover",{"RichContent-cover--mobile":!1})},o),Object(u.b)("div",{className:"RichContent-cover-inner"},Object(u.b)(k.a,{thumbnail:Object(T.imgUrl)(t,"60w"),url:Object(T.imgUrl)(t,"400x224"),alt:"cover"})),n&&Object(u.b)(y.a,{className:"RichContent-cover-play"}))},he=me))||he;t.b=ke},function(e,t,n){"use strict";var r=n(1889),a=n(1890);e.exports=function(e,t){var n=t.getStartKey(),o=t.getStartOffset(),i=t.getEndKey(),s=t.getEndOffset(),c=a(e,t).getBlockMap(),l=c.keySeq(),u=l.indexOf(n),d=l.indexOf(i)+1;return r(c.slice(u,d).map(function(e,t){var r=e.getText(),a=e.getCharacterList();return n===i?e.merge({text:r.slice(o,s),characterList:a.slice(o,s)}):t===n?e.merge({text:r.slice(o),characterList:a.slice(o)}):t===i?e.merge({text:r.slice(0,s),characterList:a.slice(0,s)}):e}))}},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1894),o=n(1784),i=n(382),s=(0,o.Map)(),c=0;function l(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var u={getLastCreatedEntityKey:function(){return l("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),u.__getLastCreatedEntityKey()},create:function(e,t,n){return l("DraftEntity.create","contentState.createEntity"),u.__create(e,t,n)},add:function(e){return l("DraftEntity.add","contentState.addEntity"),u.__add(e)},get:function(e){return l("DraftEntity.get","contentState.getEntity"),u.__get(e)},mergeData:function(e,t){return l("DraftEntity.mergeData","contentState.mergeEntityData"),u.__mergeData(e,t)},replaceData:function(e,t){return l("DraftEntity.replaceData","contentState.replaceEntityData"),u.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+c},__create:function(e,t,n){return u.__add(new a({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++c;return s=s.set(t,e),t},__get:function(e){var t=s.get(e);return t||i(!1),t},__mergeData:function(e,t){var n=u.__get(e),a=r({},n.getData(),t),o=n.set("data",a);return s=s.set(e,o),o},__replaceData:function(e,t){var n=u.__get(e).set("data",t);return s=s.set(e,n),n}};e.exports=u},function(e,t,n){"use strict";var r={encode:function(e,t,n){return e+"-"+t+"-"+n},decode:function(e){var t=e.split("-"),n=t[0],r=t[1],a=t[2];return{blockKey:n,decoratorKey:parseInt(r,10),leafKey:parseInt(a,10)}}};e.exports=r},function(e,t,n){var r=n(1857),a=n(272),o=r?function(e){return r.get(e)}:a;e.exports=o},function(e,t,n){var r=n(1858),a=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=a.call(r,t)?n.length:0;o--;){var i=n[o],s=i.func;if(null==s||s==e)return i.name}return t}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"DOM",function(){return g}),n.d(r,"PLAYER",function(){return y});var a={};n.r(a),n.d(a,"PLAYER",function(){return O});var o=n(22),i=n(4),s=n(5),c=n(8),l=n(6),u=n(30),d=n(7),p=n(0),f=n(1),h=n(18),b=n(1810),m=n(1804),v=n(1851),g={PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},y={QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen"},O={PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen"},j="griffith";var w,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0;return{subscribeMessage:function(r){function a(a){var o=a.origin||a.originalEvent.origin,i="*"===t||t===o,s=a.data||{},c=s.from,l=s.id,u=s.payload;if(i&&c===j&&(!n||e===l)&&u){var d=u.messageName,p=u.data;d&&r(d,p,a.source)}}return window.addEventListener("message",a),{unsubscribe:function(){return window.removeEventListener("message",a)}}},dispatchMessage:function(n,r,a){n&&n.postMessage&&n.postMessage({from:j,id:e,payload:{messageName:r,data:a}},t||"*")}}},k=n(55),S=n(23),N=n(244),A=n(195),T=n(1823),_=n.n(T),E=function(e,t){return e+(t?Date.now()-t:0)},x=function(e,t){return Math.abs(e-t)<.01},I={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},M={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},R=[1,2,3,5,8,13];function D(e){var t,n="sd",r=0,a=null,o=0,i=null,s=!1,c=0,l=0;function u(t,s){e(t,Object.assign({play_event_identifier:a,duration:1e3*r,elapsed:E(o,i),video_quality:I[n]},s))}function d(){(++l<15?R.includes(l):l%15==0)&&u({action:"Playing"})}function p(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,s=e.duration;r=s,x(n,0)&&(a=_()(),o=0),i=Date.now(),x(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),l=0,p(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;i&&(o+=Date.now()-i,i=null),x(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),p()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:M[t]}),n=t},handleFragmentLoading:function(){s||(c=Date.now())},handleFragmentLoaded:function(){s||(s=!0,u({action:"Load"},{video_load_time:Date.now()-c}))},clearTick:p}}var L=Object(h.connect)(function(e,t){var n=t.data,r=n.isLens,a=n.id;if(r){var o=!1;return"undefined"!=typeof window&&!Object(k.d)(e,{includeTablet:!0})&&/Chrome/.test(navigator.userAgent)&&(o="1"===Object(k.a)(e,"ls_fmp4")),{data:Object.assign({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/".concat(a)}),useMSE:o}}return{data:e.video.data[a]||t.data}},{showNotification:S.h,loadVideo:N.c})(w=Object(A.a)(function(e){var t=e.data,n=t.isLens,r=t.id,a=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:r,is_playable:Boolean(a)},trackCardShow:!0,view:{id:174}}})(w=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.messageHelper.dispatchMessage(e.contentWindow,a.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},n.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter(function(e){return e!==n.iframe}).forEach(function(e){return n.pauseVideoInIframe(e)})},n.handleMessage=function(e,t){var a=n.videoTracker,o=a.handlePlayEvent,i=a.handlePauseEvent,s=a.handleQualityChangeEvent,c=a.handleFragmentLoading,l=a.handleFragmentLoaded;switch(e){case r.DOM.PLAY:n.pauseAllOtherVideos(),o(t);break;case r.DOM.PAUSE:i(t);break;case r.PLAYER.QUALITY_CHANGE:s(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":l(t)}},n.handleObserve=function(e){e[0].intersectionRatio<=0&&n.iframe&&n.pauseVideoInIframe(n.iframe,!0)},n.handlePlay=function(){n.props.trackEvent(Object(u.default)(n),{id:5500,action:"Play",element:"Video"})},n.handlePlayFailed=function(){(0,n.props.showNotification)("视频加载失败，请刷新页面重试","red")};var o=e.trackEvent,s=e.data;return n.messageHelper=C(s.id,"*",!0),n.videoTracker=D(function(e,t){o(Object(u.default)(n),e,{play:t})}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,r=t.id,a=t.playerUrl,o=t.flvPlayerUrl,i=e.loadVideo;n||!r||a||o||i(r);var s=this.messageHelper.subscribeMessage;this.messageSubscription=s(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.data.error,a=t.onBeforePlay,i=t.useMSE;return Object(p.b)("div",{className:"RichText-video"},r?Object(p.b)(v.a,n):Object(p.b)(b.a,{onObserve:this.handleObserve},Object(p.b)(m.b,Object(o.default)({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:a},i&&{useMSE:!0}))))}}]),t}(f.Component))||w)||w;t.a=L},function(e,t,n){e.exports=n(66)(285)},function(e,t,n){var r=n(1878),a=n(1879);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[o+s]=i[s];return t||a(i)}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var r=n(0),a=(n(1),n(1916)),o=n.n(a),i=n(1917),s=n.n(i),c={iOS:"mm_404630053_874300204_109467000342",Android:"mm_404630053_874300204_109466550378",PC:"mm_404630053_874300204_109467350296"},l=[{name:"jingdong",callbackName:"onJingdongButtonClick",text:"京东",Logo:function(e){var t=e.className;return Object(r.b)("img",{className:t,src:o.a,alt:""})},color:"#e4393c"},{name:"taobao",callbackName:"onTaobaoButtonClick",text:"淘宝",Logo:function(e){var t=e.className;return Object(r.b)(s.a,{className:t})},color:"#ff9607"}]},function(e,t,n){var r=n(1924),a=n(1925),o=a;o.v1=r,o.v4=a,e.exports=o},function(e,t,n){"use strict";t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach(function(t){return function(e,t){"object"==typeof t?t.current=e:"function"==typeof t&&t(e)}(e,t)})}}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,i=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var p=l(n);p&&p!==u&&e(t,p,d)}var f=i(n);s&&(f=f.concat(s(n)));for(var h=0;h<f.length;++h){var b=f[h];if(!(r[b]||a[b]||d&&d[b])){var m=c(n,b);try{o(t,b,m)}catch(e){}}}return t}return t}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(1),a=function(e){var t=Object(r.useRef)();return t.current=Object(r.useCallback)(e,[e]),Object(r.useState)(function(){return function(){return t.current.apply(t,arguments)}})[0]};t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootMargin,i=n.threshold,s=n.once,c=void 0===s||s;e=Array.isArray(e)?e:e?[e]:[];var l=Object(r.useRef)(null),u=a(t);Object(r.useEffect)(function(){if(e.length)return l.current&&e.forEach(function(e){return l.current.unobserve(e)}),l.current=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&(u(e),c&&l.current.unobserve(e.target))})},{rootMargin:o,threshold:i}),e.forEach(function(e){return l.current.observe(e)}),function(){e.forEach(function(e){return l.current.unobserve(e)})}},[e,o,JSON.stringify(i),c])}},function(e,t,n){var r=n(1801),a=n(506),o=n(1819),i=n(1820),s=n(104),c=n(1859),l="Expected a function",u=8,d=32,p=128,f=256;e.exports=function(e){return a(function(t){var n=t.length,a=n,h=r.prototype.thru;for(e&&t.reverse();a--;){var b=t[a];if("function"!=typeof b)throw new TypeError(l);if(h&&!m&&"wrapper"==i(b))var m=new r([],!0)}for(a=m?a:n;++a<n;){b=t[a];var v=i(b),g="wrapper"==v?o(b):void 0;m=g&&c(g[0])&&g[1]==(p|u|d|f)&&!g[4].length&&1==g[9]?m[i(g[0])].apply(m,g[3]):1==b.length&&c(b)?m[v]():m.thru(b)}return function(){var e=arguments,r=e[0];if(m&&1==e.length&&s(r))return m.plant(r).value();for(var a=0,o=n?t[a].apply(this,e):r;++a<n;)o=t[a].call(this,o);return o}})}},function(e,t,n){"use strict";var r=n(1805),a=n(1787),o=n(1795),i=n(1788),s=n(1817),c=n(1793),l=n(1784),u=n(1797),d=n(1792),p=n(1833),f=l.List,h=l.Record,b=l.Repeat,m=c.draft_tree_data_support?i:o,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getEntityMap=function(){return s},t.prototype.getBlockMap=function(){return this.get("blockMap")},t.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},t.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},t.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},t.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.prototype.getFirstBlock=function(){return this.getBlockMap().first()},t.prototype.getLastBlock=function(){return this.getBlockMap().last()},t.prototype.getPlainText=function(e){return this.getBlockMap().map(function(e){return e?e.getText():""}).join(e||"\n")},t.prototype.getLastCreatedEntityKey=function(){return s.__getLastCreatedEntityKey()},t.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0},t.prototype.createEntity=function(e,t,n){return s.__create(e,t,n),this},t.prototype.mergeEntityData=function(e,t){return s.__mergeData(e,t),this},t.prototype.replaceEntityData=function(e,t){return s.__replaceData(e,t),this},t.prototype.addEntity=function(e){return s.__add(e),this},t.prototype.getEntity=function(e){return s.__get(e)},t.createFromBlockArray=function(e,n){var a=Array.isArray(e)?e:e.contentBlocks,o=r.createFromArray(a),i=o.isEmpty()?new u:u.createEmpty(o.first().getKey());return new t({blockMap:o,entityMap:n||s,selectionBefore:i,selectionAfter:i})},t.createFromText=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(n).map(function(e){return e=p(e),new m({key:d(),text:e,type:"unstyled",characterList:f(b(a.EMPTY,e.length))})});return t.createFromBlockArray(r)},t}(h({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}));e.exports=v},function(e,t,n){"use strict";var r=new RegExp("\r","g");e.exports=function(e){return e.replace(r,"")}},function(e,t,n){"use strict";var r=n(382),a="LTR",o="RTL",i=null;function s(e){return e===a||e===o}function c(e){return s(e)||r(!1),e===a?"ltr":"rtl"}function l(e){i=e}var u={NEUTRAL:"NEUTRAL",LTR:a,RTL:o,isStrong:s,getHTMLDir:c,getHTMLDirIfDifferent:function(e,t){return s(e)||r(!1),s(t)||r(!1),e===t?null:c(e)},setGlobalDir:l,initGlobalDir:function(){l(a)},getGlobalDir:function(){return i||this.initGlobalDir(),i||r(!1),i}};e.exports=u},function(e,t,n){"use strict";var r=n(1784).Map,a=n(1),o=n(1798),i=r({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:a.createElement("ul",{className:o("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:a.createElement("ol",{className:o("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:a.createElement("pre",{className:o("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=i},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(e,t,n){"use strict";function r(e,t){return t&&"MUTABLE"===e.__get(t).getMutability()?t:null}e.exports=function(e,t){var n;if(t.isCollapsed()){var a=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(a).getEntityAt(o-1))!==e.getBlockForKey(a).getEntityAt(o)?null:r(e.getEntityMap(),n):null}var i=t.getStartKey(),s=t.getStartOffset(),c=e.getBlockForKey(i);return n=s===c.getLength()?null:c.getEntityAt(s),r(e.getEntityMap(),n)}},function(e,t,n){"use strict";var r=n(2016);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";function r(e,t){var n=a.get(e,t);return"auto"===n||"scroll"===n}var a={get:n(2018),getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=a},function(e,t,n){"use strict";var r=n(2023),a=n(2024);e.exports=function(e){var t=r(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=a(e),o=e===t?e.ownerDocument.documentElement:e,i=e.scrollWidth-o.clientWidth,s=e.scrollHeight-o.clientHeight;return n.x=Math.max(0,Math.min(n.x,i)),n.y=Math.max(0,Math.min(n.y,s)),n}},function(e,t,n){"use strict";var r=n(1902);e.exports=function(e){for(var t=e;t&&t!==document.documentElement;){var n=r(t);if(null!=n)return n;t=t.parentNode}return null}},function(e,t,n){"use strict";var r=n(1791).isPlatform("Mac OS X"),a={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return r&&e.altKey},hasCommandModifier:function(e){return r?!!e.metaKey&&!e.altKey:a.isCtrlKeyCommand(e)}};e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.getSelection(),r=e.getCurrentContent(),a=n.getStartKey(),o=n.getStartOffset(),i=a,s=0;if(t>o){var c=r.getKeyBefore(a);null==c?i=a:(i=c,s=r.getBlockForKey(c).getText().length)}else s=o-t;return n.merge({focusKey:i,focusOffset:s,isBackward:!0})}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(1),l=n.n(c),u=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"handleEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return l.a.createElement("div",{onBeforeInput:this.handleEvent,onBlur:this.handleEvent,onCompositionEnd:this.handleEvent,onCompositionStart:this.handleEvent,onCopy:this.handleEvent,onCut:this.handleEvent,onDragEnd:this.handleEvent,onDragEnter:this.handleEvent,onDragLeave:this.handleEvent,onDragOver:this.handleEvent,onDragStart:this.handleEvent,onDrop:this.handleEvent,onFocus:this.handleEvent,onInput:this.handleEvent,onKeyDown:this.handleEvent,onKeyPress:this.handleEvent,onKeyUp:this.handleEvent,onMouseUp:this.handleEvent,onPaste:this.handleEvent,onSelect:this.handleEvent,onClick:this.handleEvent},this.props.children)}}]),t}(l.a.Component)},function(e,t,n){"use strict";var r,a,o,i,s=n(3),c=n(4),l=n(5),u=n(8),d=n(6),p=n(7),f=n(0),h=n(1),b=n(2),m=n.n(b),v=n(18),g=n(2175),y=n(56),O=n(27),j=n(117),w=(n(1974),{all:"开放评论",censor:"预审评论",nobody:"关闭评论"}),C={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},k=Object(v.connect)(function(e){return{isOrg:Object(O.f)(e)}})((o=a=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).handleClickOption=function(e){var t=n.props,r=t.isOrg,a=t.target,o=t.onChange,i=t.current;if(e!==i)if(a){var s=a.id;a.adminClosedComment?Object(j.b)("此内容无法更改评论权限",{theme:"red-ghost"}):r||"censor"!==e&&"censor"!==i?o(s,e):Object(j.a)("你确定要更改评论权限吗？",{content:"censor"===e?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return o(s,e)}).catch(function(){return null})}else o(e)},n.getCommentPermission=function(){var e=n.props.target,t=e&&"answer"===e.type&&"paid"===e.answerType;return Object.keys(C).filter(function(n){if("paid"!==n||t)return"follower"!==n||e&&"article"===e.type}).reduce(function(e,t){return Object.assign({},e,Object(s.a)({},t,C[t]))},{})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,a=n?w:this.getCommentPermission();return Object(f.b)(h.Fragment,null,Object.keys(a).map(function(t){var n=t===r;return Object(f.b)(y.b,{key:t,onClick:function(){return e.handleClickOption(t)},className:"CommentPermission-item"},n&&Object(f.b)(g.a,{text:!0,center:!0}),a[t])}))}}]),t}(h.Component),a.propTypes={current:m.a.string.isRequired,target:m.a.object,onChange:m.a.func.isRequired},r=o))||r,S=n(44),N=n(1975),A=n.n(N),T=n(195),_=Object(T.a)({view:{id:3038},trackCardShow:!0})(i=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return Object(f.b)("img",{src:A.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),t}(h.Component))||i;_.showModal=function(e){S.b.open(function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),Object(f.b)(S.b,{title:"举报成功",onClose:t},Object(f.b)("div",{style:{textAlign:"center"}},Object(f.b)("div",null,n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),Object(f.b)(_,null)))})};var E=_,x=n(15),I=n(200),M=(n(1976),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={reportModalShown:!1},n.handleSubmit=function(){var e=n.props,t=e.id,r=e.onDelete,a=e.onClose;r(t),a()},n.handleReportModalOpen=function(){return n.setState({reportModalShown:!0})},n.handleReportModalClose=function(){n.setState({reportModalShown:!1}),n.handleSubmit()},n.handleSuccess=function(){n.handleSubmit()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,a=e.reportAndDeleteExperiment;return Object(f.b)(h.Fragment,null,Object(f.b)(S.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:a&&Object(f.b)("div",{className:"CommentDeleteAndReport-extra"},"评论若构成举报条件可以",Object(f.b)(x.c,{preset:"link",onClick:this.handleReportModalOpen},"删除并举报"))},n&&Object(f.b)(S.a,{direction:"horizontal"},Object(f.b)(x.c,{onClick:r},"取消"),Object(f.b)(x.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"确定"))),Object(f.b)(I.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose}))}}]),t}(h.Component));n.d(t,"c",function(){return k}),n.d(t,"a",function(){return M}),n.d(t,"b",function(){return E})},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.isGdtAd=p,t.getGdtLandingUrl=f,t.open=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.commonAd;return new Promise(function(n){i.default.ready().then(function(){i.default.supportsAction(t).then(function(r){r?i.default.dispatch(t,e).then(function(){return n(!0)},function(){return n(!1)}):n(!1)})}).catch(function(){return n(!1)})})},t.openHybridNewAd=function(e,t,n){return g({ad:e,node:t,clickPoint:n,type:"open"})},t.preloadHybridNewAd=function(e,t){return g({ad:e,node:t,type:"preload"})},t.openFormNewAd=function(e){return g({ad:e,type:"adOpenForm"})},t.getHybridAd=h,t.openECommerceDeeplinkAd=function(e){var t=e.url;return new Promise(function(n){i.default.ready().then(function(){i.default.supportsAction("ad/eCommerceOpen").then(function(r){r?i.default.dispatch("ad/eCommerceOpen",e).then(function(e){e.status?n(!0):y(t)},function(){y(t)}):y(t)})}).catch(function(){y(t)})})},t.getHybridEvent=void 0;var a=r(n(88)),o=r(n(206)),i=r(n(95)),s=n(13),c=n(241);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={commonAd:"ad/open",preloadAd:"ad/preload",answerAd:"answer/openAd",adOpenForm:"ad/openForm"};function p(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").indexOf("c.gdt.qq.com")>-1}function f(e,t,n){if(!p(e)||!t||!n)return e;var r=t.getBoundingClientRect(),a=r.left,o=r.top,i=n.clientX-a,s=n.clientY-o,c={__DOWN_X__:Math.abs(i),__DOWN_Y__:Math.abs(s),__UP_X__:Math.abs(i),__UP_Y__:Math.abs(s)};return Object.keys(c).reduce(function(e,t){return e.replace(t,c[t])},e)}function h(e,t,n,r){console.log("We are sending a ".concat(t," request to Hybrid"));var a=e.conversionTracks,i=(0,o.default)(e.creatives,1)[0],c=e.videoProgress,l=e.sdk,u=e.conversionTrackJs,p=e.experimentInfo,h=e.extraConversionTracks,b=e.canvas,m=e.expand,v=void 0===m?{}:m,g=i.asset,y=i.videoInfo,O=v.downloadSilent,j=void 0!==O&&O,w=v.isNewWebview,C=void 0!==w&&w,k=v.isCdnSpeeding,S=v.cdnMap,N=g.landingUrl,A=g.appPromotionUrl,T=g.deepUrl,_=g.packageName,E=g.brandName,x=g.brandLogo,I=g.nativeUrl,M=void 0===I?"":I,R={name:E,logo:x};return[d.commonAd,d.preloadAd,d.adOpenForm].includes(t)?{is_speeding:k,cdn_map:S,download_silent:j,conversion_tracks:a,sdk:(0,s.decamelizeKeys)(l),conversion_track_js:u,extra_conversion_tracks:(0,s.decamelizeKeys)(h),experiment_info:p,creative:{package_name:_,shouldUseNewWebView:C,landing_url:f(N,n,r),app_promotion_url:A,deep_url:T,thumbnail_extra_info:(0,s.decamelizeKeys)(y),video_progress:c,brand:R,native_url:M,canvas:(0,s.decamelizeKeys)(b)}}:{ad:{downloadSilent:j,conversionTracks:a,sdk:l,creatives:[{shouldUseNewWebView:C,landingUrl:f(N,n,r),conversionTracks:a,appPromotionUrl:A,deepUrl:T,brand:R,nativeUrl:M}]}}}function b(e){var t=e.sdk,n=e.adjsonStr,r=e.videoProgress,a=(0,o.default)(e.creatives,1)[0].videoInfo;return{adjson:n,sdk:(0,s.decamelizeKeys)(t),video_progress:r,extra_thumbnail_info:(0,s.decamelizeKeys)(a)}}function m(e,t,n,r){return console.log("getHybridParams(ad, ".concat(t,", node, clickPoint) :"),u({},b(e),{ad:h(e,t,n,r)})),u({},b(e),{ad:h(e,t,n,r)})}var v=function(e){switch(e){case"preload":return d.preloadAd;case"adOpenForm":return d.adOpenForm;default:return d.commonAd}};function g(e){var t=e.ad,n=e.node,r=e.clickPoint,a=e.type,o=v(a);return new Promise(function(e){i.default.ready().then(function(){return i.default.supportsAction(o).then(function(a){a?i.default.dispatch(o,m(t,o,n,r)).then(function(){return e(!0)},function(){return e(!1)}):o===d.commonAd&&i.default.dispatch(d.answerAd,m(t,d.answerAd,n,r)).then(function(){return e(!0)},function(){return e(!1)})})}).catch(function(){var e=(0,c.get)(t,"creatives[0].asset.landingUrl","");if(e&&o===d.commonAd){var n=document.createElement("a");n.href=e,n.click()}})})}function y(e){if(e){var t=document.createElement("a");t.href=e,t.click()}}t.getHybridEvent=v},,function(e,t,n){"use strict";var r=n(29),a=n(32),o=n.n(a),i=n(2),s=n.n(i),c=n(1),l=n.n(c),u=n(19),d=n.n(u),p=n(1920),f=n.n(p),h=n(1814),b=n(1885),m=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,v=function(e){for(var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decodeValue,r=void 0!==n&&n,a={};t=m.exec(e);){var o=t[1],i=t[3]||t[4];a[o]=(r?y(i):i)||""}return a},g=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function y(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}var O=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,j=function(e){return e?e.replace(O,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=v(t,{decodeValue:!0}),a=r.target,o=void 0===a?"_blank":a,i=r.href,s=void 0===i?"":i,c=r["data-image"],u=r["data-image-width"],d=r["data-image-height"],p=r["data-entity-type"],f=r["data-entity-data"],m=n.replace(/<[^>]*>/g,"");return m=y(m),Object(h.renderToStaticMarkup)(l.a.createElement(b.a,{text:m,url:s,target:o,image:c,imageWidth:u,imageHeight:d,entityType:p,entityData:g(f)}))}):e},w=/<p><br><\/p>/g,C=function(e){return e?e.replace(w,'<p class="ztext-empty-paragraph"><br /></p>'):e},k=n(1864),S=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,N=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,r=[];return n=n.replace(S,function(e,n){var a=v(n,{decodeValue:!0}),o=a["data-text"],i=void 0===o?"":o,s=a["data-url"],c=void 0===s?"":s,u=a["data-numero"],d=t?"ref_".concat(t,"_").concat(u):"ref_".concat(u),p=r.filter(function(e){return e.refKey===d}),f="".concat(d,"_").concat(p.length);r.push({refKey:d,text:i,url:c,numero:u});var b=[i,c].filter(Boolean).join(" ");return Object(h.renderToStaticMarkup)(l.a.createElement("sup",{"data-text":i,"data-url":c,"data-numero":u,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":b,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},l.a.createElement("a",{id:f,href:"#".concat(d),"data-reference-link":!0,"aria-labelledby":d},"[",u,"]")))}),r.length?n=n.concat(Object(h.renderToStaticMarkup)(l.a.createElement(k.a,{referenceList:r}))):n}(t,e)}},A=function(e){Object(c.useEffect)(function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach(function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"})},[e])},T=n(1866),_=n(31),E=n(1867),x=function(e,t){var n=Object(c.useState)(null),a=Object(r.a)(n,2),o=a[0],i=a[1],s=t.onClick;return Object(c.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll("a[data-mcn-id]"));if(t.length){var n=t.map(function(e){return function(e){var t={id:e.dataset.mcnId},n=document.createElement("div");return n.className="RichText-MCNLinkCardContainer",e.parentNode.replaceChild(n,e),{data:t,target:n}}(e)}).map(function(e,t){var n=e.data,r=e.target;return Object(_.createPortal)(l.a.createElement(E.a,{key:t,id:n.id,onClick:s}),r)});i(n)}}},[e]),o},I=n(153),M=n.n(I),R=n(54),D=n(16),L=n(1830),P=M()(function(){return/Mobile/.test(navigator.userAgent)});function B(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};D.default.trackMonitor({name:t},n)}var z=function(e){return function(t){var n,r=t.target,a=(n=r.dataset.actualsrc,Object(R.imgUrl)(n,{quality:P()?50:80,size:"hd"}));if(r.src=a,r.complete)r.dataset.lazyStatus="ok";else{e&&r.addEventListener("loadstart",function(){e("loadstart",a)}),r.dataset.lazyStatus="loading";var o=setTimeout(function(){r.complete||B(r.url,"image_web_timeout_image"),e&&e("timeout",a)},3e3);r.addEventListener("load",function(){r.dataset.lazyStatus="ok",clearTimeout(o),B(r.url,"image_web_success_image"),e&&e("load",a)}),r.addEventListener("error",function(){clearTimeout(o),B(r.url,"image_web_fail_image"),e&&e("error",a)})}}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.disabled,a=void 0!==n&&n,o=t.onLoadStateChange,i=Object(c.useState)([]),s=Object(r.a)(i,2),l=s[0],u=s[1];Object(L.a)(l,z(o),{rootMargin:"300px"}),Object(c.useEffect)(function(){if(e&&!a){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&u(t)}},[e,a])},F=(n(1822),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,D.default.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.dataset.zaDetailViewId=t.clickViewId}},n=new IntersectionObserver(function(e){e.forEach(t)},{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'}].forEach(function(t){var r=t.selector,a=t.cardShowViewId,o=t.clickViewId;Array.from(e.querySelectorAll(r)).forEach(function(e){e.cardShowViewId=a,e.clickViewId=o,n.observe(e)})}),function(){n.disconnect()}}),U="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},V=function(e){var t=Object(c.useRef)(null);Object(c.useEffect)(function(){if(e)return U(function(){e&&(t.current=F(e))}),function(){t.current&&t.current()}},[e])},Q=n(1826),H=(n(1869),n(827),n(1921),f()([C,N(),j])),K=function(e){var t=e.tag,n=void 0===t?"div":t,a=e.className,i=e.html,s=e.onRef,u=e.mcnLinkCardProps,p=void 0===u?{}:u,f=e.clearBoth,h=void 0!==f&&f,b=e.lazyLoadImageProps,m=o()(e,["tag","className","html","onRef","mcnLinkCardProps","clearBoth","lazyLoadImageProps"]),v=Object(c.useState)(null),g=Object(r.a)(v,2),y=g[0],O=g[1];return A(y),Object(T.a)(y),V(y),q(y,b),l.a.createElement(l.a.Fragment,null,x(y,p),l.a.createElement(n,Object.assign({key:i,ref:Object(c.useCallback)(Object(Q.a)(O,s),[]),className:d()("RichText","ztext",a,{"RichText--clearBoth":h}),dangerouslySetInnerHTML:{__html:H(i)}},m)))};K.propTypes={tag:s.a.string,html:s.a.string.isRequired,clearBoth:s.a.bool,onRef:s.a.oneOfType([s.a.func,s.a.object])};var W=l.a.memo(K);n.d(t,"a",function(){return W})},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(32),l=n.n(c),u=n(1),d=n.n(u),p=n(31),f=n(19),h=n.n(f),b=n(1919),m=n.n(b),v=n(48),g=n.n(v),y=(n(1961),500),O=3e3;function j(e,t,n){var r=new Image;return r.addEventListener("load",t),r.onerror=n,r.src=e,r}var w=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:n.props.width,computedHeight:n.props.height},n.wrapperNode=null,n.hasLoaded=!1,n.loadThumbnail=function(){var e=n.props,t=e.onLoadImageFail,r=e.onLoadImageTimeout;n.thumbnail=j(n.props.thumbnail,n.handleThumbnailLoaded,function(){t&&t({type:"thumbnail",url:n.props.thumbnail})}),r&&setTimeout(function(){n.thumbnail&&!n.thumbnail.complete&&r({type:"thumbnail",url:n.props.thumbnail})},O)},n.loadImage=function(){var e=n.props,t=e.onLoadImageFail,r=e.onLoadImageTimeout;n.image=j(n.props.url,n.handleImageLoaded,function(){t&&t({type:"image",url:n.props.url})}),r&&setTimeout(function(){n.image&&!n.image.complete&&r({type:"image",url:n.props.url})},O)},n.handleObserve=function(e){e&&n.hasLoaded||e&&(n.hasLoaded=!0,n.loadThumbnail(),n.loadImage())},n.handleThumbnailLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"thumbnail",url:n.props.thumbnail});var t=n.state,r=t.computedWidth;if(!t.computedHeight){var a=n.thumbnail,o=a.naturalWidth,i=a.naturalHeight*(Number(r)/o);n.setState({computeHeight:i})}n.setState({thumbnailLoaded:!0})},n.handleImageLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"image",url:n.props.url}),n.setState({loaded:!0}),n.timeout=window.setTimeout(function(){return n.setState({vagued:!1})},y)},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(p.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,r=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:r||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=g()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,r=t.url,a=t.alt,o=t.threshold,i=t.thumbnail,s=l()(t,["className","url","alt","threshold","thumbnail"]),c=this.state,u=c.thumbnailLoaded,p=c.loaded,f=c.vagued,b=c.computedWidth,v=c.computedHeight;if(!f)return d.a.createElement("img",Object.assign({className:n,width:b,src:r,alt:a},s));var y=m.a;return d.a.createElement(y,{rootMargin:"".concat(o,"px 0px ").concat(o,"px 0px"),onChange:this.handleObserve,className:h()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign({},b&&{width:"".concat(b,"px")},{},v&&{height:"".concat(v,"px")}),"data-src":r},d.a.createElement("div",{className:h()("VagueImage-mask",{"is-active":!p}),style:u?{backgroundImage:"url(".concat(i,")")}:{}}),p&&d.a.createElement("img",{className:"VagueImage-innerLarge",src:r,alt:a}))}}]),t}(u.Component);w.defaultProps={threshold:200};var C=w;n.d(t,"a",function(){return C})},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(2),l=n.n(c),u=n(1),d=n.n(u),p=n(1804),f=(n(1877),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"renderThumbnail",value:function(){var e=this.props.error;return d.a.createElement("div",{className:"VideoErrorCard-thumbnail"},d.a.createElement("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return d.a.createElement("div",{className:"VideoErrorCard"},d.a.createElement(p.b,Object.assign({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/".concat(n)},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),t}(u.Component));f.propTypes={error:l.a.object.isRequired},t.a=f},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(r.a)(e),n=t.getFullYear(),a=t.getMonth(),o=new Date(0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n(11),d=n.n(u),p=n(15),f=n(196),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleSubmit=function(){var e=n.props,t=e.onSubmit,r=e.onCancel,a=e.needCancel;(void 0===a||a)&&r(),t()},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,a=e.onCancel,o=e.className,i=e.isMobile,s=Object(c.b)(p.c,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),l=Object(c.b)(p.c,{key:"cancel",onClick:a},"取消"),u=i?[l,s]:[s,l];return Object(c.b)(f.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",o),title:t,size:i?"small":"default",subtitle:n,onClose:a,closeButton:!1,buttonGroupOnly:!0},r&&Object(c.b)(f.a,{direction:i?"horizontal":"vertical"},u))}}]),t}(l.Component);t.a=h},function(e,t,n){"use strict";var r=n(1933),a=n(22),o=n(4),i=n(5),s=n(8),c=n(6),l=n(7),u=n(0),d=n(1),p=n.n(d),f=n(2),h=n.n(f),b=n(18),m=n(102),v=n.n(m),g=(n(2148),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.commercial,r=e.positive,a=e.annotation,o=e.disclaimer,i=e.circle,s=e.paidContent;if(!(n||r||a||o||i||s))return null;var c=[s,n,r,a,!a&&o,i].filter(Boolean).slice(0,2);return Object(u.b)("div",{className:v()("Labels",t)},c.map(function(e,t){return Object(u.b)("div",{className:"Labels-item",key:t},e)}))}}]),t}(p.a.Component));g.propTypes={className:h.a.string,commercial:h.a.node,positive:h.a.node,annotation:h.a.node,disclaimer:h.a.node,circle:h.a.node,paidContent:h.a.node};var y=g,O=n(1882),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[O.e[e],t].filter(Boolean).join(" · ")},w=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?{icon:O.b[t],title:j(t,e.onlineRoundtable.name),shortTitle:O.d[t],description:O.a[t],link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken),linkDescription:O.c[t],zaName:O.g[t]}:null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?{icon:O.b[t],title:j(t),shortTitle:O.d[t],description:O.a[t],zaName:O.g[t]}:null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?{icon:O.b[t],title:j(t),shortTitle:O.d[t],description:O.a[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"javascript:;",members:e.recognitionInfo.latestRecognizers,zaName:O.g[t]}:null;default:var n=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;return n?{icon:O.b[t],title:j(t,n.title),shortTitle:O.d[t],description:O.a[t],link:n.url,linkDescription:O.c[t],zaName:O.g[t]}:null}},C=n(2149),k=n.n(C),S=n(280),N=n(16),A=(n(2154),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={expanded:!1,width:null},n.bar=null,n.list=null,n.popover=null,n.trackListCardShow=k()(function(){N.default.setModule(n.list,{module:"Content",module_name:"正向列表卡片"}),N.default.trackCardShow(n.list,{id:3770})}),n.expand=function(){var e=n.props,t=e.isMobile,r=e.onExpand,a=e.data;t&&n.setState({width:n.bar.getBoundingClientRect().width}),n.setState({expanded:!0},function(){n.trackListCardShow(),r&&r(a)})},n.collapse=function(){n.setState({expanded:!1})},n.handleToggle=function(){n.state.expanded?n.collapse():n.expand()},n.handleDismiss=function(e){n.state.expanded&&(n.bar.contains(e.target)||n.popover.contains(e.target)||n.collapse())},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDismiss),document.addEventListener("touchstart",this.handleDismiss)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDismiss),document.removeEventListener("touchstart",this.handleDismiss)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.isExpandable,a=t.renderBar,o=t.renderItems,i=t.placement,s=t.borderStyle,c=t.arrowed,l=r(n);return Object(u.b)("div",{className:"PositiveLabelLayout"},Object(u.b)("div",{ref:function(t){return e.bar=t},className:"PositiveLabelLayout-bar"},a(n,{expandable:l,onExpand:this.handleToggle})),l&&Object(u.b)(S.a,{onRef:function(t){return e.popover=t},className:v()("PositiveLabelLayout-popover","PositiveLabelLayout-popover--".concat(i),"PositiveLabelLayout-popover--".concat(s)),isOpen:this.state.expanded,target:this.bar,placement:i,arrowed:c,listenResize:!0},Object(u.b)("div",{ref:function(t){return e.list=t},className:"PositiveLabelLayout-list",style:{width:this.state.width}},o(n))))}}]),t}(p.a.Component));A.propTypes={data:h.a.object.isRequired,isExpandable:h.a.func.isRequired,renderBar:h.a.func.isRequired,renderItems:h.a.func.isRequired,placement:h.a.string,isMobile:h.a.bool.isRequired,borderStyle:h.a.oneOf(["none","common"]),arrowed:h.a.bool.isRequired,onExpand:h.a.func},A.defaultProps={borderStyle:"common"};var T=A,_=n(197),E=n(1776),x=n(93),I=(n(2155),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.members;return Object(u.b)("div",{className:"PositiveLabelMembers"},e.slice(0,3).reverse().map(function(e){return Object(u.b)(x.a,{key:e.id,className:"PositiveLabelMembers-avatar",url:e.avatarUrl,size:20})}))}}]),t}(p.a.Component));I.propTypes={members:h.a.array};var M=I,R=(n(2156),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).root=null,n.handleLinkClick=function(e){var t=n.props,r=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;N.default.trackEvent(n.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,a,r)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;N.default.setModule(this.root,{module:"Content",module_name:r}),Object(_.onViewedOnce)(this.root,function(){N.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.meta,o=e.link,i=e.linkDescription,s=e.members;return Object(u.b)("div",{className:"PositiveLabelBar-content"},Object(u.b)(t,{className:"PositiveLabelBar-icon"}),Object(u.b)("div",{className:"PositiveLabelBar-main"},Object(u.b)("span",{className:"PositiveLabelBar-title"},n),r&&Object(u.b)("span",{className:"PositiveLabelBar-description"}," "+r)),(o||a||s&&Boolean(s.length))&&Object(u.b)("div",{className:"PositiveLabelBar-side"},s&&Boolean(s.length)&&Object(u.b)("div",{className:"PositiveLabelBar-members"},Object(u.b)(M,{members:s})),o&&!a&&Object(u.b)("span",{className:"PositiveLabelBar-link"},i&&Object(u.b)("span",{className:"PositiveLabelBar-linkDescription"},i),Object(u.b)(E.a,{className:"PositiveLabelBar-linkIcon"})),a&&Object(u.b)("span",{className:"PositiveLabelBar-meta"},a)))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.shortTitle,a=e.description,o=e.meta,i=e.link,s=e.expandable,c=e.members;return Object(u.b)("div",{className:"PositiveLabelBar-content"},Object(u.b)(t,{className:"PositiveLabelBar-icon"}),Object(u.b)("div",{className:"PositiveLabelBar-main"},Object(u.b)("span",{className:"PositiveLabelBar-title"},o&&r||n),a&&!o&&Object(u.b)("span",{className:"PositiveLabelBar-description"}," "+a),o&&Object(u.b)("span",{className:"PositiveLabelBar-meta"}," "+o)),(i||s||c&&Boolean(c.length))&&Object(u.b)("div",{className:"PositiveLabelBar-side"},c&&Boolean(c.length)&&Object(u.b)("div",{className:"PositiveLabelBar-members"},Object(u.b)(M,{members:c})),i&&!s&&Object(u.b)("span",{className:"PositiveLabelBar-link"},Object(u.b)(E.a,{className:"PositiveLabelBar-linkIcon"})),s&&Object(u.b)("span",{className:"PositiveLabelBar-expand"},"点击查看")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,a=t.expandable,o=t.onExpand,i=n?this.renderMobileContent():this.renderDesktopContent();return r&&!a?Object(u.b)("a",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--link",href:r,onClick:this.handleLinkClick},i):a?Object(u.b)("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--expandable",onClick:o},i):Object(u.b)("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar"},i)}}]),t}(p.a.Component));R.propTypes={isMobile:h.a.bool.isRequired,icon:h.a.func.isRequired,title:h.a.string.isRequired,shortTitle:h.a.string,description:h.a.string,meta:h.a.string,link:h.a.string,linkDescription:h.a.string,onLinkClick:h.a.func,expandable:h.a.bool.isRequired,onExpand:h.a.func,members:h.a.array,zaName:h.a.string},R.defaultProps={isMobile:!1,expandable:!1};var D=R,L=(n(2157),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).root=null,n.handleLinkClick=function(e){var t=n.props,r=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;N.default.trackEvent(n.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,a,r)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;N.default.setModule(this.root,{module:"Content",module_name:r}),Object(_.onViewedOnce)(this.root,function(){N.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.linkDescription;return Object(u.b)("div",{className:"PositiveLabelRoundtableBar-content"},Object(u.b)(t,{className:"PositiveLabelRoundtableBar-icon"}),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-main"},Object(u.b)("div",{className:"PositiveLabelRoundtableBar-header"},Object(u.b)("span",{className:"PositiveLabelRoundtableBar-title"},n),Object(u.b)("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-description"},r)),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-side"},Object(u.b)("span",{className:"PositiveLabelRoundtableBar-link"},Object(u.b)("span",{className:"PositiveLabelRoundtableBar-linkDescriptio"},a),Object(u.b)(E.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return Object(u.b)("div",{className:"PositiveLabelRoundtableBar-content"},Object(u.b)(t,{className:"PositiveLabelRoundtableBar-icon"}),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-main"},Object(u.b)("div",{className:"PositiveLabelRoundtableBar-header"},Object(u.b)("span",{className:"PositiveLabelRoundtableBar-title"},n),Object(u.b)("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-description"},r)),Object(u.b)("div",{className:"PositiveLabelRoundtableBar-side"},Object(u.b)("span",{className:"PositiveLabelRoundtableBar-link"},Object(u.b)(E.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,a=n?this.renderMobileContent():this.renderDesktopContent();return Object(u.b)("a",{ref:function(t){return e.root=t},className:"PositiveLabelRoundtableBar PositiveLabelRoundtableBar--link",href:r,onClick:this.handleLinkClick},a)}}]),t}(p.a.Component));L.propTypes={isMobile:h.a.bool.isRequired,icon:h.a.func.isRequired,title:h.a.string.isRequired,description:h.a.string,meta:h.a.string,link:h.a.string,linkDescription:h.a.string,onLinkClick:h.a.func,expandable:h.a.bool.isRequired,onExpand:h.a.func,zaName:h.a.string},L.defaultProps={isMobile:!1,expandable:!1};var P=L,B=(n(2158),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).root=null,n.handleLinkClick=function(e){var t=n.props,r=t.type,a=t.link,o=t.onLinkClick,i=t.zaName;N.default.trackEvent(n.root,{id:3771,name:"多个"},{button:{text:i}}),o&&o(e,a,r)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,a=e.link,o=e.members;return Object(u.b)("div",{className:"PositiveLabelItem-content"},Object(u.b)(t,{className:"PositiveLabelItem-icon"}),Object(u.b)("div",{className:"PositiveLabelItem-main"},Object(u.b)("span",{className:"PositiveLabelItem-title"},n),r&&Object(u.b)("span",{className:"PositiveLabelItem-description"}," "+r)),(a||o&&Boolean(o.length))&&Object(u.b)("div",{className:"PositiveLabelItem-side"},o&&Boolean(o.length)&&Object(u.b)("div",{className:"PositiveLabelItem-members"},Object(u.b)(M,{members:o})),a&&Object(u.b)("span",{className:"PositiveLabelItem-link"},Object(u.b)(E.a,{className:"PositiveLabelItem-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props.link,n=this.renderContent();return t?Object(u.b)("a",{ref:function(t){return e.root=t},className:"PositiveLabelItem PositiveLabelItem--link",href:t,onClick:this.handleLinkClick},n):Object(u.b)("div",{ref:function(t){return e.root=t},className:"PositiveLabelItem"},n)}}]),t}(p.a.Component));B.propTypes={isMobile:h.a.bool.isRequired,icon:h.a.func.isRequired,title:h.a.string.isRequired,description:h.a.string,link:h.a.string,onLinkClick:h.a.func,members:h.a.array,zaName:h.a.string},B.defaultProps={isMobile:!1};var z=B,q=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).isExpandable=function(e){return e.items.length>1&&"online_roundtable"!==e.items[0].type},n.renderBar=function(e,t){var r=t.expandable,a=t.onExpand,o=n.props,i=o.isMobile,s=o.onLinkClick,c=e.items[0],l=c.type,d=c.props,p=Object.assign({isMobile:i,type:l},d,{meta:r?"relevant"===l?"及 ".concat(e.items.length-1," 项收录"):i?"等 ".concat(e.items.length," 项收录"):"共 ".concat(e.items.length," 项收录"):null,onLinkClick:s,expandable:r,onExpand:a});return"online_roundtable"===l?Object(u.b)(P,p):Object(u.b)(D,p)},n.renderItems=function(e){var t=n.props,r=t.isMobile,o=t.onLinkClick;return e.items.map(function(e){var t=e.type,n=e.props;return Object(u.b)(z,Object(a.default)({key:t,isMobile:r,type:t},n,{onLinkClick:o}))})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.data,r=e.placement,a=e.borderStyle,o=e.arrowed,i=e.onExpand,s=function(e){var t=O.f.map(function(t){return{type:t,props:w(e,t)}}).filter(function(e){return e.props});return t.length?{items:t}:null}(n);return s?Object(u.b)("div",{className:"PositiveLabel"},Object(u.b)(T,{arrowed:o||t,isMobile:t,placement:r||(t?"bottom":"bottom-right"),borderStyle:a||(t?"none":"common"),data:s,isExpandable:this.isExpandable,renderBar:this.renderBar,renderItems:this.renderItems,onExpand:i})):null}}]),t}(p.a.Component);q.propTypes={isMobile:h.a.bool.isRequired,data:h.a.object.isRequired,onLinkClick:h.a.func,placement:h.a.string,borderStyle:h.a.oneOf(["none","common"]),arrowed:h.a.bool.isRequired,onExpand:h.a.func},q.defaultProps={isMobile:!1};var F=q,U=(n(2159),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.disclaimerInfo;return n?Object(u.b)("div",{className:v()("DisclaimerLabel",{"DisclaimerLabel--mobile":t})},Object(u.b)("div",{className:"DisclaimerLabel-title"},n.description),Object(u.b)("div",{className:"DisclaimerLabel-description"},n.subDescription)):null}}]),t}(p.a.Component));U.propTypes={isMobile:h.a.bool.isRequired,disclaimerInfo:h.a.object.isRequired},U.defaultProps={isMobile:!1};var V=U,Q=n(2273),H=(n(2160),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){N.default.trackCardShow(this,{id:4027})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return Object(u.b)("div",{className:"CircleLabelBar"},Object(u.b)("div",{className:"CircleLabelBar-content"},Object(u.b)(t,{className:"CircleLabelBar-icon"}),Object(u.b)("div",{className:"CircleLabelBar-main"},Object(u.b)("span",{className:"CircleLabelBar-title"},n),r&&Object(u.b)("span",{className:"CircleLabelBar-description"}," "+r))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.linkDescription,a=e.onLinkClick,o=Boolean(a);return Object(u.b)("div",{className:"CircleLabelBar",onClick:function(e){return o&&a(e)}},Object(u.b)("div",{className:"CircleLabelBar-content"},Object(u.b)(t,{className:"CircleLabelBar-icon"}),Object(u.b)("div",{className:"CircleLabelBar-main"},Object(u.b)("span",{className:"CircleLabelBar-title"},n)),o&&Object(u.b)("div",{className:"CircleLabelBar-side"},Object(u.b)("span",{className:"CircleLabelBar-link"},r&&Object(u.b)("span",{className:"CircleLabelBar-linkDescription"},r),Object(u.b)(E.a,{className:"CircleLabelBar-linkIcon"})))))}},{key:"render",value:function(){var e=this.props.isMobile;return Object(u.b)("div",null,e?this.renderMobileContent():this.renderDesktopContent())}}]),t}(p.a.Component));H.propTypes={isMobile:h.a.bool.isRequired,icon:h.a.func.isRequired,title:h.a.string.isRequired,link:h.a.string,linkDescription:h.a.string,onLinkClick:h.a.func},H.defaultProps={isMobile:!1};var K=H,W=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.circleInfo,r=e.onLinkClick,o=function(e){return e?{icon:Q.a,title:"圈内说 · 相关专业用户撰写",hasDesktopLink:!1,hasMobileLink:!0,linkDescription:"查看 ".concat(e.realmMemberCount," 个回答"),id:e.id}:null}(n);return o?Object(u.b)("div",{className:"CircleLabel"},Object(u.b)(K,Object(a.default)({isMobile:t},o,{onLinkClick:r}))):null}}]),t}(p.a.Component);W.propTypes={isMobile:h.a.bool.isRequired,circleInfo:h.a.object.isRequired,onLinkClick:h.a.func},W.defaultProps={isMobile:!1};var G=W,J=n(10),Y=function(e){return p.a.createElement(J.a,e,p.a.createElement("path",{d:"M8.306 23h-.092C3.678 23 0 19.379 0 14.912c0-3.681 2.497-6.788 5.914-7.767V3.5c0-.87.09-1.185.26-1.502.17-.318.42-.568.738-.738.318-.17.633-.26 1.502-.26H20.5c.87 0 1.185.09 1.502.26.318.17.568.42.738.738S23 2.63 23 3.5v13.676h-4.248c-.58 0-.79.06-1.001.174-.212.113-.378.28-.492.492-.113.211-.173.422-.173 1.001V23H8.306zm-.092-1.941c3.448 0 6.243-2.752 6.243-6.147 0-3.395-2.795-6.147-6.243-6.147s-6.243 2.752-6.243 6.147c0 3.395 2.795 6.147 6.243 6.147zm7.547-12.294a.647.647 0 0 0 0 1.294h3.963a.647.647 0 1 0 0-1.294zm-3.285-3.236a.647.647 0 1 0 0 1.295h7.248a.647.647 0 1 0 0-1.295zM18.4 23v-3.88a.65.65 0 0 1 .65-.65H23zm-9.2-6.47h1.982a.647.647 0 0 1 0 1.294H9.2v1.121c0 .273-.03.381-.087.487a.59.59 0 0 1-.246.246c-.105.057-.213.087-.487.087h-.332c-.273 0-.381-.03-.487-.087a.59.59 0 0 1-.246-.246c-.056-.106-.086-.214-.086-.487v-1.121H5.247a.647.647 0 1 1 0-1.295H7.23v-1.294H5.247a.647.647 0 1 1 0-1.294H6.61l-1.774-1.905c-.159-.17-.201-.255-.224-.352s-.013-.193.028-.285c.04-.092.1-.17.288-.312l.224-.169c.188-.142.282-.18.39-.201.108-.02.215-.012.317.025s.188.09.346.26l2.01 2.156 2.009-2.157c.158-.17.243-.222.345-.26s.21-.045.318-.024c.107.02.201.059.39.201l.224.17c.188.142.247.219.288.31.04.093.05.19.028.286-.023.097-.066.182-.224.352L9.818 13.94h1.364a.647.647 0 0 1 0 1.294H9.2z",fillRule:"evenodd"}))};Y.defaultProps={name:"PaidContent"};var X=Y,$=function(e){return p.a.createElement(J.a,e,p.a.createElement("defs",null,p.a.createElement("linearGradient",{id:"id-609579976-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},p.a.createElement("stop",{offset:"0%",stopColor:"#B39874"}),p.a.createElement("stop",{offset:"100%",stopColor:"#805820"}))),p.a.createElement("path",{fill:"url(#id-609579976-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};$.defaultProps={name:"VIPNight"};var Z=$,ee=function(e){return p.a.createElement(J.a,e,p.a.createElement("defs",null,p.a.createElement("linearGradient",{id:"id-763684632-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},p.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),p.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),p.a.createElement("path",{fill:"url(#id-763684632-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};ee.defaultProps={name:"VIP"};var te=ee,ne=n(1782),re=n(1749),ae=function(e){return p.a.createElement(J.a,e,p.a.createElement("path",{d:"M4 2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm3 7.278v5.444a.792.792 0 0 0 1.209.674l4.48-2.774a.792.792 0 0 0-.012-1.354l-4.48-2.67A.792.792 0 0 0 7 9.278zM19.538 18.5c-.038 0-.038-13-.038-13 2.656 1.131 4.5 3.62 4.5 6.508 0 2.875-1.827 5.354-4.462 6.492z",fillRule:"evenodd"}))};ae.defaultProps={name:"RemixAlbum"};var oe=ae,ie=function(e){return p.a.createElement(J.a,e,p.a.createElement("path",{d:"M5 2h14c1.105 0 2 .814 2 1.818v16.364C21 21.186 20.105 22 19 22H5c-1.105 0-2-.814-2-1.818V3.818C3 2.814 3.895 2 5 2zm6.5 16v-1.525A5 5 0 0 1 7 11.5a.5.5 0 1 1 1 0 4 4 0 1 0 8 0 .5.5 0 1 1 1 0 5 5 0 0 1-4.5 4.975V18h2a.5.5 0 1 1 0 1h-5a.5.5 0 1 1 0-1h2zm-2-10.336v3.672C9.5 12.805 10.62 14 12 14c1.378 0 2.5-1.193 2.5-2.664V7.664C14.5 6.195 13.38 5 12 5c-1.378 0-2.5 1.193-2.5 2.664z",fillRule:"evenodd"}))};ie.defaultProps={name:"RemixInstabook"};var se=ie,ce=n(2236),le=n(95),ue=(n(2161),"purchase_required"),de="vip_free",pe="purchased",fe="ebook",he="live",be="remix_album",me="remix_instabook",ve="PaidContentLabel-icon",ge=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){var e=n.props.link;le.default.dispatch("base/openURL",{url:e})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"renderMainContent",value:function(){var e=this.props,t=e.theme,n=e.paidInfo.type,r=e.showVipFreeDesc,a="dark"===t;switch(n){case ue:return Object(u.b)(p.a.Fragment,null,Object(u.b)(X,{className:"".concat(ve)}),"包含付费内容");case pe:return Object(u.b)(p.a.Fragment,null,Object(u.b)(X,{className:"".concat(ve)}),"已购付费内容");case de:return Object(u.b)(p.a.Fragment,null,a?Object(u.b)(Z,{className:"".concat(ve)}):Object(u.b)(te,{className:"".concat(ve)}),Object(u.b)("div",{className:"PaidContentLabel-vipLabel"},Object(u.b)("div",{className:"PaidContentLabel-vipLabel-left"},"会员专享"),r&&Object(u.b)("div",{className:"PaidContentLabel-vipLabel-right"},"你可以完整查看该付费内容")));case fe:return Object(u.b)(p.a.Fragment,null,Object(u.b)(ne.a,{className:"".concat(ve)}),"选自电子书");case he:return Object(u.b)(p.a.Fragment,null,Object(u.b)(re.a,{className:"".concat(ve)}),"选自 Live");case be:return Object(u.b)(p.a.Fragment,null,Object(u.b)(oe,{className:"".concat(ve)}),"选自盐选专栏");case me:return Object(u.b)(p.a.Fragment,null,Object(u.b)(se,{className:"".concat(ve)}),"选自讲书");default:return null}}},{key:"render",value:function(){var e=this.props.paidInfo.type===de;return Object(u.b)("div",{className:v()("PaidContentLabel",{"PaidContentLabel-vipFree":e})},Object(u.b)("div",{className:"PaidContentLabel-main"},this.renderMainContent()),Object(u.b)(ce.a,{onClick:this.handleClick,className:"PaidContentLabel-HelpOutline"}))}}]),t}(p.a.Component);ge.propTypes={link:h.a.string,paidInfo:h.a.object.isRequired,onPaidContentLabelClick:h.a.func,showVipFreeDesc:h.a.bool},ge.defaultPorps={showVipFreeDesc:!1};var ye=ge,Oe=n(487),je=n(150),we=n(196),Ce=n(87),ke=n(488),Se=n(97),Ne=(n(2162),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,r=e.data,a=e.paging,o=(a=void 0===a?{}:a).isEnd,i=void 0!==o&&o,s=a.isLoading,c=void 0!==s&&s,l=a.totals,d=e.loadAnswerRecognizerList,p=e.answerId;return Object(u.b)(we.b,{size:"fullPage",onClose:t},n&&Object(u.b)("div",{className:"RecognizerListModal"},Object(u.b)("div",{className:"RecognizerListModal-header"},"已有 ",l||"-"," 位用户对该回答送出了专业徽章",Object(u.b)("div",{className:"RecognizerListModal-headerDescription"},"社区内有着专业创作水平的用户有着对其他创作用户送出「专业徽章」的特权，以示对其他用户创作专业内容的鼓励")),Object(u.b)(Ce.b,{isDrained:i,isLoading:c,onLoad:function(){d(p)}},r.map(function(e){return Object(u.b)(ke.a,{className:"UserItem",key:e.id,user:e})}))))}}]),t}(p.a.Component));Ne.propTypes={onClose:h.a.func.isRequired,shown:h.a.bool.isRequired,answerId:h.a.number.isRequired};var Ae,Te=Object(b.connect)(function(e,t){var n=Object(Oe.a)(e,t.answerId)||{},r=n.data,a=void 0===r?[]:r,o=n.paging,i=void 0===o?{}:o;return{data:a.map(function(t){return Object(Se.c)(e,{urlToken:t})}),paging:i}},{loadAnswerRecognizerList:Oe.d})(Ne),_e=n(21),Ee=(n(2163),Object(je.a)()(Ae=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={recognizerListModalShown:!1},n.isFetched=!1,n.loadLabels=function(){var e=n.props,t=e.loadLabel,r=e.item;if(r){var a=r.isLabeled,o=r.id,i=r.type;a&&!n.isFetched&&(t(i,o),n.isFetched=!0)}},n.handlePositiveLabelClick=function(e,t,r){"professional"===r&&n.toggleRecognizerModal()},n.toggleRecognizerModal=function(){n.setState({recognizerListModalShown:!n.state.recognizerListModalShown})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"componentDidUpdate",value:function(){this.loadLabels()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.item,r=e.commercialLabels,o=e.annotationLabels,i=this.state.recognizerListModalShown,s=null,c=null,l=null,p=null,f={item:n,isMobile:!1};if(n&&n.isLabeled)if(t){s=(t.includedInfos&&Boolean(t.includedInfos.length)||t.onlineRoundtable||t.relevantInfo||t.recognitionInfo)&&Object(u.b)(F,Object(a.default)({},f,{data:t,onLinkClick:this.handlePositiveLabelClick})),c=t.disclaimerInfo&&Object(u.b)(V,{disclaimerInfo:t.disclaimerInfo}),l=t.circleInfo&&Object(u.b)(G,Object(a.default)({},f,{circleInfo:t.circleInfo}));var h=n.paidInfo&&n.paidInfo.type===_e.D.EBOOK;p=t.paidInfo&&Object(u.b)(ye,{showVipFreeDesc:h,paidInfo:t.paidInfo})}else s=Object(u.b)("div",{className:"LabelContainer-placeholder"});return Object(u.b)(d.Fragment,null,Object(u.b)(y,{className:"LabelContainer",positive:s,annotation:o,commercial:r,disclaimer:c,circle:l,paidContent:p}),Object(u.b)(Te,{onClose:this.toggleRecognizerModal,answerId:n.id,shown:i}))}}]),t}(p.a.Component))||Ae);Ee.propTypes={data:h.a.object,item:h.a.object.isRequired,commercialLabels:h.a.node,annotationLabels:h.a.node};var xe=Object(b.connect)(function(e,t){var n=t.item;return{data:Object(Oe.c)(e,n)}},{loadLabel:Oe.e})(Ee),Ie=n(3),Me=n(24),Re=n(48),De=n.n(Re),Le=n(67),Pe=n.n(Le),Be=["answer","article","post","item"],ze=function(e){return e.itemType||Be.find(function(t){return e[t]})},qe=function(e){return Pe()(Object(b.connect)(function(e,t){return{useNewLabels:Object(Oe.f)(e,t[ze(t)])}})(function(t){var n=t.showLabelInfo,r=void 0===n||n,a=t.showLabels,o=void 0===a||a,i=Object(Me.a)(t,["showLabelInfo","showLabels"]),s=ze(i),c=i,l=[];return o||l.push("isLabeled"),r||(l.push("labelInfo"),l.push("hermesLabel")),s&&l.length>0&&(c=Object.assign({},c,Object(Ie.a)({},s,De()(i[s],l)))),Object(u.b)(e,c)}),e)},Fe=Object(d.createContext)({showLabelInfo:!0,showLabels:!0}),Ue=Fe.Provider,Ve=Fe.Consumer,Qe=function(e){return function(t){var n=Object(u.b)(Ve,null,function(n){return Object(u.b)(e,Object(a.default)({},t,{showLabelProps:n}))});return Pe()(n,e)}};n.d(t,"b",function(){return r.a}),n.d(t,"a",function(){return xe}),n.d(t,"d",function(){return qe}),n.d(t,"c",function(){return Ue}),n.d(t,"e",function(){return Qe})},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n.n(l),d=n(15),p=n(1748),f=n(168),h=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.label,a=e.onRef;return Object(c.b)(u.a.Fragment,null,Object(c.b)(f.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(c.b)(d.c,{onRef:a,className:t,preset:"plain",onClick:n,icon:p.a,label:r}))}}]),t}(u.a.Component);h.defaultProps={label:"收藏"};var b=h;n.d(t,"a",function(){return b})},function(e,t,n){"use strict";var r=n(22),a=n(24),o=n(4),i=n(5),s=n(8),c=n(6),l=n(7),u=n(0),d=n(2),p=n.n(d),f=n(1),h=n(18),b=n(11),m=n.n(b),v=n(93),g=n(15),y=n(137),O=n(209),j=n(198),w=n(16),C=n(52),k=n(21),S=n(132);var N=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).load=function(){var e=n.props,t=e.dispatch,r=e.id;t(Object(S.t)(r))},n.track=function(){var e=n.props.topic;n.hoverCardElement&&e&&(w.default.setModule(n.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),w.default.trackCardShow(n.hoverCardElement))},n.handleFollow=n.context.authRequired(function(){var e=!n.props.topic.isFollowing;w.default.trackEvent(n.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=n.props,r=t.dispatch,a=t.id;r(Object(S.F)(a))},k.N.follow),n.handleOpen=function(){n.load(),n.track()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,i=t.id,s=t.isLoading,c=t.onRef,l=Object(a.a)(t,["toggler","topic","id","isLoading","onRef"]),d=o||{},p=d.name,f=d.introduction,h=d.questionsCount,b=d.followersCount,m=d.bestAnswersCount,v=d.avatarUrl,w=d.isFollowing,k=d.headerCard,S="//www.zhihu.com/topic/".concat(i),N=k&&k.avatarUrl||v;return Object(u.b)(O.b,Object(r.default)({toggler:n,preventCloseOnTarget:!0,isLoading:s,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t}}),Object(u.b)(O.a,{title:Object(u.b)("a",{target:"_blank",href:S},p),avatarUrl:N}),f&&Object(u.b)("div",null,Object(u.b)(j.a,{className:"HoverCard-description",html:f})),Object(u.b)("div",null,this.isTopicReady()&&Object(u.b)(y.a,null,Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(S,"/questions"),name:"问题",value:h,target:"_blank"}),Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(S,"/top-answers"),name:"精华",value:m,target:"_blank"}),Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(S,"/followers"),name:"关注者",target:"_blank",value:b})),Object(u.b)("div",{className:"HoverCard-buttons"},o&&Object(u.b)(g.c,{preset:"primary",color:w?"grey":"blue",onClick:this.handleFollow},w?"已关注":"关注话题"))))}}]),t}(f.Component);N.contextTypes={authRequired:p.a.func};var A,T,_,E=Object(h.connect)(function(e,t){var n=t.id,r=e.entities.topics,a=e.loading.local;return{topic:r[n],isLoading:Boolean(a["topic/".concat(n)])}})(N),x=n(55),I=Object(h.connect)(function(e){return{isMobile:Object(x.d)(e,{includeTablet:!0})}})((_=T=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.topic,i=o.name,s=o.avatarUrl,c=o.id,l=o.headerCard,d=t.avatar,p=t.avatarProps,f=t.noHoverCard,h=t.noLink,b=t.style,g=t.className,y=t.children,O=(t.dispatch,t.trackEvent,Object(a.a)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"])),j=void 0===f?n:f,w=l&&l.avatarUrl||s;e=d?Object(u.b)(v.a,Object(r.default)({className:"TopicLink-avatar",url:w,alt:i},p)):y||i,h||j||(e=Object(u.b)(E,{toggler:e,id:c}));var C=h?"span":"a";return Object(u.b)(C,Object(r.default)({style:b,className:m()("TopicLink",g),href:"//www.zhihu.com/topic/".concat(c),target:"_blank"},O),e)}}]),t}(f.Component),T.propTypes={topic:p.a.object.isRequired,user:p.a.object,avatar:p.a.bool,avatarProps:p.a.object,noHoverCard:p.a.bool,noLink:p.a.bool,style:p.a.object,className:p.a.string,children:p.a.node},T.defaultProps={avatar:!1,noLink:!1},A=_))||A;t.a=I},function(e,t,n){var r=n(826),a=r&&new r;e.exports=a},function(e,t){e.exports={}},function(e,t,n){var r=n(1803),a=n(1819),o=n(1820),i=n(1860);e.exports=function(e){var t=o(e),n=i[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=a(n);return!!s&&e===s[0]}},function(e,t,n){var r=n(1803),a=n(1801),o=n(1802),i=n(104),s=n(118),c=n(1861),l=Object.prototype.hasOwnProperty;function u(e){if(s(e)&&!i(e)&&!(e instanceof r)){if(e instanceof a)return e;if(l.call(e,"__wrapped__"))return c(e)}return new a(e)}u.prototype=o.prototype,u.prototype.constructor=u,e.exports=u},function(e,t,n){var r=n(1803),a=n(1801),o=n(505);e.exports=function(e){if(e instanceof r)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t,n){"use strict";
/** @license React v16.9.0
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(478),a=n(1);function o(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var i="function"==typeof Symbol&&Symbol.for,s=i?Symbol.for("react.portal"):60106,c=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,b=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,v=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.fundamental"):60117;function O(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case s:return"Portal";case u:return"Profiler";case l:return"StrictMode";case b:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return"Context.Consumer";case d:return"Context.Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return O(e.type);case g:if(e=1===e._status?e._result:null)return O(e)}return null}var j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;j.hasOwnProperty("ReactCurrentDispatcher")||(j.ReactCurrentDispatcher={current:null}),j.hasOwnProperty("ReactCurrentBatchConfig")||(j.ReactCurrentBatchConfig={suspense:null});var w={};function C(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var k=new Uint16Array(16),S=0;15>S;S++)k[S]=S+1;k[15]=0;var N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A=Object.prototype.hasOwnProperty,T={},_={};function E(e){return!!A.call(_,e)||!A.call(T,e)&&(N.test(e)?_[e]=!0:(T[e]=!0,!1))}function x(e,t,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new x(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new x(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new x(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new x(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new x(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new x(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){I[e]=new x(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new x(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new x(e,5,!1,e.toLowerCase(),null,!1)});var M=/[\-:]([a-z])/g;function R(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M,R);I[t]=new x(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M,R);I[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M,R);I[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new x(e,1,!1,e.toLowerCase(),null,!1)}),I.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){I[e]=new x(e,1,!1,e.toLowerCase(),null,!0)});var D=/["'&<>]/;function L(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=D.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}function P(e,t){var n,r=I.hasOwnProperty(e)?I[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r,!1)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+L(t)+'"')):E(e)?e+'="'+L(t)+'"':""}var B=null,z=null,q=null,F=!1,U=!1,V=null,Q=0;function H(){if(null===B)throw o(Error(321));return B}function K(){if(0<Q)throw o(Error(312));return{memoizedState:null,queue:null,next:null}}function W(){return null===q?null===z?(F=!1,z=q=K()):(F=!0,q=z):null===q.next?(F=!1,q=q.next=K()):(F=!0,q=q.next),q}function G(e,t,n,r){for(;U;)U=!1,Q+=1,q=null,n=e(t,r);return z=B=null,Q=0,q=V=null,n}function J(e,t){return"function"==typeof t?t(e):t}function Y(e,t,n){if(B=H(),q=W(),F){var r=q.queue;if(t=r.dispatch,null!==V&&void 0!==(n=V.get(r))){V.delete(r),r=q.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return q.memoizedState=r,[r,t]}return[q.memoizedState,t]}return e=e===J?"function"==typeof t?t():t:void 0!==n?n(t):t,q.memoizedState=e,e=(e=q.queue={last:null,dispatch:null}).dispatch=function(e,t,n){if(!(25>Q))throw o(Error(301));if(e===B)if(U=!0,e={action:n,next:null},null===V&&(V=new Map),void 0===(n=V.get(t)))V.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}.bind(null,B,e),[q.memoizedState,e]}function X(){}var $=0,Z={readContext:function(e){var t=$;return C(e,t),e[t]},useContext:function(e){H();var t=$;return C(e,t),e[t]},useMemo:function(e,t){if(B=H(),t=void 0===t?null:t,null!==(q=W())){var n=q.memoizedState;if(null!==n&&null!==t){e:{var r=n[1];if(null===r)r=!1;else{for(var a=0;a<r.length&&a<t.length;a++){var o=t[a],i=r[a];if((o!==i||0===o&&1/o!=1/i)&&(o==o||i==i)){r=!1;break e}}r=!0}}if(r)return n[0]}}return e=e(),q.memoizedState=[e,t],e},useReducer:Y,useRef:function(e){B=H();var t=(q=W()).memoizedState;return null===t?(e={current:e},q.memoizedState=e):t},useState:function(e){return Y(J,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:X,useEffect:X,useDebugValue:X,useResponder:function(e,t){return{props:t,responder:e}}},ee={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function te(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ne={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},re=r({menuitem:!0},ne),ae={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oe=["Webkit","ms","Moz","O"];Object.keys(ae).forEach(function(e){oe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ae[t]=ae[e]})});var ie=/([A-Z])/g,se=/^ms-/,ce=a.Children.toArray,le=j.ReactCurrentDispatcher,ue={listing:!0,pre:!0,textarea:!0},de=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,pe={},fe={};var he=Object.prototype.hasOwnProperty,be={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function me(e,t){if(void 0===e)throw o(Error(152),O(t)||"Component")}function ve(e,t,n){function i(a,i){var s=i.prototype&&i.prototype.isReactComponent,c=function(e,t,n,r){if(r&&"object"==typeof(r=e.contextType)&&null!==r)return C(r,n),r[n];if(e=e.contextTypes){for(var a in n={},e)n[a]=t[a];t=n}else t=w;return t}(i,t,n,s),l=[],u=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){u=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}},p=void 0;if(s)p=new i(a.props,c,d),"function"==typeof i.getDerivedStateFromProps&&(null!=(s=i.getDerivedStateFromProps.call(null,a.props,p.state))&&(p.state=r({},p.state,s)));else if(B={},p=i(a.props,c,d),null==(p=G(i,a.props,p,c))||null==p.render)return void me(e=p,i);if(p.props=a.props,p.context=c,p.updater=d,void 0===(d=p.state)&&(p.state=d=null),"function"==typeof p.UNSAFE_componentWillMount||"function"==typeof p.componentWillMount)if("function"==typeof p.componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&p.componentWillMount(),"function"==typeof p.UNSAFE_componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&p.UNSAFE_componentWillMount(),l.length){d=l;var f=u;if(l=null,u=!1,f&&1===d.length)p.state=d[0];else{s=f?d[0]:p.state;var h=!0;for(f=f?1:0;f<d.length;f++){var b=d[f];null!=(b="function"==typeof b?b.call(p,s,a.props,c):b)&&(h?(h=!1,s=r({},s,b)):r(s,b))}p.state=s}}else l=null;if(me(e=p.render(),i),a=void 0,"function"==typeof p.getChildContext&&"object"==typeof(c=i.childContextTypes))for(var m in a=p.getChildContext())if(!(m in c))throw o(Error(108),O(i)||"Unknown",m);a&&(t=r({},t,a))}for(;a.isValidElement(e);){var s=e,c=s.type;if("function"!=typeof c)break;i(s,c)}return{child:e,context:t}}var ge=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a.isValidElement(t)?t.type!==c?t=[t]:(t=t.props.children,t=a.isValidElement(t)?[t]:ce(t)):t=ce(t),t={type:null,domNamespace:ee.html,children:t,childIndex:0,context:w,footer:""};var r=k[0];if(0===r){var i=k,s=2*(r=i.length);if(!(65536>=s))throw o(Error(304));var l=new Uint16Array(s);for(l.set(i),(k=l)[0]=r+1,i=r;i<s-1;i++)k[i]=i+1;k[s-1]=0}else k[0]=k[r];this.threadID=r,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;k[e]=k[0],k[0]=e}},e.prototype.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;C(n,r);var a=n[r];this.contextStack[t]=n,this.contextValueStack[t]=a,n[r]=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},e.prototype.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},e.prototype.read=function(e){if(this.exhausted)return null;var t=$;$=this.threadID;var n=le.current;le.current=Z;try{for(var r=[""],a=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;k[i]=k[0],k[0]=i;break}var s=this.stack[this.stack.length-1];if(a||s.childIndex>=s.children.length){var c=s.footer;if(""!==c&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===d)this.popProvider(s.type);else if(s.type===b){this.suspenseDepth--;var l=r.pop();if(a){a=!1;var u=s.fallbackFrame;if(!u)throw o(Error(303));this.stack.push(u),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=l}r[this.suspenseDepth]+=c}else{var p=s.children[s.childIndex++],f="";try{f+=this.render(p,s.context,s.domNamespace)}catch(e){throw e}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=f}}return r[0]}finally{le.current=n,$=t}},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?L(n):this.previousWasTextNode?"\x3c!-- --\x3e"+L(n):(this.previousWasTextNode=!0,L(n));if(e=(t=ve(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===s)throw o(Error(257));throw o(Error(258),n.toString())}return e=ce(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var i=e.type;if("string"==typeof i)return this.renderDOM(e,t,n);switch(i){case l:case f:case u:case m:case c:return e=ce(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case b:throw o(Error(294))}if("object"==typeof i&&null!==i)switch(i.$$typeof){case h:B={};var O=i.render(e.props,e.ref);return O=G(i.render,e.props,O,e.ref),O=ce(O),this.stack.push({type:null,domNamespace:n,children:O,childIndex:0,context:t,footer:""}),"";case v:return e=[a.createElement(i.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:i=ce(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case p:i=e.type,O=e.props;var j=this.threadID;return C(i,j),i=ce(O.children(i[j])),this.stack.push({type:e,domNamespace:n,children:i,childIndex:0,context:t,footer:""}),"";case y:throw o(Error(338));case g:throw o(Error(295))}throw o(Error(130),null==i?i:typeof i,"")},e.prototype.renderDOM=function(e,t,n){var i=e.type.toLowerCase();if(n===ee.html&&te(i),!pe.hasOwnProperty(i)){if(!de.test(i))throw o(Error(65),i);pe[i]=!0}var s=e.props;if("input"===i)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===i){var c=s.value;if(null==c){c=s.defaultValue;var l=s.children;if(null!=l){if(null!=c)throw o(Error(92));if(Array.isArray(l)){if(!(1>=l.length))throw o(Error(93));l=l[0]}c=""+l}null==c&&(c="")}s=r({},s,{value:void 0,children:""+c})}else if("select"===i)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===i){l=this.currentSelectValue;var u=function(e){if(null==e)return e;var t="";return a.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(s.children);if(null!=l){var d=null!=s.value?s.value+"":u;if(c=!1,Array.isArray(l)){for(var p=0;p<l.length;p++)if(""+l[p]===d){c=!0;break}}else c=""+l===d;s=r({selected:void 0,children:void 0},s,{selected:c,children:u})}}if(c=s){if(re[i]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw o(Error(137),i,"");if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw o(Error(60));if(!("object"==typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML))throw o(Error(61))}if(null!=c.style&&"object"!=typeof c.style)throw o(Error(62),"")}for(O in c=s,l=this.makeStaticMarkup,u=1===this.stack.length,d="<"+e.type,c)if(he.call(c,O)){var f=c[O];if(null!=f){if("style"===O){p=void 0;var h="",b="";for(p in f)if(f.hasOwnProperty(p)){var m=0===p.indexOf("--"),v=f[p];if(null!=v){if(m)var g=p;else if(g=p,fe.hasOwnProperty(g))g=fe[g];else{var y=g.replace(ie,"-$1").toLowerCase().replace(se,"-ms-");g=fe[g]=y}h+=b+g+":",b=p,h+=m=null==v||"boolean"==typeof v||""===v?"":m||"number"!=typeof v||0===v||ae.hasOwnProperty(b)&&ae[b]?(""+v).trim():v+"px",b=";"}}f=h||null}p=null;e:if(m=i,v=c,-1===m.indexOf("-"))m="string"==typeof v.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break e;default:m=!0}m?be.hasOwnProperty(O)||(p=E(p=O)&&null!=f?p+'="'+L(f)+'"':""):p=P(O,f),p&&(d+=" "+p)}}l||u&&(d+=' data-reactroot=""');var O=d;c="",ne.hasOwnProperty(i)?O+="/>":(O+=">",c="</"+e.type+">");e:{if(null!=(l=s.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=s.children)||"number"==typeof l){l=L(l);break e}l=null}return null!=l?(s=[],ue[i]&&"\n"===l.charAt(0)&&(O+="\n"),O+=l):s=ce(s.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?te(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:i,children:s,childIndex:0,context:t,footer:c}),this.previousWasTextNode=!1,O},e}(),ye={renderToString:function(e){e=new ge(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new ge(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){throw o(Error(207))},renderToStaticNodeStream:function(){throw o(Error(208))},version:"16.9.0"},Oe={default:ye},je=Oe&&ye||Oe;e.exports=je.default||je},function(e,t,n){},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(243),i=n.n(o);n(1865);t.a=function(e){var t=e.referenceList,n=e.onClick,r=e.listRef;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"参考"),a.a.createElement("ol",{className:"ReferenceList",onClick:n,ref:r},i()(t,"refKey").map(function(e){var n=t.filter(function(t){return t.refKey===e.refKey}),r=n.length>1?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map(function(e,t){var n="".concat(e.refKey,"_").concat(t);return a.a.createElement("sup",{key:n,className:"ReferenceList-backLink"},a.a.createElement("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))})):a.a.createElement("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return a.a.createElement("li",{id:e.refKey,key:e.refKey,tabIndex:0},r,e.text&&a.a.createElement("span",null,e.text),e.text&&e.url&&" ",e.url&&a.a.createElement("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))})))}},function(e,t,n){},function(e,t,n){"use strict";var r=n(1);var a=function(e,t){var n;if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var r=e.target.getAttribute("href"),a=t.querySelector(r);a&&(e.preventDefault(),a.focus({preventScroll:!0}),n=a.getBoundingClientRect().top+window.pageYOffset-Math.max(window.innerHeight/10,100),window.scrollTo({top:n,behavior:"smooth"}),document.documentElement.setAttribute("data-focus-visible",""))}};t.a=function(e){var t=Object(r.useCallback)(function(t){return a(t,e)},[e]);Object(r.useEffect)(function(){if(e)return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}},[e,t])}},function(e,t,n){"use strict";var r=n(29),a=n(1),o=n.n(a),i=n(197),s=n(16),c=n(272),l=n.n(c),u=n(19),d=n.n(u),p=n(825),f=n.n(p);n(1868);t.a=o.a.forwardRef(function(e,t){var n=Object(a.useState)(null),c=Object(r.a)(n,2),u=c[0],p=c[1],h=e.component,b=void 0===h?"a":h,m=e.id,v=e.className,g=e.onClick,y=e.onMouseDown,O=e.refetchKey,j=e.onData,w=void 0===j?l.a:j,C=Object(a.useRef)(null);if(Object(a.useEffect)(function(){null!==O&&function(e){var t=e.id;return f()("https://www.zhihu.com/api/v4/mcn/linkcard/".concat(t),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then(function(e){return e.json()})}({id:m}).then(function(e){var t=e.data;p(t),w(t)})},[m,p,w,O]),Object(a.useEffect)(function(){C.current&&Object(i.onViewedOnce)(C.current.parentNode,function(){s.default.trackCardShow(C.current.parentNode,{id:6108})})},[u]),!u)return o.a.createElement(b,{ref:t,className:d()("MCNLinkCard","MCNLinkCard-placeholder",v),"data-draft-node":"block","data-draft-type":"mcn-link-card"});var k,S,N=u.url,A=u.title,T=u.img_token,_=u.price,E=u.source;return o.a.createElement(b,{ref:t,className:d()("MCNLinkCard",v),"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":u.id,"data-mcn-skuid":u.skuid,"data-mcn-source":u.source,"data-za-detail-view-name":u.id,"data-za-not-track-link":!0,href:N,target:"_blank",rel:"noopener noreferrer",onClick:function(e){s.default.trackEvent(e.currentTarget,{id:6208}),g(e)},onMouseDown:y},o.a.createElement("div",{className:"MCNLinkCard-card",ref:C},o.a.createElement("div",{className:"MCNLinkCard-backdrop",style:{backgroundImage:"url(".concat(T,")")}}),o.a.createElement("div",{className:"MCNLinkCard-cardContainer"},o.a.createElement("div",{className:"MCNLinkCard-imageContainer"},o.a.createElement("img",{className:"MCNLinkCard-image",src:T,alt:"Good"}),E&&o.a.createElement("div",{className:"MCNLinkCard-sourceInImage"},E)),o.a.createElement("div",{className:"MCNLinkCard-info"},o.a.createElement("div",{className:"MCNLinkCard-title"},A),o.a.createElement("div",{className:"MCNLinkCard-tool"},o.a.createElement("div",{className:"MCNLinkCard-price"},o.a.createElement("div",{className:"MCNLinkCard-priceNumber"},(k=_,S=1===String(k).length?"0".concat(k):String(k).slice(-2),"￥".concat(Math.floor(k/100),".").concat(S))),E&&o.a.createElement("div",{className:"MCNLinkCard-source"},E)),o.a.createElement("div",{className:"MCNLinkCard-button"},"去购买"))))))})},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=(n(1),n(2111),32300);function o(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,o=t.reasonDescription;return Object(r.b)("span",{className:"AnnotationTag"},n===a?"该内容已被标记":o)}},function(e,t,n){},function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return c(e);if("number"==typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=c;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",s=t&&t.unitSeparator||"",c=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&o[u.toLowerCase()]||(u=n>=o.pb?"PB":n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var d=(e/o[u.toLowerCase()]).toFixed(c);return l||(d=d.replace(a,"$1")),i&&(d=d.replace(r,i)),d+s+u}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(o[r]*t)}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";e.exports=n(1876)},function(e,t,n){"use strict";
/** @license React v16.4.1
 * create-subscription.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r=n(382),a=n(1);function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function a(){var n,r;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=r=o(this,e.call.apply(e,[this].concat(s))),r.state={source:r.props.source,value:null!=r.props.source?t(r.props.source):void 0},r._hasUnmounted=!1,r._unsubscribe=null,o(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e),a.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null},a.prototype.componentDidMount=function(){this.subscribe()},a.prototype.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(t),this.subscribe())},a.prototype.componentWillUnmount=function(){this.unsubscribe(this.state),this._hasUnmounted=!0},a.prototype.render=function(){return this.props.children(this.state.value)},a.prototype.subscribe=function(){var e=this,a=this.state.source;if(null!=a){var o=n(a,function(t){e._hasUnmounted||e.setState(function(e){return t===e.value||a!==e.source?null:{value:t}})});"function"!=typeof o&&function(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=0;a<t;a++)n+="&args[]="+encodeURIComponent(arguments[a+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}("266"),this._unsubscribe=o,(o=t(this.props.source))!==this.state.value&&this.setState({value:o})}},a.prototype.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},a}(a.Component)}},function(e,t,n){},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var a=new Uint8Array(16);n=function(){return r.getRandomValues(a),a}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(this,n(47))},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(501);function a(e){var t=e.badge;if(!e.isOrg)return!1;var n=Object(r.a)(t)||{};return Boolean(n.identityInfo)}},function(e,t,n){var r=n(1939)();e.exports=r},function(e,t,n){"use strict";var r=n(1743),a=n(1),o=n.n(a),i=n(10),s=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.856l-1.32 1.894a1.624 1.624 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.266l-1.894 1.32a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.624 1.624 0 0 0-.266-.643l-1.32-1.894a1.624 1.624 0 0 1 0-1.856l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.042.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.209 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.978.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.416.825.625 1.351.625zm3.436-3.159a.373.373 0 0 0-.278-.121c-.107 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.373.373 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289z",fillRule:"evenodd"}))};s.defaultProps={name:"LabelRelevant"};var c=s,l=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z",fillRule:"evenodd"}))};l.defaultProps={name:"LabelEditorRecommendation"};var u=l,d=n(1744),p=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.31a.24.24 0 0 1-.342.216c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.604.738a.6.6 0 0 1-.824-.557V6.957a1.8 1.8 0 0 1 1.182-1.69zm9.045.339c1.335-.626 2.672-.938 4.01-.938 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.958a.6.6 0 0 1-.824.557c-1.217-.492-2.418-.737-3.604-.737-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.806.419.172.62.656.45 1.081a.813.813 0 0 1-1.065.457c-1.108-.457-2.207-.684-3.303-.684-1.08 0-2.163.22-3.254.664h.001a1.8 1.8 0 0 1-.649.121l-2.079.001c-.195 0-.39-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.684a.813.813 0 0 1-1.065-.457.834.834 0 0 1 .45-1.081c1.3-.536 2.607-.806 3.918-.806a10.009 10.009 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.973.001a3 3 0 0 0 1.028-.18 10.01 10.01 0 0 1 3.393-.604z",fillRule:"evenodd"}))};p.defaultProps={name:"LabelWeekly"};var f=p,h=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.712a4.846 4.846 0 0 1 2.016 2.016c.464.87.712 1.732.712 4.109v3.926c0 2.377-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.016 2.016c-.87.464-1.732.712-4.109.712h-3.926c-2.377 0-3.24-.248-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.464-.87-.712-1.732-.712-4.109v-3.926c0-2.377.248-3.24.712-4.109a4.846 4.846 0 0 1 2.016-2.016c.87-.464 1.732-.712 4.109-.712zM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 1 0 2.053 0A5.61 5.61 0 1 0 12 17.61z",fillRule:"evenodd"}))};h.defaultProps={name:"LabelDaily"};var b=h,m=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027z"}))};m.defaultProps={name:"LabelProfessional"};var v=m;n.d(t,"f",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"e",function(){return O}),n.d(t,"d",function(){return j}),n.d(t,"a",function(){return w}),n.d(t,"c",function(){return C}),n.d(t,"g",function(){return k});var g=["online_roundtable","relevant","editor_recommendation","roundtable","special","weekly","daily","professional"],y={online_roundtable:r.a,relevant:c,editor_recommendation:u,roundtable:r.a,special:d.a,weekly:f,daily:b,professional:v},O={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"知乎圆桌精选",special:"专题收录",weekly:"知乎周刊收录",daily:"知乎日报收录",professional:"专业"},j={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌精选",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"专业"},w={online_roundtable:"此回答被收录进圆桌精选",relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章"},C={online_roundtable:"前往圆桌",roundtable:"前往圆桌",special:"前往专题",weekly:"前往周刊",daily:"前往日报"},k={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"内容专业"}},function(e,t,n){"use strict";var r=n(0),a=(n(1),n(11)),o=n.n(a);n(2164);function i(e){var t=e.className;return Object(r.b)("span",{className:o()("ActivityItem-StickyMark",t)},"置顶")}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(24),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(1),d=n(2),p=n.n(d),f=n(483),h=n(168),b=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,a=Object(r.a)(e,["containerClassName","selector"]);return Object(l.b)(h.b,{className:t,selector:n},Object(l.b)(f.b,a))}}]),t}(u.Component);b.propTypes={containerClassName:p.a.string,selector:p.a.string},b.defaultProps={selector:".List-item"};var m=b;n.d(t,"a",function(){return m})},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(29),l=n(32),u=n.n(l),d=n(1),p=n.n(d),f=n(2),h=n.n(f),b=n(10),m=function(e){return p.a.createElement(b.a,e,p.a.createElement("path",{d:"M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"}))};m.defaultProps={name:"Browser"};var v=m,g=n(1771),y=n(19),O=n.n(y),j=n(48),w=n.n(j),C=n(54),k=(n(1863),function(){return p.a.createElement("div",{className:"LinkCard-image LinkCard-image--default"},p.a.createElement(v,{size:32}))}),S=/^https?:\/\/link\.zhihu\.com/,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if(S.test(e)){var n=e.match(/target=([^=]+)/)||[],r=Object(c.a)(n,2)[1];r&&(t=decodeURIComponent(r))}var a=t.split("/");return Object(c.a)(a,3)[2]||""},A=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"renderLinkMeta",value:function(){var e=this.props,t=e.url,n=e.entityType,r=e.entityData,a=N(t);if(n&&r&&"job"===n){var o=r.salary,i=r.city,s=r.location,c=r.seniority,l=r.education;return p.a.createElement("span",{className:"LinkCard-meta"},p.a.createElement("span",{className:"LinkCard-textMeta"},c&&p.a.createElement("span",{className:"LinkCard-metaItem"},c),l&&p.a.createElement("span",{className:"LinkCard-metaItem"},l),(i||s)&&p.a.createElement("span",{className:"LinkCard-metaItem"},i,p.a.createElement("span",{className:"LinkCard-metaItem-jobLocation"},s))),o&&p.a.createElement("span",{className:"LinkCard-badge"},o))}return p.a.createElement("span",{className:"LinkCard-meta"},p.a.createElement(g.a,{size:17,center:!0}),a)}},{key:"render",value:function(){var e=w()(this.props,["entityType","entityData"]),t=e.text,n=e.target,r=e.url,a=e.image,o=e.imageWidth,i=e.imageHeight,s=e.component,c=e.className,l=u()(e,["text","target","url","image","imageWidth","imageHeight","component","className"]),d=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return{modifier:"horizontal",size:"180x120"};if(n<=.8)return{modifier:"vertical",size:"120x160"}}return{modifier:"square",size:"ipico"}}(o,i),f=d.modifier,h=d.size,b=!a&&function(e){var t=N(e);return"zhihu.com"===t||t.endsWith(".zhihu.com")}(r)?"https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg":Object(C.imgUrl)(a,h);return p.a.createElement(s,Object.assign({target:n,href:r,"data-draft-node":"block","data-draft-type":"link-card"},b&&{"data-image":b},o&&{"data-image-width":o},i&&{"data-image-height":i},{className:O()("LinkCard",c,{"LinkCard--hasImage":Boolean(b),"LinkCard--noImage":!b})},l),b&&p.a.createElement("span",{className:"LinkCard-backdrop",style:{backgroundImage:"url(".concat(b,")")}}),p.a.createElement("span",{className:"LinkCard-content"},p.a.createElement("span",{className:"LinkCard-text"},p.a.createElement("span",{className:"LinkCard-title","data-text":!0},t),this.renderLinkMeta()),p.a.createElement("span",{className:"LinkCard-imageCell"},b?p.a.createElement("img",{className:O()("LinkCard-image","LinkCard-image--".concat(f)),alt:"图标",src:b}):p.a.createElement(k,null))))}}]),t}(p.a.Component);A.propTypes={component:h.a.oneOfType([h.a.string,h.a.func]),target:h.a.string,url:h.a.string.isRequired,text:h.a.string.isRequired,image:h.a.string,imageWidth:h.a.oneOfType([h.a.string,h.a.number]),imageHeight:h.a.oneOfType([h.a.string,h.a.number])},A.defaultProps={component:"a",target:"_blank"};t.a=A},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function a(e,t){for(var n,r=0,a="",o=e.length,i=0;i<o&&((n=e[i]).charCodeAt(0)<128?r+=1:r+=2,a+=n,!(r>=t-1));i+=1);return a}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var o=null;function i(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=a(n=e.replace(/<.+?>/g,""),r):((o=o||document.createElement("div")).textContent=e,t=a(n=o.textContent.replace(/<.+?>/g,""),r));var c=!1;return t!==n&&(c=!0,t=t.slice(0,t.length-i.length),t+=i),s?{output:t,truncated:c}:t}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),a=(n(1),n(2)),o=n.n(a),i=n(102),s=n.n(i),c=n(1754),l=n(1849);n(2110);function u(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var a=t.detail,o=t.member,i=t.reasonDescription,u=t.type,d=o?"".concat(o.name,"："):"";return Object(r.b)("section",{className:s()("Annotation-mark",n)},Object(r.b)("header",{className:"Annotation-header"},"strong"===u&&Object(r.b)(c.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),Object(r.b)("h1",{className:"Annotation-markTitle"},i||"该内容已被标记")),(a||d)&&Object(r.b)(l.a,{className:"Annotation-markSummary",html:"".concat(d).concat(a||"未填写原因")}))}u.propTypes={annotationDetail:o.a.shape({reason:o.a.number.isRequired,reasonDescription:o.a.string,type:o.a.oneOf(["strong","weak"]).isRequired,detail:o.a.string,member:o.a.shape({name:o.a.string.isRequired}),showOuter:o.a.bool}).isRequired}},function(e,t,n){"use strict";var r=n(9),a=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],o=function(e){return a.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var a=Object(r.a)(n.childNodes),i=!0,s=!1,c=void 0;try{for(var l,u=a[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;if("BR"===d.nodeName&&d.previousSibling&&"BR"!==d.previousSibling.nodeName&&d.nextSibling&&"BR"===d.nextSibling.nodeName){for(var p=t.createElement("p"),f=d.previousSibling;f&&!o(f)&&("BR"!==f.nodeName||f.previousSibling&&"BR"!==f.previousSibling.nodeName&&!o(f.previousSibling));){var h=p.childNodes;h.length>0?p.insertBefore(f,h[0]):p.appendChild(f),f=d.previousSibling}p.childNodes.length>0&&(n.insertBefore(p,d),d.nextSibling.parentNode.removeChild(d.nextSibling),d.parentNode.removeChild(d))}}}catch(e){s=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}return n.innerHTML}},function(e,t,n){"use strict";var r=n(1788),a=n(1784),o=n(1792),i=a.OrderedMap;e.exports=function(e){return e.first()instanceof r?function(e){var t={},n=void 0;return i(e.withMutations(function(e){e.forEach(function(r,a){var i=r.getKey(),s=r.getNextSiblingKey(),c=r.getPrevSiblingKey(),l=r.getChildKeys(),u=r.getParentKey(),d=o();if(t[i]=d,s&&(e.get(s)?e.setIn([s,"prevSibling"],d):e.setIn([i,"nextSibling"],null)),c&&(e.get(c)?e.setIn([c,"nextSibling"],d):e.setIn([i,"prevSibling"],null)),u&&e.get(u)){var p=e.get(u).getChildKeys();e.setIn([u,"children"],p.set(p.indexOf(r.getKey()),d))}else e.setIn([i,"parent"],null),n&&(e.setIn([n.getKey(),"nextSibling"],d),e.setIn([i,"prevSibling"],t[n.getKey()])),n=e.get(i);l.forEach(function(t){e.get(t)?e.setIn([t,"parent"],d):e.setIn([i,"children"],r.getChildKeys().filter(function(e){return e!==t}))})})}).toArray().map(function(e){return[t[e.getKey()],e.set("key",t[e.getKey()])]}))}(e):function(e){return i(e.toArray().map(function(e){var t=o();return[t,e.set("key",t)]}))}(e)}},function(e,t,n){"use strict";var r=n(1787),a=n(1806),o=n(382);function i(e,t,n){var i=t.getCharacterList(),s=n>0?i.get(n-1):void 0,c=n<i.count()?i.get(n):void 0,l=s?s.getEntity():void 0,u=c?c.getEntity():void 0;if(u&&u===l&&"MUTABLE"!==e.__get(u).getMutability()){for(var d,p=function(e,t,n){var r;return a(e,function(e,t){return e.getEntity()===t.getEntity()},function(e){return e.getEntity()===t},function(e,t){e<=n&&t>=n&&(r={start:e,end:t})}),"object"!=typeof r&&o(!1),r}(i,u,n),f=p.start,h=p.end;f<h;)d=i.get(f),i=i.set(f,r.applyEntity(d,null)),f++;return t.set("characterList",i)}return t}e.exports=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),a={},o=t.getStartKey(),s=t.getStartOffset(),c=n.get(o),l=i(r,c,s);l!==c&&(a[o]=l);var u=t.getEndKey(),d=t.getEndOffset(),p=n.get(u);o===u&&(p=l);var f=i(r,p,d);return f!==p&&(a[u]=f),Object.keys(a).length?e.merge({blockMap:n.merge(a),selectionAfter:t}):e.set("selectionAfter",t)}},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n===e.count())t.forEach(function(t){e=e.push(t)});else if(0===n)t.reverse().forEach(function(t){e=e.unshift(t)});else{var r=e.slice(0,n),a=e.slice(n);e=r.concat(t,a).toList()}return e}},function(e,t,n){"use strict";var r=n(1788);e.exports=function(e,t){if(!(e instanceof r))return null;var n=e.getNextSiblingKey();if(n)return n;var a=e.getParentKey();if(!a)return null;for(var o=t.get(a);o&&!o.getNextSiblingKey();){var i=o.getParentKey();o=i?t.get(i):null}return o?o.getNextSiblingKey():null}},function(e,t,n){"use strict";var r=n(1784),a=n(384),o=n(1806),i=r.List,s=r.Repeat,c=r.Record,l=a.thatReturnsTrue,u=c({start:null,end:null}),d=c({start:null,end:null,decoratorKey:null,leaves:null}),p={generate:function(e,t,n){var r=t.getLength();if(!r)return i.of(new d({start:0,end:0,decoratorKey:null,leaves:i.of(new u({start:0,end:0}))}));var a=[],c=n?n.getDecorations(t,e):i(s(null,r)),p=t.getCharacterList();return o(c,h,l,function(e,t){a.push(new d({start:e,end:t,decoratorKey:c.get(e),leaves:f(p.slice(e,t).toList(),e)}))}),i(a)},getFingerprint:function(e){return e.map(function(e){var t=e.get("decoratorKey");return(null!==t?t+"."+(e.get("end")-e.get("start")):"")+"."+e.get("leaves").size}).join("-")}};function f(e,t){var n=[],r=e.map(function(e){return e.getStyle()}).toList();return o(r,h,l,function(e,r){n.push(new u({start:e+t,end:r+t}))}),i(n)}function h(e,t){return e===t}e.exports=p},function(e,t,n){"use strict";var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}((0,n(1784).Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object}));e.exports=r},function(e,t,n){"use strict";var r=n(1834),a=n(382),o="֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",i="؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾",s=new RegExp("["+"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"+o+i+"]"),c=new RegExp("["+o+i+"]");function l(e){var t=s.exec(e);return null==t?null:t[0]}function u(e){var t=l(e);return null==t?r.NEUTRAL:c.exec(t)?r.RTL:r.LTR}function d(e,t){if(t=t||r.NEUTRAL,!e.length)return t;var n=u(e);return n===r.NEUTRAL?t:n}function p(e,t){return t||(t=r.getGlobalDir()),r.isStrong(t)||a(!1),d(e,t)}var f={firstStrongChar:l,firstStrongCharDir:u,resolveBlockDir:d,getDirection:p,isDirectionLTR:function(e,t){return p(e,t)===r.LTR},isDirectionRTL:function(e,t){return p(e,t)===r.RTL}};e.exports=f},function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),a=t.getStartOffset(),o=!1;return r.some(function(e){return a===e.get("start")?(o=!0,!0):a<e.get("end")&&e.get("leaves").some(function(e){var t=e.get("start");return a===t&&(o=!0,!0)})}),o}},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var a=n(2006),o=n(1818),i=n(1),s=n(31),c=n(1900),l=n(1839),u=n(1895),d=n(1834),p=n(1798),f=n(2021),h=n(1840),b=n(2025),m=n(382),v=n(1789),g=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||g(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=s.findDOMNode(this),r=l.getScrollParent(n),a=h(r),o=void 0;if(r===window){var i=f(n);(o=i.y+i.height-b().height)>0&&window.scrollTo(a.x,a.y+o+10)}else{n instanceof HTMLElement||m(!1),(o=n.offsetHeight+n.offsetTop-(r.offsetHeight+a.y))>0&&c.setTop(r,c.getTop(r)+o+10)}}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),s=t.getText(),c=this.props.tree.size-1,l=g(this.props.selection,n);return this.props.tree.map(function(p,f){var h=p.get("leaves"),b=h.size-1,m=h.map(function(r,u){var d=o.encode(n,f,u),p=r.get("start"),h=r.get("end");return i.createElement(a,{key:d,offsetKey:d,block:t,start:p,selection:l?e.props.selection:null,forceSelection:e.props.forceSelection,text:s.slice(p,h),styleSet:t.getInlineStyleAt(p),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:f===c&&u===b})}).toArray(),g=p.get("decoratorKey");if(null==g)return m;if(!e.props.decorator)return m;var y=v(e.props.decorator),O=y.getComponentForKey(g);if(!O)return m;var j=y.getPropsForKey(g),w=o.encode(n,f,0),C=s.slice(h.first().get("start"),h.last().get("end")),k=d.getHTMLDirIfDifferent(u.getDirection(C),e.props.direction);return i.createElement(O,r({},j,{contentState:e.props.contentState,decoratedText:C,dir:k,key:w,entityKey:t.getEntityAt(p.get("start")),offsetKey:w}),m)}).toArray()},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.offsetKey,r=p({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return i.createElement("div",{"data-offset-key":n,className:r},this._renderChildren())},t}(i.Component);e.exports=y},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";function r(e,t){return!!t&&(e===t.documentElement||e===t.body)}var a={getTop:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=a},function(e,t,n){"use strict";var r=n(2028),a=n(2029),o=n(384),i=new RegExp("\r\n","g"),s={"text/rtf":1,"text/html":1};function c(e){if("file"==e.kind)return e.getAsFile()}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.types=t.types?a(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some(function(e){return s[e]})},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(i,"\n"):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some(function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")})},e.prototype.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},e.prototype.isImage=function(){var e=this.types.some(function(e){return-1!=e.indexOf("application/x-moz-file")});if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var a=t[n].type;if(!r.isImage(a))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(c).filter(o.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=l},function(e,t,n){"use strict";e.exports=function e(t){if(t instanceof Element){var n=t.getAttribute("data-offset-key");if(n)return n;for(var r=0;r<t.childNodes.length;r++){var a=e(t.childNodes[r]);if(a)return a}}return null}},function(e,t,n){"use strict";(function(t){var r=n(382),a=/\.textClipping$/,o={"text/plain":!0,"text/html":!0,"text/rtf":!0},i=5e3;e.exports=function(e,n){var s=0,c=[];e.forEach(function(l){!function(e,n){if(t.FileReader&&(!e.type||e.type in o)){if(""===e.type){var i="";return a.test(e.name)&&(i=e.name.replace(a,"")),void n(i)}var s=new FileReader;s.onload=function(){var e=s.result;"string"!=typeof e&&r(!1),n(e)},s.onerror=function(){n("")},s.readAsText(e)}else n("")}(l,function(t){s++,t&&c.push(t.slice(0,i)),s==e.length&&n(c.join("\r"))})})}}).call(this,n(47))},function(e,t,n){"use strict";var r=n(1818),a=n(1789);e.exports=function(e,t,n,o,i){var s=a(e.getSelection()),c=r.decode(t),l=c.blockKey,u=e.getBlockTree(l).getIn([c.decoratorKey,"leaves",c.leafKey]),d=r.decode(o),p=d.blockKey,f=e.getBlockTree(p).getIn([d.decoratorKey,"leaves",d.leafKey]),h=u.get("start"),b=f.get("start"),m=u?h+n:null,v=f?b+i:null;if(s.getAnchorKey()===l&&s.getAnchorOffset()===m&&s.getFocusKey()===p&&s.getFocusOffset()===v)return s;var g=!1;if(l===p){var y=u.get("end"),O=f.get("end");g=b===h&&O===y?i<n:b<h}else g=e.getCurrentContent().getBlockMap().keySeq().skipUntil(function(e){return e===l||e===p}).first()===p;return s.merge({anchorKey:l,anchorOffset:m,focusKey:p,focusOffset:v,isBackward:g})}},function(e,t,n){"use strict";var r=n(1816);e.exports=function(e){var t=e.getSelection();return t.isCollapsed()?null:r(e.getCurrentContent(),t)}},function(e,t,n){"use strict";var r=n(1791),a=n(382);var o=r.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var o=r===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var i,s=Array.from(t.getClientRects());if(n.push(s),o)return n.reverse(),(i=[]).concat.apply(i,n);t.setEndBefore(r)}a(!1)}:function(e){return Array.from(e.getClientRects())};e.exports=o},function(e,t,n){"use strict";var r=n(1841),a=n(1902),o=n(1904),i=n(382),s=n(1789);function c(e,t,n){var o=t,c=r(o);if(null!=c||e&&(e===o||e.firstChild===o)||i(!1),e===o&&((o=o.firstChild)instanceof Element&&"true"===o.getAttribute("data-contents")||i(!1),n>0&&(n=o.childNodes.length)),0===n){var u=null;if(null!=c)u=c;else{var d=function(e){for(;e.firstChild&&(e.firstChild instanceof Element&&"true"===e.firstChild.getAttribute("data-blocks")||a(e.firstChild));)e=e.firstChild;return e}(o);u=s(a(d))}return{key:u,offset:0}}var p=o.childNodes[n-1],f=null,h=null;if(a(p)){var b=function(e){for(;e.lastChild&&(e.lastChild instanceof Element&&"true"===e.lastChild.getAttribute("data-blocks")||a(e.lastChild));)e=e.lastChild;return e}(p);f=s(a(b)),h=l(b)}else f=s(c),h=l(p);return{key:f,offset:h}}function l(e){var t=e.textContent;return"\n"===t?0:t.length}e.exports=function(e,t,n,a,i,l){var u=n.nodeType===Node.TEXT_NODE,d=i.nodeType===Node.TEXT_NODE;if(u&&d)return{selectionState:o(e,s(r(n)),a,s(r(i)),l),needsRecovery:!1};var p=null,f=null,h=!0;return u?(p={key:s(r(n)),offset:a},f=c(t,i,l)):d?(f={key:s(r(i)),offset:l},p=c(t,n,a)):(p=c(t,n,a),f=c(t,i,l),n===i&&a===l&&(h=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:o(e,p.key,p.offset,f.key,f.offset),needsRecovery:h}}},function(e,t,n){"use strict";var r="\\s|(?![_])"+n(2046).getPunctuation(),a=new RegExp("^(?:"+r+")*(?:['‘’]|(?!"+r+").)*(?:(?!"+r+").)"),o=new RegExp("(?:(?!"+r+").)(?:['‘’]|(?!"+r+").)*(?:"+r+")*$");function i(e,t){var n=t?o.exec(e):a.exec(e);return n?n[0]:e}var s={getBackward:function(e){return i(e,!0)},getForward:function(e){return i(e,!1)}};e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t){var n,r=e.getSelection(),a=r.getStartKey(),o=r.getStartOffset(),i=e.getCurrentContent(),s=a;return t>i.getBlockForKey(a).getText().length-o?(s=i.getKeyAfter(a),n=0):n=o+t,r.merge({focusKey:s,focusOffset:n})}},function(e,t,n){"use strict";var r,a=o||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(478);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(1787),c=n(1795),l=n(1788),u=n(1835),d=n(1817),p=n(1793),f=n(1784),h=n(1784).Set,b=n(2057),m=n(1798),v=n(1792),g=n(1911),y=n(382),O=n(1833),j=p.draft_tree_data_support,w=f.List,C=f.OrderedSet,k=new RegExp("\r","g"),S=new RegExp("\n","g"),N=new RegExp("&nbsp;","g"),A=new RegExp("&#13;?","g"),T=new RegExp("&#8203;?","g"),_=["bold","bolder","500","600","700","800","900"],E=["light","lighter","100","200","300","400"],x={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},I=(i(r={},m("public/DraftStyleDefault/depth0"),0),i(r,m("public/DraftStyleDefault/depth1"),1),i(r,m("public/DraftStyleDefault/depth2"),2),i(r,m("public/DraftStyleDefault/depth3"),3),i(r,m("public/DraftStyleDefault/depth4"),4),r),M=["className","href","rel","target","title"],R=["alt","className","height","src","width"],D=void 0,L={text:"",inlines:[],entities:[],blocks:[]},P={children:w(),depth:0,key:"",type:""},B=function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null},z=function(e,t,n){var r=n.filter(function(t){return t.element===e||t.wrapper===e||t.aliasedElements&&t.aliasedElements.some(function(t){return t===e})}).keySeq().toSet().toArray().sort();switch(r.length){case 0:return"unstyled";case 1:return r[0];default:return function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r](e,t);if(a)return a}return null}(e,t,[B])||"unstyled"}},q=function(e,t,n){var r=e.text.slice(-1),a=t.text.slice(0,1);if("\r"!==r||"\r"!==a||n||(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===r){if(" "===t.text||"\n"===t.text)return e;" "!==a&&"\n"!==a||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}},F=function(e){e instanceof HTMLAnchorElement||y(!1);var t=e.protocol;return"http:"===t||"https:"===t||"mailto:"===t},U=function(e){var t=new Array(1);return e&&(t[0]=e),a({},L,{text:" ",inlines:[C()],entities:t})},V=function(){return a({},L,{text:"\n",inlines:[C()],entities:new Array(1)})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a({},P,e)},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{text:"\r",inlines:[C()],entities:new Array(1),blocks:[Q({parent:n,key:v(),type:e,depth:Math.max(0,Math.min(4,t))})]}},K=function e(t,n,r,o,i,s,c,l,u,p){var f=D,h=n.nodeName.toLowerCase(),m=t,v="unstyled",g=!1,y=i&&z(i,o,l),O=a({},L),w=void 0;if("#text"===h){var C=n.textContent,k=C.trim();if(o&&""===k&&n.parentElement){var N=n.parentElement.nodeName.toLowerCase();if("ol"===N||"ul"===N)return{chunk:a({},L),entityMap:t}}return""===k&&"pre"!==i?{chunk:U(u),entityMap:t}:("pre"!==i&&(C=C.replace(S," ")),D=h,{chunk:{text:C,inlines:Array(C.length).fill(r),entities:Array(C.length).fill(u),blocks:[]},entityMap:t})}if(D=h,"br"===h)return"br"!==f||i&&"unstyled"!==y?{chunk:V(),entityMap:t}:{chunk:H("unstyled",c,p),entityMap:t};if("img"===h&&n instanceof HTMLImageElement&&n.attributes.getNamedItem("src")&&n.attributes.getNamedItem("src").value){var A=n,T={};R.forEach(function(e){var t=A.getAttribute(e);t&&(T[e]=t)}),n.textContent="📷",u=d.__create("IMAGE","MUTABLE",T||{})}r=function(e,t,n){var r=x[e];if(r)n=n.add(r).toOrderedSet();else if(t instanceof HTMLElement){var a=t;n=n.withMutations(function(e){var t=a.style.fontWeight,n=a.style.fontStyle,r=a.style.textDecoration;_.indexOf(t)>=0?e.add("BOLD"):E.indexOf(t)>=0&&e.remove("BOLD"),"italic"===n?e.add("ITALIC"):"normal"===n&&e.remove("ITALIC"),"underline"===r&&e.add("UNDERLINE"),"line-through"===r&&e.add("STRIKETHROUGH"),"none"===r&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}).toOrderedSet()}return n}(h,n,r),"ul"!==h&&"ol"!==h||(o&&(c+=1),o=h),!j&&"li"===h&&n instanceof HTMLElement&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(I).some(function(n){e.classList.contains(n)&&(t=I[n])}),t}(n,c));var P=z(h,o,l),B=o&&"li"===i&&"li"===h,Q=(!i||j)&&-1!==s.indexOf(h);(B||Q)&&(w=(O=H(P,c,p)).blocks[0].key,i=h,g=!j),B&&(v="ul"===o?"unordered-list-item":"ordered-list-item");var K=n.firstChild;null!=K&&(h=K.nodeName.toLowerCase());for(var W=null;K;){K instanceof HTMLAnchorElement&&K.href&&F(K)?function(){var e=K,t={};M.forEach(function(n){var r=e.getAttribute(n);r&&(t[n]=r)}),t.url=new b(e.href).toString(),W=d.__create("LINK","MUTABLE",t||{})}():W=void 0;var G=e(m,K,r,o,i,s,c,l,W||u,j?w:null),J=G.chunk;m=G.entityMap,O=q(O,J,j);var Y=K.nextSibling;!p&&Y&&s.indexOf(h)>=0&&i&&(O=q(O,V())),Y&&(h=Y.nodeName.toLowerCase()),K=Y}return g&&(O=q(O,H(v,c,p))),{chunk:O,entityMap:m}},W=function(e,t,n,r){e=e.trim().replace(k,"").replace(N," ").replace(A,"").replace(T,"");var o=function(e){var t=e.get("unstyled").element,n=h([]);return e.forEach(function(e){e.aliasedElements&&e.aliasedElements.forEach(function(e){n=n.add(e)}),n=n.add(e.element)}),n.filter(function(e){return e&&e!==t}).toArray().sort()}(n),i=t(e);if(!i)return null;D=null;var s=function(e,t){return t.some(function(t){return-1!==e.indexOf("<"+t)})}(e,o)?o:["div"],c=K(r,i,C(),"ul",null,s,-1,n),l=c.chunk,u=c.entityMap;return 0===l.text.indexOf("\r")&&(l={text:l.text.slice(1),inlines:l.inlines.slice(1),entities:l.entities.slice(1),blocks:l.blocks}),"\r"===l.text.slice(-1)&&(l.text=l.text.slice(0,-1),l.inlines=l.inlines.slice(0,-1),l.entities=l.entities.slice(0,-1),l.blocks.pop()),0===l.blocks.length&&l.blocks.push(a({},L,{type:"unstyled",depth:0})),l.text.split("\r").length===l.blocks.length+1&&l.blocks.unshift({type:"unstyled",depth:0}),{chunk:l,entityMap:u}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,r=W(e,t,n,d);if(null==r)return null;var a=r.chunk,o=r.entityMap;return{contentBlocks:function(e){if(!e||!e.text||!Array.isArray(e.blocks))return null;var t=0,n=e.blocks,r=e.inlines,a=e.entities,o=j?l:c;return e.text.split("\r").reduce(function(e,i,c){i=O(i);var u=n[c],d=t+i.length,p=r.slice(t,d),f=a.slice(t,d),h=w(p.map(function(e,t){var n={style:e,entity:null};return f[t]&&(n.entity=f[t]),s.create(n)}));t=d+1;var b=u.depth,m=u.type,g=u.parent,y=u.key||v(),j=null;if(g){var C=e.cacheRef[g],k=e.contentBlocks[C];if(k.getChildKeys().isEmpty()&&k.getText()){var S=k.getCharacterList(),N=k.getText();j=v();var A=new l({key:j,text:N,characterList:S,parent:g,nextSibling:y});e.contentBlocks.push(A),k=k.withMutations(function(e){e.set("characterList",w()).set("text","").set("children",k.children.push(A.getKey()))})}e.contentBlocks[C]=k.set("children",k.children.push(y))}var T=new o({key:y,parent:g,type:m,depth:b,text:i,characterList:h,prevSibling:j||(0===c||n[c-1].parent!==g?null:n[c-1].key),nextSibling:c===n.length-1||n[c+1].parent!==g?null:n[c+1].key});return e.contentBlocks.push(T),e.cacheRef[T.key]=c,e},{cacheRef:{},contentBlocks:[]}).contentBlocks}(a),entityMap:o}}},function(e,t,n){"use strict";var r=n(1791),a=n(382),o=r.isBrowser("IE <= 9");e.exports=function(e){var t,n=null;return!o&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||a(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}},function(e,t,n){"use strict";var r=n(1786),a=n(1785),o=(n(1797),n(2058)),i=n(1789),s={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return s.toggleInlineStyle(e,"BOLD");case"italic":return s.toggleInlineStyle(e,"ITALIC");case"underline":return s.toggleInlineStyle(e,"UNDERLINE");case"code":return s.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return s.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return s.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=r.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=a.push(e,t,"insert-characters");return a.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockBefore(r);if(o&&"atomic"===o.getType()){var i=n.getBlockMap().delete(o.getKey()),c=n.merge({blockMap:i,selectionAfter:t});if(c!==n)return a.push(e,c,"remove-range")}var l=s.tryToRemoveBlockStyle(e);return l?a.push(e,l,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),o=t.getStartKey(),i=n.getBlockForKey(o).getLength();if(t.getStartOffset()<i)return null;var s=n.getBlockAfter(o);if(!s||"atomic"!==s.getType())return null;var c=t.merge({focusKey:s.getKey(),focusOffset:s.getLength()}),l=r.removeRange(n,c,"forward");return l!==n?a.push(e,l,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),i=r.getAnchorKey();if(i!==r.getFocusKey())return t;var s=t.getCurrentContent(),c=s.getBlockForKey(i),l=c.getType();if("unordered-list-item"!==l&&"ordered-list-item"!==l)return t;e.preventDefault();var u=s.getBlockBefore(i);if(!u)return t;var d=u.getType();if("unordered-list-item"!==d&&"ordered-list-item"!==d)return t;var p=c.getDepth();if(!e.shiftKey&&p===n)return t;n=Math.min(u.getDepth()+1,n);var f=o(s,r,e.shiftKey?-1:1,n);return a.push(t,f,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),o=n.getStartKey(),s=n.getEndKey(),c=e.getCurrentContent(),l=n;if(o!==s&&0===n.getEndOffset()){var u=i(c.getBlockBefore(s));s=u.getKey(),l=l.merge({anchorKey:o,anchorOffset:n.getStartOffset(),focusKey:s,focusOffset:u.getLength(),isBackward:!1})}if(c.getBlockMap().skipWhile(function(e,t){return t!==o}).reverse().skipWhile(function(e,t){return t!==s}).some(function(e){return"atomic"===e.getType()}))return e;var d=c.getBlockForKey(o).getType()===t?"unstyled":t;return a.push(e,r.setBlockType(c,l,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?s.toggleBlockType(e,"code-block"):s.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),o=e.getCurrentInlineStyle();if(n.isCollapsed())return a.setInlineStyleOverride(e,o.has(t)?o.remove(t):o.add(t));var i,s=e.getCurrentContent();return i=o.has(t)?r.removeInlineStyle(s,n,t):r.applyInlineStyle(s,n,t),a.push(e,i,"change-inline-style")},toggleLink:function(e,t,n){var o=r.applyEntity(e.getCurrentContent(),t,n);return a.push(e,o,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var a=t.getAnchorKey(),o=e.getCurrentContent(),i=o.getBlockForKey(a),s=o.getFirstBlock();if(i.getLength()>0&&i!==s)return null;var c=i.getType(),l=o.getBlockBefore(a);if("code-block"===c&&l&&"code-block"===l.getType()&&0!==l.getLength())return null;if("unstyled"!==c)return r.setBlockType(o,t,"unstyled")}return null}};e.exports=s},function(e,t,n){"use strict";var r=n(1842),a=n(1836),o=n(1791),i=o.isPlatform("Mac OS X"),s=o.isPlatform("Windows"),c=i&&o.isBrowser("Firefox < 29"),l=r.hasCommandModifier,u=r.isCtrlKeyCommand;function d(e){return i&&e.altKey||u(e)}e.exports=function(e){switch(e.keyCode){case 66:return l(e)?"bold":null;case 68:return u(e)?"delete":null;case 72:return u(e)?"backspace":null;case 73:return l(e)?"italic":null;case 74:return l(e)?"code":null;case 75:return!s&&u(e)?"secondary-cut":null;case 77:case 79:return u(e)?"split-block":null;case 84:return i&&u(e)?"transpose-characters":null;case 85:return l(e)?"underline":null;case 87:return i&&u(e)?"backspace-word":null;case 89:return u(e)?s?"redo":"secondary-paste":null;case 90:return function(e){return l(e)?e.shiftKey?"redo":"undo":null}(e)||null;case a.RETURN:return"split-block";case a.DELETE:return function(e){return s&&e.shiftKey?null:d(e)?"delete-word":"delete"}(e);case a.BACKSPACE:return function(e){return l(e)&&i?"backspace-to-start-of-line":d(e)?"backspace-word":"backspace"}(e);case a.LEFT:return c&&l(e)?"move-selection-to-start-of-block":null;case a.RIGHT:return c&&l(e)?"move-selection-to-end-of-block":null;default:return null}}},function(e,t,n){"use strict";var r={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=r},function(e,t,n){var r=n(2077),a=n(1844),o=n(2078);e.exports=function(e){return a(e)?o(e):r(e)}},function(e,t,n){e.exports=n.p+"assets/jingdong_logo.a7030667.png"},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1)),o=r(n(75)),i=function(e){return a.default.createElement(o.default,Object.assign({viewBox:"0 0 120 120"},e),a.default.createElement("g",{fill:"none",fillRule:"evenodd"},a.default.createElement("path",{fill:"#ff760f",d:"M35.894 0h48.212c12.48 0 17.007 1.3 21.57 3.74 4.563 2.44 8.144 6.021 10.584 10.584 2.44 4.563 3.74 9.09 3.74 21.57v48.212c0 12.48-1.3 17.007-3.74 21.57s-6.021 8.144-10.584 10.584-9.09 3.74-21.57 3.74H35.894c-12.48 0-17.007-1.3-21.57-3.74-4.563-2.44-8.144-6.021-10.584-10.584C1.3 101.113 0 96.586 0 84.106V35.894c0-12.48 1.3-17.007 3.74-21.57C6.18 9.761 9.76 6.18 14.324 3.74 18.887 1.3 23.414 0 35.894 0z"}),a.default.createElement("path",{fill:"#fff",d:"M45.926 25.978a68.962 68.962 0 0 1-7.468 15.216 28.87 28.87 0 0 1-3.394 4.161l-1.349 1.407 3.95 2.328 3.927 2.304.864-.87c1.037-1.036 3.398-3.734 4.555-5.193l.84-1.09 2.41-.988 2.457-1.114h.312l-.432.787a77.358 77.358 0 0 1-7.564 11.559c-.327.36-.624.749-.888 1.161a29.787 29.787 0 0 0 2.404 2.204l2.41 2.102h-4.814v5.842h15.796v13.93h-1.036a7.267 7.267 0 0 1-4.815-1.68c-.94-1.066-1.205-2.948-.845-6.265 0-.965.168-1.93.168-2.179v-.466h-5.51a36.643 36.643 0 0 0-5.78.144 9.562 9.562 0 0 0-.575 4.186 19.05 19.05 0 0 0 .48 5.76 10.18 10.18 0 0 0 8.016 8.194c1.785.297 3.6.374 5.4.22a55.62 55.62 0 0 0 6.067-.192 39.288 39.288 0 0 0 18.206-6.24c.394-.312.821-.57 1.277-.768 0 0 .413 1.412.821 3.024.408 1.604.768 2.914.797 2.943.024.024 2.093-.816 4.574-1.882a38.974 38.974 0 0 0 4.503-2.078c0-.197-6.02-15.317-6.096-15.365-.068-.048-7.224 2.227-7.416 2.323s.268 1.19.652 2.477.672 2.597.672 2.669a17.064 17.064 0 0 1-2.961 1.881 33.374 33.374 0 0 1-3.37 1.46V65.746h15.677v-5.818H73.195v-7.277h15.821v-5.837H61.008l.624-.792a20.111 20.111 0 0 0 3.35-5.472s-.988-.316-2.145-.638l-2.41-.672a54.666 54.666 0 0 1 9.634-3.168c7.008-1.776 12.451-2.074 16.21-.816a8.357 8.357 0 0 1 3.59 2.256 5.917 5.917 0 0 1 1.488 2.05c.595 1.2.95 2.5 1.065 3.84 0 .787.12 6.73 0 19.641v18.533l-.316 1.042a8.88 8.88 0 0 1-2.405 4.128 9.946 9.946 0 0 1-7.229 2.476 17.904 17.904 0 0 1-4.814-.739 29.27 29.27 0 0 0-3.47-.672s-1.566 6.264-1.566 6.509c0 .25.365.298 2.41.744 2.976.672 6.029.97 9.082.888a23.472 23.472 0 0 0 7.68-.792c7.017-1.45 12.24-7.512 12.787-14.842.413-3.244.773-8.515.94-13.56.296-8.13-.132-16.271-1.276-24.326-.257-2-.99-3.91-2.141-5.568-4.531-6.576-14.448-9.326-28.272-7.742a119.15 119.15 0 0 0-17.27 3.59 4.704 4.704 0 0 1-1.061.245c.192-.495.417-.97.672-1.435a19.772 19.772 0 0 0 1.953-4.23S46.968 24 46.748 24a14.04 14.04 0 0 0-.817 2.078v-.096zm14.016 30.288v3.662H49.056l3.446-3.614 3.466-3.634h3.974zm-31.67-30.98a8.122 8.122 0 0 0-6.312 5.712 7.35 7.35 0 0 0 0 3.816c.984 2.544 3.058 4.474 5.616 5.228a8.414 8.414 0 0 0 7.464-1.368 7.2 7.2 0 0 0 3.226-5.962 6.816 6.816 0 0 0-2.07-4.949 8.136 8.136 0 0 0-4.286-2.477 13.248 13.248 0 0 0-3.638 0zm-7.68 22.124c-1.378 2.174-2.41 4.032-2.41 4.104a54.74 54.74 0 0 0 4.815 3.168c6.264 4.008 5.88 3.734 6.84 4.728 2.697 2.77 2.721 5.913.12 9.897a118.31 118.31 0 0 1-13.315 14.847 29.489 29.489 0 0 0-2.242 2.275s12.235 7.92 12.38 7.92.215-.226.335-.5c.432-1.06 3.495-7.742 5.731-12.542 1.277-2.745 2.53-5.568 2.794-6.24a64.987 64.987 0 0 0 2.99-10.464c.096-.926.144-1.862.12-2.793a9.83 9.83 0 0 0-.24-2.799 11.05 11.05 0 0 0-1.545-3.389 72.905 72.905 0 0 0-6.595-6.633c-1.738-1.435-6.864-5.415-7.133-5.52a32.602 32.602 0 0 0-2.65 3.936z",fillRule:"nonzero"})))};t.default=i},function(e,t,n){"use strict";var r=n(29),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(2),d=n.n(u),p=n(1),f=n.n(p),h=n(11),b=n.n(h),m=n(15),v=n(819),g=n(2201),y=n(16),O=n(63),j=n(44),w=n(168),C=n(9),k=n(43),S=n(115),N=(n(2093),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={step:0},n.containerRef=f.a.createRef(),n.reasonButtonRefs=[],n.toggleStep=function(){n.setState({step:0===n.state.step?1:0},function(){n.popover.position()})},n.handleKeyDown=function(e){var t=Number(e.key);t&&n.reasonButtonRefs[t-1]&&n.reasonButtonRefs[t-1].focus()},n.handleNeverShowVoteDownReason=function(){n.props.onSetVoteDownReason(!1),n.popover.close()},n.handleSelectReason=function(e){n.props.onSelectVoteDownReason(e),n.popover.close()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,r=t.positionStatus,a=this.state.step,o=Object(C.a)(n).sort(function(e,t){return e.sort-t.sort});return Object(l.b)(S.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:r,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},Object(l.b)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1},Object(l.b)("div",{className:"VoteDownReasonMenu-header"},0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"),Object(l.b)("div",{className:"VoteDownReasonMenu-action"},0===a&&Object(l.b)(m.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===a&&Object(l.b)("div",{className:"VoteDownReasonMenu-spliter"}),Object(l.b)(m.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1},Object(l.b)(k.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===a&&Object(l.b)("div",{className:"VoteDownReasonMenu-reasonList"},o.map(function(t,n){return Object(l.b)(m.c,{preset:"plain",className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t}},t.name)})),1===a&&Object(l.b)("div",{className:"VoteDownReasonMenu-disableReason"},Object(l.b)("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),Object(l.b)("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},Object(l.b)(m.c,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),Object(l.b)(m.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(p.Component));N.defaultProps={reasonList:[]};var A=N,T=n(21);n(1932);n.d(t,"a",function(){return _});var _=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:n.props.isRecognized}},n.voteUpButtonRef=f.a.createRef(),n.voteDownButtonRef=f.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.voting,r=e.voteDownReason,a=e.onLoadVoteDownReason;return!!e.isShowVoteDownMenu&&(-1===t?(n.popover.close(),!1):!!r||(n.isPendingForVoteDownReason=!0,a(),!1))},n.onVote=n.context.authRequired(function(e){n.props.onVote(e)},T.N.vote),n.voteUp=function(e){var t=1===n.props.voting?["UnUpvote","neutral"]:["Upvote","up"],a=Object(r.a)(t,2),o=a[0],i=a[1];n.vote(e,o,i),n.voteUpButtonRef.current.focus()},n._voteDown=function(e){var t=-1===n.props.voting?["UnDownvote","neutral"]:["Downvote","down"],a=Object(r.a)(t,2),o=a[0],i=a[1];n.vote(e,o,i),n.voteDownButtonRef.current.focus()},n.voteDown=function(e){n.shouldShowMenu()&&n.popover.open(),n._voteDown(e)},n.vote=function(e,t,r){var a=n.props,o=a.disableAuth,i=a.handleToggleGuide,s=a.onClick,c=a.type,l=a.zaIds,u=l.voteUp,d=l.voteDown,p=t.includes("Upvote")?u:d;"article"===c&&"down"===r&&y.default.trackEvent(n.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),y.default.trackEvent(t.includes("Upvote")?n.voteUpButtonRef.current:n.voteDownButtonRef.current,Object.assign({action:t,element:"Button"},p&&{id:p})),s?s(e):o?i():n.onVoteWithRecognize(t,r)},n.onVoteWithRecognize=function(e,t){var r=n.props.voting;!n.state.recognizeInfo.isRecognized||1!==r||"UnUpvote"!==e&&"Downvote"!==e?n.onVote(t):n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!0,action:e,voteType:t})})},n.handleConfirmCancelRecognize=function(){n.onVote(n.state.recognizeInfo.voteType),n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},n.handleCloseCancelRecognizeModal=function(){return n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!1})})},n.handleTogglerClick=function(e){n.shouldShowMenu()||e.preventDefault(),n._voteDown(e)},n.renderVoteUpButton=function(){var e=n.props,t=e.isOwner,r=e.count,a=e.voting,o=e.disabled,i=e.hideDesc,s=1===a?"已赞同":"赞同",c=[s,Object(O.niceNumber)(r)].join(" "),u=[!i&&s,0!==r&&Object(O.niceNumber)(r)].filter(Boolean).join(" ");return Object(l.b)(m.c,{className:b()("VoteButton VoteButton--up",{"is-active":1===a}),disabled:t||o,onClick:n.voteUp,"aria-label":c,onRef:n.voteUpButtonRef},Object(l.b)(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),u)},n.renderVoteDownButton=function(){var e=n.props,t=e.voting,r=e.disabled,a=-1===t?"已反对":"反对";return Object(l.b)(m.c,{className:b()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:r,onClick:n._voteDown,"aria-label":a,onRef:n.voteDownButtonRef},Object(l.b)(g.a,{center:!0,size:10}))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,a=t.isShowVoteDownMenu,o=t.voteDownReason,i=this.state.recognizeInfo,s=i.showRecognizeModal,c="UnUpvote"===i.action,u=a&&!0;return Object(l.b)("span",{ref:this.voteButtonRef},Object(l.b)(w.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&Object(l.b)(A,{reasonList:o,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(l.b)(j.b,{title:"确定".concat(c?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal},s&&Object(l.b)("div",null,Object(l.b)("div",null,c?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"),Object(l.b)(j.a,{direction:"horizontal"},Object(l.b)(m.c,{onClick:this.handleCloseCancelRecognizeModal},c?"暂不取消":"暂不选择"),Object(l.b)(m.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize},c?"取消赞同":"选择反对")))))}}]),t}(p.Component);_.contextTypes={authRequired:d.a.func},_.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},_.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(1960);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),c=0;c<a;c++)o[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,i.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},a)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,a=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),s=this.state.inView;return o.createElement(a,r({},i,{ref:this.handleNode}),"function"==typeof n?n(s):null,"function"==typeof t?t(s):t)}}]),t}();c.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=c},function(e,t,n){var r=n(1831)(!0);e.exports=r},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(88)),i=r(n(89)),s=r(n(135)),c=r(n(106)),l=r(n(94)),u=r(n(107)),d=r(n(1)),p=r(n(1825)),f=n(486),h=n(822),b=n(824),m=n(241),v=n(1847);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}n(1926);var y=" https://sugar.zhihu.com/plutus_adreaper/page_monitor_log",O="ecommerce-ad",j=(0,h.errorWrapper)(a=function(e){function t(){var e,n;(0,i.default)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=(0,c.default)(this,(e=(0,l.default)(t)).call.apply(e,[this].concat(a)))).onClick=function(e){e.stopPropagation(),e.preventDefault();var t=n.props,r=t.data,a=t.parentType;try{var i="".concat(y,"?at=click&pt=").concat(a,"&et=").concat(n.getET(),"&ti=").concat(n.ti,"&si=").concat(n.si);(0,m.track)(i),(0,f.zaTrack)("trackEvent",n.node.current,{id:5641,action:"Click"}),(0,v.openECommerceDeeplinkAd)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{token:n.getToken(),pagetype:a}))}catch(e){console.error(e.message)}},n.getET=function(){var e=window.navigator.appVersion;return e.toLowerCase().includes("iphone")?"ios_commodity":e.toLowerCase().includes("android")?"android_commodity":"pc_commodity"},n.getToken=function(){var e=window.location.pathname.match(/\/(\d+)/g);return e?e.pop().replace("/",""):""},n.si=(0,p.default)(),n.ti=n.getToken(),n.node=d.default.createRef(),n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,m.onShowedOnce)(this.node.current,function(){var t=e.props.parentType,n="".concat(y,"?at=view&pt=").concat(t,"&et=").concat(e.getET(),"&ti=").concat(e.ti,"&si=").concat(e.si,"&_dk=").concat(Date.now()*Math.random());try{(0,m.track)(n),(0,f.zaTrack)("cardShow",e.node.current,{id:5642})}catch(e){console.error(e.message)}})}},{key:"render",value:function(){var e=this.props.data,t=!!e.price;return d.default.createElement("div",{className:"".concat(O,"-container")},d.default.createElement("div",{className:O,style:{height:"81px"},ref:this.node,onClick:this.onClick},d.default.createElement("div",{className:"".concat(O,"-img"),style:{height:"81px",backgroundImage:"url(".concat(e.picUrl,")")}}),d.default.createElement("div",{className:"".concat(O,"-main"),style:{padding:t?"8px 10px":"10px"}},d.default.createElement("div",{className:"".concat(O,"-main-content")},d.default.createElement("header",{className:"".concat(O,"-main-content-title"),style:{fontSize:"12px",lineHeight:t?"13px":"18px"}},d.default.createElement("img",{alt:"",className:"".concat(O,"-main-content-title-logo"),src:e.logo,align:"middle"}),e.productName," 的商品推荐"),d.default.createElement("div",{className:"".concat(O,"-main-content-des"),style:{marginTop:t?"3.5px":"7px",lineHeight:t?"16px":"18px",height:t?"32px":"36px",fontSize:t?"12px":"13px"}},e.description),t?d.default.createElement("div",{className:"".concat(O,"-main-content-price")},"¥",e.price/100):null)),d.default.createElement("div",{className:"".concat(O,"-icon")},(!e.interactionLaunch||"去购买"===e.interactionLaunch)&&d.default.createElement(b.Cart,{style:{width:"14px",height:"12px",marginRight:"4px",verticalAlign:"-1px"}}),e.interactionLaunch||"去购买")))}}]),t}(d.default.PureComponent))||a;t.default=j},function(e,t,n){var r,a,o=n(1828),i=n(1829),s=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==p){var f=o();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=a=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),b=void 0!==e.nsecs?e.nsecs:c+1,m=h-s+(b-c)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||h>s)&&void 0===e.nsecs&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=b,a=p;var v=(1e4*(268435455&(h+=122192928e5))+b)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var g=h/4294967296*1e4&268435455;u[l++]=g>>>8&255,u[l++]=255&g,u[l++]=g>>>24&15|16,u[l++]=g>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var y=0;y<6;++y)u[l+y]=d[y];return t||i(u)}},function(e,t,n){var r=n(1828),a=n(1829);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[o+s]=i[s];return t||a(i)}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(22),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(2),d=n.n(u),p=n(1),f=n(483),h=n(63),b=n(87),m=n(513),v=n(488),g=(n(2120),function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.items,o=e.voteupCount,i=e.onLoad,s=e.text,c=e.isRewardList,u=e.notice,d=e.type,p=e.currentUser,g={getContainer:function(e){return e}};return Object(l.b)("div",{className:"VoterList"},Object(l.b)(m.a,{header:"".concat(Object(h.formatNumber)(o)," 人").concat(s||"赞同了")}),c&&u&&Object(l.b)("div",{className:"VoterList-description"},Object(l.b)("p",null,u)),Object(l.b)(b.b,Object(r.default)({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:i,placeholder:Object(l.b)(b.a,{className:"List-item",withAvatar:!0})},g),a&&a.map(function(e,t){return Object(l.b)(f.a,{key:"".concat(t,".").concat(e.urlToken)},Object(l.b)(v.a,{currentUser:p,user:e,isRewardList:c,meta:null,type:d}))})))}}]),t}(p.Component));g.propTypes={isFetching:d.a.bool.isRequired,isDrained:d.a.bool.isRequired,items:d.a.array.isRequired,voteupCount:d.a.number.isRequired,text:d.a.string.isRequired,onLoad:d.a.func.isRequired,isRewardList:d.a.bool,type:d.a.string,currentUser:d.a.object},t.a=g},,function(e,t,n){"use strict";var r=n(9),a=n(29),o=n(22),i=n(4),s=n(5),c=n(8),l=n(6),u=n(30),d=n(7),p=n(0),f=n(1),h=n.n(f),b=n(2),m=n.n(b),v=n(11),g=n.n(v),y=n(18),O=n(26),j=n(494),w=n(1765),C=n(1753),k=n(2274),S=n(2275),N=n(16),A=n(15),T=n(43),_=n(56),E=n(105),x=n(35),I=n.n(x),M=(n(1935),n(59)),R=n(196),D=32305,L=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}],P=n(102),B=n.n(P),z=(n(2115),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,a=e.className;return Object(p.b)("div",{className:B()("RadioButtons",a)},t.map(function(e,t){var a=e.value,o=e.text,i=e.placeholder;return Object(p.b)("label",{key:t,className:"RadioButtons-item"},Object(p.b)("span",{className:"RadioButtons-text"},o),Object(p.b)("input",{type:"radio",className:"RadioButtons-input",value:a,checked:n===a,onChange:function(){return r(a,i)}}))}))}}]),t}(f.PureComponent));z.propTypes={options:m.a.arrayOf(m.a.shape({value:m.a.string,text:m.a.string,placeholder:m.a.string})).isRequired,value:m.a.string,onChange:m.a.func,className:m.a.string};n(2116);var q=function(){return n.e(11).then(n.bind(null,1741))},F=L.map(function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}}),U=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},n.handleReasonCodeChange=function(e,t){n.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),n.input&&n.input.resetWithValue(t||"")},n.handleAddAnnotation=function(){var e=n.props,t=e.addAnnotation,r=e.type,a=e.urlToken,o=e.showNotification,i=e.onClose;t(r,a,n.state.selectedReasonCode,n.input.toHTML()).then(function(){i(),o&&o("标记内容成功")})},n.handleReasonDescriptionChange=function(e){n.setState({isReasonDescriptionEmpty:e.isEmpty})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state,i=o.selectedReasonCode,s=o.isReasonDescriptionEmpty,c=o.selectedReasonPlaceholder,l=function(e){var t=L.find(function(t){return t.code===e});return t&&t.description}(i),u=32300===i;return Object(p.b)(R.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:a},r&&Object(p.b)("div",null,Object(p.b)("div",{className:"AddAnnotationModal-body"},Object(p.b)(z,{options:F,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(p.b)("div",null,Object(p.b)("div",{className:"AddAnnotationModal-description"},l,"（",u?"必填":"选填","）"),Object(p.b)(M.a,{getComponent:q,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),Object(p.b)(R.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},Object(p.b)(A.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&s},"标记"))))}}]),t}(f.PureComponent);U.propTypes={addAnnotation:m.a.func.isRequired,onClose:m.a.func.isRequired,shown:m.a.bool.isRequired,type:m.a.oneOf([0,1,2]).isRequired,urlToken:m.a.oneOfType([m.a.number,m.a.string]),showNotification:m.a.func,className:m.a.string};var V=n(42),Q=n(61),H=n.n(Q),K=n(92),W=(n(2117),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={isReasonDescriptionEmpty:!0},n.handleCancelAnnotation=function(){var e=n.props,t=e.cancelAnnotation,r=e.type,a=e.urlToken,o=e.showNotification,i=e.onClose;t(r,a,D,n.input.value).then(function(){i(),o&&o("撤销标记成功")})},n.handleReasonDescriptionChange=function(e){return n.setState({isReasonDescriptionEmpty:e.isEmpty})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state.isReasonDescriptionEmpty;return Object(p.b)(R.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:a},r&&Object(p.b)("div",{className:"CancelAnnotationModal"},Object(p.b)(K.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(p.b)(R.a,{direction:"horizontal"},Object(V.isBrowser)()&&!H()(window.navigator.userAgent).Mobile&&Object(p.b)(A.c,{onClick:n,size:"spread"},"取消"),Object(p.b)(A.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o},"撤销标记"))))}}]),t}(f.PureComponent));W.propTypes={cancelAnnotation:m.a.func.isRequired,onClose:m.a.func.isRequired,shown:m.a.bool.isRequired,type:m.a.oneOf([0,1,2]).isRequired,urlToken:m.a.oneOfType([m.a.number.isRequired,m.a.string.isRequired]),showNotification:m.a.func,className:m.a.string};var G=n(116),J=n(493),Y=n(21),X=n(64),$=n(74),Z=n(3),ee=n(13),te=n(40),ne=n(12),re=Object.assign({},Object(ne.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),ae=function(e){return e===Y.b?"answers":e===Y.d?"pins":e===Y.c?"articles":null},oe=n(23),ie=n(275),se=n(55),ce=n(244),le=n(27),ue=n(65),de=n(1880),pe=n(485),fe=n(1938),he=n(1846),be=n(195),me=n(1952),ve=n(497),ge=n(44),ye=n(52),Oe=n(1953),je=n.n(Oe),we=n(1977),Ce=n.n(we),ke=n(1978),Se=n.n(ke),Ne=n(2118),Ae=n.n(Ne),Te=(n(2119),{answerAdmireCouldOpen:{image:Ce.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/profit/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:Ce.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:Ae.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:Ae.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:Se.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:Se.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}});var _e=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,a=e.onRead,o=e.onUseAdmire,i=e.onUseRecommend,s=Object.keys(n).find(function(e){return n[e]}),c=Te[s]||{},l=c.title,u=c.image,d=c.content,b=c.buttonText,m=c.buttonLink,v=c.detailViewName,y=c.cardShowId,O=c.buttonClickId,j=c.readAlwaysId,w=c.readNextId;return Object(f.useEffect)(function(){s&&N.default.trackCardShow(null,{id:y,name:v})},[s,y,v]),Object(p.b)(ge.b,{className:g()("CreatorRightsNotification",r),onClose:function(){a("next"),N.default.trackEvent(null,{id:w,name:v})}},s&&Object(p.b)(h.a.Fragment,null,Object(p.b)("img",{className:"CreatorRightsNotification-background",src:je.a,alt:"blue background"}),Object(p.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(p.b)("div",{className:"CreatorRightsNotification-title"},l),Object(p.b)("div",{className:"CreatorRightsNotification-content"},d),Object(p.b)(ge.a,{className:"CreatorRightsNotification-buttonGroup"},m?Object(p.b)(ye.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:m,target:"_blank",onClick:function(){a("current"),N.default.trackEvent(null,{id:O,name:v})}},b):Object(p.b)(A.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){a("current"),N.default.trackEvent(null,{id:O,name:v}),"answerAdmireCouldUse"===s&&o(),"recommendationCouldUse"===s&&i()}},b),Object(p.b)(A.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){a("always"),N.default.trackEvent(null,{id:j,name:v})}},"不再提醒"))))},Ee=n(1855),xe=n(2109),Ie=n(1870),Me=n(271),Re=n(1799),De=n(1956),Le=n(1812),Pe=n(1813),Be=n(511),ze=n(1958),qe=(n(2122),Object(y.connect)(null,{loadComments:Be.e})(function(e){var t=Object(f.useState)(null),n=Object(a.a)(t,2),r=n[0],o=n[1],i=e.parent,s=i.type,c=i.id,l=e.parent,u=e.loadComments;if(Object(f.useEffect)(function(){u(s,c).then(function(e){var t=e.payload;o(t.data)})},[c,s,u]),null===r)return Object(p.b)("div",null);return Object(p.b)("div",{className:"CommentsForOia"},r.slice(0,2).map(function(e){var t=e.id;return Object(p.b)(ze.a,{key:t,parent:l,comment:e})}),r.length>2&&Object(p.b)(A.c,{color:"blue",preset:"primary",onClick:function(){return Object(G.b)(Object(pe.a)({type:s,id:c}))}},"打开 App 查看更多评论"))})),Fe=n(200),Ue=n(2106),Ve=n(482),Qe=n(2092),He=n(1815),Ke=n(1946),We=(n(2140),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.activateReward;return Object(p.b)("div",{className:"Reward"},Object(p.b)("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),Object(p.b)("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(f.Component));We.propTypes={activateReward:m.a.func};n(2141);var Ge=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,r=e.totalMoney,a=e.showRewarders;return Object(p.b)("div",null,Object(p.b)("div",{className:"Reward-tagline"},t||Y.j,Object(p.b)("a",{className:"Reward-editButton",onClick:n},Object(p.b)(T.a,{left:!0,name:"modify"}),Object(p.b)("span",null,"编辑"))),Boolean(r)&&Object(p.b)("div",{className:"Reward-money"},Object(p.b)("span",{onClick:a},"￥ ",r.toFixed(2))))}}]),t}(f.Component);Ge.propTypes={activateReward:m.a.func,tagline:m.a.string,totalMoney:m.a.number,showRewarders:m.a.func};var Je=n(1928),Ye=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,a=e.voteupCount,o=e.isRewardList,i=e.onClose,s=e.notice;return Object(p.b)(R.b,{size:"fullPage",onClose:i},t&&Object(p.b)(Je.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:a,onLoad:n,isRewardList:o,notice:s,type:"rewardPeople"}))}}]),t}(f.Component);Ye.propTypes={onLoad:m.a.func,modalShown:m.a.bool};var Xe,$e,Ze,et=n(63),tt=(n(2142),Object(be.a)({module:"UserList",moduleName:"*** 人已赞赏"})((Ze=$e=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={hoverName:""},n.hoverUser=function(e){n.setState({hoverName:e.target.dataset.name})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,a=t.rewardMemberCount,o=t.onUserClick,i=this.state.hoverName,s=n.slice(0,5);return Object(p.b)("div",{className:"Reward-count"},Object(p.b)("p",{className:"Reward-User-text",onClick:r},"".concat(Object(et.formatNumber)(a)," 人已赞赏")),Object(p.b)("div",null,s.map(function(t,n){return Object(p.b)(O.Link,{key:n,to:"//www.zhihu.com/".concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:o},Object(p.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),a>6&&Object(p.b)("span",{className:"Reward-MoreUser",onClick:r},Object(p.b)("i",null),Object(p.b)("i",null),Object(p.b)("i",null))))}}]),t}(f.Component),$e.propTypes={users:m.a.array,handleListShown:m.a.func,rewardMemberCount:m.a.number,onUserClick:m.a.func},$e.defaultProps={users:[]},Xe=Ze))||Xe),nt=(n(2143),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,a=e.users,o=e.onUserClick;return t?Object(p.b)(tt,{users:a,onUserClick:o,handleListShown:n,rewardMemberCount:t}):Object(p.b)("div",{className:"Reward-countZero"},r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(f.Component));nt.propTypes={rewardMemberCount:m.a.number,handleListShown:m.a.func,isAuthor:m.a.bool,users:m.a.array,onUserClick:m.a.func};n(2144);var rt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(p.b)("div",null,Object(p.b)("div",{className:"Reward-tagline"},t||Y.j),Object(p.b)("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(f.Component);rt.propTypes={onClick:m.a.func,tagline:m.a.string};n(2145);var at,ot,it,st=function(){return n.e(8).then(n.bind(null,3009)).then(function(e){return e.TipjarDialog})},ct=Object(y.connect)(null,{updateAnswerReward:X.F,updateArticleReward:ie.l,createArticleTipjar:ie.b,getRewardUserDetails:ie.i,getPagingArticleRewardUser:ie.f,getPagingArticleRewardUserDetails:ie.g,getArticleRewardUser:ie.e,updateEntitiesUsers:ie.m,getRewardUser:ie.h,createTipjar:ie.c,removeTradeNumber:ie.k,onRewardSuccess:ie.j,showNotification:oe.h})((it=ot=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},n.onSubmitReward=function(e){I.a.set("isRewardable",!0),n.updateReward(e),n.unactivateReward()},n.onPaySuccess=function(){var e=n.props,t=e.reward,r=e.currentUser,a=e.id,o=e.type,i=t[o][a].users,s=[r];Array.isArray(i)&&(i.push(r),s=i),n.props.onRewardSuccess(s,a,o),n.colseTijarDialog(),n.props.showNotification("你已赞赏成功！")},n.onLoad=function(e){"article"===n.props.type?"normal"===e?n.onLoadArticleRewardUser():n.onLoadArticleRewardUserDetails():n.onLoadRewardUser()},n.onLoadArticleRewardUser=function(){var e=n.props.id;n.props.getArticleRewardUser(e)},n.onLoadArticleRewardUserDetails=function(){var e=n.props,t=e.id;e.isAuthor?n.props.getPagingArticleRewardUserDetails(t):n.props.getPagingArticleRewardUser(t)},n.onLoadRewardUser=function(){var e=n.props,t=e.id;e.isAuthor?n.props.getRewardUserDetails(n.props.id):n.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var r={};t.forEach(function(e){r[e.urlToken]=e}),n.props.updateEntitiesUsers(r)}})},n.handleListShown=function(e){var t=n.props.onRewardUserMoreClick;t&&t(e),n.setState({modalShown:!0})},n.handleListHide=function(){n.setState({modalShown:!1})},n.updateReward=function(e){var t=n.props,r=t.type,a=t.id,o=t.rewardInfo.canOpenReward;if("article"===r){var i=!!o||void 0;n.props.updateArticleReward(a,e,i)}else n.props.updateAnswerReward(a,e)},n.activateReward=function(){n.setState({rewardModalShown:!0})},n.unactivateReward=function(){n.setState({rewardModalShown:!1})},n.showRewarders=function(){n.setState({modalShown:!0})},n.addReward=n.context.authRequired(function(e,t){var r=n.props,a=r.id;"article"===r.type?n.props.createArticleTipjar(a,e):n.props.createTipjar(a,e,t)},void 0,oe.b),n.handleRewardButtonClick=function(e){var t=n.props.onRewardButtonClick;t&&t(e),n.setState({TipjarRender:!0})},n.colseTijarDialog=function(){n.setState({TipjarRender:!1})},n.removeTradeNumber=function(){var e=n.props,t=e.id,r=e.type;n.props.removeTradeNumber(t,r)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.isAuthor,a=t.isMobile,o=t.id,i=t.reward,s=t.author,c=t.type,l=t.ua,u=t.rewardInfo,d=u.canOpenReward,f=u.isRewardable,h=u.tagline,b=u.rewardTotalMoney,m=u.rewardMemberCount,v=t.onRewardUserClick;if(r&&n&&"organization"===n.userType)return null;var g=this.state,y=g.TipjarRender,O=g.modalShown,j=g.rewardModalShown,w=Object(p.b)(Ke.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:h,edit:!0});if(r&&d)return Object(p.b)("div",null,Object(p.b)(We,{activateReward:this.activateReward}),j&&w);if(f){var C=i&&i[c][o]||{},k=C.tradeNumber,S=C.users,N=C.notice,A=Object(p.b)(Ye,{modalShown:O,items:S,voteupCount:m,onLoad:this.onLoad,isRewardList:r,notice:N,onClose:this.handleListHide}),T=Object(p.b)(nt,{rewardMemberCount:m,handleListShown:this.handleListShown,onUserClick:v,users:S,isAuthor:r});if(!r)return Object(p.b)("div",{className:"Reward"},Object(p.b)(rt,{tagline:h,onClick:this.handleRewardButtonClick}),T,j&&w,A,Object(p.b)(M.a,{getComponent:st,author:s,tagline:h,isMobile:a,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:k,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:c}));var _=(Number(b)||0)/100;return Object(p.b)("div",{className:"Reward"},Object(p.b)(Ge,{tagline:h,activateReward:this.activateReward,totalMoney:_,showRewarders:this.showRewarders}),j&&w,A,T)}return null}}]),t}(h.a.Component),ot.propTypes={reward:m.a.object,isAuthor:m.a.bool,author:m.a.object,id:m.a.number,rewardInfo:m.a.object,currentUser:m.a.object,ua:m.a.object,type:m.a.string,isMobile:m.a.bool,onRewardButtonClick:m.a.func,onRewardUserClick:m.a.func,onRewardUserMoreClick:m.a.func},ot.contextTypes={authRequired:m.a.func},ot.defaultProps={rewardInfo:{},type:"answer"},at=it))||at,lt=n(1853),ut=n(10),dt=function(e){return h.a.createElement(ut.a,e,h.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};dt.defaultProps={name:"Jump"};var pt=dt;n(2146);var ft=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,a=r.url,o=r.message;return Object(p.b)("a",{className:g()("CommercialQuestionTail",t),href:a},o,Object(p.b)(pt,{className:"CommercialQuestionTail-Icon",center:!0,text:!0}))},ht=n(1854),bt=n(1883);function mt(e){var t=e.markInfo,n=Y.y[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return r?Object(p.b)("a",{href:r},n):Object(p.b)("span",null,n)}var vt=n(25),gt=n(2165),yt=n.n(gt),Ot=n(150),jt=n(530);function wt(e){var t=e.loadBrandContentPlugin,n=e.contentType,r=e.contentToken,a=e.author,o=e.plugin,i=Object(f.useCallback)(function(){t(n,r)},[n,r,t]),s="organization"===a.userType&&!o;if(Object(f.useEffect)(function(){s&&i()},[s,i]),!o)return null;var c={contentType:n,contentToken:r,suger:{},author:a,plugin:o,visible:!0};return Object(p.b)("div",{className:"OrgEquityPlugin"},Object(p.b)(yt.a,{data:c}))}wt.propTypes={contentType:m.a.oneOf(["answer","article"]).isRequired,contentToken:m.a.oneOfType([m.a.number,m.a.string]).isRequired,author:m.a.object.isRequired};var Ct,kt,St,Nt,At,Tt=Object(vt.compose)(Object(Ot.a)(null),Object(y.connect)(function(e,t){var n=t.contentType,r=t.contentToken;return{plugin:Object(jt.c)(e,{contentType:n,contentToken:r})}},{loadBrandContentPlugin:jt.b}))(wt),_t=n(2101),Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,r=t.unescapable,a=e.labelInfo,o=e.hermesLabel;return Object(p.b)(f.Fragment,null,!n&&!r&&Object(p.b)(ht.b,{labelInfo:a||o}))},xt=n(2236),It=n(2272),Mt=n(1887),Rt=n(2169),Dt=n.n(Rt),Lt=function(e){var t=e.answer,n=e.canCollapse,r=t.isNormal,a=void 0===r||r,o=t.collapsedBy,i=t.reviewInfo,s=(i=void 0===i?{}:i).isReviewing,c=i.tips,l=t.suggestEdit,u=(l=void 0===l?{}:l).title,d=l.unnormalDetails,f=(d=void 0===d?{}:d).reason,h=d.description,b=t.collapseReason;return s?Object(p.b)("div",{key:"negativeLabels",className:"AnswerItem-status"},c):a?"community"===o?Object(p.b)("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},Object(p.b)("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",Object(p.b)("span",null,Object(p.b)("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},Object(p.b)(xt.a,{className:"AnswerItem-complaintIcon",width:16})))),b&&Object(p.b)("div",{className:"AnswerItem-statusDescription"},"折叠原因：",b)):"org"!==o||n?null:Object(p.b)("div",{key:"negativeLabels",className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",Object(p.b)("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）"):Object(p.b)("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},Object(p.b)("div",{className:"AnswerItem-statusReason"},h,"：",f),Object(p.b)("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",Object(p.b)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},u)))},Pt=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,a=t.relevantInfo,o=(a=void 0===a?{}:a).relevantType;return Object(X.k)(t)||Object(X.l)(t)||"org"===r&&!n?Object(p.b)("div",{className:"AnswerItem-meta",key:"commercial"},"brand_special"===o&&Object(p.b)("div",{className:"AnswerItem-commercialBadge AnswerItem-commercialBadge-brand"},Object(p.b)(It.a,{size:16}),Object(p.b)("b",null,"品牌特邀："),"本文由品牌邀请撰写"),"brand_best"===o&&Object(p.b)("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选")):null},Bt=function(e){var t=e.answer,n=t.annotationDetail,r=t.reviewInfo,a=(r=void 0===r?{}:r).isReviewing,o=t.isNormal,i=void 0===o||o,s=t.collapsedBy;return!a&&i&&"community"!==s&&n?Object(p.b)(Mt.a,{key:"annotation",annotationDetail:n}):null},zt=function(e){var t=e.answer;return Object(X.l)(t)?Object(p.b)("div",{className:"AnswerItem-commercialBadge",key:"positive"},Object(p.b)(Dt.a,{style:{marginRight:"6px",verticalAlign:"text-bottom"},size:16}),Object(p.b)("b",null,"亲自答："),"此回答由问题相关方亲自撰写"):null},qt=n(2107),Ft=(n(2100),function(e){return"plain"===e||"special-plain"===e}),Ut=Ft,Vt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Qt=["zhi-hu-ri-bao-51-41"],Ht=(Ct=Object(be.a)(function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=void 0===a?{}:a;return Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index},{},o.cardShow&&{view:{id:o.cardShow}},{trackCardShow:r})}),kt=Object(y.connect)(function(e,t){var n=e.entities,r=n.drafts,a=void 0===r?{}:r,o=n.questions,i=n.answers,s=e.question.draftStatus,c=e.reward,l=e.switches,u=e.video.shareVideoDetail,d=e.env,p=d.edition,f=d.userAgent,h=t.answer,b=t.relatedTo,m=t.location.pathname.split("/"),v=!1;!m[1]||"org"!==m[1]&&"people"!==m[1]||(v=m[2]&&-1!==Qt.indexOf(m[2]));var g=i[h.id]?Object.assign({},i[h.id]):h;o[g.question.id]&&(g.question=Object.assign({},h.question,{},o[g.question.id]));var y=Object(le.c)(e),O=["question","answer"].includes(b),j=Object(se.c)(e)&&O,w=Object(se.g)(e),C=f.Mobile,k=f.Qzone,S=f.Weibo,N=C&&w&&!k&&!S;return{draft:h&&a["question_".concat(h.question.id)],draftStatus:s[h.question.id],answer:g,ua:Object(se.i)(e),reward:c,switches:l,isHuman:j,shouldOia:Object(se.f)(e)&&!v,shouldSpecialOia:Object(se.g)(e)&&!v,isMobile:Object(se.d)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(X.e)(e,{id:h.id}),currentUser:y,shareVideoDetail:u,isBrandAnswer:Object(X.j)(h),permission:Object($.R)(e),ecommerce:Object(J.c)(e,{type:"answer",urlToken:String(h.id)}),isBaidu:Object(se.f)(e)&&p.baiduBeijing,blockReading:N}},{updateAnswerUnhelpful:X.I,updateAnswerReshipmentSettings:X.E,updateAnswerCommentPermission:X.D,updateAnswerCollapsed:X.C,updateAnswerStick:X.G,deleteAnswer:X.g,restoreAnswer:X.y,updateAnswer:X.B,loadAnswerForSettings:X.r,showNotification:oe.h,addAnnotation:function(e,t,n,r){return{API:{types:re.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(te.getFormData)(Object(ee.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=ae(e);return r?Object(Z.a)({},r,Object(Z.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:re.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(te.getFormData)(Object(ee.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=ae(e);return r?Object(Z.a)({},r,Object(Z.a)({},t,Object.assign({},n,{annotationDetail:null}))):null}}}},addRewardTagline:ie.a,updateAnswerReward:X.F,getVoteDownReason:X.i,selectVoteDownReason:X.A,loadAnswerConcernedVoters:X.o,fillCurrentUserIfNeeded:le.e,loadVideoDetails:ce.d,readContentRightsNotification:ue.T,postToolsRecommend:ue.S,checkEcommerce:J.a}),Ct(St=Object(O.withRouter)(St=kt(St=Object(ht.d)((At=Nt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:n.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:n.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1},n.answerFormRef=h.a.createRef(),n.rewardContainerRef=h.a.createRef(),n.richContentRef=h.a.createRef(),n.onCloseReward=function(){var e=n.props.answer.id;I.a.set("isRewardable",!1),n.props.updateAnswerReward(e,"")},n.openModal=function(e,t){n.setState(Object.assign({},t))},n.openDeleteModal=function(){setTimeout(function(){n.setState({deleteModalShown:!0})})},n.closeModal=function(){n.setState({commentsShown:!1});var e=n.props.onCloseComment;"function"==typeof e&&e()},n.closeDeleteModal=function(){n.setState({deleteModalShown:!1})},n.disableAuth=function(){var e=n.props,t=e.router,r=(t=void 0===t?{}:t).location;(r=void 0===r?{}:r).pathname,e.isBaidu;return!1}(),n.loadAnswerConcernedVoters=function(){var e=n.props,t=e.concernedUpvoters,r=e.answer,a=e.loadAnswerConcernedVoters;!t&&n.context.currentUser&&a(r.id)},n.handleExpand=function(e){var t=n.props.onToggleExpand;e&&n.loadAnswerConcernedVoters(),t&&t(e),n.setState({contentExpanded:e})},n.handleUpdateUnhelpful=n.context.authRequired(function(){var e=n.props,t=e.answer,r=t.id,a=t.relationship.isNothelp,o=e.updateAnswerUnhelpful,i=!a;N.default.trackEvent(n.contentItem,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),o(r,i)},Y.N.unhelpful),n.handleReshipmentSettings=function(e){var t=n.props,r=t.answer.id,a=t.updateAnswerReshipmentSettings,o=t.fillCurrentUserIfNeeded;"need_payment"===e?Promise.resolve(o(["caEnabled"])).then(function(){n.props.currentUser.caEnabled?a(r,e):window.open("/copyright/invite")}):a(r,e)},n.handleLoadAnswerForSettings=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},n.handleDeleteAnswer=function(){var e=n.props,t=e.answer.id;(0,e.deleteAnswer)(t)},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleCollapseModalShow=function(){n.setState({collapseModalShown:!0})},n.handleCollapseModalHide=function(){n.setState({collapseModalShown:!1})},n.handleUpdateAnswerCollapsed=function(){var e=n.props,t=e.answer,r=t.id,a=t.collapsedBy,o=e.updateAnswerCollapsed,i=e.showNotification;return"community"===a?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(r)},n.handleUpdateAnswerStick=function(){var e=n.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},n.handleRestoreAnswer=function(){var e=n.props,t=e.answer,r=t.id,a=t.question;(0,e.restoreAnswer)(a.id,r)},n.handleStartEditAnswer=function(){var e=n.props,t=e.draftStatus,r=e.hasPublishingDraft;t&&t.loading?E.a.alert("草稿正在加载中……"):r?E.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):n.setState({editing:!0},function(){n.answerFormRef.current.focus()})},n.handleCancelEditAnswer=function(){n.setState({editing:!1});var e=n.props,t=e.onCloseEditing,r=e.onCloseComment;"function"==typeof r&&r(),"function"==typeof t&&t()},n.handleSubmitAnswer=function(e){var t=n.props,r=t.answer.id,a=t.updateAnswer;return n.handleCancelEditAnswer(),a(r,e).then(function(e){return N.default.trackEvent(n.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},n.handleReportOpen=function(){var e=n.props.zaInfos.report;N.default.trackEvent(n.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},e&&{id:e})),n.context.authRequired(function(){return n.setState({reportModalShown:!0})},Y.N.report)()},n.handleReportHide=function(){n.setState({reportModalShown:!1})},n.handleFavlistsShown=function(e){var t=n.props,r=t.shouldOia,a=t.zaInfos.favlists;N.default.trackEvent(n.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),r?n.createOpenInAppHandler("collect_answer")(e):n.disableAuth?n.handleToggleGuide():n.context.authRequired(function(){return n.setState({favlistsShown:!0})},Y.N.favlists)()},n.handleFavlistHide=function(){n.setState({favlistsShown:!1})},n.handleLogMoreClick=function(){var e=n.props.zaInfos.options;N.default.trackEvent(n.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},e&&{id:e}))},n.handleShowAddAnnotationModal=function(){return n.setState({addAnnotationModalShown:!0})},n.handleCloseAddAnnotationModal=function(){return n.setState({addAnnotationModalShown:!1})},n.handleShowCancelAnnotationModal=function(){return n.setState({cancelAnnotationModalShown:!0})},n.handleCloseCancelAnnotationModal=function(){return n.setState({cancelAnnotationModalShown:!1})},n.handleToggleGuide=function(){n.setState({guideShown:!n.state.guideShown})},n.handleClickVideoMoreButton=function(){n.setState({shouldShowVideoDetails:!1})},n.startEditing=function(){var e=n.props,t=e.answer.relationship,r=(t=void 0===t?{}:t).isAuthor,a=e.editable;n.context.currentUser&&r&&a&&n.handleStartEditAnswer()},n.addRewardTagline=function(e){var t=n.props.answer.id;Object(ie.a)(e,t)},n.createOpenInAppHandler=function(e){var t=n.props,r=t.answer,a=r.type,o=r.id,i=t.blockReading;return function(t){t&&t.preventDefault(),i&&N.default.trackEvent(Object(u.default)(n),{id:5550,action:"Click"},{button:{text:"openapp"}}),Object(G.b)(Object(pe.a)({type:a,id:o}),Object.assign({utm_content:e},i&&{yyb_ckey:"CK1430255776739"}))}},n.renderLabels=function(){var e=n.props,t=e.useNewLabels,r=e.answer,a=e.canCollapse,o=e.relatedTo,i=n.state.contentExpanded,s=Lt({answer:r,canCollapse:a}),c=Bt({answer:r}),l=Pt({answer:r,canCollapse:a}),u=zt({answer:r});if(t){if(s)return{labels:[s],editingLabels:[]};var d=[Object(p.b)(ht.a,{key:"labels",item:r,commercialLabels:l,annotationLabels:c})];return i||o?{labels:d,editingLabels:d}:{labels:[],editingLabels:d}}var f=[c,l,u];return{labels:[s].concat(f),editingLabels:f}},n.renderPrefix=function(){var e=n.props,t=e.answer,r=e.relatedTo,a={contentExpanded:n.state.contentExpanded,unescapable:Boolean(r)};return Et(t,a)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,a=t.editing,o=t.loadVideoDetails,i=t.answer,s=i.id,c=i.content,l=t.ecommerce,u=t.checkEcommerce,d=this.state.shareVideoQuery;d&&o(d).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&this.loadAnswerConcernedVoters(),r&&setTimeout(function(){return e.setState({commentsShown:Boolean(r)})}),a&&this.startEditing(),l||u({content:c,type:"answer",urlToken:String(s)})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,a=n.commentPermission,o=e.answer,i=o.reshipmentSettings,s=o.commentPermission,c=e.editing;!r&&i&&!a&&s&&setTimeout(function(){return t.settingsTogglerEl.click()}),c&&!this.props.editing&&this.startEditing()}},{key:"getShareVideoId",value:function(){this.props.location;return null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Vt).map(function(n){var r=Object(fe.a)(n,e);return Object(p.b)(_.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(fe.b)(n,e)},r&&Object(p.b)(T.a,{className:"Button-icon",name:r}),Vt[n])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,r=t.type,a=t.voteupCount,o=t.markInfos,i=t.isNormal,s=void 0===i||i,c=e.actor,l=e.action,u=(e.isHuman,e.concernedUpvoters),d=e.useNewLabels,h=o&&o.length>0&&!d;if(!h&&!a)return null;var b=c&&c.urlToken,m=h&&o.filter(function(e){return Y.y[e.markType]}).map(function(e,t){return Object(p.b)(f.Fragment,{key:t},0!==t&&"、",Object(p.b)(mt,{markInfo:e}))});return s&&Object(p.b)("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},h&&m.length&&Object(p.b)(j.CJKSpace,null,"收录于",m),h&&Boolean(a)&&" · ",Object(p.b)(De.a,{id:n,type:r,voteupCount:a,upvotedFollowees:(u||[]).filter(function(e){return b!==e.urlToken}),too:"voted"===l}))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,a=r.collapsedBy,o=r.relationship,i=(o=void 0===o?{}:o).isAuthor,s=r.reshipmentSettings,c=r.commentPermission,l=r.question.questionType,u=r.rewardInfo,d=(u=void 0===u?{}:u).isRewardable,f=void 0!==d&&d,h=r.relevantInfo,b=n.answer,m=n.canCollapse;return t&&i?s&&c?Object(p.b)(_.c,{key:"settings",toggler:Object(p.b)(A.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:w.a,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(s),Object(p.b)(_.a,null),Object(p.b)(he.c,{target:b,onChange:this.props.updateAnswerCommentPermission,current:b.commentPermission}),Object(p.b)(_.a,null),f&&Object(p.b)(_.b,{onClick:this.onCloseReward},"关闭赞赏"),Object(p.b)(_.b,{onClick:this.openDeleteModal},"删除"),"commercial"===l&&m&&"nobody"===a&&(!h||"brand_special"!==h.relevantType)&&[Object(p.b)(_.a,{key:"MenuDivider"}),Object(p.b)(_.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):Object(p.b)(A.c,{key:"settings",preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:w.a,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(p.b)(_.b,{onClick:function(){N.default.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank"},"申请授权"):"disallowed"===t?Object(p.b)(_.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,r=t.canCollapse,a=t.renderExtraOptions,i=t.permission.canBrandAdminEdit,s=n.id,c=n.reshipmentSettings,l=n.relationship,u=(l=void 0===l?{}:l).isAuthor,d=l.isNothelp,f=n.collapsedBy,h=n.question.questionType,b=n.annotationAction,m=void 0===b?[]:b,v=n.annotationDetail,g={toggler:Object(p.b)(A.c,{preset:"plain",className:"OptionsButton",icon:C.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},y="commercial"===h,O="nobody"!==f;return u?null:Object(p.b)(_.c,Object(o.default)({},g,{key:"options"}),!1,r&&!y&&Object(p.b)(_.b,{onClick:O?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},O?"取消隐藏":"隐藏"),i&&y&&!O&&Object(p.b)(_.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),m&&m.some(function(e){return Y.a.add===e})&&!v&&Object(p.b)(_.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),m&&m.some(function(e){return Y.a.cancel===e})&&v&&Object(p.b)(_.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),Object(p.b)(_.b,{onClick:this.handleUpdateUnhelpful},d?"撤销没有帮助":"没有帮助"),Object(p.b)(_.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(s,c),a&&a({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,a=e.id,o=e.createdTime,i=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(r,"/answer/").concat(a),dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:s}}(this.props.answer);return Object.keys(e).map(function(t){return Object(p.b)("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,a=n.prizes;if(!n.status)return null;var o=["一","二","三"],i=null;return a&&r&&r.forEach(function(e,n){e.includes(t)&&null===i&&(i=a&&a[1]&&a[1].name?"得".concat(o[n],"等奖"):"奖")}),i&&Object(p.b)("div",{className:"AnswerItem-brandQuestionPrizeTip"},"该回答在有奖问答中获",i)}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,a=t.isBrandAnswer,o=n.question;return(r||e)&&(o&&"commercial"===o.questionType||a)?Object(p.b)(xe.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e=this.props,t=e.shouldOia,n=e.answer,r=n.id,a=n.createdTime,i=n.updatedTime,s=n.question.id,c="/question/".concat(s,"/answer/").concat(r);return Object(p.b)(He.a,Object(o.default)({created:a,updated:i,href:c},t&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,i=t.reward,s=t.answer,c=s.id,l=s.isNormal,u=void 0===l||l,d=s.isDelete,f=s.question,h=s.rewardInfo,b=s.question,m=b.title,v=b.id,y=b.questionType,j=b.isMuted,w=b.commercial,C=s.author,N=s.excerpt,_=s.content,x=s.editableContent,I=s.commentCount,M=s.adminClosedComment,R=s.relationship,D=(R=void 0===R?{}:R).isAuthor,L=R.isRecognized,P=s.collapsedBy,B=s.isSticky,z=s.thumbnail,q=s.thumbnailExtraInfo,F=s.reviewInfo,V=(F=void 0===F?{}:F).isReviewing,Q=F.editType,H=s.relevantInfo,K=(H=void 0===H?{}:H).relevantType,G=s.annotationDetail,J=s.paidInfo,X=void 0===J?{}:J,$=s.creatorRightsNotification,Z=t.relatedTo,ee=t.editable,te=t.byComment,ne=t.draft,re=t.expanded,ae=t.lastreadTouchable,oe=t.preset,ie=t.canCollapse,se=t.canStick,ce=t.itemProp,le=void 0===ce?"answer":ce,ue=t.addAnnotation,pe=t.cancelAnnotation,fe=t.showNotification,he=t.dataZaIndex,be=t.blockReading,me=(t.isWechat,t.lessExcerpt),ge=(t.isHuman,t.ua),ye=t.shouldSpecialOia,Oe=t.shareVideoDetail,je=t.shouldOia,we=t.formatContent,Ce=t.zaInfos,ke=Ce.expand,Se=Ce.title,Ne=Ce.voteUp,Ae=Ce.thank,Te=Ce.voteDown,xe=Ce.toggleComment,De=Ce.share,Be=Ce.getCommentAction,ze=t.handleToggleSticky,Ke=t.renderActionButtons,We=t.permission.canBrandAdminEdit,Ge=t.readContentRightsNotification,Je=t.ecommerce,Ye=t.isMobile,Xe=t.canAbstract,$e=t.isBaidu,Ze="function"==typeof ze,et=this.context.currentUser,tt="/question/".concat(v,"/answer/").concat(c),nt=this.state,rt=nt.reportModalShown,at=nt.deleteModalShown,ot=nt.collapseModalShown,it=nt.favlistsShown,st=nt.editing,ut=nt.commentsShown,dt=nt.commentsAutoFocus,pt=nt.commentPattern,ht=nt.addAnnotationModalShown,mt=nt.cancelAnnotationModalShown,vt=nt.positionStatus,gt=nt.shareVideoQuery,yt=nt.shouldShowVideoDetails,Ot=nt.contentExpanded,jt=nt.showWechatExpand,wt=gt&&yt?{title:Oe.title,thumbnail:Oe.coverUrl,isLens:!0,id:gt,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(gt)}:null;if(d)return Object(p.b)("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",Object(p.b)("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var Ct=!(V&&"create"===Q),kt="commercial"===y,St="nobody"!==P,Nt=!function(e){return"special-plain"===e}(oe)&&Object(p.b)(Ve.a,{className:g()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":Z}),key:"authorInfo",preset:Ut(oe)?"plain":"default",author:C,relatedTo:Z}),At=this.renderAnswerExtraInfo(),Et=this.renderLabels(),xt=Et.labels,It=Et.editingLabels;if(st)return Object(p.b)("div",null,Nt,It,At,Object(p.b)(Ue.a,{className:"AnswerItem-form",bordered:!0,isReediting:!0,imperativeRef:this.answerFormRef,question:f,answer:n,defaultValue:x,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:h.isRewardable,addRewardTagline:this.addRewardTagline}));var Mt=Ft(oe)?[[Nt].concat(Object(r.a)(xt)),At]:[[Nt].concat(Object(r.a)(xt),[At]),null],Rt=Object(a.a)(Mt,2),Dt=Rt[0],Lt=Rt[1],Pt="mainEntityOfPage"===le||"acceptedAnswer"===le,Bt=ye&&!Pt,zt=!wt&&this.renderEditTime(),Vt=X.content,Qt=this.isPaidAnswer?Vt:_;return Object(p.b)(Me.e,{onRef:function(t){return e.contentItem=t},className:"AnswerItem","data-za-index":he,"data-zop":JSON.stringify({authorName:C.name,itemId:c,title:m,type:"answer"}),data:n,link:tt,meta:Dt,title:!Z&&Object(p.b)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},Object(p.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(v)}),Object(p.b)("meta",{itemProp:"name",content:m}),Ze&&this.props.isSticky&&Object(p.b)(bt.a,null),Object(p.b)(O.Link,Object(o.default)({to:tt,target:"_blank","data-za-detail-view-element_name":"Title"},Se&&{"data-za-detail-view-id":Se}),m)),lastreadTouchable:ae,name:c,itemProp:le,itemType:"http://schema.org/Answer",itemScope:!0},Object(p.b)(_t.b,{answer:n}),this.renderMeta(),kt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),u||D?Object(p.b)(He.b,Object(o.default)({className:g()({"RichContent-mobileBaidu":$e}),imperativeRef:this.richContentRef,canAbstract:Xe,onToggleExpend:this.handleExpand},Bt&&{expandText:"App 内查看"},be&&Pt&&{expandText:"展开阅读全文"},!1,{cover:z,hasVideo:Boolean(q&&"video"===q.type),videoData:wt,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(Z),expanded:re,onPositionStatusChange:this.handlePositionStatusChange,before:Lt,excerpt:we?we(N,n):N,html:we?we(Qt||N,n):Qt||N,prefix:this.renderPrefix(),ecommerce:Je,after:Object(p.b)("div",null,Object(p.b)(_t.a,{answer:n}),Object(p.b)(ft,{className:"AnswerItem-CommercialQuestionTail",commercial:w}),Ot&&Object(p.b)(Tt,{contentType:"answer",contentToken:c,author:C}),zt,et&&D&&ee&&Object(p.b)("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},Object(p.b)(T.a,{left:!0,name:"modify"}),Object(p.b)("span",{className:"AnswerItem-editButtonText"},"修改",ne&&ne.editableContent&&"（有未发布的编辑草稿）")),et&&Object(p.b)(ct,{imperativeRef:this.rewardContainerRef,reward:i,currentUser:et,rewardInfo:h,isAuthor:D,id:c,author:C,ua:ge})),data:n,onClick:be&&Pt?function(){e.setState({showWechatExpand:!0})}:Bt?e.createOpenInAppHandler("expand_answer"):e.disableAuth&&be&&e.handleToggleGuide},me?{limit:74}:{},{zaIds:{expand:ke}}),Ct&&We&&kt&&St&&Object(p.b)(A.c,{className:g()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===P}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),Ct&&se&&!St&&"brand_special"!==K&&Object(p.b)(A.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick},B?"取消精选":"设为精选"),!this.props.isBaidu&&Ke({componentList:[{name:"vote",component:Ct&&Object(p.b)(Qe.a,Object(o.default)({key:"vote",answer:n,disabled:kt&&j},je&&{onClick:this.createOpenInAppHandler("vote_answer")},{disableAuth:this.disableAuth,isRecognized:L,handleToggleGuide:this.handleToggleGuide,positionStatus:vt,zaIds:{voteUp:Ne,voteDown:Te}}))},{name:"comment",component:Ct&&Object(p.b)(Le.a,Object(o.default)({onInstance:function(t){return e.commentButton=t},key:"comment",onClick:this.openModal},!1,{commentsShown:ut,commentClosed:M,count:I,positionStatus:vt,zaInfos:{toggleComment:xe,getCommentAction:Be}}))},{name:"share",component:Ct&&Object(p.b)(Re.a,{key:"share",id:c,type:"answer",title:m,authorName:C&&C.name,href:tt,positionStatus:vt,zaShareId:De})},{name:"favlist",component:Ct&&(!et||!et.isOrg)&&Object(p.b)(Ee.a,{key:"favlist",onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"})},{name:"thank",component:Ct&&!D&&Object(p.b)(qt.a,{key:"thank",zaInfo:Ae,answer:n})},{name:"sticky",component:Ze&&D&&Object(de.a)(et)&&Object(p.b)(A.c,{key:"sticky",preset:"plain",onClick:ze,icon:this.props.isSticky?k.a:S.a,label:this.props.isSticky?"取消置顶":"置顶"})},{name:"options",component:Ct&&this.renderOptions()},{name:"settings",component:this.renderSettings()},{name:"annotation",component:!Ot&&Object(p.b)(Ie.a,{key:"annotation",annotationDetail:G})}]})):zt,this.props.isBaidu&&Object(p.b)("div",null,Object(p.b)(qe,{parent:n})),Object(p.b)(Pe.a,{shown:ut,parent:n,byComment:te,commentPattern:pt,autoFocus:dt,onClose:this.closeModal}),Object(p.b)(Fe.a,{type:"answer",urlToken:c,shown:rt,onClose:this.handleReportHide,zaEnabled:!0}),Object(p.b)(U,{addAnnotation:ue,onClose:this.handleCloseAddAnnotationModal,shown:ht,type:Y.b,urlToken:c,showNotification:fe}),Object(p.b)(W,{cancelAnnotation:pe,onClose:this.handleCloseCancelAnnotationModal,shown:mt,type:Y.b,urlToken:c,showNotification:fe}),et&&D&&Object(p.b)(lt.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:at,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),ie&&Object(p.b)(lt.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:ot,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(p.b)(ve.a,{id:c,type:"answer",shown:it,onClose:this.handleFavlistHide,zaEnabled:!0}),!1,Object(p.b)(_e,{notification:$,onRead:function(e){Ge("answer",c,e)},onUseAdmire:function(){e.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var t=e.props.postToolsRecommend;E.a.confirm(Object(p.b)("div",{style:{textAlign:"center"}},"该推荐将使用本月的 1 次推荐次数。"),{title:"确定是否推荐？"}).then(function(){return t("answer",c)},function(){})}}),Object(p.b)(lt.a,{title:"是否打开知乎 App 阅读全文",shown:jt,onCancel:function(){e.setState({showWechatExpand:!1},function(){e.richContentRef.current.handleExpand()})},onSubmit:function(){e.setState({showWechatExpand:!1}),e.createOpenInAppHandler("expand_answer1")()},needCancel:!1,isMobile:Ye}))}},{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}}]),t}(f.PureComponent),Nt.contextTypes=Object.assign({currentUser:m.a.object,authRequired:m.a.func},!1),Nt.propTypes={relatedTo:m.a.oneOf(["question","answer"]),editable:m.a.bool,preset:m.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:m.a.bool,shareVideoDetail:m.a.object,formatContent:m.a.func,renderExtraOptions:m.a.func,zaInfos:me.a,onToggleExpand:m.a.func,useNewLabels:m.a.bool.isRequired,renderActionButtons:m.a.func,canAbstract:m.a.bool},Nt.defaultProps={editable:!1,canAbstract:!1,preset:"primary",zaInfos:{},renderActionButtons:qt.b},St=At))||St)||St)||St)||St);n.d(t,"a",function(){return Ht})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(274),a=n(387),o=864e5;function i(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(a.a)(e),i=Object(a.a)(t),s=n.getTime()-Object(r.a)(n),c=i.getTime()-Object(r.a)(i);return Math.round((s-c)/o)}},function(e,t,n){},function(e,t,n){"use strict";var r=n(3),a=n(0),o=(n(1),n(11)),i=n.n(o),s=n(2272),c=n(1882),l=n(150),u=(n(2147),{alpha:1,group:"GYL02A"}),d={alpha:.08,group:"GYL02A"},p={brand_special:s.a},f=Object.assign({},c.b,{COMMERCIAL_ICONS:p});t.a=Object(l.a)(null)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,o=void 0===n?{}:n,s=e.className;if(!t)return null;var c=t.type,l=t.text,p=t.foregroundColor,h=t.backgroundColor,b=o.customIcon,m=o.customIconClassName,v=function(e){return"GBL07A"===(e||u).group?"commercial":"positive"}(p),g=function(e){return"GBL07A"===(e||d).group?"commercial":"positive"}(h),y=b||f[function(e){return"recognition"===e?"professional":e}(c)];return y?Object(a.b)("span",{className:i()("Label-icon","Label-iconColor--".concat(v),Object(r.a)({},"Label-iconColor--".concat(g,"Background"),h),s)},Object(a.b)(y,{center:!0,className:i()("Label-iconImg",m)}),l):null})},function(e,t,n){"use strict";var r=n(9),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(1),d=n.n(u),p=n(11),f=n.n(p),h=n(2),b=n.n(h),m=n(36),v=n(1943);function g(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(m.a)(t);return Object(v.a)(e,12*n)}var y=n(392),O=n(37);var j=n(2223),w=n(785),C=n(274),k=6048e5;var S=n(2195),N=n(525),A=n(370),T=n(2196),_=n(2197),E=n(1931);function x(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(O.a)(e),r=Object(O.a)(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}var I=n(10),M=function(e){return d.a.createElement(I.a,e,d.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};M.defaultProps={name:"DoubleArrowLeft"};var R=M,D=n(1778),L=n(1776),P=function(e){return d.a.createElement(I.a,e,d.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};P.defaultProps={name:"DoubleArrowRight"};var B=P,z=(n(1942),["日","一","二","三","四","五","六"]),q=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={calendarDate:n.props.defaultCalendarDate||(Array.isArray(n.props.value)?n.props.value[0]:n.props.value),hoveringDate:null,now:new Date},n.handlePrevYearClick=function(){var e=g(n.state.calendarDate,-1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handlePrevMonthClick=function(){var e=Object(v.a)(n.state.calendarDate,-1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleNextMonthClick=function(){var e=Object(v.a)(n.state.calendarDate,1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleNextYearClick=function(){var e=g(n.state.calendarDate,1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleDayClick=function(e){n.setState({calendarDate:e}),n.props.onCalendarDateChange(e),n.props.onChange(e)},n.handleDayHover=function(e){n.setState({hoveringDate:e}),n.props.onHover(e)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.weekStartsOn,o=t.value,i=t.disabledDate,s=t.showToday,c=t.showPrevMonth,u=t.showPrevYear,d=t.showNextMonth,p=t.showNextYear,h=this.state,b=h.calendarDate,v=h.hoveringDate,g=h.now,I=Object(y.a)(function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(O.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(b),{weekStartsOn:a}),M=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,o=null==a?0:Object(m.a)(a),i=null==n.weekStartsOn?o:Object(m.a)(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var s=Object(O.a)(e),c=s.getDay(),l=6+(c<i?-7:0)-(c-i);return s.setHours(0,0,0,0),s.setDate(s.getDate()+l),s}(function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(O.a)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(b),{weekStartsOn:a}),P=Object(r.a)(Array(Object(j.a)(M,I)+1)).map(function(e,t){return Object(w.a)(I,t)}).reduce(function(e,t){var n=function(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(y.a)(e,n),a=Object(y.a)(t,n),o=r.getTime()-Object(C.a)(r),i=a.getTime()-Object(C.a)(a);return Math.round((o-i)/k)}(t,I,{weekStartsOn:a});return e[n]=e[n]?[].concat(Object(r.a)(e[n]),[t]):[t],e},[]),q=P[0].map(S.a),F=Array.isArray(o),U=s;return Object(l.b)("div",{className:f()("Calendar",n,{"Calendar--hasBottomTool":U})},Object(l.b)("div",{className:"Calendar-topTool"},u&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick},Object(l.b)(R,{size:20,center:!0})),c&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick},Object(l.b)(D.a,{size:20,center:!0})),Object(l.b)("div",{className:"Calendar-topToolDate"},Object(N.a)(b,"yyyy 年 M 月")),d&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick},Object(l.b)(L.a,{size:20,center:!0})),p&&Object(l.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick},Object(l.b)(B,{size:20,center:!0}))),Object(l.b)("table",{className:"Calendar-table",cellSpacing:0},Object(l.b)("thead",{className:"Calendar-thead"},Object(l.b)("tr",null,q.map(function(e){return Object(l.b)("th",{key:e,className:"Calendar-weekName"},z[e])}))),Object(l.b)("tbody",null,P.map(function(t,n){return Object(l.b)("tr",{key:n},t.map(function(t,n){var r=i(t),a=F?Object(A.a)(t,o[0])||Object(A.a)(t,o[1]):Object(A.a)(t,o),s=!1;if(F){var c=Object(T.a)(o),u=Object(_.a)(o);s=Object(E.a)(t,c)>0&&Object(E.a)(u,t)>0}return Object(l.b)("td",{key:n,className:f()("Calendar-day",{"is-hovered":Object(A.a)(t,v),"is-today":Object(A.a)(t,g),"is-disabled":r,"is-not-this-month":!x(t,b),"is-input-date":a,"is-in-range":s}),onClick:function(){r||e.handleDayClick(t)},onMouseEnter:function(){r||e.handleDayHover(t)},onMouseLeave:function(){r||e.handleDayHover(null)}},function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(O.a)(e).getDate()}(t))}))}))),U&&Object(l.b)("div",{className:"Calendar-bottomTool"},s&&Object(l.b)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(g)},disabled:i(g)},"今天")))}}]),t}(u.Component);q.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},q.propTypes={defaultCalendarDate:b.a.instanceOf(Date),value:b.a.oneOfType([b.a.instanceOf(Date),b.a.arrayOf(b.a.instanceOf(Date))]),weekStartsOn:b.a.number,disabledDate:b.a.func,onChange:b.a.func,onHover:b.a.func,showToday:b.a.bool,showPrevMonth:b.a.bool,showPrevYear:b.a.bool,showNextMonth:b.a.bool,showNextYear:b.a.bool};t.a=q},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n(61),f=n.n(p),h=n(30),b=n(31),m=n(16),v=n(518),g=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleViewed=function(){var e=n.props.extra;setTimeout(function(){m.default.trackCardShow(Object(h.default)(n),{},e)})},n.trackEvent=function(e,t,r){m.default.trackEvent(e,t,Object.assign({},n.props.extra,{},r))},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,a=e.moduleName,o=e.content,i=e.list,s=e.card,c=e.attachedInfoBytes;if(t){var l=Object(b.findDOMNode)(this);l&&m.default.setModule(l,{module:t,index:n,is_ad:r,module_name:a},function(e,t,n,r){return e?{card:{content:e}}:Object.assign({},t&&{card:t},{},n&&{list:n},{},r&&{attached_info_bytes:r})}(o,s,i,c))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,r=e.children,a="string"==typeof r.type?r:Object(d.cloneElement)(r,{trackEvent:this.trackEvent});return n?Object(c.b)(v.a,{id:t,onViewed:this.handleViewed},a):a}}]),t}(d.Component);g.propTypes={id:u.a.string,module:u.a.string,index:u.a.string,isAd:u.a.bool,content:u.a.object,extra:u.a.object,trackCardShow:u.a.bool,attachedInfoBytes:u.a.string},g.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1};var y=g,O=n(196),j=n(116);n(1973);n.d(t,"a",function(){return k});var w={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},C={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).jumpToOAuthUrl=function(e){var t=n.props.redirectUrl,r=void 0===t?location.href:t,a=Object(j.c)(r),o=a.utm_source,i=a.utm_medium,s=f()(navigator.userAgent).isZhihu;location.href="zhihu"!==e?"https://www.zhihu.com/oauth/redirect/login/".concat(C[e],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(r),"&utm_source=").concat(o,"&ref_source=").concat(i):s?"zhihu://signin?next=".concat(r):"https://www.zhihu.com/signin?next=".concat(r).concat(o?"?utm_source=".concat(o):"")},n.renderSignButtons=function(){var e=n.props.buttons;return"string"==typeof e?n.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?n.renderSingleSignButton({name:e}):"object"==typeof e?n.renderSingleSignButton(e):null})},n.renderSingleSignButton=function(e){var t=e.name,r=e.text,a=e.fill,o=e.color,i="#fff"===a||"#ffffff"===a;return-1===Object.keys(w).indexOf(t)?null:Object(c.b)("button",{className:"SignInModal-button-".concat(t),key:t,style:{backgroundColor:a,borderColor:i?"#0f88eb":a,color:i?"#0f88eb":o},onClick:function(){n.jumpToOAuthUrl(t)}},r||w[t])},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,r=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return Object(c.b)(O.b,{size:"small",className:"SignInModal",title:r,onClose:t},Object(c.b)(y,{module:"SignForm",moduleName:r,trackCardShow:!0},Object(c.b)("div",{className:"SignInModal-content"},n&&Object(c.b)(j.a,{className:"SignInModal-openInAppButton",href:n},"立即打开 App"),this.renderSignButtons())))}}]),t}(d.Component);k.propTypes={onClose:u.a.func.isRequired,urlScheme:u.a.string,redirectUrl:u.a.string,buttons:u.a.oneOfType([u.a.array,u.a.string])},k.defaultProps={buttons:["zhihu"]}},function(e,t,n){},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(30),c=n(7),l=n(0),u=n(1),d=n(2),p=n.n(d),f=n(16),h=n(525),b=n(197),m=n(482),v=(n(1963),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={expanded:!0},n.handleTitleClick=function(e){f.default.trackEvent(Object(s.default)(n),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(e)},n.renderHeader=function(){var e=n.props,t=e.title,r=e.url,a=e.author;return Object(l.b)("div",{className:"AbstractCard-header"},Object(l.b)("div",{className:"AbstractCard-desc"},Object(l.b)("span",{className:"AbstractCard-title",onClick:function(){return n.handleTitleClick(r,t)}},t),Object(l.b)("span",{className:"AbstractCard-source"},n.abstractSourceInfo)),Object(l.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:a,preset:"plain"}))},n.renderContent=function(){var e=n.props,t=e.content,r=e.member.name,a=e.theme;return Object(l.b)("div",{className:"AbstractCard-content"},Object(l.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(a)},t),Object(l.b)("div",{className:"AbstractCard-tip"},Object(l.b)("span",{className:"AbstractCard-info"},r," 摘录于 ",n.createdFormat)))},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){Object(b.onViewedOnce)(this.node,function(){f.default.trackCardShow(null,{id:6118})})}},{key:"render",value:function(){var e=this;return Object(l.b)("div",{className:"AbstractCard",ref:function(t){e.node=t}},this.renderHeader(),this.renderContent())}},{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(h.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}}]),t}(u.Component));v.propTypes={title:p.a.string.isRequired,url:p.a.string.isRequired,author:p.a.object,member:p.a.object,content:p.a.string.isRequired,created:p.a.number,theme:p.a.string.isRequired},t.a=v},function(e,t,n){"use strict";function r(e,t){return e===t?"check":null}function a(e,t){return e===t?"is-selected":null}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},function(e,t,n){var r=n(1940),a=n(386),o=n(510);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&a(t,n,i)&&(n=i=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),i=void 0===i?t<n?1:-1:o(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,a,o){for(var i=-1,s=r(n((t-e)/(a||1)),0),c=Array(s);s--;)c[o?s:++i]=e,e+=a;return c}},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n(2),d=n.n(u),p=n(11),f=n.n(p),h=n(525),b=n(15),m=n(115),v=n(2198),g=n(1934),y=(n(1944),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isFocused:!1},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.value,a=t.onChange,o=t.isButtonActive,i=t.toggler,s=t.disabledDate,l=t.getContainer,u=this.state.isFocused;return Object(c.b)(m.a,{className:f()("DatePicker",n),toggler:i||Object(c.b)(b.c,{className:f()("DatePicker-Button",{"is-active":u||o})},Object(c.b)(v.a,{center:!0,size:20}),h.a(r,"yyyy/MM/dd")),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:l},Object(c.b)(g.a,{value:r,onChange:function(t){e.popover.close(),a(t)},disabledDate:s}))}}]),t}(l.Component));y.propTypes={toggler:d.a.element,disabledDate:d.a.func}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(36),a=n(37),o=n(1852);function i(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(a.a)(e),i=Object(r.a)(t),s=n.getMonth()+i,c=new Date(0);c.setFullYear(n.getFullYear(),s,1),c.setHours(0,0,0,0);var l=Object(o.a)(c);return n.setMonth(s,Math.min(l,n.getDate())),n}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n(2),d=n.n(u),p=n(11),f=n.n(p),h=n(196),b=n(92),m=n(15),v=n(21);n(2135);var g=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var a,s=e.tagline;return n.state={text:(a=s,a.replace(/^「/,"").replace(/」$/,"")||"予人玫瑰，手有余香"),checked:!0},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,a=r.text,o=r.checked;return Object(c.b)(h.b,{onClose:t,className:"RewardForm-rewardModal"},Object(c.b)("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),Object(c.b)(b.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:a,onChange:this.onChangeInputValue}),Object(c.b)("div",{className:"RewardForm-remark"},!n&&Object(c.b)("div",{className:"RewardForm-Protocol"},Object(c.b)("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:o}),Object(c.b)("p",null,"我已同意",Object(c.b)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),Object(c.b)("p",{className:"RewardForm-prompting"},"还可以输入".concat(20-a.length,"个字"))),Object(c.b)(m.c,{className:f()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!o}),onClick:this.submit,disabled:!o},"确定"))}}]),t}(l.Component);g.propTypes={onClose:d.a.func,submitRewardText:d.a.func,edit:d.a.bool,tagline:d.a.string},g.defaultProps={tagline:v.j}},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.logoUrl,n=e.productName,r=e.productDesc,s=e.link,c=void 0===s?"":s,l=e.btnText,u=void 0===l?"":l,d=e.className,p=void 0===d?"":d,f=e.productNameMaxLength,h=void 0===f?6:f,b=e.productDescMaxLength,m=void 0===b?15:b,v=e.btnTextMaxLength,g=void 0===v?4:v,y="".concat("pc"===e.type?"pc":"app","_EAnswerCard");return a.default.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:c,target:"_blank",className:(0,o.default)("".concat(y),p)},a.default.createElement("img",{src:t,className:"".concat(y,"-image"),alt:"logo"}),a.default.createElement("div",{className:"".concat(y,"-content")},a.default.createElement("div",{className:(0,o.default)("".concat(y,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(h+1,"em")}},i(n,h)),r&&a.default.createElement("div",{className:"".concat(y,"-content-desc"),style:{maxWidth:"".concat(m+1,"em")}},i(r,m))),a.default.createElement("div",{className:"".concat(y,"-button"),style:{maxWidth:"".concat(g+1,"em")}},i(u,g)))};var a=r(n(1)),o=r(n(831));function i(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}n(2167)},function(e,t,n){"use strict";var r=n(22),a=n(24),o=n(0),i=(n(1),n(11)),s=n.n(i),c=n(15),l=n(43),u=(n(2211),function(e){var t=e.onClick,n=e.text,i=e.className,u=Object(a.a)(e,["onClick","text","className"]);return Object(o.b)(c.c,Object(r.default)({preset:"link",onClick:t,className:s()("ModifyButton",i)},u),Object(o.b)(l.a,{name:"modify",width:12,className:"ModifyButton-icon"}),n)});u.defaultProps={text:"修改"},t.a=u},,function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n(11),f=n.n(p),h=n(199),b=n(91),m=!1,v="pointer";function g(){v="pointer"}function y(){v="wheel"}var O=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).currentDirection=null,n.lastEmitDirection=null,n.startPosition=0,n.previousPosition=0,n.handleScroll=function(){var e=window.pageYOffset;if(!(e<0)){var t=e<n.previousPosition?"up":"down";t!==n.currentDirection&&(n.currentDirection=t,n.startPosition=n.previousPosition),n.previousPosition=e;var r=n.props,a=r.threshold,o=r.emitOnce,i=r.onScrollUp,s=r.onScrollDown;Math.abs(n.startPosition-e)>=a&&("wheel"!==v||o&&n.lastEmitDirection===t||("up"===t&&i&&i(),"down"===t&&s&&s()),n.lastEmitDirection=t,n.startPosition=e)}},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){m||(window.addEventListener("click",g),window.addEventListener("wheel",y,{passive:!0}),window.addEventListener("mousewheel",y,{passive:!0}),window.addEventListener("touchmove",y,{passive:!0}),m=!0);var e=this.props,t=e.throttleRate,n=e.useRAF,r=window.pageYOffset;this.startPosition=r,this.previousPosition=r,this.subscription=Object(b.subscribe)("scroll",this.handleScroll,{throttleRate:t,useRAF:n})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){return this.props.children||null}}]),t}(d.Component);O.propTypes={throttleRate:u.a.number,useRAF:u.a.bool,emitOnce:u.a.bool,threshold:u.a.number,onScrollUp:u.a.func,onScrollDown:u.a.func},O.defaultProps={threshold:100,useRAF:!0,emitOnce:!0};var j=O,w=n(393),C=n(168),k=n(21),S=(n(1936),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={enabled:!1,shown:!1},n.handleScrollUp=function(){n.state.shown&&n.canToggle()&&n.setState({shown:!1})},n.handleScrollDown=function(){!n.state.shown&&n.canToggle()&&n.setState({shown:!0})},n.handlePositionStatusChange=function(e){n.canToggle()&&("normal"!==e?n.enable():n.disable())},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,r=t.children,a=this.state,o=a.enabled,i=a.shown;return Object(c.b)(d.Fragment,null,Object(c.b)(C.a,{keyMap:{FOCUS_SEARCH:"/"},handlers:{FOCUS_SEARCH:function(){return e.setState({shown:!1})}}}),Object(c.b)(h.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange},Object(c.b)("div",null)),o&&Object(c.b)(j,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(c.b)(w.a.Inlet,{shown:i},Object(c.b)("div",{className:f()("PageHeader",{"is-shown":i})},r)))}}]),t}(d.Component));S.propTypes={prevent:u.a.bool,offset:u.a.number},S.defaultProps={prevent:!1,offset:k.f};var N=S;n.d(t,"a",function(){return N})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),a=n.n(r),o=a.a.shape({cardShow:a.a.number,expand:a.a.number,title:a.a.number,voteUp:a.a.number,voteDown:a.a.number,share:a.a.number,favlists:a.a.number,thank:a.a.number,options:a.a.number,report:a.a.number,toggleComment:a.a.number,getCommentAction:a.a.func})},function(e,t,n){e.exports=n.p+"assets/background_blue.94450cd0.svg"},,function(e,t,n){"use strict";var r,a,o,i=n(22),s=n(481),c=n(9),l=n(4),u=n(5),d=n(8),p=n(6),f=n(30),h=n(7),b=n(0),m=n(1),v=n.n(m),g=n(2),y=n.n(g),O=n(31),j=n(26),w=n(18),C=n(11),k=n.n(C),S=n(16),N=n(821),A=n.n(N),T=n(35),_=n.n(T),E=n(15),x=n(492),I=n(168),M=n(496),R=n(115),D=n(273),L=n(503),P=n(1755),B=n(818),z=n(152),q=n(23),F=n(21),U="zhihu::comment_local_key",V=5,Q=(F.I,1e3),H=980,K=function(){return""},W={error:"上传失败",success:"上传成功",uploadIng:"上传中",default:""},G=(n(1979),Object(w.connect)(null,{showNotification:q.h,uploadImage:z.b})((o=a=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={uploadStatus:W.default},n.triggerClick=function(e){var t=n.props.handleInputActive;n.uploadInput.click(),t(!0),e.preventDefault()},n.onError=function(){var e=n.props,t=e.showNotification,r=e.resetUploadImg;t("图片上传失败","red"),r()},n.onSuccess=function(){n.setState({uploadStatus:W.default})},n.resetFileInput=function(){n.uploadInput.value=null},n.beforeUpload=function(e){var t=n.props.showNotification;return e?e.size>1024*F.I*1024?(t("请上传小于 ".concat(F.I,"M 的图片。"),"red"),n.resetFileInput(),!1):(n.reactPopoverNode.open(),void n.setState({uploadStatus:W.uploadIng})):(n.resetFileInput(),!1)},n.uploadImage=function(e){var t=e.file,r=n.props,a=r.uploadImage,o=r.handleImages,i=r.updatePublishStatus;return a(t).then(function(e){o([Object.assign({},e.payload,{url:e.payload.src})]),i(!1),n.resetFileInput()}).catch(function(){n.setState({uploadStatus:W.error}),o([])})},n.handleOnRef=function(e){var t=n.props.onRef;t&&t(e),n.reactPopoverNode=e},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.images,r=t.disableButton,a=t.resetUploadImg,o=this.state.uploadStatus,i=Boolean(n.length);return Object(b.b)(m.Fragment,null,Object(b.b)(R.a,{className:"ImagePopover",arrowed:!0,ref:this.handleOnRef,placement:"bottom",globalClose:!n.length,onClick:this.triggerClick,toggler:Object(b.b)(D.a,{label:"插入图片",icon:P.a,disabled:r})},Object(b.b)("div",{className:"ImagePopover-thumbnail"},i&&Object(b.b)(m.Fragment,null,Object(b.b)("img",{src:n[0].src}),Object(b.b)("div",{className:"closeButton",onClick:a},Object(b.b)(B.a,null))),o&&!i&&Object(b.b)("p",{className:"ImagePopover-uplodaStatus"},o))),Object(b.b)(L.a,{accept:"image/png,image/jpeg",onRef:function(t){e.uploadInput=t},beforeUpload:this.beforeUpload,customUpload:this.uploadImage,onSuccess:this.onSuccess,onError:this.onError}))}}]),t}(m.Component),a.propTypes={className:y.a.string,disableButton:y.a.bool},a.defaultProps={disableButton:!0},r=o))||r),J=n(54),Y=n(1756),X=n(10),$=function(e){return v.a.createElement(X.a,e,v.a.createElement("path",{d:"M16.375 3.018C19.701 4.643 22 8.047 22 12a9.944 9.944 0 0 1-1.349 5c-1.73 2.986-4.952 5-8.651 5-3.7 0-6.921-2.014-8.651-5A9.944 9.944 0 0 1 2 12c0-3.951 2.298-7.357 5.625-8.982A9.95 9.95 0 0 1 12 2c1.571 0 3.051.373 4.375 1.018zm-4.322 11.17c1.5 0 2.911.662 3.871 1.817a.6.6 0 0 1-.514.978.599.599 0 0 1-.406-.214 3.823 3.823 0 0 0-2.951-1.385c-.605 0-1.185.136-1.723.407a3.85 3.85 0 0 0-1.321 1.093c-.039.05-.091.081-.141.116H8.19c-.006-.004-.013-.003-.018-.006a.6.6 0 0 1-.11-.839 5.074 5.074 0 0 1 1.73-1.433 4.988 4.988 0 0 1 2.26-.534zM8.875 10.75a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm6.25-2.5a1.25 1.25 0 1 1-.001 2.5 1.25 1.25 0 0 1 0-2.5zM19.17 17a8.695 8.695 0 0 0 1.58-5c0-3.23-1.764-6.05-4.375-7.566A8.698 8.698 0 0 0 12 3.25a8.69 8.69 0 0 0-4.375 1.184C5.014 5.95 3.25 8.77 3.25 12c0 1.859.586 3.581 1.579 5 1.583 2.264 4.205 3.75 7.171 3.75 2.965 0 5.586-1.486 7.17-3.75z",fillRule:"evenodd"}))};$.defaultProps={name:"Sad"};var Z=$,ee=(n(1980),function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={isGifReady:!1,isGifError:!1},n.renderLoadStatus=function(){var e=n.state.isGifError;return Object(b.b)("div",{className:"CommentSticker-load"},e?Object(b.b)(v.a.Fragment,null,Object(b.b)(Z,{className:"CommentSticker-load-Icons"}),"加载失败"):Object(b.b)(v.a.Fragment,null,Object(b.b)(Y.a,{className:"CommentSticker-load-Icons"}),"加载中"))};var r=n.props.src;return Object(J.loadImage)(Object(J.imgUrl)(r)).then(function(){n.setState({isGifReady:!0})}).catch(function(){n.setState({isGifError:!0})}),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.isGifReady,t=this.props,n=t.src,r=t.handleStickerClick;return Object(b.b)("div",{className:"CommentSticker"},e?Object(b.b)("img",{src:n,className:"CommentSticker-img",onClick:r}):this.renderLoadStatus())}}]),t}(v.a.Component));ee.propsTypes={handleStickerClick:y.a.func};var te=ee,ne=(n(1981),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).handleOnRef=function(e){var t=n.props.onRef;t&&t(e)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.sticker,r=e.stickers,a=e.disableButton,o=e.handleStickerPopoverOpen,i=e.handleStickerPopoverClose,s=e.resetStickers,c=e.addSticker,l=e.handleEmotionClick;return Object(b.b)(R.a,{className:t,arrowed:!0,ref:this.handleOnRef,globalClose:!n.length,preventCloseOnTarget:!0,onClick:l,onOpen:o,onClose:i,toggler:Object(b.b)(D.a,{label:"插入表情",icon:Y.a,disabled:a}),placement:"bottom"},Boolean(n.length)&&Object(b.b)("li",{className:"StickerPopover-stickers-item StickerPopover-stickers-item-single"},Object(b.b)("img",{src:Object(J.imgUrl)(n[0].url),alt:n[0].title}),Object(b.b)("div",{className:"closeButton",onClick:s},Object(b.b)(B.a,null))),!n.length&&Object(b.b)("div",{className:"StickerPopover-stickers-wrap"},Object(b.b)("ul",{className:"StickerPopover-stickers-list"},r.map(function(e){var t=e.url,n=e.title,r=e.id;return Object(b.b)("li",{className:"StickerPopover-stickers-item",key:r},Object(b.b)(te,{width:48,height:48,src:t,handleStickerClick:function(){return c(e)}}),Object(b.b)("p",null,n))}))))}}]),t}(m.Component));ne.propTypes={className:y.a.string,disableButton:y.a.bool},ne.defaultProps={disableButton:!0};var re,ae,oe,ie;n(1982);function se(){var e=Object(s.a)(["回复","",""]);return se=function(){return e},e}n.d(t,"a",function(){return ce});var ce=(re=Object(w.connect)(function(e){return{stickers:e.commentsV2.stickers||[],commentWithPicPermission:e.commentsV2.commentWithPicPermission||{}}},{showNotification:q.h}),Object(j.withRouter)(ae=re((ie=oe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={active:!1,disabled:!0,shown:!1,value:{toHTML:K},images:[],uploadIsFetchingNum:0,sticker:[],stickerIconActive:!1,toggleInputStyle:!1,commentTextLength:0},n.handleSubmit=n.context.authRequired(function(){var e=n.props,t=e.replyTo,r=e.onSubmit,a=e.onCancel,o=e.rootCommentId,i=e.isConversation,s=e.zaInfo.zaSubmitCommentId,c=n.state,l=c.images,u=c.sticker,d=n.input.toHTML();if(d||l.length||u.length){d&&n.saveLocalComment();var p=d;if(l.length||u.length){var h=l[0]||u[0],b=l[0]?l[0].url.includes(".gif")?"comment_gif":"comment_img":"comment_sticker";p+='<a class="'.concat(b,"\" href='").concat(h.url,"' data-width='").concat(h.dataRawwidth||"","' data-height='").concat(h.dataRawheight||"","'>[").concat(h.title||"图片","]</a>")}var m=r(p,t,{rootCommentId:o,isConversation:i});m.then?m.then(function(){a&&a(),n.input?(n.input.reset(),n.resetImage(),n.setState({value:{toHTML:K}},function(){return n.saveLocalComment()})):n.saveLocalComment({toHTML:K})}):(a&&a(),n.input.reset()),S.default.trackEvent(Object(f.default)(n),Object.assign({action:"Comment",element:"Button"},s&&{id:s}))}},void 0,q.b),n.handleCommentShow=n.context.authRequired(function(){n.setState({shown:!0}),n.hiddenInput.focus()}),n.handleCommentHide=function(){n.setState({shown:!1})},n.initLocalComment=function(){var e=n.props,t=e.type,r=e.id;if(t&&r){var a=_.a.get(U)||[],o="".concat(t,"_").concat(r),i=a.find(function(e){return e.key===o}),s=i&&i.value;s&&n.setState({value:{toHTML:function(){return s}},disabled:!1})}},n.saveLocalComment=function(e){var t=n.props,r=t.type,a=t.id;if(r&&a){var o=e?e.toHTML():n.state.value.toHTML(),i="".concat(r,"_").concat(a),s=(_.a.get(U)||[]).filter(function(e){return e.key!==i}),l=o?[].concat(Object(c.a)(s.slice(0,V-1)),[{key:i,value:o}]):s;_.a.set(U,l)}},n.handleChange=function(e){var t=n.state,r=t.sticker,a=t.images;r.length||a.length?n.setState({value:e}):n.setState({value:e,disabled:e.isEmpty}),n.handleInputChange()},n.handleFocus=function(){n.setState({active:!0},n.handleInputChange)},n.handleBlur=function(){var e=n.state,t=e.sticker,r=e.images;t.length||r.length||(n.setState({active:!1}),n.handleInputChange())},n.handleMobileComment=function(){n.handleSubmit(),n.handleCommentHide()},n.handleEmotionClick=function(){var e=n.state.stickerIconActive;e&&n.setState({stickerIconActive:e},n.stickerPopover.close)},n.handleInputChange=function(){var e,t=Object(O.findDOMNode)(n.input);t&&(t.getBoundingClientRect().height>40?n.setState({toggleInputStyle:!0}):n.setState({toggleInputStyle:!1}),e="innerText"in document?t.innerText.length:t.textContent.length,n.setState({commentTextLength:e}),n.imgUploadPopover&&n.imgUploadPopover.position(),n.stickerPopover&&n.stickerPopover.position())},n.handleStickerPopoverOpen=function(){n.setState({active:!0,stickerIconActive:!0},n.stickerPopover.position),setTimeout(n.stickerPopover.position,400)},n.handleStickerPopoverClose=function(){n.setState({stickerIconActive:!1})},n.handleImages=function(e){n.setState({images:e},n.imgUploadPopover.position)},n.handleInputActive=function(e){n.setState({active:e})},n.updatePublishStatus=function(e){n.setState({disabled:e})},n.resetStickers=function(){var e=n.state.value,t=void 0===e.isEmpty||e.isEmpty;n.stickerPopover&&n.stickerPopover.close(),n.setState({sticker:[],disabled:t})},n.resetImage=function(){n.resetStickers(),n.resetUploadImg()},n.resetUploadImg=function(){var e=n.state.value,t=void 0===e.isEmpty||e.isEmpty;n.imgUploadPopover&&n.imgUploadPopover.close(),n.setState({images:[],disabled:t})},n.addSticker=function(e){n.setState({sticker:[e],disabled:!1},n.stickerPopover.position)},n.focusInput=function(e){e.preventDefault(),n.input.focus()},n.createImageOnRef=function(e){n.imgUploadPopover=e},n.createStickerOnRef=function(e){n.stickerPopover=e},n.renderInput=function(e){var t=e.placeholder,r=e.className,a=n.props,o=a.autoFocus,i=a.stickers,s=a.commentWithPicPermission.commentWithPic,c=n.state,l=c.images,u=c.sticker,d=c.stickerIconActive,p=c.toggleInputStyle,f=c.active,h=c.disabled,m=c.commentTextLength,v=Boolean(u.length)||Boolean(l.length);return Object(b.b)("div",{className:k()("CommentEditorV2-inputWrap",{"CommentEditorV2-inputWrap--change":p,"CommentEditorV2-inputWrap--active":f||!h}),onClick:function(e){e.nativeEvent.stopImmediatePropagation()}},Object(b.b)(I.c,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:n.focusInput}}),Object(b.b)(M.a,{className:k()("CommentEditorV2-input",r),defaultValue:n.state.value.toHTML(),richtext:!0,large:!0,spread:!0,allowMention:!0,allowPasteRichText:!1,autoFocus:o,outputBlockType:"div",onRef:function(e){n.input=e},placeholder:t,onFocus:n.handleFocus,onChange:n.handleChange,onSubmit:n.handleSubmit,minRows:5}),Object(b.b)("div",{className:k()("CommentEditorV2-inputUpload",{"CommentEditorV2-inputUpload--FlexEnd":p,"CommentEditorV2-inputUpload--SpaceBetween":p&&m>H})},p&&m>H&&Object(b.b)(x.a,{className:"CommentEditorV2-MaxLength",current:m,max:Q}),Object(b.b)("div",{className:"CommentEditorV2-popoverWrap"},s&&Object(b.b)(G,{onRef:n.createImageOnRef,images:l,disableButton:v,resetUploadImg:n.resetUploadImg,handleInputActive:n.handleInputActive,updatePublishStatus:n.updatePublishStatus,handleImages:n.handleImages}),Object(b.b)(ne,{className:k()("CommentEditorV2-inputUpLoad-Icon",{"CommentEditorV2-inputUpLoad-Icon--active":d&&!u.length}),onRef:n.createStickerOnRef,disableButton:v,handleEmotionClick:n.handleEmotionClick,handleStickerPopoverOpen:n.handleStickerPopoverOpen,handleStickerPopoverClose:n.handleStickerPopoverClose,stickerIconActive:d,sticker:u,stickers:i,resetStickers:n.resetStickers,addSticker:n.addSticker}))))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initLocalComment(),document.addEventListener("click",this.handleBlur)}},{key:"componentWillUnmount",value:function(){this.saveLocalComment(),document.removeEventListener("click",this.handleBlur)}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,r=e.className,a=e.ownerAuthorIsOrg,o=e.ownerAuthorIsBrand,s=this.state,c=s.active,l=s.disabled,u=a?"机构":"作者",d={preset:"primary",color:"blue",children:"发布",disabled:l};if(t&&t.author){var p=A()(se(),t.author.member.name,n?"，评论由".concat(u,"筛选后公开"):"");return Object(b.b)("div",{className:k()(r,"CommentEditorV2--normal",{"CommentEditorV2--active":c||!l})},this.renderInput({placeholder:p}),Object(b.b)(E.c,Object(i.default)({},d,{className:"CommentEditorV2-singleButton",onClick:this.handleSubmit})))}var f="写下你的评论...";return n&&(f=o?"已开启预审评论，评论由品牌筛选后公开":a?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示"),Object(b.b)("div",{className:k()(r,"CommentEditorV2--normal",{"CommentEditorV2--active":c||!l})},this.renderInput({placeholder:f}),Object(b.b)(E.c,Object(i.default)({},d,{className:"CommentEditorV2-singleButton",onClick:this.handleSubmit})))}}]),t}(m.Component),oe.propTypes={className:y.a.string,defaultActive:y.a.bool,replyTo:y.a.object,inCommentItem:y.a.bool,commentNeedsReview:y.a.bool,canComment:y.a.object,onCancel:y.a.func,onSubmit:y.a.func.isRequired,zaInfo:y.a.object},oe.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1,zaInfo:{}},oe.contextTypes={authRequired:y.a.func},ae=ie))||ae)||ae)},function(e,t,n){"use strict";var r=n(22),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(9),u=n(0),d=n(1),p=n(18),f=n(64),h=n(491),b=n(490),m=n(180),v=n(2),g=n.n(v),y=n(196),O=n(49),j=n(494),w=n(15),C=n(63),k=n(103),S=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,a=e.canClick,o=e.onClick;if(!n)return null;var i=t.length,s=i===n?"":"".concat(Object(C.formatNumber)(n)," 人");return Object(u.b)(j.CJKSpace,null,t.map(function(e,t){return Object(u.b)("span",{key:t},t>0&&"、",Object(u.b)(k.a,{key:t,noBadge:!0,user:e},e.name))}),i>0&&n-i>0&&"等",a?Object(u.b)(w.c,{preset:"plain",onClick:o},s,r):s+r)};S.propTypes={voteupCount:g.a.number.isRequired,upvotedFollowees:g.a.array.isRequired,actionText:g.a.string.isRequired,canClick:g.a.bool,onClick:g.a.func},S.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var N=S,A=n(1928),T=(n(2121),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={modalShown:!1},n.handleListHide=function(){return n.setState({modalShown:!1})},n.handleListShown=function(){return n.setState({modalShown:!0})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,a=e.type,o=e.too,i=e.isFetching,s=e.isDrained,c=e.items,l=e.onLoad;if(t<=0)return null;var d,p=this.state.modalShown;return d="pin"===a?"为该".concat(O.b[a],"鼓掌"):"column"===a?"关注":"".concat(o?"也":"","赞同了该").concat(O.b[a]),Object(u.b)("span",{className:"Voters"},Object(u.b)(N,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(u.b)(y.b,{size:"fullPage",onClose:this.handleListHide},p&&Object(u.b)(A.a,{isFetching:i,isDrained:s,text:"column"===a?"关注了":"赞同了",items:c,voteupCount:t,onLoad:l})))}}]),t}(d.Component));T.propTypes={openable:g.a.bool,upvotedFollowees:g.a.array,id:g.a.oneOfType([g.a.number,g.a.string]),type:g.a.oneOf(["pin","answer","article","column"]).isRequired,modalShown:g.a.bool},T.defaultProps={openable:!0};var _,E,x,I=T,M={answer:"answers",article:"articles",pin:"pins",column:"columns"};var R=Object(p.connect)(function(e,t){var n=t.id,r=t.type,a=e.entities.users,o=e[M[r]]||{},i=o.voters,s=void 0===i?{}:i,c=o.concernedUpvoters,u=void 0===c?{}:c,d=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},p=d.isFetching,f=d.isDrained,h=d.order,b=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:p,isDrained:f,order:h,items:[].concat(Object(l.a)(m),Object(l.a)(b.filter(function(e){return!m.includes(e)}))).map(function(e){return a[e]})}},{loadAnswerVoters:f.s,loadArticleVoters:h.c,loadPinVoters:b.f,loadColumnsFollowers:m.c})((x=E=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).handleLoad=function(){var e=n.props,t=e.type,r=e.id,a=e.loadAnswerVoters,o=e.loadPinVoters,i=e.loadArticleVoters,s=e.loadColumnsFollowers;switch(t){case"answer":return a(r);case"pin":return o(r);case"article":return i(r);case"column":return s(r);default:return null}},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return Object(u.b)(I,Object(r.default)({onLoad:this.handleLoad},this.props))}}]),t}(d.Component),E.propsTypes=Object.assign({},I.propsTypes),E.defaultProps=Object.assign({},I.defaultProps),_=x))||_;t.a=R},function(e,t,n){"use strict";var r=n(22),a=n(24),o=n(9),i=n(4),s=n(5),c=n(8),l=n(6),u=n(7),d=n(0),p=n(1),f=n.n(p),h=n(18),b=n(48),m=n.n(b),v=n(276),g=n(30),y=n(32),O=n.n(y),j=n(2),w=n.n(j),C=n(19),k=n.n(C),S=n(1769),N=n(205),A=n(504),T=(n(1964),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).state={items:[],value:""},e.position=e.position.bind(Object(g.default)(e)),e.handleRemove=e.handleRemove.bind(Object(g.default)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(g.default)(e)),e.handleChange=e.handleChange.bind(Object(g.default)(e)),e.handleSelect=e.handleSelect.bind(Object(g.default)(e)),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleRemove",value:function(e){var t=this.props,n=t.value,r=t.onChange,a=t.onRemove;if(a&&a(e),r){var o=n.slice(0);o.splice(e,1),r(o)}}},{key:"handleKeyDown",value:function(e){var t=this.props.value;8===e.keyCode&&!this.state.value&&t.length&&this.handleRemove(t.length-1)}},{key:"handleChange",value:function(e){var t=this;this.setState({value:e}),e?this.props.fetchFn(e).then(function(e){t.setState({items:e.filter(function(e){return!t.props.value.find(function(t){return t.urlToken===e.urlToken})})})}):this.setState({items:[]})}},{key:"handleSelect",value:function(e,t){var n=this.props,r=n.value,a=n.onChange,i=n.onAdd;i&&i(t,this.state.value),a&&a([].concat(Object(o.a)(r),[t])),this.setState({value:"",items:[]})}},{key:"clearInput",value:function(){this.setState({value:"",items:[]})}},{key:"position",value:function(){var e=this.input.getBoundingClientRect(),t=e.left;return{targetContainerStyle:{top:e.bottom+13,left:t-13}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.inputProps,a=t.value,o=t.renderTagInner,i=t.alignWithInput,s=t.menuProps,c=t.onRef,l=t.after,u=O()(t,["className","inputProps","value","renderTagInner","alignWithInput","menuProps","onRef","after"]),d=this.state,p=d.value,h=d.items;return f.a.createElement(N.b,Object.assign({},u,{className:k()("TagInput",{"TagInput--empty":0===a.length},n),value:p,ref:function(t){e.autoComplete=t},onRef:function(t){c&&c(t),e.input=t},items:h,inputProps:Object.assign({},r,{onKeyDown:this.handleKeyDown,before:a.map(function(t,n){return f.a.createElement(A.a,{key:n,removable:!0,onRemove:function(){return e.handleRemove(n)}},o(t))}),after:l}),menuProps:Object.assign({position:i?this.position:null,style:{maxHeight:256,overflow:"scroll"}},s),onChange:this.handleChange,onSelect:this.handleSelect}))}}]),t}(p.Component));T.propTypes={fetchFn:w.a.func.isRequired,renderTagInner:w.a.func.isRequired,value:w.a.array.isRequired,after:w.a.node,alignWithInput:w.a.bool,onChange:w.a.func,onAdd:w.a.func,onRemove:w.a.func},T.defaultProps={alignWithInput:!1,after:f.a.createElement(S.a,{fill:"#afbdcf",size:18})};var _,E=T,x=n(132),I=n(27);function M(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")}var R=Object(h.connect)(function(e){return{currentUser:Object(I.c)(e)}},{createTopic:x.e,fillCurrentUserIfNeeded:I.e})(_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).fetchTopic=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.c.apply(void 0,t.concat([[],{topic_filter:1}])).then(function(e){e=e.filter(function(e){return!M(e)});var r=n.props.currentUser,a=t[0];return r&&r.canEditTopic&&!e.find(function(e){return e.name===a})?[].concat(Object(o.a)(e),[{urlToken:"topic",name:"创建 ".concat(a," 话题"),token:a}]):e})},n.createTopic=function(e){(0,n.props.createTopic)(e).then(function(t){var r=t.payload,a=r.id,o=r.avatarUrl,i=n.props,s=i.value,c=i.onChange;c&&c(s.map(function(t){return t.name===e?{urlToken:a,name:e,avatarUrl:o}:t}))}).catch(function(){var t=n.props,r=t.value,a=t.onChange;a&&a(r.filter(function(t){return t.name!==e}))})},n.handleAdd=function(e,t){var r=n.props,a=r.value,i=r.onChange;if(M(e))return n.createTopic(t),void(i&&i([].concat(Object(o.a)(a),[{name:t}])));i&&i([].concat(Object(o.a)(a),[e]))},n.handleRemove=function(e){var t=n.props,r=t.value,a=t.onChange,o=r.slice(0);o.splice(e,1),a&&a(o)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fillCurrentUserIfNeeded)(["canEditTopic"])}},{key:"render",value:function(){var e=m()(this.props,["onChange"]),t=e.value,n=Object(a.a)(e,["value"]);return Object(d.b)(E,Object(r.default)({inputProps:{large:!0,spread:!0,placeholder:"添加话题".concat(t.length>0?"（".concat(t.length,"/").concat(5,"）"):""),disabled:t.length>=5},fetchFn:this.fetchTopic,renderTagInner:function(e){return Object(d.b)("a",{target:"_blank",href:"//www.zhihu.com/topic/".concat(e.id||e.urlToken)},e.name)},value:t,alignWithInput:!0,onAdd:this.handleAdd,onRemove:this.handleRemove},n))}}]),t}(p.Component))||_;t.a=R},function(e,t,n){"use strict";var r,a,o,i,s=n(22),c=n(4),l=n(5),u=n(8),d=n(6),p=n(7),f=n(0),h=n(1),b=n.n(h),m=n(2),v=n.n(m),g=n(18),y=n(26),O=n(11),j=n.n(O),w=n(151),C=n(15),k=n(2193),S=n(1754),N=n(1757),A=n(2226),T=n(2227),_=n(2194),E=n(2228),x=n(2229),I=n(2230),M=n(23),R=n(74),D=n(517),L=n(117),P=n(1846),B=n(200),z=n(103),q=n(1955),F=n(9),U=n(31),V=n(484),Q=n(54),H=n(1809),K=(n(1983),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={previewImg:null},n.handlePreview=function(e){var t=e.target,r=n.props.onPreviewImage;"function"==typeof r?r(e).catch(function(){n.setState({previewImg:t})}):n.setState({previewImg:t})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"mount",value:function(){var e=this;this.imagesGifNode=this.root.getElementsByClassName("comment_gif"),this.imagesNode=this.root.getElementsByClassName("comment_img"),this.imagesStickerNode=this.root.getElementsByClassName("comment_sticker"),this.imgNode=this.root.getElementsByClassName("origin_image zh-lightbox-thumb"),this.imagesNodes=Array.from([].concat(Object(F.a)(this.imagesGifNode),Object(F.a)(this.imagesNode),Object(F.a)(this.imagesStickerNode),Object(F.a)(this.imgNode))).map(function(t){var n=t.dataset||{},r=n.width,a=n.height,o=n.rawwidth,i=n.rawheight,s=Number(r||o),c=Number(a||i),l=document.createElement("div");l.className="Richtext-content_img",t.parentNode.replaceChild(l,t);var u=t.getAttribute("href")||t.getAttribute("src"),d=new Image,p=t.getAttribute("class");return"comment_sticker"!==p&&l.addEventListener("click",e.handlePreview),d.className=p,d.src=u,d.dataset.original=Object(Q.imgUrl)(u,"r"),d.dataset.rawwidth=s,d.onload=function(){s===c||"comment_sticker"===p?l.classList.add("Richtext-content_img-square"):s>c?l.classList.add("Richtext-content_img-square--wideShape"):l.classList.add("Richtext-content_img-square--highShape"),l.appendChild(d)},l})}},{key:"unmount",value:function(){this.imagesNodes&&this.imagesNodes.forEach(function(e){Object(U.unmountComponentAtNode)(e)})}},{key:"componentDidMount",value:function(){this.mount()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"render",value:function(){var e=this,t=this.state.previewImg,n=this.props,r=n.html,a=n.className;return Object(f.b)("div",{className:j()("CommentRichText",a),ref:function(t){return e.root=t}},Object(f.b)(H.a,{html:r}),t&&Object(f.b)(V.a,{className:"CommentRichText-ImageView",img:t,onClose:function(){return e.setState({previewImg:null})}}))}}]),t}(h.Component)),W=n(21);n(1984);n.d(t,"a",function(){return G});var G=(r=Object(g.connect)(function(e){return{isWechat:e.env.userAgent.Wechat,permission:Object(R.R)(e)}}),Object(y.withRouter)(a=r((i=o=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={reportModalShown:!1,isReplying:!1,guideShown:!1,deleteModal:!1},n.toggleReply=n.context.authRequired(function(){n.setState({isReplying:!n.state.isReplying})},void 0,M.b),n.openReportModal=n.context.authRequired(function(){n.setState({reportModalShown:!0})}),n.like=n.context.authRequired(function(e){var t=n.props;(0,t.onLike)(t.comment.id,e)},W.N.like,M.b),n.dislike=n.context.authRequired(function(){var e=n.props;(0,e.onDislike)(e.comment.id)},W.N.like,M.b),n.delete=function(){var e=n.props;return(0,e.onDelete)(e.comment.id)},n.feature=function(e){var t=n.props,r=t.onFeature,a=t.comment.id;r(e?"".concat(a,"_featured"):a)},n.collapse=function(){var e=n.props;(0,e.onCollapse)(e.comment.id)},n.approve=function(){var e=n.props;(0,e.onApprove)(e.comment.id)},n.reject=function(){var e=n.props;(0,e.onReject)(e.comment.id)},n.showConversation=function(e){var t=n.props;(0,t.onShowConversation)({commentId:t.comment.id,isAnchorComments:e})},n.stopReply=function(){n.setState({isReplying:!1})},n.closeReportModal=function(e){if(e){var t=e.result.payload,r=t&&t.message||t&&t.code&&"举报失败";e.commentDeleteResult&&!(e.commentDeleteResult.payload||{}).code?P.b.showModal({reportText:r}):Object(L.b)(r||"举报成功")}n.setState({reportModalShown:!1})},n.handleToggleGuide=function(){n.setState({guideShown:!n.state.guideShown})},n.handleCloseDelete=function(){return n.setState({deleteModal:!1})},n.handleDelete=function(){return n.setState({deleteModal:!0})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(f.b)("span",{className:"CommentItemV2-roleInfo"},"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) ")}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var r=t.member,a=void 0===r?{}:r,o=t.role;return Object(f.b)(b.a.Fragment,null,Object(f.b)("span",{className:"CommentItemV2-reply"},"回复"),Object(f.b)(z.a,{noBadge:!0,noHoverCard:!0,user:a}),this.renderRoleInfo(o,n))}},{key:"renderItem",value:function(){var e,t=this,n=this.props,r=n.isConversation,a=n.ownerAuthorIsOrg,o=n.parent,i=o.canComment,c=(i=void 0===i?{status:!0}:i).status,l=o.questionType,u=n.commentNeedsReview,d=n.comment,p=n.onReply,h=n.status,m=n.type,v=n.canOperate,g=n.commentPattern,y=n.rootCommentId,O=n.byComment,M=n.isReverseAndStatusOpen,R=n.hasRecommend,L=n.permission.canBrandAdminEdit,F=n.showCollapsed,U=this.state,V=U.reportModalShown,Q=U.isReplying,H=d.id,W=d.author,G=d.content,J=d.voteCount,Y=d.replyToAuthor,X=d.isAuthor,$=d.createdTime,Z=d.featured,ee=d.voting,te=d.reviewing,ne=d.disliked,re=d.resourceType,ae=d.childCommentCount,oe=d.allowDelete,ie=d.allowVote,se=d.canRecommend,ce=d.canCollapse,le=d.collapsedReason,ue=void 0===le?"":le,de=d.isDelete,pe=d.collapsed,fe=pe&&!F,he=fe?"该评论已被折叠":G,be=de||fe,me=W||{},ve=me.member,ge=me.role,ye=Boolean(Y),Oe=Z&&(ae>0||ye)&&!r||O&&ye||M&&ye,je=X||oe&&("question"!==m||"commercial"===l),we=Object(f.b)("div",{className:"CommentItemV2-footer"},Object(f.b)(C.c,{className:j()("CommentItemV2-likeBtn",ee&&"is-liked"),preset:"plain",onClick:this.like,disabled:X},Object(f.b)(k.a,{style:{marginRight:5},center:!0,size:16}),J>0?J:"赞"),pe&&ue&&Object(f.b)("div",{className:"CommentItemV2-walleTag"},"阴阳怪气自动折叠"===ue&&Object(f.b)(S.a,{size:16,className:"CommentItemV2-walleIcon"}),ue),Oe&&Object(f.b)(C.c,{preset:"plain",className:"CommentItemV2-talkBtn",onClick:function(){return t.showConversation(ye)}},Object(f.b)(N.a,{style:{marginRight:5},center:!0,size:16}),"查看回复"),!X&&c&&!pe&&Object(f.b)(C.c,{preset:"plain",className:j()({"CommentItemV2-hoverBtn":!Q}),onClick:this.toggleReply},Object(f.b)(A.a,{style:{marginRight:5},center:!0,size:16}),Q?"取消回复":"回复"),se&&!R&&v&&Object(f.b)(C.c,{className:j()({"CommentItemV2-hoverBtn":!X&&!Q}),preset:"plain",onClick:function(){return t.feature(Z)}},Object(f.b)(T.a,{style:{marginRight:5},center:!0,size:16}),Z?"取消推荐":"推荐"),ce&&!X&&Object(f.b)(C.c,{className:j()({"CommentItemV2-hoverBtn":!X&&!Q}),preset:"plain",onClick:this.collapse},Object(f.b)(_.a,{style:{marginRight:5},center:!0,size:14}),pe?"取消折叠":"折叠"),ie&&!X&&v&&Object(f.b)(C.c,{className:j()({"CommentItemV2-hoverBtn":!Q}),preset:"plain",onClick:this.dislike},Object(f.b)(k.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),ne?"取消踩":"踩"),X||Object(f.b)(b.a.Fragment,null,Object(f.b)(C.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.openReportModal},Object(f.b)(E.a,{style:{marginRight:5},center:!0,size:16}),"举报"),"question"===m&&"commercial"===l&&L&&Object(f.b)(C.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.reject},Object(f.b)(_.a,{style:{marginRight:5},center:!0,size:16}),"隐藏")),je&&Object(f.b)(C.c,{className:j()({"CommentItemV2-hoverBtn":!X&&!Q&&!Q}),preset:"plain",onClick:this.handleDelete},Object(f.b)(x.a,{style:{marginRight:5},center:!0,size:16}),"删除"),Object(f.b)(P.a,{shown:this.state.deleteModal,id:H,onDelete:this.delete,onClose:this.handleCloseDelete}),Object(f.b)(B.a,Object(s.default)({type:"comment",urlToken:H,shown:V,onClose:this.closeReportModal},je&&{onDeleteComment:this.delete},{notification:{failure:D.a},zaEnabled:!0})));return e=Q?Object(f.b)("div",null,we,Object(f.b)(q.a,{type:"comment",id:H,commentNeedsReview:u,className:"CommentItemV2-editor",defaultActive:!0,replyTo:d,onCancel:this.stopReply,onSubmit:p,rootCommentId:y,isConversation:r})):"reviewing"===h?Object(f.b)("div",{className:"CommentItemV2-footer"},Object(f.b)(C.c,{preset:"plain",onClick:this.approve},Object(f.b)(I.a,{style:{marginRight:5},center:!0,size:14}),"公开"),Object(f.b)(C.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.handleDelete},Object(f.b)(x.a,{style:{marginRight:5},center:!0,size:16}),"删除"),Object(f.b)(P.a,{shown:this.state.deleteModal,id:H,onDelete:this.delete,onClose:this.handleCloseDelete})):we,Object(f.b)("div",null,Object(f.b)("div",{className:"CommentItemV2-meta"},ve&&Object(f.b)(z.a,{className:"CommentItemV2-avatar",avatar:!0,noHoverCard:"fixed"===g,user:ve}),ve&&Object(f.b)(z.a,{noBadge:!0,noHoverCard:!0,user:ve}),this.renderRoleInfo(ge,re),this.renderReplyTo(),te&&Object(f.b)(_.a,{className:"CommentItemV2-reviewing","data-tooltip":"".concat(!1===a?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(f.b)("span",{className:"CommentItemV2-time"},Object(w.toRelativeString)($))),Object(f.b)("div",{className:"CommentItemV2-metaSibling"},Object(f.b)(K,{className:j()("CommentItemV2-content",{"CommentItemV2-shield":be}),html:he}),!be&&e))}},{key:"render",value:function(){return this.renderItem()&&Object(f.b)("div",{className:"CommentItemV2",ref:this.props.onRef},this.renderItem())}}]),t}(h.Component),o.propTypes={comment:v.a.object.isRequired,parent:v.a.object.isRequired,commentNeedsReview:v.a.bool,type:v.a.string,isConversation:v.a.bool,onLike:v.a.func.isRequired,onShowConversation:v.a.func,onReply:v.a.func,onFeature:v.a.func,onDelete:v.a.func.isRequired,onCollapse:v.a.func,commentPattern:v.a.string,showCollapsed:v.a.bool},o.contextTypes={currentUser:v.a.object,authRequired:v.a.func},a=i))||a)||a)},function(e,t,n){e.exports=n(2259)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=i,t.destroy=s;var r=new Map,a=new Map;function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],i=n.root,s=n.rootMargin,l=n.threshold||0;if(e&&t){var u=s?l.toString()+"_"+s:""+l.toString();i&&(u=o?o+"_"+u:null);var d=u?a.get(u):null;d||(d=new IntersectionObserver(c,n),u&&a.set(u,d));var p={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return r.set(e,p),d.observe(e),p}}function i(e){if(e){var t=r.get(e);if(t){var n=t.observerId,o=t.observer,i=n?a.get(n):o;i&&i.unobserve(e);var s=!1;n&&r.forEach(function(t,r){t&&t.observerId===n&&r!==e&&(s=!0)}),i&&!s&&(i.disconnect(),a.delete(n)),r.delete(e)}}}function s(){a.forEach(function(e){e.disconnect()}),a.clear(),r.clear()}function c(e){e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,a=e.target,o=r.get(a);if(o&&n>=0){var i=o.options,s=!1;Array.isArray(i.threshold)?s=i.threshold.some(function(e){return o.visible?n>e:n>=e}):void 0!==i.threshold&&(s=o.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(s=s&&t),o.callback&&o.callback(s)}})}t.default={observe:o,unobserve:i,destroy:s}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(1970),a="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,o,i,s,c,l,u=!1;t||(t={}),n=t.debug||!1;try{if(i=r(),s=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",document.body.appendChild(l),s.selectNode(l),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:a),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),l&&document.body.removeChild(l),i()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1805),o=n(1787),i=n(1795),s=n(1788),c=n(1793),l=n(1786),u=n(1785),d=n(1784),p=(n(1797),n(1792)),f=n(2e3),h=c.draft_tree_data_support,b=h?s:i,m=d.List,v=d.Repeat,g={insertAtomicBlock:function(e,t,n){var i=e.getCurrentContent(),s=e.getSelection(),c=l.removeRange(i,s,"backward"),d=c.getSelectionAfter(),f=l.splitBlock(c,d),g=f.getSelectionAfter(),y=l.setBlockType(f,g,"atomic"),O=o.create({entity:t}),j={key:p(),type:"atomic",text:n,characterList:m(v(O,n.length))},w={key:p(),type:"unstyled"};h&&(j=r({},j,{nextSibling:w.key}),w=r({},w,{prevSibling:j.key}));var C=[new b(j),new b(w)],k=a.createFromArray(C),S=l.replaceWithFragment(y,g,k),N=S.merge({selectionBefore:s,selectionAfter:S.getSelectionAfter().set("hasFocus",!0)});return u.push(e,N,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var a=e.getCurrentContent(),o=e.getSelection(),i=void 0;if("before"===r||"after"===r){var s=a.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());i=f(a,t,s,r)}else{var c=l.removeRange(a,n,"backward"),d=c.getSelectionAfter(),p=c.getBlockForKey(d.getFocusKey());if(0===d.getStartOffset())i=f(c,t,p,"before");else if(d.getEndOffset()===p.getLength())i=f(c,t,p,"after");else{var h=l.splitBlock(c,d),b=h.getSelectionAfter(),m=h.getBlockForKey(b.getFocusKey());i=f(h,t,m,"before")}}var v=i.merge({selectionBefore:o,selectionAfter:i.getSelectionAfter().set("hasFocus",!0)});return u.push(e,v,"move-block")}};e.exports=g},function(e,t,n){"use strict";e.exports={draft_killswitch_allow_nontextnodes:!1,draft_segmented_entities_behavior:!1,draft_handlebeforeinput_composed_text:!1,draft_tree_data_support:!1}},function(e,t,n){"use strict";var r=n(1787),a=n(1784).Map,o={add:function(e,t,n){return i(e,t,n,!0)},remove:function(e,t,n){return i(e,t,n,!1)}};function i(e,t,n,o){var i=e.getBlockMap(),s=t.getStartKey(),c=t.getStartOffset(),l=t.getEndKey(),u=t.getEndOffset(),d=i.skipUntil(function(e,t){return t===s}).takeUntil(function(e,t){return t===l}).concat(a([[l,i.get(l)]])).map(function(e,t){var a,i;s===l?(a=c,i=u):(a=t===s?c:0,i=t===l?u:e.getLength());for(var d,p=e.getCharacterList();a<i;)d=p.get(a),p=p.set(a,o?r.applyStyle(d,n):r.removeStyle(d,n)),a++;return e.set("characterList",p)});return e.merge({blockMap:i.merge(d),selectionBefore:t,selectionAfter:t})}e.exports=o},function(e,t,n){"use strict";var r=n(1784),a=n(1989);e.exports=function(e,t,n){var o=e.getBlockMap(),i=t.getStartKey(),s=t.getStartOffset(),c=t.getEndKey(),l=t.getEndOffset(),u=o.skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===c}).toOrderedMap().merge(r.OrderedMap([[c,o.get(c)]])).map(function(e,t){var r=t===i?s:0,o=t===c?l:e.getLength();return a(e,r,o,n)});return e.merge({blockMap:o.merge(u),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(1787);e.exports=function(e,t,n,a){for(var o=e.getCharacterList();t<n;)o=o.set(t,r.applyEntity(o.get(t),a)),t++;return e.set("characterList",o)}},function(e,t,n){"use strict";var r=n(1991),a=n(1992),o=n(382);function i(e,t,n,i,s,c,l){var u=n.getStartOffset(),d=n.getEndOffset(),p=e.__get(s).getMutability(),f=l?u:d;if("MUTABLE"===p)return n;var h=a(t,s).filter(function(e){return f<=e.end&&f>=e.start});1!=h.length&&o(!1);var b=h[0];if("IMMUTABLE"===p)return n.merge({anchorOffset:b.start,focusOffset:b.end,isBackward:!1});c||(l?d=b.end:u=b.start);var m=r.getRemovalRange(u,d,t.getText().slice(b.start,b.end),b.start,i);return n.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1})}e.exports=function(e,t,n,r,a){var o=r.getStartOffset(),s=r.getEndOffset(),c=t.getEntityAt(o),l=n.getEntityAt(s-1);if(!c&&!l)return r;var u=r;if(c&&c===l)u=i(e,t,u,a,c,!0,!0);else if(c&&l){var d=i(e,t,u,a,c,!1,!0),p=i(e,n,u,a,l,!1,!1);u=u.merge({anchorOffset:d.getAnchorOffset(),focusOffset:p.getFocusOffset(),isBackward:!1})}else if(c){var f=i(e,t,u,a,c,!1,!0);u=u.merge({anchorOffset:f.getStartOffset(),isBackward:!1})}else if(l){var h=i(e,n,u,a,l,!1,!1);u=u.merge({focusOffset:h.getEndOffset(),isBackward:!1})}return u}},function(e,t,n){"use strict";e.exports={getRemovalRange:function(e,t,n,r,a){var o=n.split(" ");o=o.map(function(e,t){if("forward"===a){if(t>0)return" "+e}else if(t<o.length-1)return e+" ";return e});for(var i,s=r,c=null,l=null,u=0;u<o.length;u++){if(e<(i=s+o[u].length)&&s<t)null!==c?l=i:(c=s,l=i);else if(null!==c)break;s=i}var d=r+n.length,p=c===r,f=l===d;return(!p&&f||p&&!f)&&("forward"===a?l!==d&&l++:c!==r&&c--),{start:c,end:l}}}},function(e,t,n){"use strict";var r=n(382);e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){n.push({start:e,end:t})}),n.length||r(!1),n}},function(e,t,n){"use strict";var r=n(1805),a=n(1788),o=n(1784),i=n(1891),s=n(382),c=n(1889),l=o.List,u=function(e,t,n,o,i,s){var c=n.first()instanceof a,u=[],d=o.size,p=n.get(i),f=o.first(),h=o.last(),b=h.getLength(),m=h.getKey(),v=c&&(!p.getChildKeys().isEmpty()||!f.getChildKeys().isEmpty());n.forEach(function(e,t){t===i?(v?u.push(e):u.push(function(e,t,n){var r=e.getText(),a=e.getCharacterList(),o=r.slice(0,t),i=a.slice(0,t),s=n.first();return e.merge({text:o+s.getText(),characterList:i.concat(s.getCharacterList()),type:o?e.getType():s.getType(),data:s.getData()})}(e,s,o)),o.slice(v?0:1,d-1).forEach(function(e){return u.push(e)}),u.push(function(e,t,n){var r=e.getText(),a=e.getCharacterList(),o=r.length,i=r.slice(t,o),s=a.slice(t,o),c=n.last();return c.merge({text:c.getText()+i,characterList:c.getCharacterList().concat(s),data:c.getData()})}(e,s,o))):u.push(e)});var g=r.createFromArray(u);return c&&(g=function(e,t,n,r){return e.withMutations(function(t){var a=n.getKey(),o=r.getKey(),i=n.getNextSiblingKey(),s=n.getParentKey(),c=function(e,t){var n=e.getKey(),r=e,a=[];for(t.get(n)&&a.push(n);r&&r.getNextSiblingKey();){var o=r.getNextSiblingKey();if(!o)break;a.push(o),r=t.get(o)}return a}(r,e),u=c[c.length-1];if(t.get(o)?(t.setIn([a,"nextSibling"],o),t.setIn([o,"prevSibling"],a)):(t.setIn([a,"nextSibling"],r.getNextSiblingKey()),t.setIn([r.getNextSiblingKey(),"prevSibling"],a)),t.setIn([u,"nextSibling"],i),i&&t.setIn([i,"prevSibling"],u),c.forEach(function(e){return t.setIn([e,"parent"],s)}),s){var d=e.get(s).getChildKeys(),p=d.indexOf(a)+1,f=d.toArray();f.splice.apply(f,[p,0].concat(c)),t.setIn([s,"children"],l(f))}})}(g,0,p,f)),e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:m,anchorOffset:b,focusKey:m,focusOffset:b,isBackward:!1})})};e.exports=function(e,t,n){t.isCollapsed()||s(!1);var r=e.getBlockMap(),o=c(n),l=t.getStartKey(),d=t.getStartOffset(),p=r.get(l);return p instanceof a&&(p.getChildKeys().isEmpty()||s(!1)),1===o.size?function(e,t,n,r,a,o){var s=n.get(a),c=s.getText(),l=s.getCharacterList(),u=a,d=o+r.getText().length,p=s.merge({text:c.slice(0,o)+r.getText()+c.slice(o),characterList:i(l,r.getCharacterList(),o),data:r.getData()});return e.merge({blockMap:n.set(a,p),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d,isBackward:!1})})}(e,t,r,o.first(),l,d):u(e,t,r,o,l,d)}},function(e,t,n){"use strict";var r=n(1784),a=n(1891),o=n(382),i=r.Repeat;e.exports=function(e,t,n,r){t.isCollapsed()||o(!1);var s=n.length;if(!s)return e;var c=e.getBlockMap(),l=t.getStartKey(),u=t.getStartOffset(),d=c.get(l),p=d.getText(),f=d.merge({text:p.slice(0,u)+n+p.slice(u,d.getLength()),characterList:a(d.getCharacterList(),i(r,s).toList(),u)}),h=u+s;return e.merge({blockMap:c.set(l,f),selectionAfter:t.merge({anchorOffset:h,focusOffset:h})})}},function(e,t,n){"use strict";var r=n(1784).Map;e.exports=function(e,t,n){var a=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),s=i.toSeq().skipUntil(function(e,t){return t===a}).takeUntil(function(e,t){return t===o}).concat(r([[o,i.get(o)]])).map(n);return e.merge({blockMap:i.merge(s),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(1788),a=n(1784),o=n(1892),i=(a.List,a.Map),s=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},c=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var a=r.getParentKey();a&&n.push(a),r=a?t.get(a):null}return n},l=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},u=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},d=function(e,t,n,r){return e.withMutations(function(e){s(t.getKey(),e,function(n){return n.merge({nextSibling:l(t,e,r),prevSibling:u(t,e,r)})}),s(n.getKey(),e,function(t){return t.merge({nextSibling:l(n,e,r),prevSibling:u(n,e,r)})}),c(t.getKey(),r).forEach(function(t){return s(t,e,function(t){return t.merge({children:t.getChildKeys().filter(function(t){return e.get(t)}),nextSibling:l(t,e,r),prevSibling:u(t,e,r)})})}),s(t.getNextSiblingKey(),e,function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})}),s(t.getPrevSiblingKey(),e,function(n){return n.merge({nextSibling:l(t,e,r)})}),s(n.getNextSiblingKey(),e,function(t){return t.merge({prevSibling:u(n,e,r)})}),s(n.getPrevSiblingKey(),e,function(e){return e.merge({nextSibling:n.getNextSiblingKey()})}),c(n.getKey(),r).forEach(function(t){s(t,e,function(t){return t.merge({children:t.getChildKeys().filter(function(t){return e.get(t)}),nextSibling:l(t,e,r),prevSibling:u(t,e,r)})})}),function(e,t){var n=[];if(!e)return n;for(var r=o(e,t);r&&t.get(r);){var a=t.get(r);n.push(r),r=a.getParentKey()?o(a,t):null}return n}(n,r).forEach(function(t){return s(t,e,function(t){return t.merge({nextSibling:l(t,e,r),prevSibling:u(t,e,r)})})})})},p=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),a=e.slice(n);e=r.concat(a).toList()}return e};e.exports=function(e,t){if(t.isCollapsed())return e;var n=e.getBlockMap(),a=t.getStartKey(),s=t.getStartOffset(),l=t.getEndKey(),u=t.getEndOffset(),f=n.get(a),h=n.get(l),b=f instanceof r,m=[];if(b){var v=h.getChildKeys(),g=c(l,n);h.getNextSiblingKey()&&(m=m.concat(g)),v.isEmpty()||(m=m.concat(g.concat([l]))),m=m.concat(c(o(h,n),n))}var y=void 0;y=f===h?p(f.getCharacterList(),s,u):f.getCharacterList().slice(0,s).concat(h.getCharacterList().slice(u));var O=f.merge({text:f.getText().slice(0,s)+h.getText().slice(u),characterList:y}),j=n.toSeq().skipUntil(function(e,t){return t===a}).takeUntil(function(e,t){return t===l}).filter(function(e,t){return-1===m.indexOf(t)}).concat(i([[l,null]])).map(function(e,t){return t===a?O:null}),w=n.merge(j).filter(function(e){return!!e});return b&&(w=d(w,f,h,n)),e.merge({blockMap:w,selectionBefore:t,selectionAfter:t.merge({anchorKey:a,anchorOffset:s,focusKey:a,focusOffset:s,isBackward:!1})})}},function(e,t,n){"use strict";var r=n(1788),a=n(1784),o=n(1792),i=n(382),s=a.List,c=a.Map,l=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}};e.exports=function(e,t){t.isCollapsed()||i(!1);var n=t.getAnchorKey(),a=t.getAnchorOffset(),u=e.getBlockMap(),d=u.get(n),p=d.getText(),f=d.getCharacterList(),h=o(),b=d instanceof r,m=d.merge({text:p.slice(0,a),characterList:f.slice(0,a)}),v=m.merge({key:h,text:p.slice(a),characterList:f.slice(a),data:c()}),g=u.toSeq().takeUntil(function(e){return e===d}),y=u.toSeq().skipUntil(function(e){return e===d}).rest(),O=g.concat([[n,m],[h,v]],y).toOrderedMap();return b&&(d.getChildKeys().isEmpty()||i(!1),O=function(e,t,n){return e.withMutations(function(e){var r=t.getKey(),a=n.getKey();l(t.getParentKey(),e,function(e){var t=e.getChildKeys(),n=t.indexOf(r)+1,o=t.toArray();return o.splice(n,0,a),e.merge({children:s(o)})}),l(t.getNextSiblingKey(),e,function(e){return e.merge({prevSibling:a})}),l(r,e,function(e){return e.merge({nextSibling:a})}),l(a,e,function(e){return e.merge({prevSibling:r})})})}(O,m,v)),e.merge({blockMap:O,selectionBefore:t,selectionAfter:t.merge({anchorKey:h,anchorOffset:0,focusKey:h,focusOffset:0,isBackward:!1})})}},function(e,t,n){"use strict";var r,a=n(1784),o=n(1999),i=n(1789),s=a.OrderedMap,c={getDirectionMap:function(e,t){r?r.reset():r=new o;var n=e.getBlockMap(),c=n.valueSeq().map(function(e){return i(r).getDirection(e.getText())}),l=s(n.keySeq().zip(c));return null!=t&&a.is(t,l)?t:l}};e.exports=c},function(e,t,n){"use strict";var r=n(1895),a=n(1834),o=n(382),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?a.isStrong(t)||o(!1):t=a.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=r.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=i},function(e,t,n){"use strict";var r=n(1788),a=n(1784),o=n(1892),i=n(382),s=a.OrderedMap,c=a.List,l=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},u=function(e,t,n,r,a){if(!a)return e;var o="after"===r,i=t.getKey(),s=n.getKey(),u=t.getParentKey(),d=t.getNextSiblingKey(),p=t.getPrevSiblingKey(),f=n.getParentKey(),h=o?n.getNextSiblingKey():s,b=o?s:n.getPrevSiblingKey();return e.withMutations(function(e){l(u,e,function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(i))})}),l(p,e,function(e){return e.merge({nextSibling:d})}),l(d,e,function(e){return e.merge({prevSibling:p})}),l(h,e,function(e){return e.merge({prevSibling:i})}),l(b,e,function(e){return e.merge({nextSibling:i})}),l(f,e,function(e){var t=e.getChildKeys(),n=t.indexOf(s),r=o?n+1:0!==n?n-1:0,a=t.toArray();return a.splice(r,0,i),e.merge({children:c(a)})}),l(i,e,function(e){return e.merge({nextSibling:h,prevSibling:b,parent:f})})})};e.exports=function(e,t,n,a){"replace"===a&&i(!1);var c=n.getKey(),l=t.getKey();l===c&&i(!1);var d=e.getBlockMap(),p=t instanceof r,f=[t],h=d.delete(l);p&&(f=[],h=d.withMutations(function(e){var n=t.getNextSiblingKey(),r=o(t,e);e.toSeq().skipUntil(function(e){return e.getKey()===l}).takeWhile(function(e){var t=e.getKey(),a=t===l,o=n&&t!==n,i=!n&&e.getParentKey()&&(!r||t!==r);return!!(a||o||i)}).forEach(function(t){f.push(t),e.delete(t.getKey())})}));var b=h.toSeq().takeUntil(function(e){return e===n}),m=h.toSeq().skipUntil(function(e){return e===n}).skip(1),v=f.map(function(e){return[e.getKey(),e]}),g=s();if("before"===a){var y=e.getBlockBefore(c);y&&y.getKey()===t.getKey()&&i(!1),g=b.concat([].concat(v,[[c,n]]),m).toOrderedMap()}else if("after"===a){var O=e.getBlockAfter(c);O&&O.getKey()===l&&i(!1),g=b.concat([[c,n]].concat(v),m).toOrderedMap()}return e.merge({blockMap:u(g,t,n,a,p),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:l,focusKey:l})})}},function(e,t,n){"use strict";var r=n(1784).List,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._decorators=t.slice()}return e.prototype.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach(function(r,a){var o=0;(0,r.strategy)(e,function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(function(e,t,n,r){for(var a=t;a<n;a++)e[a]=r}(n,e,t,a+"."+o),o++)},t)}),r(n)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=a},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var a=n(1835),o=n(1896),i=n(2003),s=n(2004),c=n(2027),l=n(2030),u=n(2062),d=n(1785),p=n(1),f=n(31),h=n(1900),b=n(1839),m=n(1791),v=n(1798),g=n(384),y=n(1792),O=n(1913),j=n(1840),w=n(382),C=n(1789),k=m.isBrowser("IE"),S=!k,N={edit:l,composite:i,drag:c,cut:null,render:null},A=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.focus=function(e){var t=r.props.editorState,n=t.getSelection().getHasFocus(),a=f.findDOMNode(r.editor);if(a){var o=b.getScrollParent(a),i=e||j(o),s=i.x,c=i.y;a instanceof HTMLElement||w(!1),a.focus(),o===window?window.scrollTo(s,c):h.setTop(o,c),n||r.update(d.forceSelection(t,t.getSelection()))}},r.blur=function(){var e=f.findDOMNode(r.editor);e instanceof HTMLElement||w(!1),e.blur()},r.setMode=function(e){r._handler=N[e]},r.exitCurrentMode=function(){r.setMode("edit")},r.restoreEditorDOM=function(e){r.setState({contentsKey:r.state.contentsKey+1},function(){r.focus(e)})},r.setClipboard=function(e){r._clipboard=e},r.getClipboard=function(){return r._clipboard},r.update=function(e){r._latestEditorState=e,r.props.onChange(e)},r.onDragEnter=function(){r._dragCount++},r.onDragLeave=function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()},r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=n.editorKey||y(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=n.editorState,r._latestCommittedEditorState=n.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},r.state={contentsKey:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&r(t,n)}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:C(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return p.createElement(u,e)}return null},t.prototype.render=function(){var e=this,t=this.props,n=t.blockRenderMap,a=t.blockRendererFn,i=t.blockStyleFn,c=t.customStyleFn,l=t.customStyleMap,u=t.editorState,d=t.readOnly,f=t.textAlignment,h=t.textDirectionality,b=v({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===f,"DraftEditor/alignRight":"right"===f,"DraftEditor/alignCenter":"center"===f}),m=this.props.role||"textbox",g="combobox"===m?!!this.props.ariaExpanded:null,y={blockRenderMap:n,blockRendererFn:a,blockStyleFn:i,customStyleMap:r({},o,l),customStyleFn:c,editorKey:this._editorKey,editorState:u,key:"contents"+this.state.contentsKey,textDirectionality:h};return p.createElement("div",{className:b},this._renderPlaceholder(),p.createElement("div",{className:v("DraftEditor/editorContainer"),ref:function(t){return e.editorContainer=t}},p.createElement("div",{"aria-activedescendant":d?null:this.props.ariaActiveDescendantID,"aria-autocomplete":d?null:this.props.ariaAutoComplete,"aria-controls":d?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":d?null:g,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:v({notranslate:!d,"public/DraftEditor/content":!0}),contentEditable:!d,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(t){return e.editor=t},role:d?null:m,spellCheck:S&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},p.createElement(s,y))))},t.prototype.componentDidMount=function(){this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)},t.prototype.componentWillUpdate=function(e){this._blockSelectEvents=!0,this._latestEditorState=e.editorState},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestCommittedEditorState=this.props.editorState},t}(p.Component);A.defaultProps={blockRenderMap:a,blockRendererFn:g.thatReturnsNull,blockStyleFn:g.thatReturns(""),keyBindingFn:O,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},e.exports=A},function(e,t,n){"use strict";var r=n(1793),a=n(1786),o=n(1785),i=n(1836),s=n(1837),c=n(1807),l=n(1897),u=!1,d=!1,p="",f={onBeforeInput:function(e,t){p=(p||"")+t.data},onCompositionStart:function(e){d=!0},onCompositionEnd:function(e){u=!1,d=!1,setTimeout(function(){u||f.resolveComposition(e)},20)},onKeyDown:function(e,t){if(!d)return f.resolveComposition(e),void e._onKeyDown(t);t.which!==i.RIGHT&&t.which!==i.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===i.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!d){u=!0;var t=p;p="";var n=o.set(e._latestEditorState,{inCompositionMode:!1}),i=n.getCurrentInlineStyle(),f=s(n.getCurrentContent(),n.getSelection()),h=!t||l(n)||i.size>0||null!==f;if(h&&e.restoreEditorDOM(),e.exitCurrentMode(),t){if(r.draft_handlebeforeinput_composed_text&&e.props.handleBeforeInput&&c(e.props.handleBeforeInput(t,n)))return;var b=a.replaceText(n.getCurrentContent(),n.getSelection(),t,i,f);e.update(o.push(n,b,"insert-characters"))}else h&&e.update(o.set(n,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=f},function(e,t,n){"use strict";var r=n(2005);e.exports=r},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var a=n(1898),o=n(1818),i=(n(1785),n(1)),s=n(1798),c=n(2026),l=n(1789),u=function(e,t,n,r){return s({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),a=t.isInCompositionMode(),o=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||a&&o)return!1;var i=t.getCurrentContent(),s=n.getCurrentContent(),c=t.getDecorator(),l=n.getDecorator();return a!==o||i!==s||c!==l||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,s=e.blockStyleFn,d=e.customStyleMap,p=e.customStyleFn,f=e.editorState,h=e.editorKey,b=e.textDirectionality,m=f.getCurrentContent(),v=f.getSelection(),g=f.mustForceSelection(),y=f.getDecorator(),O=l(f.getDirectionMap()),j=m.getBlocksAsArray(),w=[],C=null,k=null,S=0;S<j.length;S++){var N=j[S],A=N.getKey(),T=N.getType(),_=n(N),E=void 0,x=void 0,I=void 0;_&&(E=_.component,x=_.props,I=_.editable);var M=b||O.get(A),R=o.encode(A,0,0),D={contentState:m,block:N,blockProps:x,blockStyleFn:s,customStyleMap:d,customStyleFn:p,decorator:y,direction:M,forceSelection:g,key:A,offsetKey:R,selection:v,tree:f.getBlockTree(A)},L=t.get(T)||t.get("unstyled"),P=L.wrapper,B=L.element||t.get("unstyled").element,z=N.getDepth(),q="";if(s&&(q=s(N)),"li"===B)q=c(q,u(T,z,k!==P||null===C||z>C,M));var F=E||a,U={className:q,"data-block":!0,"data-editor":h,"data-offset-key":R,key:A};void 0!==I&&(U=r({},U,{contentEditable:I,suppressContentEditableWarning:!0}));var V=i.createElement(B,U,i.createElement(F,D));w.push({block:V,wrapperTemplate:P,key:A,offsetKey:R}),C=P?N.getDepth():null,k=P}for(var Q=[],H=0;H<w.length;){var K=w[H];if(K.wrapperTemplate){var W=[];do{W.push(w[H].block),H++}while(H<w.length&&w[H].wrapperTemplate===K.wrapperTemplate);var G=i.cloneElement(K.wrapperTemplate,{key:K.key+"-wrap","data-offset-key":K.offsetKey},W);Q.push(G)}else Q.push(K.block),H++}return i.createElement("div",{"data-contents":"true"},Q)},t}(i.Component);e.exports=d},function(e,t,n){"use strict";var r=n(478);var a=n(2007),o=n(1),i=n(31),s=n(382),c=n(2014),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,a=t.text,o=n.getKey(),l=r+a.length;if(e.hasEdgeWithin(o,r,l)){var u=i.findDOMNode(this);u||s(!1);var d=u.firstChild;d||s(!1);var p=void 0;d.nodeType===Node.TEXT_NODE?p=d:"BR"===d.tagName?p=u:(p=d.firstChild)||s(!1),c(e,p,o,r,l)}}},t.prototype.shouldComponentUpdate=function(e){var t=i.findDOMNode(this.leaf);return t||s(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this,t=this.props.block,n=this.props.text;n.endsWith("\n")&&this.props.isLast&&(n+="\n");var i=this.props,s=i.customStyleMap,c=i.customStyleFn,l=i.offsetKey,u=i.styleSet,d=u.reduce(function(e,t){var n={},a=s[t];return void 0!==a&&e.textDecoration!==a.textDecoration&&(n.textDecoration=[e.textDecoration,a.textDecoration].join(" ").trim()),r(e,a,n)},{});if(c){var p=c(u,t);d=r(d,p)}return o.createElement("span",{"data-offset-key":l,ref:function(t){return e.leaf=t},style:d},o.createElement(a,null,n))},t}(o.Component);e.exports=l},function(e,t,n){"use strict";var r=n(1),a=n(31),o=n(1791),i=n(382),s=o.isBrowser("IE <= 11");var c=s?r.createElement("span",{key:"A","data-text":"true"},"\n"):r.createElement("br",{key:"A","data-text":"true"}),l=s?r.createElement("span",{key:"B","data-text":"true"},"\n"):r.createElement("br",{key:"B","data-text":"true"}),u=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._forceFlag=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=a.findDOMNode(this),n=""===e.children;return t instanceof Element||i(!1),n?!function(e){return s?"\n"===e.textContent:"BR"===e.tagName}(t):t.textContent!==e.children},t.prototype.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.prototype.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){return""===this.props.children?this._forceFlag?c:l:r.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},t}(r.Component);e.exports=u},function(e,t,n){"use strict";var r=n(2009),a="Unknown",o={"Mac OS":"Mac OS X"};var i,s=(new r).getResult(),c=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(s.browser.version),l={browserArchitecture:s.cpu.architecture||a,browserFullVersion:s.browser.version||a,browserMinorVersion:c.minor||a,browserName:s.browser.name||a,browserVersion:s.browser.major||a,deviceName:s.device.model||a,engineName:s.engine.name||a,engineVersion:s.engine.version||a,platformArchitecture:s.cpu.architecture||a,platformName:(i=s.os.name,o[i]||i||a),platformVersion:s.os.version||a,platformFullVersion:s.os.version||a};e.exports=l},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(a,o){"use strict";var i="model",s="name",c="type",l="vendor",u="version",d="mobile",p="tablet",f={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(e,t){for(var n,r,a,o,i,s,c=0;c<t.length&&!i;){var l=t[c],u=t[c+1];for(n=r=0;n<l.length&&!i;)if(i=l[n++].exec(e))for(a=0;a<u.length;a++)s=i[++r],"object"==typeof(o=u[a])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(f.has(t[n][r],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,h.str,b.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,l,[c,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[l,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,i,[c,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[i,[l,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[i,h.str,b.device.amazon.model],[l,"Amazon"],[c,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,l,[c,d]],[/\((ip[honed|\s\w*]+);/i],[i,[l,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,i,[c,d]],[/\(bb10;\s(\w+)/i],[i,[l,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[l,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[i,"Xperia Tablet"],[c,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[i,[l,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,i,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[l,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[l,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[l,h.str,b.device.sprint.vendor],[i,h.str,b.device.sprint.model],[c,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,i,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[i,/_/g," "],[c,d]],[/(nexus\s9)/i],[i,[l,"HTC"],[c,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[i,[l,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,i,[c,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[l,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[l,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[l,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[l,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,f.trim],[i,f.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[l,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[l,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],i,[c,p]],[/smart-tv.+(samsung)/i],[l,[c,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],i,[c,d]],[/sie-(\w*)/i],[i,[l,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],i,[c,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[l,"Acer"],[c,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[l,"LG"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],i,[c,p]],[/(lg) netcast\.tv/i],[l,i,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[l,"LG"],[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[l,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[l,i,[c,d]],[/((pebble))app\/[\d\.]+\s/i],[l,i,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,i,[c,d]],[/crkey/i],[[i,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[i,[l,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)\s/i],[i,[l,"Google"],[c,p]],[/android.+;\s(pixel xl|pixel)\s/i],[i,[l,"Google"],[c,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[l,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[l,"Xiaomi"],[c,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[l,"Meizu"],[c,p]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[i,[l,"OnePlus"],[c,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[l,"RCA"],[c,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[i,[l,"Dell"],[c,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[l,"Verizon"],[c,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],i,[c,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[l,"NuVision"],[c,p]],[/android.+;\s(k88)\sbuild/i],[i,[l,"ZTE"],[c,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[l,"Swiss"],[c,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[l,"Swiss"],[c,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[l,"Zeki"],[c,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],i,[c,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[i,[l,"Insignia"],[c,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[i,[l,"NextBook"],[c,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],i,[c,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],i,[c,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[l,"Envizen"],[c,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,i,[c,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[l,"MachSpeed"],[c,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,i,[c,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[l,"Rotor"],[c,p]],[/android.+(KS(.+))\s+build/i],[i,[l,"Amazon"],[c,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,i,[c,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,f.lowerize],l,i],[/(android[\w\.\s\-]{0,9});.+build/i],[i,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,h.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,h.str,b.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},v=function e(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof e))return new e(t,n).getResult();var r=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?f.extend(m,n):m;return this.getBrowser=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,o.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return h.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:s,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:i,VENDOR:l,TYPE:c,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:u},v.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=v),t.UAParser=v):n(2010)?void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r):a&&(a.UAParser=v);var g=a&&(a.jQuery||a.Zepto);if(void 0!==g){var y=new v;g.ua=y.getResult(),g.ua.get=function(){return y.getUA()},g.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)g.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var r=n(382),a=/\./,o=/\|\|/,i=/\s+\-\s+/,s=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,c=/^(\d*)(.*)/;function l(e,t){var n=e.split(o);return n.length>1?n.some(function(e){return O.contains(e,t)}):function(e,t){var n=e.split(i);if(n.length>0&&n.length<=2||r(!1),1===n.length)return u(n[0],t);var a=n[0],o=n[1];return b(a)&&b(o)||r(!1),u(">="+a,t)&&u("<="+o,t)}(e=n[0].trim(),t)}function u(e,t){if(""===(e=e.trim()))return!0;var n,r=t.split(a),o=f(e),i=o.modifier,s=o.rangeComponents;switch(i){case"<":return d(r,s);case"<=":return-1===(n=y(r,s))||0===n;case">=":return p(r,s);case">":return function(e,t){return 1===y(e,t)}(r,s);case"~":case"~>":return function(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var a=r.length-1,o=parseInt(r[a],10);h(o)&&(r[a]=o+1+"");return p(e,n)&&d(e,r)}(r,s);default:return function(e,t){return 0===y(e,t)}(r,s)}}function d(e,t){return-1===y(e,t)}function p(e,t){var n=y(e,t);return 1===n||0===n}function f(e){var t=e.split(a),n=t[0].match(s);return n||r(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function h(e){return!isNaN(e)&&isFinite(e)}function b(e){return!f(e).modifier}function m(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function v(e,t){var n=e.match(c)[1],r=t.match(c)[1],a=parseInt(n,10),o=parseInt(r,10);return h(a)&&h(o)&&a!==o?g(a,o):g(e,t)}function g(e,t){return typeof e!=typeof t&&r(!1),e>t?1:e<t?-1:0}function y(e,t){for(var n=function(e,t){m(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var a=n;a<e.length;a++)e[a]="0"}return m(t,e.length),[e,t]}(e,t),r=n[0],a=n[1],o=0;o<a.length;o++){var i=v(r[o],a[o]);if(i)return i}return 0}var O={contains:function(e,t){return l(e.trim(),t.trim())}};e.exports=O},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!e)return null;var a={};for(var o in e)r.call(e,o)&&(a[o]=t.call(n,e[o],o,e));return a}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";(function(t){var r=n(2015),a=n(1838),o=n(1899),i=n(382);function s(e,t){if(!e)return"[empty]";var n=function e(t,n){var r=void 0!==n?n(t):[];if(t.nodeType===Node.TEXT_NODE){var a=t.textContent.length;return document.createTextNode("[text "+a+(r.length?" | "+r.join(", "):"")+"]")}var o=t.cloneNode();1===o.nodeType&&r.length&&o.setAttribute("data-labels",r.join(", "));var i=t.childNodes;for(var s=0;s<i.length;s++)o.appendChild(e(i[s],n));return o}(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(n instanceof Element||i(!1),n.outerHTML)}function c(e,t){for(var n=e;n;){if(n instanceof Element&&n.hasAttribute("contenteditable"))return s(n,t);n=n.parentNode}return"Could not find contentEditable parent of node"}function l(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function u(e,t,n,i){var s=o();if(e.extend&&a(s,t)){n>l(t)&&r.logSelectionStateFailure({anonymizedDom:c(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(i.toJS())});var u=t===e.focusNode;try{e.extend(t,n)}catch(a){throw r.logSelectionStateFailure({anonymizedDom:c(t,function(t){var n=[];return t===s&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n}),extraParams:JSON.stringify({activeElementName:s?s.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:u,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:a?""+a:null,offset:n},null,2),selectionState:JSON.stringify(i.toJS(),null,2)}),a}}else{var d=e.getRangeAt(0);d.setEnd(t,n),e.addRange(d.cloneRange())}}function d(e,t,n,a){var o=document.createRange();n>l(t)&&r.logSelectionStateFailure({anonymizedDom:c(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(a.toJS())}),o.setStart(t,n),e.addRange(o)}e.exports=function(e,n,r,o,i){if(a(document.documentElement,n)){var s=t.getSelection(),c=e.getAnchorKey(),l=e.getAnchorOffset(),p=e.getFocusKey(),f=e.getFocusOffset(),h=e.getIsBackward();if(!s.extend&&h){var b=c,m=l;c=p,l=f,p=b,f=m,h=!1}var v=c===r&&o<=l&&i>=l,g=p===r&&o<=f&&i>=f;if(v&&g)return s.removeAllRanges(),d(s,n,l-o,e),void u(s,n,f-o,e);if(h){if(g&&(s.removeAllRanges(),d(s,n,f-o,e)),v){var y=s.focusNode,O=s.focusOffset;s.removeAllRanges(),d(s,n,l-o,e),u(s,y,O,e)}}else v&&(s.removeAllRanges(),d(s,n,l-o,e)),g&&u(s,n,f-o,e)}}}).call(this,n(47))},function(e,t,n){"use strict";e.exports={logSelectionStateFailure:function(){return null}}},function(e,t,n){"use strict";var r=n(2017);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(2019),a=n(2020);function o(e){return null==e?e:String(e)}e.exports=function(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return o(n.getPropertyValue(a(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return o(n.getPropertyValue(a(t)));if("display"===t)return"none"}return e.currentStyle?o("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[r(t)]):o(e.style&&e.style[r(t)])}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";var r=n(2022);e.exports=function(e){var t=r(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}},function(e,t,n){"use strict";var r=n(1838);e.exports=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e&&r(t,e)))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}},function(e,t,n){"use strict";var r="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=function(e){return(e=e||document).scrollingElement?e.scrollingElement:r||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}},function(e,t,n){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,n){"use strict";function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function a(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function o(){return{width:window.innerWidth||r(),height:window.innerHeight||a()}}o.withoutScrollbars=function(){return{width:r(),height:a()}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var r=1;r<n;r++)(t=arguments[r])&&(e=(e?e+" ":"")+t);return e}},function(e,t,n){"use strict";var r=n(1901),a=n(1786),o=n(1785),i=n(1841),s=n(1903),c=n(1904),l=n(1807),u=n(1789);var d={onDragEnd:function(e){e.exitCurrentMode()},onDrop:function(e,t){var n=new r(t.nativeEvent.dataTransfer),d=e._latestEditorState,f=function(e,t){var n=null,r=null;if("function"==typeof document.caretRangeFromPoint){var a=document.caretRangeFromPoint(e.x,e.y);n=a.startContainer,r=a.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=u(n),r=u(r);var o=u(i(n));return c(t,o,r,o,r)}(t.nativeEvent,d);if(t.preventDefault(),e.exitCurrentMode(),null!=f){var h=n.getFiles();if(h.length>0){if(e.props.handleDroppedFiles&&l(e.props.handleDroppedFiles(f,h)))return;s(h,function(t){t&&e.update(p(d,f,t))})}else{var b=e._internalDrag?"internal":"external";e.props.handleDrop&&l(e.props.handleDrop(f,n,b))||(e._internalDrag?e.update(function(e,t){var n=a.moveText(e.getCurrentContent(),e.getSelection(),t);return o.push(e,n,"insert-fragment")}(d,f)):e.update(p(d,f,n.getText())))}}}};function p(e,t,n){var r=a.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return o.push(e,r,"insert-fragment")}e.exports=d},function(e,t,n){"use strict";var r={isImage:function(e){return"image"===a(e)[0]},isJpeg:function(e){var t=a(e);return r.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function a(e){return e.split("/")}e.exports=r},function(e,t,n){"use strict";var r=n(382);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&r(!1),"number"!=typeof t&&r(!1),0===t||t-1 in e||r(!1),"function"==typeof e.callee&&r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),a=0;a<t;a++)n[a]=e[a];return n}(e):[e]}},function(e,t,n){"use strict";var r={onBeforeInput:n(2031),onBlur:n(2033),onCompositionStart:n(2034),onCopy:n(2035),onCut:n(2036),onDragOver:n(2037),onDragStart:n(2038),onFocus:n(2039),onInput:n(2040),onKeyDown:n(2041),onPaste:n(2055),onSelect:n(2060)};e.exports=r},function(e,t,n){"use strict";(function(t){var r=n(1893),a=n(1786),o=n(1785),i=n(1791),s=n(1837),c=n(1807),l=n(1897),u=n(1789),d=n(2032),p="'",f="/",h=i.isBrowser("Firefox");function b(e,t,n,r){var i=a.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return o.push(e,i,"insert-characters")}e.exports=function(e,n){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var a=e._latestEditorState,i=n.data;if(i)if(e.props.handleBeforeInput&&c(e.props.handleBeforeInput(i,a)))n.preventDefault();else{var m=a.getSelection(),v=m.getStartOffset(),g=m.getEndOffset(),y=m.getAnchorKey();if(!m.isCollapsed())return n.preventDefault(),void(i===a.getCurrentContent().getPlainText().slice(v,g)?e.update(o.forceSelection(a,m.merge({focusOffset:g}))):e.update(b(a,i,a.getCurrentInlineStyle(),s(a.getCurrentContent(),a.getSelection()))));var O,j=b(a,i,a.getCurrentInlineStyle(),s(a.getCurrentContent(),a.getSelection())),w=!1;if(w||(w=l(e._latestCommittedEditorState)),!w){var C=t.getSelection();if(C.anchorNode&&C.anchorNode.nodeType===Node.TEXT_NODE){var k=C.anchorNode.parentNode;w="SPAN"===k.nodeName&&k.firstChild.nodeType===Node.TEXT_NODE&&-1!==k.firstChild.nodeValue.indexOf("\t")}}if(w||(w=r.getFingerprint(a.getBlockTree(y))!==r.getFingerprint(j.getBlockTree(y))),w||(O=i,w=h&&(O==p||O==f)),w||(w=u(j.getDirectionMap()).get(y)!==u(a.getDirectionMap()).get(y)),w)return n.preventDefault(),void e.update(j);j=o.set(j,{nativelyRenderedContent:j.getCurrentContent()}),e._pendingStateFromBeforeInput=j,d(function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)})}}}).call(this,n(47))},function(e,t,n){"use strict";(function(t){n(830),e.exports=t.setImmediate}).call(this,n(47))},function(e,t,n){"use strict";(function(t){var r=n(1785),a=n(1838),o=n(1899);e.exports=function(e,n){if(o()===document.body){var i=t.getSelection(),s=e.editor;1===i.rangeCount&&a(s,i.anchorNode)&&a(s,i.focusNode)&&i.removeAllRanges()}var c=e._latestEditorState,l=c.getSelection();if(l.getHasFocus()){var u=l.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(n),e.update(r.acceptSelection(c,u))}}}).call(this,n(47))},function(e,t,n){"use strict";var r=n(1785);e.exports=function(e,t){e.setMode("composite"),e.update(r.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}},function(e,t,n){"use strict";var r=n(1905);e.exports=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(r(e._latestEditorState))}},function(e,t,n){"use strict";var r=n(1786),a=n(1785),o=n(1839),i=n(1905),s=n(1840);e.exports=function(e,t){var n=e._latestEditorState,c=n.getSelection(),l=t.target,u=void 0;if(c.isCollapsed())t.preventDefault();else{l instanceof Node&&(u=s(o.getScrollParent(l)));var d=i(n);e.setClipboard(d),e.setMode("cut"),setTimeout(function(){e.restoreEditorDOM(u),e.exitCurrentMode(),e.update(function(e){var t=r.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return a.push(e,t,"remove-range")}(n))},0)}}},function(e,t,n){"use strict";e.exports=function(e,t){e._internalDrag=!1,e.setMode("drag"),t.preventDefault()}},function(e,t,n){"use strict";e.exports=function(e){e._internalDrag=!0,e.setMode("drag")}},function(e,t,n){"use strict";var r=n(1785),a=n(1791);e.exports=function(e,t){var n=e._latestEditorState,o=n.getSelection();if(!o.getHasFocus()){var i=o.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),a.isBrowser("Chrome < 60.0.3081.0")?e.update(r.forceSelection(n,i)):e.update(r.acceptSelection(n,i))}}},function(e,t,n){"use strict";(function(t){var r=n(1793),a=n(1786),o=n(1818),i=n(1785),s=n(1791),c=n(1841),l=n(1789),u=s.isEngine("Gecko"),d="\n\n";e.exports=function(e){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=t.getSelection(),s=n.anchorNode,p=n.isCollapsed,f=s.nodeType!==Node.TEXT_NODE,h=s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.ELEMENT_NODE;if(r.draft_killswitch_allow_nontextnodes){if(f)return}else if(h)return;if(s.nodeType===Node.TEXT_NODE&&(null!==s.previousSibling||null!==s.nextSibling)){var b=s.parentNode;s.nodeValue=b.textContent;for(var m=b.firstChild;null!==m;m=m.nextSibling)m!==s&&b.removeChild(m)}var v=s.textContent,g=e._latestEditorState,y=l(c(s)),O=o.decode(y),j=O.blockKey,w=O.decoratorKey,C=O.leafKey,k=g.getBlockTree(j).getIn([w,"leaves",C]),S=k.start,N=k.end,A=g.getCurrentContent(),T=A.getBlockForKey(j),_=T.getText().slice(S,N);if(v.endsWith(d)&&(v=v.slice(0,-1)),v!==_){var E,x,I,M,R=g.getSelection(),D=R.merge({anchorOffset:S,focusOffset:N,isBackward:!1}),L=T.getEntityAt(S),P=L&&A.getEntity(L),B="MUTABLE"===(P&&P.getMutability()),z=B?"spellcheck-change":"apply-entity",q=a.replaceText(A,D,v,T.getInlineStyleAt(S),B?T.getEntityAt(S):null);if(u)E=n.anchorOffset,x=n.focusOffset,M=(I=S+Math.min(E,x))+Math.abs(E-x),E=I,x=M;else{var F=v.length-_.length;I=R.getStartOffset(),M=R.getEndOffset(),E=p?M+F:I,x=M+F}var U=q.merge({selectionBefore:A.getSelectionAfter(),selectionAfter:R.merge({anchorOffset:E,focusOffset:x})});e.update(i.push(g,U,z))}}}).call(this,n(47))},function(e,t,n){"use strict";var r=n(1786),a=n(1785),o=n(1842),i=n(1836),s=n(2042),c=n(1791),l=n(1807),u=n(2043),d=n(2045),p=n(2047),f=n(2048),h=n(2049),b=n(2050),m=n(2051),v=n(2052),g=n(2053),y=n(2054),O=o.isOptionKeyCommand,j=c.isBrowser("Chrome");e.exports=function(e,t){var n=t.which,o=e._latestEditorState;switch(n){case i.RETURN:if(t.preventDefault(),e.props.handleReturn&&l(e.props.handleReturn(t,o)))return;break;case i.ESC:return t.preventDefault(),void(e.props.onEscape&&e.props.onEscape(t));case i.TAB:return void(e.props.onTab&&e.props.onTab(t));case i.UP:return void(e.props.onUpArrow&&e.props.onUpArrow(t));case i.RIGHT:return void(e.props.onRightArrow&&e.props.onRightArrow(t));case i.DOWN:return void(e.props.onDownArrow&&e.props.onDownArrow(t));case i.LEFT:return void(e.props.onLeftArrow&&e.props.onLeftArrow(t));case i.SPACE:if(j&&O(t)){t.preventDefault();var c=r.replaceText(o.getCurrentContent(),o.getSelection()," ");return void e.update(a.push(o,c,"insert-characters"))}}var w=e.props.keyBindingFn(t);if(w)if("undo"!==w){if(t.preventDefault(),!e.props.handleKeyCommand||!l(e.props.handleKeyCommand(w,o))){var C=function(e,t){switch(e){case"redo":return a.redo(t);case"delete":return v(t);case"delete-word":return p(t);case"backspace":return m(t);case"backspace-word":return d(t);case"backspace-to-start-of-line":return u(t);case"split-block":return f(t);case"transpose-characters":return g(t);case"move-selection-to-start-of-block":return b(t);case"move-selection-to-end-of-block":return h(t);case"secondary-cut":return s.cut(t);case"secondary-paste":return s.paste(t);default:return t}}(w,o);C!==o&&e.update(C)}}else y(t,o,e.update)}},function(e,t,n){"use strict";var r=n(1786),a=n(1785),o=n(1816),i=n(1789),s=null,c={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),c=null;if(n.isCollapsed()){var l=n.getAnchorKey(),u=t.getBlockForKey(l).getLength();if(u===n.getAnchorOffset())return e;c=n.set("focusOffset",u)}else c=n;c=i(c),s=o(t,c);var d=r.removeRange(t,c,"forward");return d===t?e:a.push(e,d,"remove-range")},paste:function(e){if(!s)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),s);return a.push(e,t,"insert-fragment")}};e.exports=c},function(e,t,n){"use strict";(function(t){var r=n(1785),a=n(2044),o=n(1907),i=n(1843),s=n(1808);e.exports=function(e){var n=s(e,function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return i(e,1);var r=t.getSelection().getRangeAt(0);return r=a(r),o(e,null,r.endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState},"backward");return n===e.getCurrentContent()?e:r.push(e,n,"remove-range")}}).call(this,n(47))},function(e,t,n){"use strict";var r=n(1796),a=n(1906),o=n(382);function i(e,t){for(var n=1/0,r=1/0,a=-1/0,o=-1/0,i=0;i<e.length;i++){var s=e[i];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),r=Math.min(r,s.bottom),a=Math.max(a,s.top),o=Math.max(o,s.bottom))}return a<=r&&a-n<t&&o-r<t}function s(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}e.exports=function(e){e.collapsed||o(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var r=document.body;r||o(!1),r.appendChild(n);var a=n.getBoundingClientRect();return r.removeChild(n),a.height}(t),c=e.endContainer,l=e.endOffset;for(e.setStart(e.startContainer,0);i(a(e),n)&&(c=e.startContainer,l=e.startOffset,c.parentNode||o(!1),e.setStartBefore(c),1!==c.nodeType||"inline"===getComputedStyle(c).display););for(var u=c,d=l-1;;){for(var p=u.nodeValue,f=d;f>=0;f--)if(!(null!=p&&f>0&&r.isSurrogatePair(p,f-1))){if(e.setStart(u,f),!i(a(e),n))break;c=u,l=f}if(-1===f||0===u.childNodes.length)break;d=s(u=u.childNodes[f])}return e.setStart(c,l),e}},function(e,t,n){"use strict";var r=n(1908),a=n(1785),o=n(1843),i=n(1808);e.exports=function(e){var t=i(e,function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return o(e,1);var a=t.getStartKey(),i=e.getCurrentContent().getBlockForKey(a).getText().slice(0,n),s=r.getBackward(i);return o(e,s.length||1)},"backward");return t===e.getCurrentContent()?e:a.push(e,t,"remove-range")}},function(e,t,n){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}}},function(e,t,n){"use strict";var r=n(1908),a=n(1785),o=n(1909),i=n(1808);e.exports=function(e){var t=i(e,function(e){var t=e.getSelection(),n=t.getStartOffset(),a=t.getStartKey(),i=e.getCurrentContent().getBlockForKey(a).getText().slice(n),s=r.getForward(i);return o(e,s.length||1)},"forward");return t===e.getCurrentContent()?e:a.push(e,t,"remove-range")}},function(e,t,n){"use strict";var r=n(1786),a=n(1785);e.exports=function(e){var t=r.splitBlock(e.getCurrentContent(),e.getSelection());return a.push(e,t,"split-block")}},function(e,t,n){"use strict";var r=n(1785);e.exports=function(e){var t=e.getSelection(),n=t.getEndKey(),a=e.getCurrentContent().getBlockForKey(n).getLength();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:a,focusKey:n,focusOffset:a,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(1785);e.exports=function(e){var t=e.getSelection(),n=t.getStartKey();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(1785),a=n(1796),o=n(1843),i=n(1808);e.exports=function(e){var t=i(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),i=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[i-1];return o(e,s?a.getUTF16Length(s,0):1)},"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}},function(e,t,n){"use strict";var r=n(1785),a=n(1796),o=n(1909),i=n(1808);e.exports=function(e){var t=i(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),i=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[i];return o(e,s?a.getUTF16Length(s,0):1)},"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}},function(e,t,n){"use strict";var r=n(1786),a=n(1785),o=n(1816);e.exports=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var i,s,c=t.getAnchorKey(),l=e.getCurrentContent(),u=l.getBlockForKey(c).getLength();if(u<=1)return e;n===u?(i=t.set("anchorOffset",n-1),s=t):s=(i=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var d=o(l,i),p=r.removeRange(l,i,"backward"),f=p.getSelectionAfter(),h=f.getAnchorOffset()-1,b=f.merge({anchorOffset:h,focusOffset:h}),m=r.replaceWithFragment(p,b,d),v=a.push(e,m,"insert-fragment");return a.acceptSelection(v,s)}},function(e,t,n){"use strict";var r=n(1785);e.exports=function(e,t,n){var a=r.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(r.set(t,{nativelyRenderedContent:null})),setTimeout(function(){n(a)},0)):n(a);else{var o=a.getCurrentContent();n(r.set(a,{nativelyRenderedContent:o}))}}},function(e,t,n){"use strict";var r=n(1805),a=n(1787),o=n(1901),i=n(1786),s=n(2056),c=n(1785),l=n(1912),u=n(1837),d=n(1903),p=n(1807),f=n(2059);function h(e,t,n){var r=i.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return c.push(e,r.set("entityMap",n),"insert-fragment")}e.exports=function(e,t){t.preventDefault();var n=new o(t.clipboardData);if(!n.isRichText()){var b=n.getFiles(),m=n.getText();if(b.length>0){if(e.props.handlePastedFiles&&p(e.props.handlePastedFiles(b)))return;return void d(b,function(t){if(t=t||m){var n=e._latestEditorState,o=f(t),d=a.create({style:n.getCurrentInlineStyle(),entity:u(n.getCurrentContent(),n.getSelection())}),p=l.getCurrentBlockType(n),h=s.processText(o,d,p),b=r.createFromArray(h),v=i.replaceWithFragment(n.getCurrentContent(),n.getSelection(),b);e.update(c.push(n,v,"insert-fragment"))}})}}var v=[],g=n.getText(),y=n.getHTML(),O=e._latestEditorState;if(!e.props.handlePastedText||!p(e.props.handlePastedText(g,y,O))){if(g&&(v=f(g)),!e.props.stripPastedStyles){var j=e.getClipboard();if(n.isRichText()&&j){if(-1!==y.indexOf(e.getEditorKey())||1===v.length&&1===j.size&&j.first().getText()===g)return void e.update(h(e._latestEditorState,j))}else if(j&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every(function(t,n){return t.getText()===e[n]})}(v,j))return void e.update(h(e._latestEditorState,j));if(y){var w=s.processHTML(y,e.props.blockRenderMap);if(w){var C=w.contentBlocks,k=w.entityMap;if(C){var S=r.createFromArray(C);return void e.update(h(e._latestEditorState,S,k))}}}e.setClipboard(null)}if(v.length){var N=a.create({style:O.getCurrentInlineStyle(),entity:u(O.getCurrentContent(),O.getSelection())}),A=l.getCurrentBlockType(O),T=s.processText(v,N,A),_=r.createFromArray(T);e.update(h(e._latestEditorState,_))}}}},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(n(1787),n(1795)),o=n(1788),i=n(1793),s=n(1784),c=n(1910),l=n(1792),u=n(1911),d=n(1833),p=s.List,f=s.Repeat,h=i.draft_tree_data_support,b=h?o:a,m={processHTML:function(e,t){return c(e,u,t)},processText:function(e,t,n){return e.reduce(function(e,a,o){a=d(a);var i=l(),s={key:i,type:n,text:a,characterList:p(f(t,a.length))};if(h&&0!==o){var c=o-1,u=e[c]=e[c].merge({nextSibling:i});s=r({},s,{prevSibling:u.getKey()})}return e.push(new b(s)),e},[])}};e.exports=m},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),s=i.toSeq().skipUntil(function(e,t){return t===a}).takeUntil(function(e,t){return t===o}).concat([[o,i.get(o)]]).map(function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)});return i=i.merge(s),e.merge({blockMap:i,selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=/\r\n?|\n/g;e.exports=function(e){return e.split(r)}},function(e,t,n){"use strict";var r=n(1785),a=n(31),o=n(2061),i=n(382);e.exports=function(e){if(!e._blockSelectEvents&&e._latestEditorState===e.props.editorState){var t=e.props.editorState,n=a.findDOMNode(e.editorContainer);n||i(!1),n.firstChild instanceof HTMLElement||i(!1);var s=o(t,n.firstChild),c=s.selectionState;c!==t.getSelection()&&(t=s.needsRecovery?r.forceSelection(t,c):r.acceptSelection(t,c),e.update(t))}}},function(e,t,n){"use strict";(function(t){var r=n(1907);e.exports=function(e,n){var a=t.getSelection();return 0===a.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:r(e,n,a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}}).call(this,n(47))},function(e,t,n){"use strict";var r=n(1),a=n(1798),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=a({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return r.createElement("div",{className:t},r.createElement("div",{className:a("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},t}(r.Component);e.exports=o},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1795),o=n(1788),i=n(1914),s=n(2064),c=n(2065),l=n(382),u=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:c(e),entityRanges:s(e,t),data:e.getData().toObject()}},d=function(e,t){var n=t.entityMap,s=[],c={},d={},p=0;return e.getBlockMap().forEach(function(e){e.findEntityRanges(function(e){return null!==e.getEntity()},function(t){var r=e.getEntityAt(t),a=i.stringify(r);d[a]||(d[a]=r,n[a]=""+p,p++)}),function(e,t,n,i){if(e instanceof a)n.push(u(e,t));else{e instanceof o||l(!1);var s=e.getParentKey(),c=i[e.getKey()]=r({},u(e,t),{children:[]});s?i[s].children.push(c):n.push(c)}}(e,n,s,c)}),{blocks:s,entityMap:n}};e.exports=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.blocks,r=t.entityMap,a={};return Object.keys(r).forEach(function(t,n){var r=e.getEntity(i.unstringify(t));a[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}}),{blocks:n,entityMap:a}}(e,t=d(e,t))}},function(e,t,n){"use strict";var r=n(1914),a=n(1796).strlen;e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return!!e.getEntity()},function(o,i){var s=e.getText(),c=e.getEntityAt(o);n.push({offset:a(s.slice(0,o)),length:a(s.slice(o,i)),key:Number(t[r.stringify(c)])})}),n}},function(e,t,n){"use strict";var r=n(1796),a=n(1806),o=function(e,t){return e===t},i=function(e){return!!e},s=[];e.exports=function(e){var t=e.getCharacterList().map(function(e){return e.getStyle()}).toList(),n=t.flatten().toSet().map(function(n){return function(e,t,n){var s=[],c=t.map(function(e){return e.has(n)}).toList();return a(c,o,i,function(t,a){var o=e.getText();s.push({offset:r.strlen(o.slice(0,t)),length:r.strlen(o.slice(t,a)),style:n})}),s}(e,t,n)});return Array.prototype.concat.apply(s,n.toJS())}},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1795),o=n(1788),i=n(1832),s=n(1817),c=n(1793),l=n(2067),u=n(1784),d=n(1797),p=n(2068),f=n(2069),h=n(2070),b=n(1792),m=n(382),v=c.draft_tree_data_support,g=u.List,y=u.Map,O=u.OrderedMap,j=function(e,t){var n=e.key,r=e.type,a=e.data;return{text:e.text,depth:e.depth||0,type:r||"unstyled",key:n||b(),data:y(a),characterList:w(e,t)}},w=function(e,t){var n=e.text,a=e.entityRanges,o=e.inlineStyleRanges,i=a||[];return p(h(n,o||[]),f(n,i.filter(function(e){return t.hasOwnProperty(e.key)}).map(function(e){return r({},e,{key:t[e.key]})})))},C=function(e){return r({},e,{key:e.key||b()})},k=function(e,t,n){var a=t.map(function(e){return r({},e,{parentRef:n})});return e.concat(a.reverse())},S=function(e,t){var n=Array.isArray(e.blocks[0].children),i=v&&!n?l.fromRawStateToRawTreeState(e).blocks:e.blocks;return v?function(e,t){return e.map(C).reduce(function(n,a,i){Array.isArray(a.children)||m(!1);var s=a.children.map(C),c=new o(r({},j(a,t),{prevSibling:0===i?null:e[i-1].key,nextSibling:i===e.length-1?null:e[i+1].key,children:g(s.map(function(e){return e.key}))}));n=n.set(c.getKey(),c);for(var l=k([],s,c);l.length>0;){var u=l.pop(),d=u.parentRef,p=d.getChildKeys(),f=p.indexOf(u.key),h=Array.isArray(u.children);if(!h){h||m(!1);break}var b=u.children.map(C),v=new o(r({},j(u,t),{parent:d.getKey(),children:g(b.map(function(e){return e.key})),prevSibling:0===f?null:p.get(f-1),nextSibling:f===p.size-1?null:p.get(f+1)}));n=n.set(v.getKey(),v),l=k(l,b,v)}return n},O())}(i,t):function(e,t){return O(e.map(function(e){var n=new a(j(e,t));return[n.getKey(),n]}))}(n?l.fromRawTreeStateToRawState(e).blocks:i,t)};e.exports=function(e){Array.isArray(e.blocks)||m(!1);var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach(function(e){var r=t[e],a=r.type,o=r.mutability,i=r.data;n[e]=s.__create(a,o,i||{})}),n}(e),n=S(e,t),r=n.isEmpty()?new d:d.createEmpty(n.first().getKey());return new i({blockMap:n,entityMap:t,selectionBefore:r,selectionAfter:r})}},function(e,t,n){"use strict";var r=n(478)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(382),o=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},i={fromRawTreeStateToRawState:function(e){var t=e.blocks,n=[];return Array.isArray(t)||a(!1),Array.isArray(t)&&t.length?(function(e,t){for(var n=[].concat(e).reverse();n.length;){var r=n.pop();t(r);var o=r.children;Array.isArray(o)||a(!1),n=n.concat([].concat(o.reverse()))}}(t,function(e){var t=r({},e);o(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map(function(t){return t.type===e.type?r({},t,{depth:(e.depth||0)+1}):t}))}(e)),delete t.children,n.push(t)}),e.blocks=n,r({},e,{blocks:n})):e},fromRawStateToRawTreeState:function(e){var t={},n=[];return e.blocks.forEach(function(e){var i=o(e),s=e.depth||0,c=r({},e,{children:[]});if(!i)return t={},void n.push(c);if(t[s]=c,s>0){var l=t[s-1];return l||a(!1),void l.children.push(c)}n.push(c)}),r({},e,{blocks:n})}};e.exports=i},function(e,t,n){"use strict";var r=n(1787),a=n(1784).List;e.exports=function(e,t){var n=e.map(function(e,n){var a=t[n];return r.create({style:e,entity:a})});return a(n)}},function(e,t,n){"use strict";var r=n(1796).substr;e.exports=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach(function(t){for(var a=r(e,0,t.offset).length,o=a+r(e,t.offset,t.length).length,i=a;i<o;i++)n[i]=t.key}),n}},function(e,t,n){"use strict";var r=n(1784).OrderedSet,a=n(1796).substr,o=r();e.exports=function(e,t){var n=Array(e.length).fill(o);return t&&t.forEach(function(t){for(var r=a(e,0,t.offset).length,o=r+a(e,t.offset,t.length).length;r<o;)n[r]=n[r].add(t.style),r++}),n}},function(e,t,n){"use strict";var r=n(2072);e.exports=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),a=r(n),o=a.top,i=a.right,s=a.bottom,c=a.left;return 0===o&&0===i&&0===s&&0===c?null:a}},function(e,t,n){"use strict";var r=n(1906);e.exports=function(e){var t=r(e),n=0,a=0,o=0,i=0;if(t.length){if(t.length>1&&0===t[0].width){var s=t[1];n=s.top,a=s.right,o=s.bottom,i=s.left}else{var c=t[0];n=c.top,a=c.right,o=c.bottom,i=c.left}for(var l=1;l<t.length;l++){var u=t[l];0!==u.height&&0!==u.width&&(n=Math.min(n,u.top),a=Math.max(a,u.right),o=Math.max(o,u.bottom),i=Math.min(i,u.left))}}return{top:n,right:a,bottom:o,left:i,width:a-i,height:o-n}}},function(e,t,n){var r=n(2074),a=n(1915),o=n(509),i=n(515);e.exports=function(e,t,n){e=i(e);var s=(t=o(t))?a(e):0;return t&&s<t?r(t-s,n)+e:e}},function(e,t,n){var r=n(2075),a=n(828),o=n(2076),i=n(1844),s=n(1915),c=n(2079),l=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":a(t)).length;if(n<2)return n?r(t,e):t;var u=r(t,l(e/s(t)));return i(t)?o(c(u),0,e).join(""):u.slice(0,e)}},function(e,t){var n=9007199254740991,r=Math.floor;e.exports=function(e,t){var a="";if(!e||t<1||t>n)return a;do{t%2&&(a+=e),(t=r(t/2))&&(e+=e)}while(t);return a}},function(e,t,n){var r=n(516);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},function(e,t,n){var r=n(829)("length");e.exports=r},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+r+"?",r,i,s,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+u+l,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},function(e,t,n){var r=n(2080),a=n(1844),o=n(2081);e.exports=function(e){return a(e)?o(e):r(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+r+"?",r,i,s,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+u+l,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t,n){var r=n(1831)();e.exports=r},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r,a,o,i=n(22),s=n(24),c=n(4),l=n(5),u=n(8),d=n(6),p=n(7),f=n(0),h=n(1),b=n(2),m=n.n(b),v=n(18),g=n(48),y=n.n(g),O=n(23),j=n(203),w=n(64),C=n(21),k=n(1918),S=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},N={loadSwitches:j.b,showNotification:O.h,updateAnswerVote:w.J,getVoteDownReason:w.i,selectVoteDownReason:w.A,setOpposeRightStatus:j.f},A=Object(v.connect)(function(e,t){return{voteDownReason:S(e,t),opposeRightStatusIsOn:Object(j.d)(e)}},N)((o=a=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).handleVote=n.context.authRequired(function(e){var t=n.props,r=t.answer;(0,t.updateAnswerVote)(r.id,e)},C.N.vote),n.handleLoadVoteDownReason=function(){var e=n.props,t=e.answer;(0,e.getVoteDownReason)(t.id,t.question.id)},n.handleSelectVoteDownReason=function(e){var t=n.props,r=t.answer,a=t.selectVoteDownReason,o=t.showNotification;a(r.id,e.reasonId).then(function(e){o(e.payload.message)})},n.handleSetShowVoteDownReason=function(e){(0,n.props.setOpposeRightStatus)(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,r=e.opposeRightStatusIsOn,a=Object(s.a)(e,["answer","voteDownReason","opposeRightStatusIsOn"]);return Object(f.b)(k.a,Object(i.default)({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&r,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},y()(a,Object.keys(N))))}},{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}}]),t}(h.Component),a.contextTypes={currentUser:m.a.object,authRequired:m.a.func},r=o))||r;t.a=A},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),a=n(1),o=n.n(a),i=n(18),s=n(4),c=n(5),l=n(8),u=n(6),d=n(7),p=n(102),f=n.n(p),h=n(2113),b=n(16),m=(n(2094),o.a.Component,n(2)),v=n.n(m),g=n(54),y=n(1776),O=(n(2095),"dark"),j="light",w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e,t){b.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;b.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,i=t.goodsCard,s=t.className,c=n===O,l=i.header.title,u=i.body,d=u.title,p=u.cover,h=u.coverLabel,b=u.link,m=u.desc,v=u.label;return Object(r.b)(o.a.Fragment,null,Object(r.b)("section",{className:f()("GoodsCard",s)},Object(r.b)("h1",{className:"GoodsCard-header"},l),Object(r.b)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"GoodsCard-content",onClick:function(){return e.handleClick(b,d)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},Object(r.b)("div",{className:"GoodsCard-cover"},Object(r.b)("img",{className:f()("GoodsCard-cover-img",{"GoodsCard-cover-img--dark":c}),src:Object(g.imgUrl)(p,{size:"200x0"})}),Object(r.b)("div",{className:"GoodsCard-cover-label"},h)),Object(r.b)("div",{className:"GoodsCard-contnt"},Object(r.b)("div",null,Object(r.b)("h2",{className:"GoodsCard-contnt-title"},d),m&&Object(r.b)("p",{className:"GoodsCard-contnt-desc"},m)),Object(r.b)("p",{className:"GoodsCard-contnt-label"},v)),Object(r.b)("div",{className:"GoodsCard-contnt-ArrowRight"},Object(r.b)(y.a,null)))))}}]),t}(o.a.Component);w.propTypes={theme:v.a.oneOf([O,j])},w.defaultProps={theme:j};var C=w,k=n(95),S=(n(2096),function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e,t){b.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.btnInfo,t=e.btnText,n=e.link;k.default.dispatch("vip/preloadVIPHybridPopup",{url:n}),b.default.trackCardShow(this.node,{id:4241,name:t},{link:{url:n,anchor:t}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,a=t.zaInfo,o=t.className,i=n.btnText,s=n.link;return Object(r.b)("div",{className:f()("PurchaseBtn",o)},Object(r.b)("div",{className:"PurchaseBtn-mask"}),Object(r.b)("a",{className:"PurchaseBtn-HybridLink",href:s,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(s,i)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},Object(r.b)("span",{className:"PurchaseBtn-text"},i)," ",Object(r.b)(y.a,{className:"PurchaseBtn-ArrowRight"})))}}]),t}(o.a.Component));n(2097);var N=function(e){var t=e.introCard,n=e.RichTextComponent,o=e.className,i=e.zaInfo,s=t.description,c=t.contentName,l=t.authorDesc,u=Object(a.useCallback)(function(e,t){var n=e.target,r=e.target,a=r.text,o=r.href;"A"===r.tagName&&b.default.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:a},link:{url:o}})},[]);return Object(r.b)("section",{className:f()("IntroCard",o),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[i]}})},Object(r.b)("p",{className:"IntroCard-description"},s),Object(r.b)("p",{onClick:function(e){return u(e,5326)},className:"IntroCard-contentName",dangerouslySetInnerHTML:{__html:c}}),n?Object(r.b)(n,{className:"IntroCard-authorDesc",html:l,onClick:function(e){return u(e,5325)}}):Object(r.b)("p",{onClick:function(e){return u(e,5325)},className:"IntroCard-authorDesc",dangerouslySetInnerHTML:{__html:l}}))},A=(n(2098),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.videoPrompt,n=e.showLine;return Boolean(t)&&Object(r.b)("div",{className:f()("VideoPrompt",{"VideoPrompt--line":n})},Object(r.b)("div",{dangerouslySetInnerHTML:{__html:t}}))}}]),t}(o.a.Component));A.propTypes={videoPrompt:v.a.string,showLine:v.a.bool},A.defaultProps={videoPrompt:"",showLine:!1};var T=n(31),_=(n(2099),"dark"),E="light",x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e,t){b.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;b.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,i=t.goodsCard,s=t.className,c=n===_,l=i.header.title,u=i.body,d=u.title,p=u.cover,h=u.coverLabel,b=u.link,m=u.desc,v=u.label,y=u.vipNote;return Object(r.b)(o.a.Fragment,null,Object(r.b)("section",{className:f()("GoodsCardV2",s)},Object(r.b)("h1",{className:"GoodsCardV2-header"},l),Object(r.b)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"GoodsCardV2-content",onClick:function(){return e.handleClick(b,d)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},Object(r.b)("div",{className:"GoodsCardV2-cover"},Object(r.b)("img",{className:f()("GoodsCardV2-cover-img",{"GoodsCardV2-cover-img--dark":c}),src:Object(g.imgUrl)(p,{size:"200x0"})}),Object(r.b)("div",{className:"GoodsCardV2-cover-label"},h)),Object(r.b)("div",{className:"GoodsCardV2-detail"},Object(r.b)("div",null,Object(r.b)("h2",{className:"GoodsCardV2-detail-title"},d),m&&Object(r.b)("p",{className:"GoodsCardV2-detail-desc"},m),Object(r.b)("p",{className:"GoodsCardV2-detail-label"},v)),Object(r.b)("p",{className:"GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:y}})))))}}]),t}(o.a.Component);x.propTypes={theme:v.a.oneOf([_,E])},x.defaultProps={theme:E};var I=x,M=n(64),R=n(1809),D=n(25),L=n(197),P=n(150);function B(e){var t=e.id,n=e.logPaidAnswerRead,r=e.children,i=Object(a.useRef)(null);return Object(a.useEffect)(function(){var e=i.current;if(t&&e){var r=e instanceof Element?e:Object(T.findDOMNode)(e);r&&Object(L.onViewedOnce)(r,function(){return n(t)})}},[t,n]),o.a.cloneElement(r,{ref:i})}B.propTypes={id:v.a.oneOfType([v.a.number,v.a.string]).isRequired};var z=Object(D.compose)(Object(P.a)(null),Object(i.connect)(null,{logPaidAnswerRead:M.w}))(B);n.d(t,"a",function(){return F}),n.d(t,"b",function(){return U});var q=function(e,t){var n=t.answer;return{paidContent:Object(M.x)(e,n.id)}},F=Object(i.connect)(q)(function(e){var t=e.answer,n=e.paidContent,o=void 0===n?{}:n,i=e.dispatch,s=t&&"paid"===t.answerType,c=o.isRequesting,l=o.result,u=o.error,d=t.paidInfo&&t.paidInfo.hasPurchased;if(Object(a.useEffect)(function(){!s||c||u||l||i(Object(M.t)(t.id))},[t.id,i,u,s,c,o,l]),!s||!l)return null;var p=l.isNew,f=l.goodsCard,h=l.btnInfo,b=l.zaInfo;return Object(r.b)(a.Fragment,null,Object(r.b)(z,{id:t.id},Object(r.b)("div",null)),!d&&h&&Object(r.b)(S,{btnInfo:h,zaInfo:b}),p?Object(r.b)(I,{className:"AnswerItem-GoodsCard",goodsCard:f,zaInfo:b}):Object(r.b)(C,{className:"AnswerItem-GoodsCard",goodsCard:f,zaInfo:b}))}),U=Object(i.connect)(q)(function(e){var t,n=e.answer,a=void 0===n?{}:n,o=e.paidContent;if(!(a&&"paid"===a.answerType)||!(null==o?void 0:null===(t=o.result)||void 0===t?void 0:t.introCard))return null;var i=o.result,s=i.introCard,c=i.zaInfo;return Object(r.b)(N,{className:"AnswerItem-IntroCard",introCard:s,RichTextComponent:R.a,zaInfo:c})})},function(e,t,n){"use strict";var r=n(29),a=n(0),o=n(1),i=n.n(o),s=n(18),c=n(44),l=n(27),u=n(479),d=n(11),p=n.n(d),f=n(15),h=n(19),b=n.n(h),m=n(2231),v=n(2232);n(2084);var g=function(e){var t=e.style,n=e.className,a=e.id,s=e.name,c=e.size,l=void 0===c?20:c,u=e.checked,d=e.onChange,p=e.disabled,f=Object(o.useState)(!1),h=Object(r.a)(f,2),g=h[0],y=h[1];return i.a.createElement("label",{style:t,className:b()("Checkbox",n,{"Checkbox--focused":g,"Checkbox--disabled":p,"Checkbox--checked":Boolean(u)})},u?i.a.createElement(m.a,{size:l,className:"Checkbox-iconOn"}):i.a.createElement(v.a,{size:l,className:"Checkbox-iconOff"}),i.a.createElement("input",{className:"Checkbox-input",id:a,name:s,type:"checkbox",checked:u,onFocus:function(){return y(!0)},onBlur:function(){return y(!1)},onChange:d,disabled:p}))},y=n(2175),O=n(1824),j=n(1776);n(2085);var w=function(e){var t=e.children,n=e.buttonText,r=e.onClick;return Object(a.b)("div",{className:"MCNSettingItem",onClick:r},t,Object(a.b)("button",{className:p()("MCNSettingItem-button",{"MCNSettingItem-button--withText":n})},n,Object(a.b)(j.a,{size:18})))};n(2086);function C(e){var t=e.complete,n=e.sequence,r=e.title,o=e.children;return Object(a.b)("div",{className:"MCNFirstSettingStep"},t?Object(a.b)("div",{className:"MCNFirstSettingStep-complete"},Object(a.b)(y.a,{size:14}),"已完成"):Object(a.b)("div",{className:"MCNFirstSettingStep-header"},Object(a.b)("div",{className:"MCNFirstSettingStep-sequence"},n),Object(a.b)("div",{className:"MCNFirstSettingStep-title"},r)),o)}var k=Object(s.connect)(function(e){var t=e.mcn,n=t.bindInfo,r=t.memberCategoryList,a=Object(l.c)(e).mcnUserInfo,o=a?a.availableSource:[],i="production"===e.env.trafficSource;return{bindInfo:n,availableSource:o.filter(function(e){return!i||"taobao"!==e}),memberCategoryList:r}},{currentUserSelector:l.c,agreeContract:u.a})(function(e){var t=e.bindInfo,n=e.agreeContract,i=e.availableSource,s=e.memberCategoryList,c=e.onCategoryButtonClick,l=Object(o.useState)(!1),u=Object(r.a)(l,2),d=u[0],h=u[1],b=O.a.filter(function(e){return i.includes(e.name)});return Object(a.b)("div",{className:"MCNFirstSetting"},Object(a.b)("div",{className:"MCNFirstSetting-title"},"完成 2 步设置"),Object(a.b)("div",{className:"MCNFirstSetting-titleHint"},"首次使用好物推荐功能，请先完成相关设置，以便结算佣金。"),Object(a.b)(C,{sequence:1,title:"绑定推广帐号",complete:b.some(function(e){var n;return null===(n=t[e.name])||void 0===n?void 0:n.pid})},b.map(function(n){var r,o,i,s=n.name,c=n.callbackName,l=n.text,u=n.Logo;return Object(a.b)(w,{key:s,onClick:e[c],buttonText:!(null===(r=t[s])||void 0===r?void 0:r.pid)&&"去绑定"},Object(a.b)("div",{className:p()("MCNFirstSetting-source",{"MCNFirstSetting-source--notBind":!(null===(o=t[s])||void 0===o?void 0:o.pid)})},Object(a.b)(u,{className:"MCNFirstSetting-sourceLogo"}),l,"帐号",(null===(i=t[s])||void 0===i?void 0:i.pid)?"已绑定":"未绑定"))})),Object(a.b)(C,{sequence:2,title:"设置擅长品类",complete:s.length},Object(a.b)(w,{onClick:c,buttonText:!s.length&&"去设置"},s.length?Object(a.b)("div",{className:"MCNFirstSetting-categoryItemList"},s.map(function(e){return e.name}).join(" / ")):Object(a.b)("div",{className:"MCNFirstSetting-noCategory"},"还未设置擅长品类"))),Object(a.b)("label",{className:"MCNFirstSetting-agree"},Object(a.b)(g,{className:"MCNFirstSetting-agreeCheckbox",checked:d,onChange:function(){return h(!d)}}),"我已同意",Object(a.b)("a",{href:"https://www.zhihu.com/term/mcn",className:"MCNFirstSetting-agreeLink",target:"_blank",rel:"noopener noreferrer"},"《商品信息发布功能服务协议》")),Object(a.b)(f.c,{preset:"primary",color:"blue",size:"spread",disabled:!b.some(function(e){var n;return null===(n=t[e.name])||void 0===n?void 0:n.pid})||!s.length||!d,onClick:function(){n()}},"完成"))});n(2087);var S=Object(s.connect)(function(e){var t=e.mcn,n=t.bindInfo,r=t.memberCategoryList,a=Object(l.c)(e).mcnUserInfo,o=a?a.availableSource:[],i="production"===e.env.trafficSource;return{bindInfo:n,availableSource:o.filter(function(e){return!i||"taobao"!==e}),memberCategoryList:r}})(function(e){var t=e.bindInfo,n=e.availableSource,r=e.memberCategoryList,o=e.onCategoryButtonClick,i=O.a.filter(function(e){return n.includes(e.name)});return Object(a.b)("div",{className:"MCNEditSetting"},Object(a.b)("div",{className:"MCNEditSetting-title"},"推广设置"),Object(a.b)("div",{className:"MCNEditSetting-itemTitle"},"推广帐号"),i.map(function(n){var r,o,i,s=n.name,c=n.callbackName,l=n.text,u=n.Logo;return Object(a.b)(w,{key:s,onClick:e[c],buttonText:!(null===(r=t[s])||void 0===r?void 0:r.pid)&&"去绑定"},Object(a.b)("div",{className:p()("MCNEditSetting-source",{"MCNEditSetting-source--notBind":!(null===(o=t[s])||void 0===o?void 0:o.pid)})},Object(a.b)(u,{className:"MCNEditSetting-sourceLogo"}),l,"帐号",(null===(i=t[s])||void 0===i?void 0:i.pid)?"已绑定":"未绑定"))}),Object(a.b)("div",{className:"MCNEditSetting-itemTitle"},"擅长品类"),Object(a.b)(w,{onClick:o},Object(a.b)("div",{className:"MCNEditSetting-categoryItemList"},r.map(function(e){return e.name}).join(" / "))))}),N=n(92),A=n(105),T=n(1778),_=n(52),E=n(1916),x=n.n(E);n(2088);var I=Object(s.connect)(function(e){var t=e.mcn.bindInfo,n=Object(l.c)(e).mcnUserInfo;return{bindInfo:t,jingdongParam:null==n?void 0:n.jingdongParam}},{setBindInfo:u.j,removeBindInfo:u.h})(function(e){var t,n,s,c=e.bindInfo,l=e.setBindInfo,u=e.removeBindInfo,d=e.jingdongParam,p=e.onBack,h=Object(o.useState)((null===(t=c.jingdong)||void 0===t?void 0:t.pid)||""),b=Object(r.a)(h,2),m=b[0],v=b[1];return Object(a.b)("div",{className:"MCNJingdongSetting"},Object(a.b)(f.c,{className:"MCNJingdongSetting-backButton",preset:"plain",onClick:p},Object(a.b)(T.a,{size:36}),"返回"),Object(a.b)("div",{className:"MCNJingdongSetting-body"},Object(a.b)("div",{className:"MCNJingdongSetting-title"},"推广帐号"),Object(a.b)("img",{className:"MCNJingdongSetting-logo",src:x.a,alt:""}),Object(a.b)("div",{className:"MCNJingdongSetting-subTitle"},"京东"),(null===(n=c.jingdong)||void 0===n?void 0:n.pid)?Object(a.b)(i.a.Fragment,null,Object(a.b)("div",{className:"MCNJingdongSetting-pid"},null===(s=c.jingdong)||void 0===s?void 0:s.pid," ",Object(a.b)(f.c,{className:"MCNJingdongSetting-removeBindButton",preset:"link",onClick:function(){A.a.confirm("",{title:"确定要解绑京东 PID 吗？"}).then(function(){u("jingdong"),v("")})}},"解绑")),Object(a.b)(f.c,{className:"MCNJingdongSetting-removeBindOkButton",preset:"primary",color:"blue",size:"spread",onClick:p},"确定")):Object(a.b)(i.a.Fragment,null,Object(a.b)(N.a,{className:"MCNJingdongSetting-input",placeholder:"请输入你的 PID 信息",value:m,onChange:function(e){v(e.target.value)},spread:!0}),Object(a.b)("div",{className:"MCNJingdongSetting-inputSample"},"PID 参考格式：1001818020_0_1234567890"),Object(a.b)(_.a,{className:"MCNJingdongSetting-inputHint",preset:"link",to:"https://union.jd.com/pt/jdauthentication?p=".concat(d),target:"_blank"},"获取京东 PID"),Object(a.b)(f.c,{className:"MCNJingdongSetting-bindButton",preset:"primary",color:"blue",size:"spread",disabled:!m,onClick:function(){l("jingdong",m)}},"立即绑定"))),Object(a.b)("div",{className:"MCNJingdongSetting-hint"},Object(a.b)("div",{className:"MCNJingdongSetting-hintTitle"},"重要提示"),Object(a.b)("div",{className:"MCNJingdongSetting-hintText"},"1.请务必确认 PID 信息正确填写，错误和漏填将影响添加商品及佣金结算；"),Object(a.b)("div",{className:"MCNJingdongSetting-hintText"},"2.你可以在",Object(a.b)("a",{href:"https://www.zhihu.com/creator/profit/mcn",target:"_blank",rel:"noopener noreferrer",className:"MCNJingdongSetting-hintTextLink"},"「创作者中心-好物推荐」"),"或者",Object(a.b)("a",{href:"https://union.jd.com/login",target:"_blank",rel:"noopener noreferrer",className:"MCNJingdongSetting-hintTextLink"},"京东联盟"),"查询你的实际收入并提现。")))}),M=n(1917),R=n.n(M);n(2089);var D=Object(s.connect)(function(e){return{bindInfo:e.mcn.bindInfo}},{getBindInfo:u.d,setBindInfo:u.j,removeBindInfo:u.h})(function(e){var t,n,s,c,l=e.bindInfo,u=e.getBindInfo,d=e.removeBindInfo,p=e.onBack,h=Object(o.useState)(!1),b=Object(r.a)(h,2),m=b[0],v=b[1],g=Object(o.useRef)(null);return Object(o.useEffect)(function(){return m?g.current=setInterval(function(){u("taobao").then(function(e){e.payload.pid&&(v(!1),clearInterval(g.current))})},3e3):clearInterval(g.current),function(){return clearInterval(g.current)}},[u,m]),Object(a.b)("div",{className:"MCNTaobaoSetting"},Object(a.b)(f.c,{className:"MCNTaobaoSetting-backButton",preset:"plain",onClick:p},Object(a.b)(T.a,{size:36}),"返回"),Object(a.b)("div",{className:"MCNTaobaoSetting-body"},Object(a.b)("div",{className:"MCNTaobaoSetting-title"},"推广帐号"),(null===(t=l.taobao)||void 0===t?void 0:t.pid)&&Object(a.b)(i.a.Fragment,null,Object(a.b)(R.a,{className:"MCNTaobaoSetting-logo"}),Object(a.b)("div",{className:"MCNTaobaoSetting-subTitle"},"淘宝"),Object(a.b)("div",{className:"MCNTaobaoSetting-pid"},null===(n=l.taobao)||void 0===n?void 0:n.pid," ",Object(a.b)(f.c,{className:"MCNTaobaoSetting-removeBindButton",preset:"link",onClick:function(){A.a.confirm("",{title:"确定要解绑淘宝 PID 吗？"}).then(function(){d("taobao")})}},"解绑")),Object(a.b)(f.c,{className:"MCNTaobaoSetting-removeBindOkButton",preset:"primary",color:"blue",size:"spread",onClick:p},"确定")),!(null===(s=l.taobao)||void 0===s?void 0:s.pid)&&m&&Object(a.b)(i.a.Fragment,null,Object(a.b)("img",{className:"MCNTaobaoSetting-qrcode",alt:"",src:"https://www.zhihu.com/qrcode?url=".concat(encodeURIComponent("zhihu://mcn/setting?bind_pid_type=taobao"))}),Object(a.b)("div",{className:"MCNTaobaoSetting-qrcodeHint"},"请使用知乎客户端扫描二维码，绑定淘宝帐号，当前页面会自动刷新绑定状态。")),!(null===(c=l.taobao)||void 0===c?void 0:c.pid)&&!m&&Object(a.b)(i.a.Fragment,null,Object(a.b)(R.a,{className:"MCNTaobaoSetting-logo"}),Object(a.b)("div",{className:"MCNTaobaoSetting-subTitle"},"淘宝"),Object(a.b)(f.c,{className:"MCNTaobaoSetting-bindButton",preset:"primary",color:"blue",size:"spread",onClick:function(){v(!0)}},"去淘宝绑定账号"))),Object(a.b)("div",{className:"MCNTaobaoSetting-hint"},Object(a.b)("div",{className:"MCNTaobaoSetting-hintTitle"},"重要提示"),Object(a.b)("div",{className:"MCNTaobaoSetting-hintText"},"1.请务必确认 PID 信息正确填写，错误和漏填将影响添加商品及佣金结算；"),Object(a.b)("div",{className:"MCNTaobaoSetting-hintText"},"2.你可以在",Object(a.b)("a",{href:"https://pub.alimama.com/",target:"_blank",rel:"noopener noreferrer",className:"MCNTaobaoSetting-hintTextLink"},"淘宝联盟平台"),"查询你的实际收入并提现。")))}),L=n(9);n(2090);function P(e){var t=e.category,n=e.selected,r=e.onSelected,o=e.onUnSelected,i=t.name;return Object(a.b)("label",{className:"MCNCategoryItem"},Object(a.b)("div",{className:"MCNCategoryItem-name"},i),Object(a.b)(g,{className:"MCNCategoryItem-checkbox",checked:n,onChange:n?o:r}))}var B=Object(s.connect)(function(e){var t=e.mcn;return{memberCategoryList:t.memberCategoryList,categoryList:t.categoryList}},{getCategory:u.e,setMemberCategory:u.k})(function(e){var t=e.categoryList,n=e.getCategory,i=e.memberCategoryList,s=e.setMemberCategory,c=e.onBack,l=Object(o.useState)(i),u=Object(r.a)(l,2),d=u[0],p=u[1];return Object(o.useEffect)(function(){n()},[n]),Object(a.b)("div",{className:"MCNCategorySetting"},Object(a.b)(f.c,{className:"MCNCategorySetting-backButton",preset:"plain",onClick:c},Object(a.b)(T.a,{size:36}),"返回"),Object(a.b)("div",{className:"MCNCategorySetting-body"},Object(a.b)("div",{className:"MCNCategorySetting-title"},"擅长品类"),Object(a.b)("div",{className:"MCNCategorySetting-categoryContainer"},Object(a.b)("div",{className:"MCNCategorySetting-category"},t.map(function(e){return Object(a.b)(P,{key:e.id,category:e,selected:d.some(function(t){return t.id===e.id}),onSelected:function(){return p([].concat(Object(L.a)(d),[e]))},onUnSelected:function(){return p(d.filter(function(t){return t.id!==e.id}))}})}))),Object(a.b)(f.c,{className:"MCNCategorySetting-submitButton",preset:"primary",color:"blue",size:"spread",disabled:d.length<1||d.length>3,onClick:function(){s(d).then(function(){c()})}},"保存")),Object(a.b)("div",{className:"MCNCategorySetting-hint"},Object(a.b)("div",{className:"MCNCategorySetting-hintText"},"每个帐号最多可以设置 3 个擅长品类")))});n(2091);var z=Object(s.connect)(function(e){return{mcnUserInfo:Object(l.c)(e).mcnUserInfo}},{fillCurrentUserIfNeeded:l.e,getBindInfo:u.d,getMemberCategory:u.f})(function(e){var t=e.shown,n=e.onClose,s=e.mcnUserInfo,l=e.fillCurrentUserIfNeeded,u=e.getBindInfo,d=e.getMemberCategory,p=Object(o.useState)("home"),f=Object(r.a)(p,2),h=f[0],b=f[1];Object(o.useEffect)(function(){l(["mcn_user_info"]),u("jingdong"),u("taobao"),d()},[l,u,d]);var m=Object(o.useCallback)(function(){b("home"),n()},[n]);return Object(a.b)(c.b,{onClose:m,className:"MCNSetting-Modal"},t&&Object(a.b)(i.a.Fragment,null,"home"===h&&1===(null==s?void 0:s.status)&&Object(a.b)(k,{onJingdongButtonClick:function(){return b("jingdong")},onTaobaoButtonClick:function(){return b("taobao")},onCategoryButtonClick:function(){return b("category")}}),"home"===h&&2===(null==s?void 0:s.status)&&Object(a.b)(S,{onJingdongButtonClick:function(){return b("jingdong")},onTaobaoButtonClick:function(){return b("taobao")},onCategoryButtonClick:function(){return b("category")}}),"jingdong"===h&&Object(a.b)(I,{onBack:function(){return b("home")}}),"taobao"===h&&Object(a.b)(D,{onBack:function(){return b("home")}}),"category"===h&&Object(a.b)(B,{onBack:function(){return b("home")}})))});n.d(t,"a",function(){return z})},function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n.n(l),d=n(11),p=n.n(d),f=n(36),h=n(37);function b(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t);return n.setSeconds(r),n}var m=n(2199),v=n(387),g=n(2200);var y=n(1852);var O=n(525);var j=n(1881),w=n.n(j),C=n(2073),k=n.n(C),S=n(2082),N=n.n(S),A=n(134),T=n(1941),_=(n(2083),w()(0,24).map(function(e){return k()(e,2,"0")})),E=w()(0,60).map(function(e){return k()(e,2,"0")}),x=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={value:b(n.props.value,0)},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"handleChange",value:function(e,t){var n=this.props.onChange;this.setState({value:e}),n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.min,a=t.max,o=t.onRef,i=this.state.value;return Object(c.b)("div",{className:p()("DateTimePicker",n),ref:o},Object(c.b)(T.a,{value:i,disabledDate:function(e){return!(!r||!m.a(e,v.a(r)))||!(!a||!g.a(e,v.a(a)))},onChange:function(t){e.handleChange(N()(function(e){return function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(r),n)}(e,t.getFullYear())},function(e){return function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,r,15),i.setHours(0,0,0,0);var s=Object(y.a)(i);return n.setMonth(r,Math.min(o,s)),n}(e,t.getMonth())},function(e){return function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t);return n.setDate(r),n}(e,t.getDate())})(i),{date:t})}}),Object(c.b)(A.b,{value:O.a(i,"HH"),onChange:function(t){return e.handleChange(function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t);return n.setHours(r),n}(i,t),{hours:t})}},_.map(function(e){return Object(c.b)(A.a,{key:e,value:e})})),Object(c.b)("span",{className:"DateTimePicker-label"},"时"),Object(c.b)(A.b,{value:O.a(i,"mm"),onChange:function(t){return e.handleChange(function(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(h.a)(e),r=Object(f.a)(t);return n.setMinutes(r),n}(i,t),{minutes:t})}},E.map(function(e){return Object(c.b)(A.a,{key:e,value:e})})),Object(c.b)("span",{className:"DateTimePicker-label"},"分"))}}]),t}(u.a.Component);t.a=x},function(e,t,n){e.exports=n.p+"assets/logo.f6eef033.png"},,function(e,t,n){"use strict";var r=n(481),a=n(29),o=n(4),i=n(8),s=n(6),c=n(30),l=n(5),u=n(7),d=n(0),p=n(2),f=n.n(p),h=n(1),b=n.n(h),m=n(18),v=n(11),g=n.n(v),y=n(821),O=n.n(y),j=n(2199),w=n(36),C=n(529),k=6e4;function S(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(w.a)(t);return Object(C.a)(e,n*k)}var N=n(785),A=n(1790),T=n(153),_=n.n(T),E=n(10),x=function(e){return b.a.createElement(E.a,e,b.a.createElement("path",{d:"M7.288 6.313h9.844a2.089 2.089 0 0 1 2.056 2.456l-.71 3.977a2.089 2.089 0 0 1-2.057 1.722H8.745l.075.42c.059.332.347.573.684.573h7.022a.896.896 0 1 1 0 1.792H9.504a2.487 2.487 0 0 1-2.448-2.05L5.438 6.137a.298.298 0 0 0-.221-.236l-.842-.21a.896.896 0 0 1 .435-1.738l.841.21c.798.2 1.405.85 1.55 1.66l.087.49zm.32 1.79l.817 4.574h7.996a.298.298 0 0 0 .293-.245l.71-3.978a.298.298 0 0 0-.292-.35H7.608zm1.383 11.971a1.33 1.33 0 1 1 0-2.661 1.33 1.33 0 0 1 0 2.661zm7.113 0a1.33 1.33 0 1 1 0-2.661 1.33 1.33 0 0 1 0 2.661z"}))};x.defaultProps={name:"Cart"};var I=x,M=n(2234),R=function(e){return b.a.createElement(E.a,e,b.a.createElement("path",{d:"M12 2C6.478 2 2 6.498 2 12.013 2 17.527 6.478 22 12 22s10-4.473 10-9.987C22.025 6.498 17.547 2 12 2zm3.575 14.693s-3.677-2.45-4.135-2.8c-.458-.349-.458-.813-.458-.813l.005-5.66c0-.56.458-1.017 1.018-1.017s1.017.457 1.017 1.017l-.004 5.152 3.727 2.495c.458.305.62.99.27 1.44-.35.45-1.004.487-1.44.186z",fillRule:"evenodd"}))};R.defaultProps={name:"Time"};var D=R,L=function(e){return b.a.createElement(E.a,e,b.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};L.defaultProps={name:"Clock"};var P=L,B=n(1766),z=n(2235),q=n(15),F=n(43),U=n(56),V=n(273),Q=n(199),H=n(136),K=n(105),W=n(151),G=n(35),J=n.n(G),Y=n(2123),X=n(207),$=n(16),Z=n(2103),ee=n(2102),te=n(27),ne=n(479),re=n(44);n(2125);var ae=function(e){var t=e.className,n=e.source,r=n.Logo,o=n.text,i=e.onClick,s=Object(h.useState)(!1),c=Object(a.a)(s,2),l=c[0],u=c[1];return Object(d.b)("div",{className:g()("MCNSourceItem",t,{"MCNSourceItem--tapping":l}),onClick:i,onMouseDown:function(){return u(!0)},onMouseUp:function(){return u(!1)},onMouseLeave:function(){return u(!1)}},Object(d.b)(r,{className:"MCNSourceItem-logo"}),Object(d.b)("div",{className:"MCNSourceItem-text"},o,"商品"),Object(d.b)("div",{className:"MCNSourceItem-logoBlurContainer"},Object(d.b)(r,{className:"MCNSourceItem-logoBlur"}),Object(d.b)("div",{className:"MCNSourceItem-logoCover"})))},oe=n(1824);n(2126);var ie=Object(m.connect)(function(e){var t=Object(te.c)(e).mcnUserInfo,n=t?t.availableSource:[],r="production"===e.env.trafficSource;return{availableSource:n.filter(function(e){return!r||"taobao"!==e})}},null)(function(e){var t=e.availableSource,n=e.shown,r=e.onClose,a=e.onSelect,o=oe.a.filter(function(e){return t.includes(e.name)});return Object(d.b)(re.b,{onClose:r,className:"MCNSourceSelector-Modal",title:"商品来源"},n&&Object(d.b)("div",{className:"MCNSourceSelector-sourceList"},o.map(function(e){return Object(d.b)(ae,{className:"MCNSourceSelector-source",key:e.name,source:e,onClick:function(){a(e)}})})))}),se=n(13),ce=n(2233),le=n(92),ue=n(385);n(2127);var de=function(e){var t=e.good,n=e.shown,r=e.onClose,o=e.onSubmit,i=Object(se.camelizeKeys)(t||{}),s=i.title,c=i.originTitle,l=Object(h.useState)(s),u=Object(a.a)(l,2),p=u[0],f=u[1],b=Object(ue.stringWidth)(p.trim());return Object(d.b)(re.b,{title:"编辑商品",className:"MCNGoodEdit",size:"large",onClose:r},n&&Object(d.b)("div",{className:"MCNGoodEdit-container"},Object(d.b)("div",{className:"MCNGoodEdit-subTitle"},"商品原标题"),Object(d.b)("div",{className:"MCNGoodEdit-goodTitle"},c||s),Object(d.b)("div",{className:"MCNGoodEdit-subTitle"},"商品短标题"),Object(d.b)("div",{className:"MCNGoodEdit-subTitleHint"},"此标题将用于内容页面商品卡片的展示，最多 25 字",Object(d.b)("div",{className:g()("MCNGoodEdit-count",{"MCNGoodEdit-count--exceed":Math.ceil(b/2)>25})},Math.ceil(b/2)," / 25")),Object(d.b)(le.a,{className:"MCNGoodEdit-input",value:p,onChange:function(e){f(e.target.value)},before:Object(d.b)(ce.a,{size:24}),spread:!0,large:!0}),Object(d.b)("div",{className:"MCNGoodEdit-buttonGroup"},Object(d.b)(q.c,{className:"MCNGoodEdit-button",onClick:r},"返回"),Object(d.b)(q.c,{className:"MCNGoodEdit-button",preset:"primary",color:"blue",disabled:!b||b>50,onClick:function(){o(Object.assign({},t,{title:p.trim()}))}},"确定"))))},pe=n(9),fe=n(169),he=n.n(fe),be=n(1769),me=function(e){return b.a.createElement(E.a,e,b.a.createElement("path",{d:"M13.234 7.506l-1.13-1.13.911-.913c1.544-1.544 4.012-1.587 5.528-.07 1.513 1.512 1.466 3.991-.083 5.542l-2.678 2.678c-1.606 1.608-4.509 2.012-5.989.534l1.13-1.132c.776.774 2.688.508 3.727-.533l2.678-2.678c.934-.935.962-2.402.084-3.28-.883-.883-2.338-.857-3.266.07l-.912.912zm-2.459 9.007l1.131 1.131-.912.912c-1.543 1.544-4.011 1.587-5.528.07-1.512-1.512-1.466-3.99.084-5.542l2.676-2.674c1.609-1.608 4.513-2.01 5.991-.53l-1.132 1.13c-.774-.775-2.686-.51-3.728.532l-2.676 2.673c-.934.935-.961 2.402-.083 3.28.882.883 2.338.857 3.265-.07l.912-.912z"}))};me.defaultProps={name:"Link"};var ve=me,ge=n(1765),ye=n(1776),Oe=n(134),je=n(87),we=n(197);n(2128);function Ce(e){var t=1===String(e).length?"0".concat(e):String(e).slice(-2);return"".concat(Math.floor(e/100),".").concat(t," 元")}var ke=function(e){var t=e.good,n=e.onSelect,r=t.title,a=t.url,o=t.imgUrl,i=t.commission,s=t.price,c=t.isJdSale,l=t.isCoupon,u=b.a.createRef();return Object(h.useEffect)(function(){Object(we.onFullyViewedOnce)(u.current,document.querySelector(".MCNGoodSearch-goodListContainer"),function(){$.default.trackCardShow(u.current,{id:6104})})},[u]),Object(d.b)("div",{className:"MCNGoodItem",ref:u},Object(d.b)("img",{className:"MCNGoodItem-image",src:o,alt:""}),Object(d.b)("div",{className:"MCNGoodItem-info"},Object(d.b)("a",{className:"MCNGoodItem-title",href:"".concat(!a.startsWith("https://")&&"https://").concat(a),target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":6105},r),Object(d.b)("div",{className:"MCNGoodItem-commission"},"预计每单赚 ",Ce(i)),Object(d.b)("div",{className:"MCNGoodItem-price"},"售价 ",Ce(s),c&&Object(d.b)("div",{className:"MCNGoodItem-jingdong"},"京东自营"),l&&Object(d.b)("div",{className:"MCNGoodItem-coupon"},"券"))),Object(d.b)(q.c,{className:"MCNGoodItem-selectButton",preset:"primary",color:"blue",onClick:function(){n(t)}},"添加"))},Se=n(2129),Ne=n.n(Se),Ae=(n(2130),function(e){return/^https?:/.test(e)});function Te(e){var t=e.url,n=e.onAddUrl;return Object(h.useEffect)(function(){$.default.trackCardShow(null,{id:6106})},[]),Object(d.b)("div",{className:"MCNGoodSearch-noGood"},Object(d.b)("img",{className:"MCNGoodSearch-noGoodImage",src:Ne.a,alt:""}),Object(d.b)("div",{className:"MCNGoodSearch-noGoodHint"},"没有找到对应的商品",t&&Ae(t)&&Object(d.b)("div",{className:"MCNGoodSearch-noGoodHintUrl"},"，你可以"," ",Object(d.b)(q.c,{preset:"link",className:"MCNGoodSearch-noGoodHintUrlButton",onClick:n},"直接添加链接"))))}var _e=Object(m.connect)(function(e){var t=e.mcn;return{categoryList:t.categoryList,memberCategoryList:t.memberCategoryList}},{getCategory:ne.e,getSecondaryCategory:ne.g,getMemberCategory:ne.f,searchGood:ne.i})(function(e){var t,n=e.shown,r=e.onClose,o=e.onSetting,i=e.onSubmit,s=e.onUrlSubmit,c=e.categoryList,l=e.memberCategoryList,u=e.getCategory,p=e.getSecondaryCategory,f=e.getMemberCategory,m=e.searchGood,v=Object(h.useState)(!1),y=Object(a.a)(v,2),O=y[0],j=y[1],w=Object(h.useState)(""),C=Object(a.a)(w,2),k=C[0],S=C[1],N=Object(h.useState)(""),A=Object(a.a)(N,2),T=A[0],_=A[1],E=Object(h.useState)(null),x=Object(a.a)(E,2),I=x[0],M=x[1],R=Object(h.useState)(null),D=Object(a.a)(R,2),L=D[0],P=D[1],B=Object(h.useState)(null),z=Object(a.a)(B,2),F=z[0],U=z[1],V=Object(h.useState)(1),Q=Object(a.a)(V,2),H=Q[0],K=Q[1];Object(h.useEffect)(function(){u(),f()},[u,f]);var W=Object(h.useState)([]),G=Object(a.a)(W,2),J=G[0],Y=G[1],X=Object(h.useState)(!1),Z=Object(a.a)(X,2),ee=Z[0],te=Z[1],ne=Object(h.useState)(!1),ae=Object(a.a)(ne,2),oe=ae[0],ie=ae[1],se=Object(h.useRef)(he()(function(e){m(e).then(function(t){var n=t.payload;K(e.pageIndex+1),te(!1),Y([].concat(Object(pe.a)(J),Object(pe.a)(n.data))),ie(!n.hasMore)})},300));Object(h.useEffect)(function(){n&&(Y([]),te(!0),ie(!1),K(1),se.current({keyword:k,url:T,categoryId:I,secondaryCategoryId:L,sort:F,pageIndex:1}))},[n,k,T,I,L,F]);var ce=[].concat(Object(pe.a)(l.map(function(e){return c.find(function(t){return t.id===e.id})}).filter(Boolean).map(function(e){return Object.assign({},e,{name:"".concat(e.name,"（擅长）")})})),Object(pe.a)(c.filter(function(e){return!l.some(function(t){return t.id===e.id})})));return Object(d.b)(re.b,{onClose:r,className:"MCNGoodSearch-Modal"},n&&Object(d.b)("div",{className:"MCNGoodSearch-container"},Object(d.b)("div",{className:g()("MCNGoodSearch-searchBar",{"MCNGoodSearch-searchBar--urlInputing":T||O})},Object(d.b)(le.a,{className:"MCNGoodSearch-keywordInput",value:k,onChange:function(e){var t=e.target.value;S(t),t&&(_(""),M(null),P(null))},after:Object(d.b)(be.a,{size:20}),placeholder:"搜索商品…",grey:!0}),Object(d.b)(le.a,{className:"MCNGoodSearch-urlInput",value:T,onChange:function(e){var t=e.target.value;_(t),t&&(S(""),M(null),P(null))},onFocus:function(){return j(!0)},onBlur:function(){return j(!1)},before:Object(d.b)(ve,{size:24}),placeholder:"粘贴商品链接",grey:!0}),Object(d.b)(q.c,{className:"MCNGoodSearch-settingButton",preset:"plain",icon:ge.a,onClick:function(e){$.default.trackEvent(null,{id:6100,name:name,action:"Click"}),o(e)}})),Object(d.b)("div",{className:"MCNGoodSearch-toolBar"},Object(d.b)("div",{className:"MCNGoodSearch-category"},Object(d.b)(Oe.b,{buttonClassName:"MCNGoodSearch-categorySelectButton",value:I||null,onChange:function(e){M(e),P(null),e&&p(e)},disabled:T},Object(d.b)(Oe.a,{key:"all",value:null,text:"全部品类"}),ce.map(function(e){return Object(d.b)(Oe.a,{key:e.id,value:e.id,text:e.name})})),I&&Object(d.b)(b.a.Fragment,null,Object(d.b)(ye.a,{className:"MCNGoodSearch-secondaryCategoryArrow",size:20}),Object(d.b)(Oe.b,{buttonClassName:"MCNGoodSearch-categorySelectButton",value:L,onChange:function(e){P(e)}},Object(d.b)(Oe.a,{key:"all",value:null,text:"全部"}),((null===(t=ce.find(function(e){return e.id===I}))||void 0===t?void 0:t.secondaryCategoryList)||[]).map(function(e){return Object(d.b)(Oe.a,{key:e.id,value:e.id,text:e.name})})))),Object(d.b)("div",{className:"MCNGoodSearch-sort"},Object(d.b)(q.c,{className:"MCNGoodSearch-sortButton",preset:"secondary",color:null===F?"blue":"grey",onClick:function(e){U(null),$.default.trackEvent(e.target,{id:6103,name:"综合",action:"Click"})}},"综合排序"),Object(d.b)(q.c,{className:"MCNGoodSearch-sortButton",preset:"secondary",color:"commission"===F?"blue":"grey",onClick:function(e){U("commission"),$.default.trackEvent(e.target,{id:6103,name:"佣金额度",action:"Click"})}},"佣金额度排序"))),Object(d.b)("div",{className:"MCNGoodSearch-goodListContainer"},Object(d.b)(je.b,{className:g()("MCNGoodSearch-goodList",{"MCNGoodSearch-goodList--noGood":!ee&&0===J.length}),onLoad:function(){te(!0),m({keyword:k,url:T,categoryId:I,secondaryCategoryId:L,sort:F,pageIndex:H}).then(function(e){var t=e.payload;K(H+1),te(!1),Y([].concat(Object(pe.a)(J),Object(pe.a)(t.data))),ie(!t.hasMore)})},getContainer:function(e){return e?e.parentNode:window},isLoading:ee,placeholder:Object(d.b)(je.a,{className:"MCNGoodSearch-placeHolder"}),isDrained:oe},J.map(function(e){return Object(d.b)(ke,{key:e.skuid,good:e,onSelect:function(e){i(e);var t="";k&&(t="搜索"),T&&(t="链接粘贴"),$.default.trackEvent(null,{id:6102,name:t,action:"Click"})}})})),oe&&0===J.length&&Object(d.b)(Te,{url:T,onAddUrl:function(e){$.default.trackEvent(e.target,{id:6107,action:"Click"}),_(""),s(T)}}))))}),Ee=n(210),xe=n(1778);n(2131);var Ie=Object(m.connect)(function(e){var t=e.mcn;return{bindInfo:t.bindInfo,categoryList:t.categoryList,memberCategoryList:t.memberCategoryList}},{getCategory:ne.e,getSecondaryCategory:ne.g,getMemberCategory:ne.f,searchGood:ne.i})(function(e){var t=e.shown,n=e.onClose,r=e.bindInfo,o=e.onSetting,i=e.onSubmit,s=e.getTaobaoGood,c=Object(h.useState)(!1),l=Object(a.a)(c,2),u=l[0],p=l[1];return Object(h.useEffect)(function(){var e;!u&&(null==r?void 0:null===(e=r.taobao)||void 0===e?void 0:e.pid)&&Object(Ee.loadScript)("https://g.alicdn.com/mm/content-plugin-sdk/0.0.2/index.js").then(function(){p(!0);var e=oe.b.PC;window.MM=new window.MM_DAREN_PLUGIN({appkey:"zhihu",pid:e,subpid:r.taobao.pid,container:document.querySelector("#MCNTaobaoSearch-iframeContainer"),addClass:"MCNTaobaoSearch-iframe",keyword:"",closeTitle:!0,maxItemNum:1,color:"#F6F6F6"}),window.MM.on("selected",function(e){var t,n=e.itemList[0],r=n.itemId,a=n.title,o=n.clickUrl;i({skuid:r,title:a,url:(t=o,t&&t.startsWith("//")?"https:".concat(t):t)})}),window.MM.show()})},[u,i,s,r]),Object(d.b)(re.b,{onClose:n,className:"MCNTaobaoSearch-Modal"},t&&Object(d.b)("div",{className:"MCNTaobaoSearch-container"},Object(d.b)("div",{className:g()("MCNTaobaoSearch-topBar")},Object(d.b)(q.c,{className:"MCNTaobaoSearch-backButton",preset:"plain",onClick:n},Object(d.b)(xe.a,{size:36}),"返回"),Object(d.b)("div",{className:"MCNTaobaoSearch-title"},"精选好物"),Object(d.b)(q.c,{className:"MCNTaobaoSearch-settingButton",preset:"plain",icon:ge.a,onClick:function(e){$.default.trackEvent(null,{id:6100,name:name,action:"Click"}),o(e)}})),Object(d.b)("div",{id:"MCNTaobaoSearch-iframeContainer",className:"MCNTaobaoSearch-iframeContainer"})))});var Me=Object(m.connect)(function(e){var t=e.mcn.bindInfo,n=Object(te.c)(e).mcnUserInfo,r=n?n.availableSource:[],a="production"===e.env.trafficSource;return{bindInfo:t,mcnUserInfo:n,availableSource:r.filter(function(e){return!a||"taobao"!==e})}},{fillCurrentUserIfNeeded:te.e,getBindInfo:ne.d,generateLinkCard:ne.c})(function(e){var t=e.shown,n=e.onClose,r=e.onSubmit,o=e.onUrlSubmit,i=e.bindInfo,s=e.mcnUserInfo,c=e.availableSource,l=e.getBindInfo,u=e.fillCurrentUserIfNeeded,p=e.generateLinkCard,f=Object(h.useState)(null),b=Object(a.a)(f,2),m=b[0],v=b[1],g=Object(h.useState)(!1),y=Object(a.a)(g,2),O=y[0],j=y[1],w=Object(h.useState)(null),C=Object(a.a)(w,2),k=C[0],S=C[1],N=Object(h.useState)(!1),A=Object(a.a)(N,2),T=A[0],_=A[1];return Object(h.useEffect)(function(){var e,t;(!(null===(e=i.jingdong)||void 0===e?void 0:e.pid)&&"jingdongSearch"===m||!(null===(t=i.taobao)||void 0===t?void 0:t.pid)&&"taobaoSearch"===m)&&v("setting")},[m,i.jingdong,i.taobao]),Object(h.useEffect)(function(){u(["mcn_user_info"]),l("jingdong"),l("taobao")},[u,l]),Object(h.useEffect)(function(){if(!O&&s&&i.jingdong&&i.taobao){var e=!c.some(function(e){return i[e].pid}),t=[0,1].includes(s.status)||e,n="sourceSelector";if(1===c.length){var r=c[0];n="".concat(r,"Search"),i[r].pid||(n="setting")}t&&(n="setting"),v(n),j(n)}},[s,c,i,O]),s&&i.jingdong&&i.taobao?"setting"===m||"taobaoSetting"===m||"jingdongSetting"===m?Object(d.b)(ee.a,{shown:t,onClose:function(){[0,1].includes(s.status)||!c.some(function(e){return i[e].pid})?n():v("taobaoSetting"!==m?"jingdongSetting"!==m?O:"jingdongSearch":"taobaoSearch")}}):"sourceSelector"===m?Object(d.b)(ie,{shown:t,onClose:n,onSelect:function(e){v("".concat(e.name,"Search"))}}):"jingdongSearch"===m?Object(d.b)(_e,{shown:t,onClose:function(){1!==c.length?v("sourceSelector"):n()},onSetting:function(){v("jingdongSetting")},onSubmit:function(e){v("edit"),S(Object.assign({},e,{source:"jingdong"}))},onUrlSubmit:function(e){n(),o(e)}}):"taobaoSearch"===m?Object(d.b)(Ie,{shown:t,onClose:function(){1!==c.length?v("sourceSelector"):n()},onSetting:function(){v("taobaoSetting")},onSubmit:function(e){S(Object.assign({},e,{source:"taobao"})),v("edit")}}):"edit"===m?Object(d.b)(de,{good:k,shown:t,onClose:function(){"jingdong"===k.source&&v("jingdongSearch"),"taobao"===k.source&&v("taobaoSearch"),S(null)},onSubmit:function(e){T||(_(!0),p(e).then(function(e){var t=e.payload;r(t.data.id)}).finally(function(){v(O),S(null),_(!1)}))}}):null:null}),Re=n(480),De=n(196),Le=(n(1945),"AnswerOrg::know"),Pe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleHide=function(){J.a.set(Le,!0),n.props.onClose()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(De.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&Object(d.b)("div",null,Object(d.b)("ul",{className:"AnswerModal-list"},Object(d.b)("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),Object(d.b)("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),Object(d.b)("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),Object(d.b)(De.a,{direction:"horizontal"},Object(d.b)(q.c,{onClick:this.handleHide},"不再显示"),Object(d.b)(q.c,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return J.a.get(Le)}}]),t}(h.Component),Be="AnswerBrand::know",ze=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleHide=function(){J.a.set(Be,!0),n.props.onClose()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(re.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&Object(d.b)("div",null,Object(d.b)("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),Object(d.b)(re.a,{direction:"horizontal"},Object(d.b)(q.c,{onClick:this.handleHide},"知道了，继续回答"),Object(d.b)(q.c,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return J.a.get(Be)}}]),t}(h.Component),qe=n(2133),Fe=(n(2132),"什么是创作声明？"),Ue="创作声明是对其他知友的善意提醒，也是一种创作态度。知乎鼓励您使用「创作声明」功能，为回答添加阅读前的须知，使知友获得更好的阅读体验。该功能当前只针对部分问题开放。",Ve=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleChange=function(e){(0,n.props.onChange)(e.target.checked),$.default.trackEvent(null,{id:5603,action:"Click"})},n.handleHelpClick=function(){K.a.alert(Ue,{title:Fe,text:{ok:"我知道了"}}),$.default.trackEvent(null,{id:5604,action:"Click"})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){$.default.trackCardShow(null,{id:5602})}},{key:"render",value:function(){var e=this.props,t=e.disclaimers,n=e.checked;return Object(d.b)("div",{className:"DisclaimerEntry"},Object(d.b)("label",{className:"DisclaimerEntry-label"},Object(d.b)("input",{className:"DisclaimerEntry-input",type:"checkbox",checked:n,onChange:this.handleChange}),Object(d.b)("span",{className:"DisclaimerEntry-type"},"创作声明：",t[0].description)),Object(d.b)("span",{className:"DisclaimerEntry-help",onClick:this.handleHelpClick},Object(d.b)(qe.a,{className:"DisclaimerEntry-helpIcon",text:!0,center:!0})))}}]),t}(b.a.Component),Qe=n(117),He=(n(2134),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleChange=function(e){var t=n.props.handleChange,r=e.target.checked;$.default.trackEvent(n.circle,{id:4063,action:r?"Open":"Close"}),Promise.resolve(r||Object(Qe.a)("取消收录到圈内说",{content:"回答被收录到圈内说将会得到更多的曝光，确定要取消收录吗？"})).then(function(){return t(r)})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){$.default.trackCardShow(this,{id:4062})}},{key:"render",value:function(){var e=this,t=this.props.isChecked;return Object(d.b)("label",{className:"CircleEntry-openCircleLabel",ref:function(t){e.circle=t},htmlFor:"CircleEntry-openCircleInput"},Object(d.b)("input",{type:"checkbox",id:"CircleEntry-openCircleInput",checked:t,onChange:this.handleChange}),"收录到圈内说")}}]),t}(h.Component)),Ke=n(526),We=n(1853),Ge=n(496),Je=n(1946),Ye=n(533),Xe=n(525),$e=n(1809),Ze=n(2136),et=n.n(Ze),tt=(n(2137),{current:"当前草稿",saved:"自动保存",published:"发布过的版本"}),nt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).formatDate=function(e){return Xe.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},n.handleDraftClick=function(e){e.preventDefault()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=t.isFetching,a=t.data;return Object(d.b)("div",{className:"DraftHistory-main"},r&&Object(d.b)(H.a,{className:"DraftHistory-loading"}),!r&&a&&Object(d.b)(b.a.Fragment,null,a.draft.title&&Object(d.b)("div",{className:"DraftHistory-draftTitle"},a.draft.title),Object(d.b)($e.a,{className:"DraftHistory-draft",html:a.draft.content,onClick:this.handleDraftClick}),Object(d.b)("div",{className:"DraftHistory-actions"},Object(d.b)("div",{className:"DraftHistory-meta"},this.formatDate(a)," ",tt[a.versionType]),Object(d.b)(q.c,{className:"DraftHistory-revert",disabled:"current"===a.versionType,onClick:function(){return n(a)}},"恢复此版本"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,a=t.currentDraft,o=t.getHistory,i=t.onSelect;return n?n.isFetching&&!n.items?Object(d.b)("div",{className:"DraftHistory"},Object(d.b)(H.a,{className:"DraftHistory-loading"})):Object(d.b)("div",{className:"DraftHistory"},Object(d.b)("div",{className:"DraftHistory-side"},Object(d.b)("div",{className:"DraftHistory-title"},"历史版本"),Object(d.b)(je.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:o},Object(d.b)("div",null,n.items&&n.items.map(function(t,n){return Object(d.b)("a",{key:n,href:"#",className:g()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(e){e.preventDefault(),i(t)}},Object(d.b)("div",{className:"DraftHistory-versionDate"},e.formatDate(t)),Object(d.b)("div",{className:"DraftHistory-versionType"},tt[t.versionType]))})))),n.items&&!n.items.length&&Object(d.b)("div",{className:"DraftHistory-main"},Object(d.b)("div",{className:"DraftHistory-empty"},Object(d.b)(et.a,{className:"DraftHistory-emptyIcon"}),Object(d.b)("div",{className:"DraftHistory-emptyText"},"还没有历史版本"))),a&&this.renderCurrentDraft()):null}}]),t}(b.a.Component);nt.propTypes={history:f.a.object,currentVersion:f.a.object,currentDraft:f.a.object,onSelect:f.a.func,onRevert:f.a.func};var rt=nt,at=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={currentVersion:null},n.getHistory=function(){var e=n.props,t=e.type,r=e.id;(0,e.getHistory)(t,r)},n.handleSelect=function(e){n.setState({currentVersion:e})},n.handleRevert=function(e){var t=n.props,r=t.revert,a=t.onReverted;r(e.versionType,e.id).then(function(){a&&a(e)})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,a=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||r["".concat(o.versionType,"_").concat(o.id)]||a(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=this.state.currentVersion;return Object(d.b)(rt,{history:t,currentVersion:r,currentDraft:r?n["".concat(r.versionType,"_").concat(r.id)]:null,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),t}(b.a.Component);at.propTypes={type:f.a.string.isRequired,id:f.a.number.isRequired,onReverted:f.a.func};var ot=Object(m.connect)(function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(r)],drafts:e.draftHistory.drafts}},{getHistory:Ye.c,getDraft:Ye.b,revert:Ye.e,reset:Ye.d})(at),it=(n(2138),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleReverted=function(e){var t=n.props,r=t.onClose,a=t.onReverted;a&&a(e),r&&r(),$.default.trackEvent(null,{id:5016,action:"Click"})},n.handleClose=function(){var e=n.props.onClose;e&&e(),$.default.trackEvent(null,{id:5015,action:"Click"})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id;return Object(d.b)(re.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose},t&&Object(d.b)(ot,{type:n,id:r,onReverted:this.handleReverted}))}}]),t}(b.a.Component));it.propTypes={shown:f.a.bool.isRequired,onClose:f.a.func,type:f.a.string.isRequired,id:f.a.number.isRequired,onReverted:f.a.func},it.defaultProps={shown:!0};var st,ct,lt,ut=it,dt=n(1846),pt=n(203),ft=n(74),ht=n(64),bt=n(487),mt=n(275),vt=n(23),gt=n(512),yt=n(1938),Ot=n(2104),jt=n.n(Ot),wt=n(21);n(2139);function Ct(){var e=Object(r.a)(["草稿保存于",""]);return Ct=function(){return e},e}var kt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},St="匿名回答无法开启赞赏，请先取消匿名",Nt=2e3,At=117,Tt=function(e){return Boolean(e&&e.disclaimerInfo&&e.disclaimerInfo[0]&&"open"===e.disclaimerInfo[0].status)},_t=Object(m.connect)(function(e,t){var n=e.entities,r=n.questions,a=n.drafts,o=void 0===a?{}:a,i=n.answers,s=e.switches,c=e.question,l=Object(te.c)(e),u=Object.values(i).filter(function(e){return e.author&&e.author.urlToken===(l&&l.urlToken)})[0]||{},d=u.rewardInfo&&u.rewardInfo.tagline;return{question:r[t.question.id]||t.question,draft:o["question_".concat(t.question.id)],switches:s,rewardTagline:d,currentUser:l,isPuQuestion:Boolean(c&&c.brand&&c.brand.isPuQuestion),disclaimers:c.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null}},{addDraft:ft.b,updateDraft:ft.Y,deleteDraft:ft.i,showNotification:vt.h,updateQuestionRewardinfo:mt.n,fillCurrentUserIfNeeded:te.e,loadDisclaimers:ft.F,loadSettings:ht.v,updateSettingsDisclaimer:ht.K,loadLabel:bt.e,loadSwitches:pt.b,updateLinkCard:ne.l})((lt=ct=function(e){function t(e,n){var r;Object(o.a)(this,t),(r=Object(i.a)(this,Object(s.a)(t).call(this,e,n))).onCompositionStart=function(){r.composition=!0,r.syncDraft.cancel()},r.onCompositionEnd=function(){r.composition=!1,r.prevValue&&r.syncDraft(r.prevValue),r.prevValue=null},r.onChangeContent=function(e){r.loggingDeltaTime||(r.loggingDeltaTime=!0,r.startCompositionTime=Math.floor((new Date).getTime()/1e3)),r.hasEdited=!0,r.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),r.composition?r.prevValue=e:r.syncDraft(e)},r.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var a=r.getBoundingClientRect();if(0===a.height){var o=r.commonAncestorContainer;1===o.nodeType&&(a=o.getBoundingClientRect())}if(0!==a.height){var i=a.bottom-(window.innerHeight-At);i>0&&window.scrollBy(0,i)}}},r.onChangeReshipmentSettings=function(e){"need_payment"!==e||r.props.currentUser.caEnabled?r.setState({reshipmentSettings:e}):window.open("/copyright/invite")},r.onChangerewardSettings=function(e){var t=e.target.checked,n=r.props,a=n.question,o=a.relationship.isAnonymous,i=a.id,s=n.showNotification,c=r.state.rewardTagline;if(!o)return!t||c?(r.setState({rewardTagline:"",checked:!1}),void r.props.updateQuestionRewardinfo(i,!1)):void r.activateReward();s(St,"red")},r.onSubmitReward=function(e){r.setState({rewardTagline:e,checked:!0});var t=r.props.question.id;Promise.resolve(r.props.updateQuestionRewardinfo(t,!0)).then(function(){return r.unactivateReward()})},r.onChangeDisclaimerSettings=function(e){r.setState({isDisclaimerChecked:e})},r.onDeleteDraftModalShow=function(){r.setState({deleteDraftModalShown:!0})},r.onDeleteDraft=function(){r.props.isReediting||(r.editable.reset(),r.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),r.deleteDraft();var e=r.props.onDeleteDraft;e&&e()},r.onDeleteDraftModalHide=function(){r.setState({deleteDraftModalShown:!1})},r.handleSubmit=r.context.authRequired(function(e){var t=r.state,n=t.reshipmentSettings,a=t.commentPermission,o=t.rewardTagline,i=t.isChecked,s=t.isDisclaimerChecked,l=t.scheduledPublishAt;if(r.editable){var u=r.editable.toHTML();if(u){var p=r.props,f=p.answer,h=p.disclaimers,b=p.settings,m=p.isReediting,v=p.onSubmit,g=p.showNotification,y=p.question,O=y.id,w=y.questionType,C=y.circleInfo,k=(C=void 0===C?{}:C).canWriteCircle,N=p.currentUser,A=p.updateSettingsDisclaimer,T=p.loadLabel;if(r.editable.hasVideo("upload"))r.handleError("video-uploading");else if(r.editable.hasImage("upload"))r.handleError("image-uploading");else{if(r.editable.hasImage("error")||r.editable.hasVideo("error")&&!r.editable.hasVideo("error-review"))return e.persist(),void K.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"});if(r.editable.hasVideo("error-review")||r.editable.hasVideo("censor"))return e.persist(),void K.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"});var _={content:u};if(m||(_.reshipmentSettings=n||"allowed",_.commentPermission=a||"all"),_.rewardSetting={canReward:Boolean(o),tagline:o},h&&h.length&&(!f||b)&&(_.disclaimerStatus=s?"open":"close",_.disclaimerType=h[0].type),k&&(_.isCircle=i),l){if($.default.trackEvent(Object(c.default)(r),{action:"Click",id:5733,name:"回答"}),j.a(l,S(new Date,30)))return void K.a.alert(Object(d.b)("div",{style:{textAlign:"center"}},"只能设置 30 分钟后的定时时间"),{title:"定时发布"});_.publishAt=Math.floor(l/1e3)+0}Promise.resolve(v(_)).then(function(){f&&_.disclaimerStatus&&A(f.id,_.disclaimerStatus,_.disclaimerType),f&&T("answer",f.id),m||$.default.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(O),author_member_hash_id:N.id}]}}],status:{result:"Success",event:{action:"Submit"}}}),"commercial"===w&&g("已发布！由品牌筛选后进入推荐区。")}).catch(function(){m||$.default.trackEvent(Object(c.default)(r),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})});var E=m?"Edit":"Answer";"Answer"===E&&$.default.trackEvent(Object(c.default)(r),{id:4930}),$.default.trackEvent(Object(c.default)(r),{action:E,is_intent:!1})}}}else r.props.onCancel()}),r.onCancel=function(){var e=r.props.onCancel;r.editable.hasVideo("upload")?r.handleError("video-uploading-draft"):r.editable.hasImage("upload")?r.handleError("image-uploading-draft"):(r.hasEdited&&r.syncDraftImmediately(),e&&e())},r.onFocus=function(){"org"===r.props.question.questionType&&r.shouldAnswerOrgQuestionModalShow&&r.handleAnswerOrgQuestionModalShow(),r.setState({focusing:!0})},r.onFocusWithAuth=function(){return r.onFocusAuthChecked?r.onFocus():(r.onFocusAuthChecked=!0,r.context.authRequired(r.onFocus)())},r.onSelectText=function(e){r.setState({selectedText:e.replace(/\s/g,"")})},r.onLoadStart=function(){r.setState({loadingShown:!0})},r.onLoadEnd=function(){r.setState({loadingShown:!1})},r.getToolbarMainPlugins=function(e){var t,n=r.props,a=n.question.relationship.isAnonymous,o=n.currentUser;if(![1,2].includes(null==o?void 0:null===(t=o.mcnUserInfo)||void 0===t?void 0:t.status))return null;var i=A.RichUtils.getCurrentBlockType(e.state.editorState),s=["atomic","code-block"].includes(i)||a;return Object(d.b)(V.a,{key:"mcnGood",icon:Object(d.b)(I,null),onClick:function(){e.getMCNLinkCards().size>9?K.a.alert(null,{title:"一篇内容最多可以添加 10 个商品"}):(r.setState({mcnGoodSelectorShown:!0}),$.default.trackEvent(null,{id:6097,action:"Click"}))},onRef:r.trackMCNGoodCardshow,disabled:s})},r.trackMCNGoodCardshow=_()(function(){$.default.trackCardShow(null,{id:6096})}),r.getToolbarSidePlugins=function(){var e=r.state,t=e.isFullscreen,n=e.isLeaveActive;return(!t||n)&&Object(d.b)(V.a,{key:"enterFullscreen",icon:Object(d.b)(M.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:r.toggleFullscreen},"全屏模式")},r.getToolbarMenuPlugins=function(){var e=r.state.scheduledPublishAt;return Object(d.b)(b.a.Fragment,null,Object(d.b)(V.c,{onClick:r.showDraftHistoryModal},Object(d.b)(D,{text:!0}),"历史版本"),r.canUseScheduledPublish&&Object(d.b)(V.c,{onClick:function(){r.setUseScheduledPublish(!e),$.default.trackEvent(Object(c.default)(r),{action:"Click",id:5730,name:"回答"})}},Object(d.b)(P,{text:!0}),e?"取消定时发布":"定时发布"))},r.toggleFullscreen=function(){var e=r.state.isFullscreen,t=function(){var e=r.scroller.querySelector(".Editable");return e?e.offsetTop:0};r.scrollTop=e?r.scroller.scrollTop-t():Math.max(-r.scroller.getBoundingClientRect().top,0),r.setState({isFullscreen:!e},function(){r.state.isFullscreen?r.scrollTop>0&&(r.scroller.scrollTop=r.scrollTop+t()):window.scrollTo(0,r.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+r.scrollTop)})},r.exitFullscreen=function(){r.cloneEditor.resetWithValue(r.getCloneContent());r.fullscreenContent.addEventListener("animationend",function e(){r.fullscreenContent.removeEventListener("animationend",e),r.setState({isLeaveActive:!1}),r.toggleFullscreen()}),r.setState({isLeaveActive:!0})},r.handleFullscreenRef=function(e){e?X.hide():(X.show(),r.setState({isToolbarSticky:!1}))},r.handleScroll=function(){r.isHandleScrollPending||(r.isHandleScrollPending=!0,requestAnimationFrame(function(){var e=r.state,t=e.isFullscreen,n=e.isToolbarSticky,a=!1;if(t&&r.scroller){var o=r.scroller.querySelector(".Editable-toolbar");a=!!o&&r.scroller.scrollTop===o.offsetTop}a!==n&&r.setState({isToolbarSticky:a}),r.isHandleScrollPending=!1}))},r.showDraftHistoryModal=function(){r.syncDraft.flush(),r.setState({draftHistoryModalShown:!0}),$.default.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},r.hideDraftHistoryModal=function(){r.setState({draftHistoryModalShown:!1})},r.closeRewardModal=function(){r.label.click()},r.handleUploadStart=function(){r.setState({isUploading:!0})},r.handleUploadEnd=function(){r.setState({isUploading:!1})},r.handleUploadError=function(e,t){switch(t){case"video":r.handleError("video-upload-error");break;case"image":r.handleError("image-upload-error",e)}},r.handleAnswerOrgQuestionModalShow=function(){r.setState({answerModalShown:!0}),r.shouldAnswerOrgQuestionModalShow=!1},r.handleAnswerModalHide=function(){r.setState({answerModalShown:!1})},r.syncDraftImmediately=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.content).toHTML(),n=r.state.lastUpdatedTime,a=Math.floor((new Date).getTime()/1e3);e=!n||r.startCompositionTime-n>180?a-r.startCompositionTime:a-n,r.setState({isTyping:!1}),t?r.updateDraft(t,e).then(function(e){e.payload&&e.payload.updatedTime&&r.setState({lastUpdatedTime:e.payload.updatedTime}),r.loggingDeltaTime=!1,delete r.startCompositionTime,$.default.trackEvent(Object(c.default)(r),{action:"AutoSave"})}):r.deleteDraft()},r.syncDraft=Object(Y.debounce)(r.syncDraftImmediately,Nt),r.updateDraft=function(e,t){var n=r.props,a=n.question.id,o=n.draft,i=n.addDraft,s=n.updateDraft;return o?s(a,e,t):i(a,e,t)},r.focus=function(){r.editable&&r.editable.focus()},r.hasVideo=function(){return!!r.editable&&r.editable.hasVideo()},r.hasMCNLinkCard=function(){return!!r.editable&&r.editable.hasMCNLinkCard()},r.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;r.setState({commentPermission:n})},r.handleReshipmentSettings=function(e){"need_payment"!==e||r.props.currentUser.caEnabled||window.open("/copyright/invite"),r.setState({reshipmentSettings:e})},r.handleError=function(e,t){Object(gt.b)(e,t,r.props.showNotification)},r.handleBeforeVideoUpload=function(){var e=r.props.question;return!e.relationship||!e.relationship.isAnonymous},r.handleReverted=function(e){r.editable.resetWithValue(e.draft.content)},r.unactivateReward=function(){r.setState({rewardModalShown:!1})},r.activateReward=function(){r.setState({rewardModalShown:!0})},r.onChangecircleSettings=function(e){var t=e,n=r.context.onChangecircleSettings;r.setState({isChecked:t}),n(t)};var a=r.props,l=a.defaultValue,u=a.draft,p=a.settings,f=u?u.editableContent:l,h=u?u.updatedTime:0;return r.state={draft:f,content:{toHTML:function(){return""}},isEmpty:!f,isTyping:!1,isChecked:n.isCheckedCircle,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:h,rewardTagline:e.rewardTagline,draftHistoryModalShown:!1,mcnGoodSelectorShown:!1,mcnEditingGood:null,isDisclaimerChecked:Tt(p),initialScheduledPublishAt:void 0,scheduledPublishAt:void 0},r.hasEdited=!1,r}return Object(u.a)(t,e),Object(l.a)(t,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting;return t&&t.autoSendingCreations&&!n}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!Pe.getKnown(),this.onFocusAuthChecked=!1;var t=this.props,n=t.fillCurrentUserIfNeeded,r=t.loadSwitches,o=n(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);r(["isAnswerRewardable"]),Promise.resolve(o).then(function(){Ke.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then(function(t){var n=Object(a.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),Ke.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&$.default.trackCardShow(e,{id:5738}))}),$.default.trackCardShow(e,{id:5729,name:"回答"})}),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4);var i=this.props,s=i.question,c=i.answer,l=i.disclaimers,u=i.loadDisclaimers,d=i.settings,p=i.loadSettings;l||u(s.id),c&&!d&&p(c.id),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus.bind(this),hasVideo:this.hasVideo.bind(this),hasMCNLinkCard:this.hasMCNLinkCard.bind(this)})}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.state,r=e.currentUser,a={};if(n.reshipmentSettings||void 0===r.caEnabled||(a.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),t.isCheckedCircle!==n.isChecked&&this.setState({isChecked:t.isCheckedCircle}),n.commentPermission||void 0===r.lastCommentPermission||(a.commentPermission=r.lastCommentPermission),Object.keys(a).length&&this.setState(a),!this.draftLoaded){if(!this.state.draft&&!this.props.draft&&e.draft){var o=e.draft.editableContent;o&&(this.setState({draft:o,isEmpty:!o}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(o)),this.draftLoaded=!0}e.settings&&!this.props.settings&&this.setState({isDisclaimerChecked:Tt(e.settings)})}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.focusing;if(this.props.tagline){var n=J.a.get("rewardNotication");t&&!n&&(this.setState({rewardNotication:!1}),J.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){e.setState({rewardNotication:!0})},2e3))}}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"setUseScheduledPublish",value:function(e,t){var n=this;if(e)if(t)this.setState({scheduledPublishAt:t});else{var r=S(new Date,30);this.setState({initialScheduledPublishAt:r,scheduledPublishAt:r})}else K.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then(function(){n.setState({scheduledPublishAt:void 0}),$.default.trackEvent(n,{action:"Click",id:5737,name:"回答"})}).catch(function(){$.default.trackEvent(n,{action:"Click",id:5736,name:"回答"})}),$.default.trackCardShow(this,{id:5735,name:"回答"})}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(kt).map(function(n){var r=Object(yt.a)(n,e);return Object(d.b)(U.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(yt.b)(n,e)},r&&Object(d.b)(F.a,{className:"Button-icon",name:r}),kt[n])})}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isReediting,a=t.switches,o=t.rewardTagline,i=t.question,s=i.commercial,c=i.relationship,l=(c=void 0===c?{}:c).isAnonymous,u=i.circleInfo,p=(u=void 0===u?{}:u).canWriteCircle,f=t.answer,h=t.disclaimers,b=t.settings,m=this.state,v=m.checked,y=m.commentPermission,j=m.focusing,w=m.isEmpty,C=m.isTyping,k=m.isChecked,S=m.isFullscreen,N=m.loadingShown,A=m.reshipmentSettings,T=m.rewardNotication,_=m.rewardModalShown,E=m.rewardTagline,x=m.selectedText,I=m.dateNow,M=m.isDisclaimerChecked,R=m.scheduledPublishAt,D=null;if(N)D=Object(d.b)(H.a,{count:3});else if(x)D="".concat(x.length," 个字");else if(n){var L=null;L=n.updating||C?"草稿保存中…":n.updated&&I<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):O()(Ct(),Object(W.toRelativeString)(n.updatedTime)),D=Object(d.b)("div",null,Object(d.b)(q.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},Object(d.b)(F.a,{name:"delete"})),L)}else s&&s.tip&&s.tip.message&&(D=s.tip.message);var P=Object(d.b)("div",{className:g()("AnswerForm-footer",{"AnswerForm-footer--hidden":!S&&!j&&w})},Object(d.b)("div",{className:"AnswerForm-footerContent AnswerForm-container"},Object(d.b)("div",{className:"AnswerForm-status"},D),Object(d.b)("div",{className:"AnswerForm-footerRight"},r?Object(d.b)("a",{className:"AnswerForm-cancel",onClick:this.onCancel},n?"保存草稿并离开":"取消"):Object(d.b)(U.c,{toggler:Object(d.b)(q.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},Object(d.b)(F.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(A),Object(d.b)(U.a,null),Object(d.b)(dt.c,{onChange:this.handleChangeCommentPermission,current:y})),Object(d.b)(q.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.handleSubmit},r?"提交修改":R?"定时发送":"提交回答"))),Object(d.b)("div",{className:"AnswerForm-footerContent AnswerForm-container"},h&&Boolean(h.length)&&(!f||b)&&Object(d.b)(Ve,{disclaimers:h,checked:M,onChange:this.onChangeDisclaimerSettings}),!l&&p&&Object(d.b)(He,{isChecked:k,handleChange:this.onChangecircleSettings}),a.isAnswerRewardable&&Object(d.b)("div",{className:"AnswerForm-openRewardButton"},Object(d.b)("label",{className:"AnswerForm-openRewardLabel",ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},Object(d.b)("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:v,onChange:this.onChangerewardSettings}),"开启赞赏"),_&&Object(d.b)(Je.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:E||o,edit:!1}),!T&&Object(d.b)("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"))));return!S?Object(d.b)(Q.a,{bottom:!0,container:function(){return e.form}},P):P}},{key:"render",value:function(){var e=this,t=this.props,n=t.bordered,r=t.className,a=t.defaultValue,o=t.draft,i=t.isReediting,s=t.question,c=t.currentUser,l=t.isPuQuestion,u=t.updateLinkCard,p=this.state,f=p.deleteDraftModalShown,h=p.isFullscreen,m=p.isToolbarSticky,v=p.isLeaveActive,y=p.toolbarMenuAttention,O=p.draftHistoryModalShown,j=p.mcnGoodSelectorShown,w=p.mcnEditingGood,C=p.initialScheduledPublishAt,k=p.scheduledPublishAt,S="".concat(i?"修改":"写","回答...");if("commercial"===s.questionType){var A=l?"大咖提问":"品牌提问";S="这是一个「".concat(A,"」，请在回答前了解：「").concat(A,"」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}var T=Object(d.b)(Ge.a,{className:g()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:m}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowReference:!0,allowHeaderThree:!1,allowToolbarSticky:!h,toolbarStickyOffset:wt.f,getToolbarMainPlugins:this.getToolbarMainPlugins,getToolbarSidePlugins:this.getToolbarSidePlugins,getToolbarMenuPlugins:this.getToolbarMenuPlugins,toolbarMenuAttention:y,toolbarProps:{menuCallout:k&&C&&Object(d.b)(V.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){e.setUseScheduledPublish(!1),$.default.trackEvent(e,{action:"Click",id:5734,name:"回答"})}},"发布时间：",Object(d.b)(Z.a,{onRef:function(t){return e.dateTimePicker_=t},value:C,min:C,max:N.a(C,7),onChange:function(t,n){e.setUseScheduledPublish(!0,t),$.default.setModule(e.dateTimePicker_,{module:"Unknown",module_name:n.date?"日期":n.hours?"小时":n.minutes?"分钟":void 0}),$.default.trackEvent(e.dateTimePicker_,{action:"Click",id:5731,name:"文章"})}}),Object(d.b)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"}},Object(d.b)(B.a,{text:!0,center:!0})," 管理待发布内容"))},minRows:3,placeholder:S,defaultValue:o?o.editableContent:a,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.handleSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,logo:jt.a,location:s.title,editingContentType:"answer",onMCNLinkCardEdit:function(t,n){e.setState({mcnEditingGood:n})}});return Object(d.b)(Re.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(s.id),author_member_hash_id:c.id}},Object(d.b)("form",{ref:function(t){e.form=t},className:g()("AnswerForm",r,{"AnswerForm--bordered":n}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},h&&Object(d.b)("div",{className:g()("AnswerForm-fullscreenBackdrop",{isLeaveActive:v})}),Object(d.b)("div",{className:g()({"AnswerForm-fullscreenContent":h,isLeaveActive:v}),ref:function(t){return e.fullscreenContent=t}},Object(d.b)("div",{className:g()({"AnswerForm-fullscreenScroller":h}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},h&&Object(d.b)("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},Object(d.b)("div",{className:"AnswerForm-title"},s.title)),h&&Object(d.b)(q.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},Object(d.b)(z.a,{text:!0,center:!0})," 退出全屏模式"),T),this.renderFooter()),h&&b.a.cloneElement(T,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,onRef:function(t){return e.cloneEditor=t}}),"org"===s.questionType&&Object(d.b)(Pe,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===s.questionType&&Object(d.b)(ze,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(We.a,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:f,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),Object(d.b)(ut,{shown:O,onClose:this.hideDraftHistoryModal,type:"question",id:s.id,onReverted:this.handleReverted}),Object(d.b)(Me,{shown:j,onClose:function(){e.setState({mcnGoodSelectorShown:!1})},onSubmit:function(t){e.setState({mcnGoodSelectorShown:!1}),e.editable.handleCommand("insert-mcn-link-card:".concat(t))},onUrlSubmit:function(t){e.setState({mcnGoodSelectorShown:!1}),e.editable.handleCommand("insert-link-card:".concat(t))}}),w&&Object(d.b)(de,{good:w,shown:Boolean(w),onClose:function(){e.setState({mcnEditingGood:null})},onSubmit:function(t){var n=t.title;u(Object.assign({},w,{title:n})).finally(function(){e.setState({mcnEditingGood:null}),e.editable.handleCommand("edit-mcn-link-card:".concat(w.id))})}})))}}]),t}(h.Component),ct.propTypes={question:f.a.object,bordered:f.a.bool,isReediting:f.a.bool,defaultValue:f.a.string},ct.defaultProps={bordered:!1,isReediting:!1},ct.contextTypes={authRequired:f.a.func,isCheckedCircle:f.a.bool,onChangecircleSettings:f.a.func},st=lt))||st;t.a=_t},function(e,t,n){"use strict";var r,a,o,i=function(e){return e.componentList.filter(function(e){var t=e.component;return Boolean(t)}).map(function(e){return e.component})},s=n(0),c=n(1),l=n.n(c),u=n(22),d=n(4),p=n(5),f=n(8),h=n(6),b=n(7),m=n(9),v=n(2),g=n.n(v),y=n(18),O=n(48),j=n.n(O),w=n(16),C=n(1764),k=n(15),S=(n(56),n(64)),N=n(150),A=n(168),T=n(21),_={answer:g.a.object.isRequired,renderThankButtonText:g.a.func,zaInfo:g.a.number},E=[].concat(Object(m.a)(Object.keys(_)),["updateAnswerThank"]),x=Object(N.a)(null)((o=a=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).buttonRef=l.a.createRef(),n.handleUpdateThanked=n.context.authRequired(function(){var e=n.props,t=e.answer,r=t.id,a=t.relationship.isThanked,o=e.updateAnswerThank,i=e.zaInfo,s=!a;w.default.trackEvent(n.buttonRef.current,Object.assign({action:s?"Thank":"UnThank",element:"Button"},i&&{id:i})),o(r,s)},T.N.thank),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,a=j()(this.props,E),o=r(n);return Object(s.b)(l.a.Fragment,null,Object(s.b)(A.c,{keyMap:{THANK:"t"},handlers:{THANK:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),Object(s.b)(k.c,Object(u.default)({onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:C.a,label:o},a)))}}]),t}(l.a.Component),a.contextTypes={authRequired:g.a.func},a.propTypes=_,a.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消感谢":"感谢"}},r=o))||r,I=Object(y.connect)(null,{updateAnswerThank:S.H})(x);n.d(t,"b",function(){return i}),n.d(t,"a",function(){return I})},,function(e,t,n){"use strict";var r,a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(1),d=n(18),p=n(1919),f=n.n(p),h=n(1823),b=n.n(h),m=n(170),v=n(528);var g=Object(d.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:v.b})(r=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={urls:null,logged:!1},n.handleObserve=function(e){e&&n.log()},n.log=function(){n.state.logged||Promise.resolve(n.state.urls||n.load().then(function(e){return e?(e=n.normalize(e),n.setState({urls:e}),e):[]})).then(function(e){return e.forEach(function(e){return e&&Object(m.c)(e)})}).then(function(){return n.setState({logged:!0})})},n.load=function(){var e=n.props,t=e.type,r=e.id;return(0,e.loadBrandEntityTrackUrl)({type:t,id:r}).then(function(e){return e&&e.payload&&e.payload.data})},n.normalize=function(e){var t=b()(),r=n.props,a=r.ua,o=r.id,i=r.type,s=encodeURIComponent("其他");a.Android?s="android":a.iOS&&(s="ios");var c={os:s,id:o,sessionId:t,type:i};return e.map(function(e){return function(e,t){var n=t.os,r=t.id,a=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",o)}(e,c)})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!this.state.logged&&Object(l.b)(f.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),t}(u.Component))||r;n.d(t,"a",function(){return g})},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"}))};i.defaultProps={name:"EditSurround"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};i.defaultProps={name:"Play"},t.a=i},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2124);t.debounce=r.debounce},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(169));t.debounce=function(e,t,n){var r=!1,o=a.default(function(){r=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){r=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return r}})}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/shopping_empty.5eb28a3a.png"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-3.681a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm2.761-7.398c-.228.232-.637.621-1.227 1.17-.163.154-.295.29-.393.407a1.643 1.643 0 0 0-.22.32 1.614 1.614 0 0 0-.111.293c-.026.097-.066.267-.119.512-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419.062-.78.187-1.087.125-.307.29-.576.497-.808.206-.231.485-.506.835-.825.307-.28.53-.49.666-.632.137-.142.252-.3.346-.474.093-.175.14-.364.14-.568 0-.399-.143-.735-.428-1.01-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 1.31.133 1.844.4a3.02 3.02 0 0 1 1.234 1.087c.291.459.436.957.436 1.495 0 .423-.083.794-.248 1.113a3.413 3.413 0 0 1-.59.826z",fillRule:"evenodd"}))};i.defaultProps={name:"Help"},t.a=i},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1)),o=r(n(75)),i=function(e){return a.default.createElement(o.default,Object.assign({width:"150",height:"120",viewBox:"0 0 150 120"},e),a.default.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0 0 98.998 28H50.002A2.996 2.996 0 0 0 47 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0 1 44 93V30.997A5.996 5.996 0 0 1 50.002 25h48.996A5.996 5.996 0 0 1 105 30.998V93a2 2 0 0 1-.396 1.2l-4.112-2.66z"}),a.default.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 0 1-.999.999H56a.993.993 0 0 1-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 1 1 0 3h-35.99A1.499 1.499 0 0 1 55 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 1 1 0 3h-24.99A1.499 1.499 0 0 1 55 75.5z"}))};t.default=i},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r=n(2150);e.exports=function(e){return r(2,e)}},function(e,t,n){var r=n(2151),a="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(a);return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},function(e,t,n){var r=n(2152);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(2153),a=1/0,o=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===a||e===-a?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(245),a=n(391),o=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.data;if(!t||!t.plugin)return null;var n=(t=(0,u.convertNullDeepClone)((0,s.camelizeKeys)(t))).plugin,r=(0,u.getEnv)();if(n.androidDownload||n.iosDownload){var o="".concat(r.os,"Download");if("pc"===r.os){var d="mac"===r.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"];o=d.find(function(e){return n[e]})||""}return i.default.createElement(c.default,(0,a.default)({},e,{data:p({},t,{pluginType:o})}))}if(n.leads&&"pc"!==r.os)return i.default.createElement(l.default,(0,a.default)({},e,{data:p({},t,{pluginType:"leads"})}));return null};var a=r(n(201)),o=r(n(88)),i=r(n(1)),s=n(13),c=r(n(2166)),l=r(n(2168)),u=n(241);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.data;if(!t||!t.plugin||!t.plugin[t.pluginType])return null;return u.default.createElement(b.default,null,u.default.createElement(g,e))};var a=r(n(201)),o=r(n(89)),i=r(n(135)),s=r(n(106)),c=r(n(94)),l=r(n(107)),u=r(n(1)),d=r(n(2)),p=r(n(1825)),f=r(n(16)),h=n(486),b=r(n(822)),m=n(241),v=r(n(1947)),g=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,s.default)(this,(0,c.default)(t).call(this,e))).onceViewTrack=function(){n.viewShow||(n.viewShow=!0,console.log("发送za打点"),f.default.trackCardShow(n.card,{id:5642}),h.viewTrack.apply(void 0,arguments))},n.handleClick=function(){f.default.trackEvent(n.card,{id:5641,action:"OpenUrl"}),(0,h.clickTrack)(n.trakUrl.click)},n.sessionId=(0,p.default)(),n.init(e),n.viewShow=!1,n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=(n[t.pluginType]||{}).trackUrl,i=void 0===o?{}:o,s=(0,m.getEnv)();this.trakUrl=(0,m.replaceTrackConfig)(i,{xSuger:a,sessionId:this.sessionId,os:s.os})}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=(0,m.getEnv)();f.default.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.trakUrl.view)}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.visible;console.log("收到: ",t,e),t&&this.onceViewTrack(this.card,this.trakUrl.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,o=t.plugin,i=t.className,s=void 0===i?"":i,c=t.pluginType,l=(o[c]||{}).plugin,d=(void 0===l?{}:l)[c],p={className:s,type:"pc"===(0,m.getEnv)().os?"pc":"app",btnText:d.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4};return/^ios/i.test(c)?(p.logoUrl=d.icon,p.productName=d.name,d.score>0&&(p.productDesc="Appstore 评分：".concat(d.score)),p.link=d.landingUrl):/^android/i.test(c)&&(p.logoUrl=d.icon||r.avatarUrl||"",p.productName=d.name,p.link=d.landingUrl),p.link?u.default.createElement(v.default,(0,a.default)({cardRef:function(t){e.card=t}},p)):null}}]),t}(u.default.Component);g.propTypes={data:d.default.object.isRequired}},function(e,t,n){},function(e,t,n){"use strict";var r=n(502),a=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.data;if(!t||!t.plugin||!t.plugin[t.pluginType])return null;return d.default.createElement(v.default,null,d.default.createElement(j,e))};var o=a(n(201)),i=a(n(89)),s=a(n(135)),c=a(n(106)),l=a(n(94)),u=a(n(107)),d=a(n(1)),p=a(n(2)),f=a(n(1825)),h=n(13),b=a(n(16)),m=n(486),v=a(n(822)),g=n(241),y=r(n(1847)),O=a(n(1947)),j=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,c.default)(this,(0,l.default)(t).call(this,e))).onceViewTrack=function(){n.viewShow||(n.viewShow=!0,console.log("发送za打点"),b.default.trackCardShow(n.card,{id:5642}),m.viewTrack.apply(void 0,arguments))},n.handleClick=function(e){e.stopPropagation(),b.default.trackEvent(n.card,{id:5641,action:"OpenUrl"}),(0,m.clickTrack)(n.trakUrl.click);var t=(0,g.get)(n.props.data,"plugin.leads.plugin.leads".split(/\./),{});if(t.token&&t.canvas){e.preventDefault();var r=(0,h.decamelizeKeys)(t.canvas);y.open(r,"ad/open")}},n.sessionId=(0,f.default)(),n.init(e),n.viewShow=!1,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=(n[t.pluginType]||{}).trackUrl,i=void 0===o?{}:o,s=(0,g.getEnv)();this.trakUrl=(0,g.replaceTrackConfig)(i,{xSuger:a,sessionId:this.sessionId,os:s.os})}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=(0,g.getEnv)();b.default.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.trakUrl.view);var n=(0,g.get)(this.props.data,"plugin.leads.plugin.leads".split(/\./),{});if(n.token&&n.canvas){var r=(0,h.decamelizeKeys)(n.canvas);y.open(r,"ad/preload")}}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.visible;console.log("收到: ",t,e),t&&this.onceViewTrack(this.card,this.trakUrl.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,i=void 0===a?{}:a,s=t.className,c=void 0===s?"":s,l=t.pluginType,u=(0,g.get)(i,"".concat(l,".plugin.").concat(l).split(/\./),{});return u.token||u.landingUrl?d.default.createElement(O.default,(0,o.default)({cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:r.avatarUrl,productName:r.name,productNameMaxLength:13,productDesc:u.desc,productDescMaxLength:15,link:u.landingUrl||"javascript:",btnText:u.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick})):null}}]),t}(d.default.Component);j.propTypes={data:p.default.object.isRequired}},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1)),o=r(n(75)),i=function(e){return a.default.createElement(o.default,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),a.default.createElement("g",{fill:"none",fillRule:"evenodd"},a.default.createElement("path",{fill:"#C2A469",d:"M12.17 2.18l2.077.372c.613.11 1.092.588 1.201 1.2l.372 2.079c.038.211.12.412.243.588L17.27 8.15c.356.51.356 1.188 0 1.698l-1.207 1.732a1.485 1.485 0 0 0-.243.588l-.372 2.078a1.485 1.485 0 0 1-1.2 1.201l-2.079.372c-.211.038-.412.12-.588.243L9.85 17.27a1.485 1.485 0 0 1-1.698 0l-1.732-1.207a1.485 1.485 0 0 0-.588-.243l-2.078-.372a1.485 1.485 0 0 1-1.201-1.2l-.372-2.079a1.485 1.485 0 0 0-.243-.588L.73 9.85a1.485 1.485 0 0 1 0-1.698l1.207-1.732c.122-.176.205-.377.243-.588l.372-2.078a1.485 1.485 0 0 1 1.2-1.201l2.079-.372c.211-.038.412-.12.588-.243L8.15.73a1.485 1.485 0 0 1 1.698 0l1.732 1.207.588.243z"}),a.default.createElement("path",{fill:"#FFF",d:"M9 11c-.481 0-.893-.19-1.236-.571a1.982 1.982 0 0 1-.514-1.373V5.945c0-.535.171-.993.514-1.374C8.107 4.191 8.52 4 9 4s.893.19 1.236.571c.343.381.514.839.514 1.374v3.11c0 .535-.171.993-.514 1.374-.343.38-.755.571-1.236.571zm3.143-2.889a.367.367 0 0 1 .107.264v.75c0 .863-.278 1.614-.832 2.253-.555.639-1.24 1.005-2.057 1.098v1.774c.002.2-.119.301-.361.301s-.363-.1-.361-.301v-1.774c-.816-.093-1.502-.46-2.057-1.098a3.326 3.326 0 0 1-.832-2.253v-.75c0-.102.036-.19.107-.264A.34.34 0 0 1 6.111 8a.34.34 0 0 1 .254.111.367.367 0 0 1 .107.264v.75c0 .723.248 1.341.742 1.854.495.514 1.09.771 1.786.771s1.291-.257 1.786-.77a2.578 2.578 0 0 0 .742-1.855v-.75c0-.102.035-.19.107-.264A.341.341 0 0 1 11.889 8c.098 0 .182.037.254.111z"})))};t.default=i},,function(e,t,n){"use strict";var r,a,o,i=n(22),s=n(4),c=n(5),l=n(8),u=n(6),d=n(7),p=n(0),f=n(2),h=n.n(f),b=n(1),m=n(151),v=n(63),g=n(43),y=n(271),O=n(1812),j=n(1813),w=n(133),C=n(1799),k=n(103),S=n(195),N=(n(2205),Object(S.a)(function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}})((o=a=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},n.handleCommentsShown=function(e,t){n.setState(t)},n.handleCommentsHide=function(){n.setState({commentsShown:!1})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,a=t.favlist,o=a.id,s=a.type,c=a.title,l=a.updatedTime,u=a.answerCount,d=a.followerCount,f=a.isFollowing,h=a.isPublic,b=a.creator,S=void 0===b?{}:b,N=a.commentCount,A=t.status,T=t.action,_=t.lastreadTouchable,E=t.zaInfos,x=E.follow,I=E.options,M=t.renderOptions,R=this.state,D=R.commentsShown,L=R.commentsAutoFocus,P=R.commentPattern,B="/collection/".concat(o),z=Object(p.b)("a",{href:B,target:"_blank"},c);if(n===y.c.plain)return Object(p.b)(y.e,{data:r,link:B,title:z});var q={id:o,type:s};return n===y.c.default?Object(p.b)(y.e,{data:r,link:B,title:Object(p.b)("div",{className:"FavlistItem-title"},z,!h&&Object(p.b)(g.a,{grey:!0,className:"FavlistItem-lockIcon",name:"lock"})),meta:A||Object(p.b)(y.d,null,"".concat(Object(m.toDateString)(l)," 更新"),"".concat(Object(v.formatNumber)(u)," 条内容"),"".concat(Object(v.formatNumber)(d)," 人关注")),extra:T}):Object(p.b)(y.e,{data:r,link:B,onRef:function(t){e.contentItem=t},title:z,lastreadTouchable:_},Object(p.b)(y.b,{key:"favlist-item-cells"},Object(p.b)("div",null,Object(p.b)("span",null,"关注数："),Object(v.formatNumber)(d)),Object(p.b)("div",null,Object(p.b)("span",null,"最后更新于："),Object(m.toDateString)(l)),Object(p.b)("div",null,Object(p.b)("span",null,"作者："),Object(p.b)(k.a,{user:S}))),Object(p.b)(y.a,{key:"favlist-item-actions"},Object(p.b)(w.a,Object(i.default)({},q,{isFollowing:f,zaId:x})),Object(p.b)(O.a,{onClick:this.handleCommentsShown,commentsShown:D,count:N}),Object(p.b)(C.a,Object(i.default)({},q,{title:c,authorName:S&&S.name})),M&&M(function(){return e.contentItem},I)),Object(p.b)(j.a,{parent:r,commentPattern:P,shown:D,autoFocus:L,onClose:this.handleCommentsHide}))}}]),t}(b.Component),a.propTypes={preset:h.a.oneOf(Object.values(y.c)),zaInfos:h.a.shape({follow:h.a.number,options:h.a.number}),renderOptions:h.a.func},a.defaultProps={preset:y.c.default,zaInfos:{}},r=o))||r);t.a=N},,,,function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.229 17.516c-.318.327-.75.484-1.199.484-.453 0-.884-.16-1.202-.488l-4.335-4.47a1.77 1.77 0 0 1 .007-2.459 1.663 1.663 0 0 1 2.397.01l3.137 3.246 9.072-9.329a1.662 1.662 0 0 1 2.397 0c.663.681.663 1.786 0 2.466L10.23 17.516z",fillRule:"evenodd"}))};i.defaultProps={name:"Check"},t.a=i},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(22),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(2),d=n.n(u),p=n(1),f=n(11),h=n.n(f),b=n(1759),m=n(1758),v=n(1760),g=n(501),y=(n(531),function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.isOrg,o=n.badge,i=n.noLink,s=n.className,c=n.iconClassName,u=Object(g.a)(o)||{},d=u.identityInfo,p=u.bestAnswererInfo,f="https://www.zhihu.com/question/48509984";if(d?(e=b.a,t=void 0===a?"已认证的帐号":a?"已认证的官方帐号":"已认证的个人",p?(e=m.a,t="".concat(p," · ").concat(t)):f="https://www.zhihu.com/question/48510028"):p&&(e=v.a,t=p),!e)return null;var y={className:h()("UserLink-badge",s),"data-tooltip":t,children:Object(l.b)(e,{center:!0,size:18,className:c})};return i?Object(l.b)("span",y):Object(l.b)("a",Object(r.default)({},y,{href:f,target:"_blank"}))}}]),t}(p.Component));y.propTypes={badge:d.a.array,isOrg:d.a.bool,noLink:d.a.bool,className:d.a.string,iconClassName:d.a.string}},,,function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(9),l=n(1),u=n.n(l),d=n(19),p=n.n(d),f=n(15),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleClick=function(){var e=n.props;(0,e.onSelect)(e.page)},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,r=e.className;return u.a.createElement(f.c,{preset:f.b.Plain,className:p()("PaginationButton",{"PaginationButton--current":n},r),onClick:this.handleClick,disabled:n},t)}}]),t}(l.Component),b=(n(2210),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},function(t,n){return n+e})}),m=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,r=t.className,a=t.clickCallback,o=this.props.current,i=this.props.total,s=a&&(e=a,function(){e.apply(void 0,arguments)})||n,l=function(e,t){var n="...";return t<=5?b(1,t):e>t-3?[1,n].concat(Object(c.a)(b(t-3,3)),[t]):e<=3?[1].concat(Object(c.a)(b(2,3)),[n,t]):[1,n].concat(Object(c.a)(b(e-Math.floor(1.5),3)),[n,t])}(o,i);return u.a.createElement("div",{className:p()("Pagination",r)},o>1&&o<=i&&u.a.createElement(h,{className:"PaginationButton-prev",onSelect:s,text:"上一页",page:o-1}),l.map(function(e,t){return"number"==typeof e?u.a.createElement(h,{onSelect:s,text:e,page:e,key:t,isCurrent:o===e}):u.a.createElement("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)}),o>0&&o<i&&u.a.createElement(h,{className:"PaginationButton-next",onSelect:s,text:"下一页",page:o+1}))}}]),t}(l.Component);m.defaultProps={current:1,total:1,onSelect:function(){}},n.d(t,"a",function(){return m})},function(e,t,n){"use strict";var r=n(22),a=n(24),o=n(4),i=n(5),s=n(8),c=n(6),l=n(7),u=n(0),d=n(1),p=n(11),f=n.n(p),h=(n(2297),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,o=Object(a.a)(e,["className","alt"]);return Object(u.b)("img",Object(r.default)({className:f()("ImageAlias",t),alt:n},o))}}]),t}(d.Component));t.a=h},,function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(2261)),o=c(n(1)),i=c(n(1959)),s=(c(n(2262)),n(2263));function c(e){return e&&e.__esModule?e:{default:e}}i.default.any,i.default.func,i.default.node;var l=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(n.children)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var a=n&&n.hasOwnProperty(r);!t[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var o in n){var i=t&&t.hasOwnProperty(o);!n[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var i="string"!=typeof r.ref,s=e.props.childFactory(r),c=function(t){e.childRefs[n]=t};s===r&&i&&(c=(0,a.default)(r.ref,c)),t.push(o.default.cloneElement(s,{key:n,ref:c}))}};for(var i in this.state.children)n(i);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,t)},t}(o.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};a(n(1));var r=a(n(1959));function a(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},,,,function(e,t,n){"use strict";function r(e){return/^[a-z0-9]{32}$/.test(e)}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=/#comment-(\d+)/;function o(e){var t=e.match(a);return t&&t[1]}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};i.defaultProps={name:"Weibo"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};i.defaultProps={name:"WeChat"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};i.defaultProps={name:"Like"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};i.defaultProps={name:"EyeSlash"},t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(r.a)(e).getDay()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t,n;if(e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=Object(r.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)}),n||new Date(NaN)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t,n;if(e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=Object(r.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)}),n||new Date(NaN)}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};i.defaultProps={name:"Calendar"},t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(r.a)(e),a=Object(r.a)(t);return n.getTime()<a.getTime()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(37);function a(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(r.a)(e),a=Object(r.a)(t);return n.getTime()>a.getTime()}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleDown"},t.a=i},,,function(e,t,n){"use strict";var r=n(0),a=(n(1),n(43)),o=function(e,t){return t>=e+1?"rating":t>=e+.5?"ratingHalf":"ratingNone"};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(r.b)("div",{className:"Rating"},Array.from({length:5}).map(function(e,t){return Object(r.b)(a.a,{style:{marginLeft:0},key:t,width:15,height:15,name:o(t,n)})}))}},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";var r=n(37),a=n(1931);function o(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(r.a)(e),a=Object(r.a)(t),o=n.getTime()-a.getTime();return o<0?-1:o>0?1:o}function i(e,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Object(r.a)(e),i=Object(r.a)(t),s=o(n,i),c=Math.abs(Object(a.a)(n,i));n.setDate(n.getDate()-s*c);var l=s*(c-(o(n,i)===-s));return 0===l?0:l}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var r=n(1886),a=n(63),o=function(e){return{name:"description",property:"og:description",content:e}},i=function(e,t){if(e&&e.detail){var n=Object(r.b)(e.detail,100);if(n)return[o(n)]}else if(t&&t.content)return s(t);return[]},s=function(e){if(e&&e.content){var t=Object(r.b)(e.content,100);if(t)return[o(t)]}return[]},c=function(e){if(e){var t=e.headline,n=void 0===t?"":t,r=e.answerCount,i=void 0===r?0:r,s=e.voteupCount,c=void 0===s?0:s,l="".concat(n," 回答数 ").concat(Object(a.formatNumber)(i),"，获得 ").concat(Object(a.formatNumber)(c)," 次赞同");return[o(l)]}return[]}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};i.defaultProps={name:"Comment"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z",fillRule:"evenodd"}))};i.defaultProps={name:"Reply"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M6.433 14.285l-.918 5.355c-.219 1.274.532 1.82 1.676 1.218l4.81-2.528 4.807 2.528c1.145.601 1.896.056 1.677-1.218l-.918-5.355 3.89-3.792c.925-.903.64-1.785-.64-1.97l-2.843-.414c-.538.583-4.195 4.547-5.757 6.12-.865.822-1.572.015-1.572.015l-1.92-1.906s-.405-.623.213-1.204c.62-.58 1.174-.193 1.174-.193l1.32 1.14 4.008-4.34-2.404-4.872c-.572-1.159-1.5-1.159-2.072 0L8.56 7.741l-5.376.781c-1.279.186-1.566 1.068-.64 1.971l3.89 3.792z",fillRule:"evenodd"}))};i.defaultProps={name:"Recommend"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z",fillRule:"evenodd"}))};i.defaultProps={name:"Report"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M16.464 4s.051-2-1.479-2H9C7.194 2 7.465 4 7.465 4H4.752c-2.57 0-2.09 3.5 0 3.5l1.213 13.027S5.965 22 7.475 22h8.987c1.502 0 1.502-1.473 1.502-1.473l1.2-13.027c2.34 0 2.563-3.5 0-3.5h-2.7zM8.936 18.5l-.581-9h1.802v9H8.936zm4.824 0v-9h1.801l-.61 9H13.76z",fillRule:"evenodd"}))};i.defaultProps={name:"Trash"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z",fillRule:"evenodd"}))};i.defaultProps={name:"Eye"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6zm13.96 2.2l-5.008 5.008-2.651-2.652-1.768 1.768 4.42 4.42 6.776-6.777L15.96 8.2z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckboxOn"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M5 6v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1zM2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6z"}))};i.defaultProps={name:"CheckboxOff"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M13 7h5a1 1 0 0 0 0-2H6a1 1 0 1 0 0 2h5v11a1 1 0 0 0 2 0V7z",fillRule:"evenodd"}))};i.defaultProps={name:"InsertText"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M20.227 3a.777.777 0 0 1 .773.773V8.67c-.062.432-.404.774-.801.772-.453-.003-.799-.347-.801-.772V5.758a2194.05 2194.05 0 0 0-4.584 4.583c-.975.983-2.136-.177-1.158-1.155 0 0 3.148-3.166 4.582-4.584h-2.93c-.496 0-.77-.413-.773-.801-.003-.462.339-.804.774-.801h4.918zM9.187 13.659c.974-.983 2.135.177 1.155 1.155 0 0-3.147 3.166-4.581 4.584h2.93c.494 0 .77.413.772.801.004.462-.338.804-.773.801H3.772A.776.776 0 0 1 3 20.229v-4.9c.062-.432.404-.774.801-.772.453.003.799.347.801.772v2.913c1.14-1.134 3.794-3.789 4.584-4.583z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenEnter"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M19.472 3.373c.975-.982 2.136.177 1.158 1.157 0 0-3.148 3.165-4.581 4.584h2.928c.495 0 .77.412.773.8.004.462-.338.804-.773.802H14.06a.778.778 0 0 1-.773-.773v-4.9c.062-.432.404-.774.801-.771.453.002.798.347.801.771v2.913c1.14-1.134 3.793-3.789 4.583-4.583zm-9.53 9.913c.424.002.77.347.771.771v4.9c-.062.432-.404.774-.801.771-.453-.002-.798-.347-.801-.771v-2.913c-1.14 1.134-3.793 3.788-4.583 4.583-.975.982-2.136-.177-1.158-1.156 0 0 3.148-3.165 4.581-4.583H5.023c-.497 0-.772-.413-.774-.801-.003-.462.339-.804.774-.801h4.919z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenExit"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-1.25a8.75 8.75 0 1 0 0-17.5 8.75 8.75 0 0 0 0 17.5zm0-2.431a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm1.534-6.228c-.163.154-.755.587-.843 1.532-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419 0-1.055.684-1.895.206-.231.485-.506.835-.825.307-.28 1.158-.941 1.152-1.674a1.357 1.357 0 0 0-.428-1.01c-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 2.318.166 3.078 1.487.291.459.436.957.436 1.495 0 .423-.134 1.218-.839 1.94-.228.23-.637.62-1.227 1.169z",fillRule:"evenodd"}))};i.defaultProps={name:"HelpOutline"},t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(2),u=n.n(l),d=n(1),p=n(2182),f=n(17),h=n(12),b=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,r=e.prePage,a=e.onLoad,o=e.isNextLoaded;t||a(Object(h.c)(n),r),o||a(Object(h.c)(n+1),r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.page,o=e.prePage,i=e.onLoad,s=e.total;n||t||i(Object(h.c)(a),o),!r&&a<s&&a!==this.props.page&&i(Object(h.c)(a+1),o)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,r=e.page,a=e.onPaginationClick,o=e.isFetching,i=e.placeholder;return Object(c.b)("div",null,t,o&&i,n>1&&Object(c.b)(p.a,{current:r,total:n,clickCallback:a}))}}]),t}(d.Component);b.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,onLoad:u.a.func.isRequired,total:u.a.number,page:u.a.number,prePage:u.a.number,placeholder:u.a.node,onPaginationClick:u.a.func.isRequired,isNextLoaded:u.a.bool},b.defaultProps={prePage:f.b,page:1}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 11l-3.716 3.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l4.249-4.512a.758.758 0 0 1 1.064 0l4.246 4.512a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063 0L12.002 11z",fillRule:"evenodd"}))};i.defaultProps={name:"ArrowUp"},t.a=i},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n(11),d=n.n(u),p=n(43),f=n(15),h=n(484),b=n(498),m=n(42),v=n(1888),g=n(2),y=n.n(g),O=(n(2284),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.tips;return Object(c.b)("div",{className:"QuestionReviewInfo"},Object(c.b)("p",null,e))}}]),t}(l.PureComponent));O.propsTypes={tips:y.a.string};var j=n(1809),w=n(1886),C=(n(2285),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={previewImage:null,truncated:null},n.handleClick=function(e){var t=n.props,r=t.collapsed,a=t.onExpand;n.state.truncated.isTruncated&&r&&"function"==typeof a&&a(e),n.handlePreviewImage(e)},n.handlePreviewImage=function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&n.setState({previewImage:t})},n.handlePreviewImageClose=function(){n.setState({previewImage:null})},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentWillMount",value:function(){if(Object(m.isBrowser)()){var e=this.truncateHTML(this.props);this.setState({truncated:e,hasVideo:e&&e.thumbnailInfo.id&&"video"===e.thumbnailInfo.type,thumbnail:e&&e.thumbnailInfo.url})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.html;this.props.html!==t&&this.setState({truncated:this.truncateHTML(e)})}},{key:"truncateHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(b.truncateHTML)(Object(v.a)(e.html),75,{placeholders:{img:" [图片] "}})}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.collapsed,r=e.editable,a=e.onEdit,o=e.excerpt,i=e.reviewInfo,s=this.state,l=s.previewImage,u=s.truncated,b=s.hasVideo,m=s.thumbnail,v=u||{isTruncated:o.length<=t.length,content:o},g=v.isTruncated,y=v.content,C=i.tips,k=g&&n;return Object(c.b)("div",null,C&&b&&Object(c.b)(O,{tips:C}),Object(c.b)("div",{className:"QuestionHeader-detail"},Object(c.b)("div",{className:d()("QuestionRichText",{"QuestionRichText--expandable":g,"QuestionRichText--collapsed":n,"QuestionRichText--video":b&&n}),onClick:this.handleClick},b&&n&&Object(c.b)("div",{className:"QuestionRichText--wrapImgae"},Object(c.b)("img",{src:m,alt:"video",className:"QuestionRichText--image"})),Object(c.b)("div",null,n&&!y?Object(c.b)("span",null,Object(w.a)(o,75)):Object(c.b)(j.a,{itemProp:"text",tag:"span",html:k?y:t}),k&&Object(c.b)(f.c,{preset:"plain",className:"QuestionRichText-more"},"显示全部",Object(c.b)(p.a,{name:"arrow",className:"QuestionRichText-more-icon"}))),r&&!k&&Object(c.b)(f.c,{preset:"plain",className:"QuestionHeader-edit",onClick:a},Object(c.b)(p.a,{name:"modify",left:!0}),"修改"),l&&Object(c.b)(h.a,{img:l,onClose:this.handlePreviewImageClose}))))}}]),t}(l.Component));t.a=C},,,,,function(e,t,n){"use strict";var r=o(n(2258)),a=o(n(2185));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:a.default,CSSTransitionGroup:r.default}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(1)),o=l(n(1959)),i=l(n(2185)),s=l(n(2264)),c=n(2186);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,c.transitionTimeout)("Appear"),(0,c.transitionTimeout)("Enter"),(0,c.transitionTimeout)("Leave");var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=r=u(this,e.call.apply(e,[this].concat(i))),r._wrapChild=function(e){return a.default.createElement(s.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return a.default.createElement(i.default,r({},this.props,{childFactory:this._wrapChild}))},t}(a.default.Component);d.displayName="CSSTransitionGroup",d.propTypes={},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=d,e.exports=t.default},function(e,t,n){"use strict";var r=n(384),a=n(382),o=n(2260);e.exports=function(){function e(e,t,n,r,i,s){s!==o&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},function(e,t,n){e.exports=n(66)(21)},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},a=[];for(var o in e)t.hasOwnProperty(o)?a.length&&(r[o]=a,a=[]):a.push(o);var i=void 0,s={};for(var c in t){if(r.hasOwnProperty(c))for(i=0;i<r[c].length;i++){var l=r[c][i];s[r[c][i]]=n(l)}s[c]=n(c)}for(i=0;i<a.length;i++)s[a[i]]=n(a[i]);return s};var r=n(1)},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=p(n(2265)),o=p(n(2267)),i=p(n(833)),s=n(2268),c=p(n(1)),l=p(n(1959)),u=n(31),d=n(2186);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=[];s.transitionEnd&&h.push(s.transitionEnd),s.animationEnd&&h.push(s.animationEnd);l.default.node,d.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var b=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=f(this,e.call.apply(e,[this].concat(o))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,u.findDOMNode)(this);if(r){var i=this.props.name[e]||this.props.name+"-"+e,c=this.props.name[e+"Active"]||i+"-active",l=null,d=void 0;(0,a.default)(r,i),this.queueClassAndNode(c,r);var p=function(e){e&&e.target!==r||(clearTimeout(l),d&&d(),(0,o.default)(r,i),(0,o.default)(r,c),d&&d(),t&&t())};n?(l=setTimeout(p,n),this.transitionTimeouts.push(l)):s.transitionEnd&&(d=function(e,t){return h.length?h.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){h.length&&h.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(r,p))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,i.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,a.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,c.default.cloneElement(c.default.Children.only(this.props.children),e)},t}(c.default.Component);b.displayName="CSSTransitionGroupChild",b.propTypes={},t.default=b,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r,a=n(2266),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,a=n(396);var o="transform",i=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,p=void 0,f=void 0,h=void 0,b=void 0,m=void 0;if(((r=a)&&r.__esModule?r:{default:r}).default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,a=void 0,o="",i=0;i<n.length;i++){var s=n[i];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),a=t[s]("AnimationEnd");break}}!r&&"transitionProperty"in e&&(r="transitionend");!a&&"animationName"in e&&(a="animationend");return e=null,{animationEnd:a,transitionEnd:r,prefix:o}}();i=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=c=v.animationEnd,t.transform=o=i+"-"+o,t.transitionProperty=l=i+"-transition-property",t.transitionDuration=u=i+"-transition-duration",t.transitionDelay=p=i+"-transition-delay",t.transitionTiming=d=i+"-transition-timing-function",t.animationName=f=i+"-animation-name",t.animationDuration=h=i+"-animation-duration",t.animationTiming=b=i+"-animation-delay",t.animationDelay=m=i+"-animation-timing-function"}t.transform=o,t.transitionProperty=l,t.transitionTiming=d,t.transitionDelay=p,t.transitionDuration=u,t.transitionEnd=s,t.animationName=f,t.animationDuration=h,t.animationTiming=b,t.animationDelay=m,t.animationEnd=c,t.default={transform:o,end:s,property:l,timing:d,delay:p,duration:u}},,,,function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112z",fillRule:"evenodd"}))};i.defaultProps={name:"BadgeWrite"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M11.674 20.55a9.334 9.334 0 1 1 9.66-9.286c-.02 5.939-4.29 10.752-9.89 11.98-.837.185-1.808-.075-1.148-.84.502-.583.963-1.202 1.378-1.854zM12 17.444A6.222 6.222 0 1 0 12 5a6.222 6.222 0 0 0 0 12.444zm0-3.11a3.111 3.111 0 1 1 0-6.223 3.111 3.111 0 0 1 0 6.222z"}))};i.defaultProps={name:"Realm"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),a.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};i.defaultProps={name:"StickyUnset"},t.a=i},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),a.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};i.defaultProps={name:"StickySet"},t.a=i},,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormatedAdItem=f,t.getNormalizedInfo=h,t.default=void 0;var a=r(n(88)),o=r(n(519)),i=n(13),s=n(241),c=n(835),l=n(2303);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function f(e){var t=e.ad,n=(t.partyId,t.creatives),r=t.downloadSilent,a=void 0!==r&&r,i=t.isNewWebview,c=void 0!==i&&i,l=t.isSpeeding,u=t.cdnMap,f=t.displayAdvertisingTag,h=t.adVerb,b=t.loadTracks,m=t.closeTrack,v=(0,o.default)(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),g=(0,s.get)(t,"creatives[0].impressionTracks",[]),y=(0,s.get)(t,"creatives[0].clickTracks",[]),O={displayAdvertisingTag:f,downloadSilent:a,isNewWebview:c,isCdnSpeeding:l,cdnMap:u},j=p[h],w=n.map(function(e){return function(e,t){var n=(0,s.get)(e,"target",{}),r=n.voteupCount,a=n.commentCount,i=n.followerCount,c=n.answerCount,l=(0,o.default)(n,["voteupCount","commentCount","followerCount","answerCount"]),u=e.landingUrl,p=e.appPromotionUrl,f=e.deepUrl,h=e.packageName,b=e.title,m=e.nativeUrl,v=void 0===m?"":m,g=e.window,y=e.imageRatioExtra,O=e.brand,j=void 0===O?{}:O,w=e.thumbnailExtraInfo,C=e.cta,k=(C=void 0===C?{}:C).value,S=void 0===k?"":k,N=e.button,A=e.description,T=(e.protoInfo,e.image),_=e.gallery,E=void 0===_?[]:_,x=e.thirdSdkInfo,I=(e.showNum,e.recommend),M=e.contentType,R=(0,o.default)(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),D=j.name,L=j.logo,P=(0,s.get)(E,"length")>=2?E.map(function(e){return e.url}):[T],B=E&&E.map(function(e){return{image:e.url,desc:e.description}});return{asset:d({landingUrl:u,appPromotionUrl:p,deepUrl:f,packageName:h,title:b,nativeUrl:v,window:g,imageRatioExtra:y,desc:A,cta:N||S,imgs:P,brandName:D,brandLogo:L,recommend:I,gallery:E,galleries:B,icon:t},R),protoInfo:d({voteupNum:r,commentNum:a,contentType:M,answerNum:c,followNum:i,target:JSON.stringify(n)},l),videoInfo:w,thirdSdkInfo:x}}(e,j)});return d({viewTracks:g,impressionTracks:b,closeTracks:[m],clickTracks:y,creatives:w,expand:O},v)}function h(e){if(!e||!e.ad&&!e.adjson)return null;var t=(0,i.camelizeKeys)(e),n=(0,s.get)(e,"adjson"),r=(0,i.camelizeKeys)((0,s.str2Json)(n)),a=(0,c.getExperimentInfo)({oldData:t,adjson:r});return{data:t,adjson:Boolean(n)?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map(function(e){return d({adjsonStr:t},(0,l.standardizeAdjson)(e))})}}(r,n):function(e,t){return{ads:[{ad:e.ad}].map(function(e){var n=e.ad;return d({adjsonStr:t},f({ad:n}))})}}(t,n),experimentInfo:a}}var b={getNormalizedInfo:h,getFormatedAdItem:f};t.default=b},function(e,t,n){"use strict";function r(e){var t=e.id,n=e.adZoneId,r=e.template,a=void 0===r?"":r,o=e.style,i=void 0===o?"":o,s=e.impressionTracks,c=e.viewTracks,l=e.clickTracks,u=e.closeTracks,d=e.effectTracks,p=void 0===d?[]:d,f=e.debugTracks,h=void 0===f?[]:f,b=e.conversionTracks,m=e.videoTracks,v=void 0===m?[]:m,g=e.extraConversionTracks,y=void 0===g?[]:g,O=e.conversionTrackJs,j=void 0===O?[]:O,w=e.zaAdInfo,C=e.zaAdInfoJson,k=void 0===C?"":C,S=e.creatives,N=e.prefetch,A=void 0===N?{}:N,T=e.expand,_=void 0===T?{}:T,E=e.canvas,x=void 0===E?{}:E,I=e.experimentInfo,M=void 0===I?"":I;return{id:t,adZoneId:n,template:a,style:i,impressionTracks:s,viewTracks:c,clickTracks:l,closeTracks:u,effectTracks:p,debugTracks:h,conversionTracks:b,videoTracks:v,extraConversionTracks:y,conversionTrackJs:j,zaAdInfo:w,zaAdInfoJson:k,creatives:function(e){return e.map(function(e){return function(e){var t=e.id,n=void 0===t?"":t,r=e.asset,a=e.videoInfo,o=void 0===a?{playlis:{hd:{},ld:{},sd:{}}}:a,i=e.protoInfo,s=void 0===i?{}:i,c=e.thirdSdkInfo,l=void 0===c?"":c,u=e.videoWatchNum,d=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,r=e.title,a=e.desc,o=void 0===a?"":a,i=e.imgs,s=void 0===i?[]:i,c=e.gif,l=void 0===c?"":c,u=e.landingUrl,d=e.nativeUrl,p=void 0===d?"":d,f=e.appPromotionUrl,h=void 0===f?"":f,b=e.deepUrl,m=void 0===b?"":b,v=e.imgSize,g=e.recommends,y=void 0===g?[{}]:g,O=e.footer,j=e.cta,w=e.resource,C=void 0===w?{}:w,k=e.activity,S=void 0===k?{}:k,N=e.sponsor,A=void 0===N?{}:N,T=e.window,_=void 0===T?{}:T,E=e.appInfo,x=void 0===E?{}:E,I=e.recommend,M=void 0===I?{}:I,R=e.videoSpec,D=void 0===R?{}:R,L=e.imageRatioExtra,P=void 0===L?{}:L,B=e.packageName,z=e.icon,q=e.galleries;return{brandName:t,brandLogo:n,title:r,desc:o,imgs:s,gif:l,landingUrl:u,nativeUrl:p,appPromotionUrl:h,deepUrl:m,imgSize:v,recommends:y,footer:O,cta:j,resource:C,activity:S,sponsor:A,window:_,appInfo:x,recommend:M,videoSpec:D,imageRatioExtra:P,packageName:B,icon:z,galleries:void 0===q?[{}]:q}}(r),videoInfo:o,protoInfo:s,thirdSdkInfo:l,videoWatchNum:d}}(e)})}(S),prefetch:A,expand:_,canvas:x,experimentInfo:M}}Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeAdjson=r,t.default=void 0;var a={standardizeAdjson:r};t.default=a},,,function(e,t,n){"use strict";var r=n(4),a=n(5),o=n(8),i=n(6),s=n(7),c=n(0),l=n(1),u=n(2),d=n.n(u),p=n(11),f=n.n(p),h=n(22),b=n(2193),m="TopicVoteCheckbox",v=(n(2298),[0,1,2,3,4,5,6,7].map(function(e){return Object(c.b)("div",{className:"".concat(m,"-Sparkle"),key:e})})),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,a=e.onClick,o=e.tooltipPosition;return Object(c.b)("div",Object(h.default)({className:f()(m,"".concat(m,"--recommend"),t),"data-tooltip":"推荐"},o&&{"data-tooltip-position":o}),Object(c.b)("input",{id:"topic-recommend",type:"checkbox",checked:r,onChange:n,onClick:a}),Object(c.b)("label",{htmlFor:"topic-recommend"},Object(c.b)(b.a,{size:19}),v))}}]),t}(l.Component),y=(n(2299),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,a=e.onClick,o=e.tooltipPosition;return Object(c.b)("div",Object(h.default)({className:f()(m,"".concat(m,"--against"),t),"data-tooltip":"不推荐"},o&&{"data-tooltip-position":o}),Object(c.b)("input",{id:"topic-against",type:"checkbox",checked:r,onChange:n,onClick:a}),Object(c.b)("label",{htmlFor:"topic-against"},Object(c.b)(b.a,{size:19})))}}]),t}(l.Component)),O=(n(2300),{Recommend:g,Against:y}),j=(n(2301),function(e){return e.stopPropagation()}),w=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,r=e.onVoteChange,a=e.tooltipPosition;return Object(c.b)("span",{className:"VotableTopicCard",onClick:j},Object(c.b)("span",{className:f()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t})},Object(c.b)(O.Recommend,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"like"===n,onChange:function(e){r(e,"recommend")},tooltipPosition:a}),Object(c.b)(O.Against,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"dislike"===n,onChange:function(e){r(e,"unrecommend")},tooltipPosition:a})))}}]),t}(l.Component);w.propTypes={noAnimation:d.a.bool.isRequired,status:d.a.oneOf(["like","dislike","none"]).isRequired,noBorder:d.a.bool.isRequired,onVoteChange:d.a.func.isRequired,tooltipPosition:d.a.string};var C=w,k=n(16),S=n(63),N=n(21),A={Upvote:"Upvote",UnUpvote:"UnUpvote",Downvote:"Downvote",UnDownvote:"UnDownvote"},T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={noAnimation:!!n.props.metaInfo.vote&&"none"!==n.props.metaInfo.vote.status},n.handleVoteChange=n.context.authRequired(function(e,t){var r=n.props,a=r.metaInfo.vote.status,o=r.onUpdateVoteTopic;n.state.noAnimation&&n.setState({noAnimation:!1});var i={actionType:"",voteFor:"",method:""};"recommend"===t?"like"===a?(i.actionType=A.UnUpvote,i.voteFor="like",i.method="DELETE"):(i.actionType=A.Upvote,i.voteFor="like",i.method="POST"):"dislike"===a?(i.actionType=A.UnDownvote,i.voteFor="dislike",i.method="DELETE"):(i.actionType=A.Downvote,i.voteFor="dislike",i.method="POST"),i.actionType&&(k.default.trackEvent(e.target,{action:i.actionType,id:4176}),o(i))},N.N.vote),n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,r=t.metaInfo,a=(r=void 0===r?{}:r).vote,o=(a=void 0===a?{}:a).status;return Object(c.b)(C,{noBorder:!0,status:o,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,r=t.meta.title,a=e.ReviewCardExtraInfoComponent,o=e.reviewerCountFormatter;if(!a)return null;var i,s=n.totalVotes,l=n.ratio,u=n.ratioStatus,d=n.status,p=(10*l).toFixed(1),f=o(s);return i="none"===d?"你推荐么？":"like"===d?"已推荐":"不推荐",Object(c.b)(a,{reviewerCount:f,insufficientText:i,percent:p,ratioStatus:u,title:r})}},{key:"render",value:function(){return Object(c.b)(l.Fragment,null,this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard())}}]),t}(l.Component);T.propTypes={onUpdateVoteTopic:d.a.func.isRequired,metaInfo:d.a.shape({meta:d.a.object.isRequired,vote:d.a.shape({status:d.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:d.a.oneOfType([d.a.func,d.a.string,d.a.object]).isRequired,reviewerCountFormatter:d.a.func.isRequired,tooltipPosition:d.a.string},T.defaultProps={reviewerCountFormatter:function(e){return e>1e4?Object(S.niceNumber)(e):Object(S.formatNumber)(e)}},T.contextTypes={authRequired:d.a.func},n.d(t,"a",function(){return T})},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(10),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-2.762-5.37c.243.246.452.37.78.37.33 0 .576-.203.827-.443.25-.24 7.052-7.054 7.052-7.054a.988.988 0 0 0-.311-1.354.973.973 0 0 0-1.345.315l-6.222 6.077-2.31-2.418a.971.971 0 0 0-1.368-.19.988.988 0 0 0-.188 1.377s2.841 3.074 3.085 3.32z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckCircle"},t.a=i},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r,a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(0),u=n(1),d=n(18),p=n(2656),f=n(74),h=n(170);var b=Object(d.connect)(function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}},{loadBrandQuestionAdvancedStyle:f.z})(r=function(t){function n(){var t,r;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(r=Object(i.a)(this,(t=Object(s.a)(n)).call.apply(t,[this].concat(c)))).getTrackUrls=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.props,o=a.pageType,i=a.advancedStyle,s=i.viewTracks,c=i.clickTracks,l="view"===t?s:c,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===o?1:2,rt:1},n),d=Object.keys(u).map(function(e){return"&".concat(e,"=").concat(u[e])}).join("");return l.map(function(e){return"".concat(e).concat(d)})},r.handleViewTrack=function(e){r.getTrackUrls("view",e).forEach(h.c)},r.handleClickTrack=function(e){r.getTrackUrls("click",e).forEach(h.c)},r}return Object(c.a)(n,t),Object(o.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,r=this.props,a=r.advancedStyle,o=(a=void 0===a?{}:a).cardType,i=r.onLoad;!n&&o&&"function"==typeof i&&i()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?Object(l.b)(p.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),n}(u.Component))||r}).call(this,n(47))},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1)),o=r(n(75)),i=function(e){return a.default.createElement(o.default,Object.assign({viewBox:"0 0 72 18"},e),a.default.createElement("g",{fillRule:"evenodd"},a.default.createElement("rect",{width:"72",height:"18",rx:"2"}),a.default.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},a.default.createElement("tspan",{x:"19",y:"13"},"有奖问答")),a.default.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 0 1-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 1 1 0-1.5H10zm.8 0h4.3a.8.8 0 0 1 0 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 0 0-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};t.default=i},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1)),o=r(n(75)),i=function(e){return a.default.createElement(o.default,Object.assign({viewBox:"0 0 24 24"},e),a.default.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 0 1-.657-.446.731.731 0 0 1 .154-.787l2.812-3.045a2.395 2.395 0 0 1 2.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0 1 17.248 6.5zm-.114-3.357a.798.798 0 0 0-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 0 0-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 0 1 0-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 0 1 0 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 0 1-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 0 1-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 0 1 2.926.392l2.812 3.045a.731.731 0 0 1 .153.787.711.711 0 0 1-.656.446H6.752zm.686-3.117a.798.798 0 0 0-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 0 0 .78.608h1.951L7.438 3.383z"}))};t.default=i},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(502),a=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,m.getNormalizedInfo)(e.data);if(!t||!t.adjson)return null;return p.default.createElement(h.default,null,p.default.createElement(y,(0,o.default)({},e,t)))};var o=a(n(201)),i=a(n(519)),s=a(n(89)),c=a(n(135)),l=a(n(106)),u=a(n(94)),d=a(n(107)),p=r(n(1)),f=a(n(2)),h=a(n(822)),b=n(834),m=n(2302),v=n(486),g=a(n(2647));n(2331);var y=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=(0,b.getNormalizedAd)(n.props).ad.clickTracks,r=e.target.closest("a");(0,v.clickTrack)(t).finally(function(){var e=r.href;window.open(e)})},n.handleClose=function(){var e=(0,b.getNormalizedAd)(n.props).ad.closeTracks;(0,v.closeTrack)(e).then(function(){n.setState(function(e){return{display:!e.display}}),n.props.onClose&&n.props.onClose()})},n.handleRef=function(e){n.root=e},n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=(0,b.getNormalizedAd)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,r={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};(0,v.initCmTrack)(this.root,r),(0,v.dataOriginTrack)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=(0,b.getNormalizedAd)(this.props),t=e.ad,n=e.creative,r=t.expand.displayAdvertisingTag,a=n.asset,o=a.title,i=a.desc,s=a.cta,c=a.landingUrl,l=a.brandName,u=a.brandLogo;return p.default.createElement("div",{className:"Pc-word",ref:this.handleRef},p.default.createElement("div",{className:"Pc-word-card"},p.default.createElement(O,{href:c,onClick:this.handleClick},p.default.createElement(j,{data:{name:l,logo:u}})),r&&p.default.createElement(g.default,{onClose:this.handleClose}),p.default.createElement(O,{href:c,onClick:this.handleClick},p.default.createElement("h2",{className:"Pc-word-card-title"},o),p.default.createElement("div",{className:"Pc-word-card-content  "},i&&p.default.createElement(p.default.Fragment,null,p.default.createElement("span",null,i),p.default.createElement("span",{className:"Pc-word-card-content-cta  "},s))))))}}]),t}(p.Component);function O(e){var t=e.children,n=(0,i.default)(e,["children"]);return p.default.createElement("a",(0,o.default)({target:"_blank"},n),t)}function j(e){var t=e.data,n=t.name,r=t.logo;return p.default.createElement("div",{className:"Pc-word-card-brand"},p.default.createElement("div",{className:"Pc-word-card-brand-wrapper"},p.default.createElement("img",{width:"20",height:"20",src:r,alt:"logo"}),p.default.createElement("span",null,n)))}y.propTypes={data:f.default.object.isRequired,onClose:f.default.func}},function(e,t,n){"use strict";var r=n(502),a=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(89)),i=a(n(135)),s=a(n(106)),c=a(n(94)),l=a(n(107)),u=r(n(1)),d=a(n(2)),p=a(n(824));n(2331);var f=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.handleCloseByDocument=function(e){"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState(function(e){return{display:!e.display}});var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,r=e.top,a=e.width,o=e.height+15,i=Math.floor(a/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(r+o,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-i,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return u.default.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},u.default.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",u.default.createElement(p.default,{name:"triangle",className:"Pc-word-card-sign-svg"})),u.default.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},u.default.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),u.default.createElement("div",{className:"Pc-word-card-sign-popup-menu"},u.default.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),u.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(u.Component);t.default=f,f.propTypes={onClose:d.default.func}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(22),a=n(0),o=(n(1),n(11)),i=n.n(o),s=n(518),c=n(70),l=n(52),u=n(2657),d=(n(2659),"https://pic1.zhimg.com/da8e974dc.jpg"),p={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},f=function(e){var t=e.src,n=e.style;return Object(a.b)("div",{className:"AdvancedViewer-imgField",style:Object.assign({},n,{},t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function h(e){var t=e.isMobileView,n=e.advancedStyle,o=(n=void 0===n?{}:n).cardType,i=n.url,c=n.material,l=void 0===c?[]:c,h=e.handleViewTrack,b=e.handleClickTrack;if(!l)return null;var m=function(e){return"function"==typeof b?{onClick:function(){b(e)}}:{}},v=function(e,t){return Object(a.b)("a",Object(r.default)({key:"AdvancedViewer-commodity-".concat(t),className:"AdvancedViewer-commodityItem",target:"_blank",href:i},m({etu:i,pi:t+1})),Object(a.b)("img",{src:e.image,role:"presentation"}),e.mainTitle&&Object(a.b)("div",{className:"AdvancedViewer-commodityIntro"},Object(a.b)("span",{className:"AdvancedViewer-mainTitle"},e.mainTitle),Object(a.b)("span",{className:"AdvancedViewer-subTitle"},e.subTitle)))};if("image"===o)return Object(a.b)("a",Object(r.default)({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",href:i},m({etu:i})),Object(a.b)(f,{src:l[0].image,style:t?{width:375,height:156.25}:{}}));if("image_text"===o)return Object(a.b)("a",Object(r.default)({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",href:i},m({etu:i})),t&&Object(a.b)("div",{className:"AdvancedViewer-intro"},l[0].intro),Object(a.b)(f,{src:l[0].image}),!t&&Object(a.b)("div",{className:"AdvancedViewer-intro"},l[0].intro));if("commodity"===o)return l.length&&Object(a.b)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity"},t?l.map(v):Object(a.b)(u.a,{items:l,renderItem:v}));if("recommended"===o){var g=function(e,t){return Object(a.b)("a",Object(r.default)({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank"},m({etu:e.url,pi:t+1})),Object(a.b)("div",{className:"AdvancedViewer-summary"},Object(a.b)("div",{className:"AdvancedViewer-wrap"},Object(a.b)("div",{className:"AdvancedViewer-title"},e.title),e.intro&&Object(a.b)("div",{className:"AdvancedViewer-desc"},e.intro.replace(/<[\s\S]*?>/g,""))),Object(a.b)("span",{className:"AdvancedViewer-data"},p[e.type]," · ",e.statisticText)),Object(a.b)(f,{src:e.image||d}))};return Object(a.b)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended"},l.map(function(e,t){return h?Object(a.b)(s.a,Object(r.default)({key:"AdvancedViewer-recommendedItem-".concat(t)},(n={pi:t+1},"function"==typeof h?{onViewed:function(){h(n)}}:{})),g(e,t)):g(e,t);var n}))}return null}function b(e){var t,n=e.isMobileView,o=e.brand,u=o.name,d=o.logo,p=e.advancedStyle,f=(p=void 0===p?{}:p).brandRecommendText,b=p.buttonText,m=p.url,v=p.cardType,g=e.handleViewTrack,y=e.handleClickTrack,O=function(e){return"function"==typeof y?{onClick:function(){y(e)}}:{}},j=u&&u.charCodeAt(u.length-1),w=j>=0&&j<=128?"".concat(u," "):u,C=n&&"recommended"!==v,k=f||"".concat(w,"的品牌推荐"),S=Object(a.b)(c.d,{className:i()("AdvancedViewer",{"is-mobile":n})},!C&&Object(a.b)(c.b,{className:"AdvancedViewer-header"},Object(a.b)("span",{className:"AdvancedViewer-headerText"},k)),Object(a.b)("div",{className:"AdvancedViewer-content"},Object(a.b)(h,e)),!n&&v&&"recommended"!==v&&Object(a.b)("div",{className:"AdvancedViewer-footer"},Object(a.b)(l.a,Object(r.default)({className:"AdvancedViewer-button",target:"_blank",to:m},O({etu:m})),b||"了解更多")),C&&Object(a.b)("div",{className:"AdvancedViewer-footer"},Object(a.b)("div",{className:"AdvancedViewer-brand"},Object(a.b)("img",{className:"AdvancedViewer-logo",src:d,role:"presentation"}),Object(a.b)("span",{className:"AdvancedViewer-brandName"},k)),Object(a.b)(l.a,Object(r.default)({className:"AdvancedViewer-button",target:"_blank",to:m},O({etu:m})),b||"查看详情")));return g?Object(a.b)(s.a,"function"==typeof g?{onViewed:function(){g(t)}}:{},S):S}},function(e,t,n){"use strict";(function(e){var r=n(9),a=n(4),o=n(5),i=n(8),s=n(6),c=n(7),l=n(22),u=n(24),d=n(0),p=n(1),f=n(261),h=n(11),b=n.n(h),m=n(43),v=n(108),g=(n(2658),30),y="ontouchstart"in e,O=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},j=function(e,t,n){return Math.min(Math.max(e,t),n)},w=function(e,t){return{transform:"translate3d(".concat(e,", ").concat(t,", 0)"),WebkitTransform:"translate3d(".concat(e,", ").concat(t,", 0)")}},C=function(e){return function(t){t.stopPropagation(),e()}},k=function(e){var t=e.from,n=e.to,r=Object(u.a)(e,["from","to"]),a=Object(f.b)({from:t,to:n});return Object(d.b)(f.a.div,Object(l.default)({style:a},r))},S=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={offset:n.props.defaultIndex-(n.props.loop?n.props.visibles:0),touchMoveOffset:0,showLeftArrow:!1,showRightArrow:!1},n.handleHotkeys=function(e){var t=n.isVertical?38===e.keyCode:37===e.keyCode,r=n.isVertical?40===e.keyCode:39===e.keyCode;t?n.prev():r&&n.next()},n.play=function(){n.timer_=setTimeout(function(){n.next(n.play)},n.props.interval)},n.pause=function(){n.isPlaying_&&(n.isPaused_=!0,n.stop())},n.resume=function(){n.isPaused_&&n.start()},n.prev=function(e){var t=n.state.offset;return t-=1,n.setOffset(t,e)},n.next=function(e){var t=n.state.offset;return t+=1,n.setOffset(t,e)},n.handleTouchStart=function(e){n.pause(),n.touchStartPosition_=O(e)},n.handleTouchMove=function(e){e.preventDefault();var t=O(e);if(n.isVertical){var r=t.y-n.touchStartPosition_.y;n.setState({touchMoveOffset:j(r/n.el.offsetHeight,-1,1)})}else{var a=t.x-n.touchStartPosition_.x;n.setState({touchMoveOffset:j(a/n.el.offsetWidth,-1,1)})}},n.handleTouchEnd=function(e){var t=O(e),r=t.x-n.touchStartPosition_.x,a=t.y-n.touchStartPosition_.y,o=n.isVertical?a>g:r>g,i=n.isVertical?a<-g:r<-g,s=!1;o?s=n.prev(n.resume):i&&(s=n.next(n.resume)),s||n.setState({touchMoveOffset:0})},n.handleTouchCancel=function(){n.resume()},n.handleMouseEnter=function(){n.pause()},n.handleMouseMove=function(){n.props.enableArrows&&n.setState({showLeftArrow:!0,showRightArrow:!0})},n.handleMouseLeave=function(){n.resume(),n.setState({showLeftArrow:!1,showRightArrow:!1})},n.timer_=null,n.isPlaying_=!1,n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoplay,n=e.enableHotkeys;t&&this.canPlay&&this.start(),n&&window.addEventListener("keydown",this.handleHotkeys)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=this.props.items;t.length!==n.length&&t.length>1&&this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),window.removeEventListener("keydown",this.handleHotkeys)}},{key:"start",value:function(){this.isPlaying_||(this.isPlaying_=!0,this.play())}},{key:"stop",value:function(){this.isPlaying_=!1,clearTimeout(this.timer_)}},{key:"calcIndex",value:function(e){var t=this.props,n=t.loop,r=t.items;return n?function(e,t){var n=(t+1)%e;return n<0?n+e:n}(r.length,e):e}},{key:"isValidIndex",value:function(e){var t=this.props.items;return e>=0&&e<=t.length-1}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.calcIndex(e);return!!this.isValidIndex(n)&&(this.props.onSlide({index:n}),this.setState({offset:e,touchMoveOffset:0},t),!0)}},{key:"slideTo",value:function(e,t){var n=this.props.items,r=this.state.offset,a=n.length,o=this.currentIndex;e!==o&&(r+=o<e?e-o:a+e-o,this.setOffset(r,t))}},{key:"getTranslateStyle",value:function(e){return this.isVertical?w(0,"".concat(100*e,"%")):w("".concat(100*e,"%"),0)}},{key:"renderArrows",value:function(){var e=this.props.enableArrows,t=this.state,n=t.showLeftArrow,r=t.showRightArrow;return!e||this.isVertical?null:Object(d.b)("span",null,n&&Object(d.b)("button",{className:"Carousel-leftArrow","aria-label":"上一个",onClick:C(this.prev)},Object(d.b)(m.a,{name:"arrow"})),r&&Object(d.b)("button",{className:"Carousel-rightArrow","aria-label":"下一个",onClick:C(this.next)},Object(d.b)(m.a,{name:"arrow"})))}},{key:"renderBullets",value:function(){var e=this,t=this.props,n=t.items;return t.enableBullets?Object(d.b)("div",{className:"Carousel-bullets"},n.map(function(t,n){return Object(d.b)("span",{key:n,className:b()("Carousel-bullet",{"is-active":e.currentIndex===n}),onClick:function(){return e.slideTo(n)}})})):null}},{key:"renderItems",value:function(){var e=this.props,t=e.loop,n=e.items,a=e.renderItem,o=e.visibles;if(!t)return n.map(function(e,t){return Object(p.cloneElement)(a(e,t),{key:t})});var i=this.currentIndex,s=i+3*o;return[n[n.length-1]].concat(Object(r.a)(n),[n[0]]).map(function(e,t){var n=t>=i&&t<s;return Object(p.cloneElement)(a(e,t),{key:t,hidden:!n})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loop,r=t.visibles,a=t.items,o=t.className,i=t.defaultIndex,s=this.state,c=s.offset,u=s.touchMoveOffset;if(!a.length)return null;var p=this.canPlay?{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave}:null,f=n?r:0;return Object(d.b)("div",Object(l.default)({ref:function(t){return e.el=t},className:b()("Carousel",o,{"is-vertical":this.isVertical})},p),Object(d.b)(k,{className:"Carousel-scroller",from:this.getTranslateStyle(-i),to:this.getTranslateStyle(-(c+f-u))},Object(d.b)("div",{className:"Carousel-window",style:n?this.getTranslateStyle(c):null},this.renderItems())),this.canPlay&&this.renderArrows(),this.canPlay&&this.renderBullets())}},{key:"canPlay",get:function(){return this.props.items.length>1}},{key:"isVertical",get:function(){return"vertical"===this.props.direction}},{key:"currentIndex",get:function(){return this.calcIndex(this.state.offset)}}]),t}(p.Component);S.defaultProps={id:"",items:[],defaultIndex:0,visibles:1,interval:3e3,loop:!0,enableArrows:!y,enableBullets:!0,enableHotkeys:!1,autoplay:!0,direction:"horizontal",onSlide:function(){}},t.a=function(e){return Object(d.b)(v.a,null,Object(d.b)(S,e))}}).call(this,n(47))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(0),s=n(1),c=n.n(s),l=n(26),u=n(22),d=n(29),p=n(4),f=n(5),h=n(8),b=n(6),m=n(7),v=n(2),g=n.n(v),y=n(18),O=n(79),j=n.n(O),w=n(173),C=n.n(w),k=n(151),S=n(15),N=n(196),A=n(27),T=n(74),_=(n(2614),Object(y.connect)(function(e){var t,n=Object(A.c)(e);return{isMCNUser:2===(null==n?void 0:null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}},{updateQuestionAnonymous:T.cb,fillCurrentUserIfNeeded:A.e})((o=a=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleToggleAnonymousConfirm=function(){var e=n.props,t=e.question.id,r=e.updateQuestionAnonymous;(0,e.onClose)(),r(t).then(function(){var e=n.props,t=e.isCheckedCircle,r=e.onChangecircleSettings;t&&r(!1)})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,a=e.showCircle,o=e.isMCNUser,s=n.relationship.isAnonymous;return Object(i.b)(N.b,{title:s?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default"},r&&Object(i.b)("div",null,s?Object(i.b)("div",{className:"Anonymous-confirm"},Object(i.b)("p",null,"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。")):Object(i.b)("div",{className:"Anonymous-confirm"},Object(i.b)("p",null,"使用匿名身份后："),Object(i.b)("ul",null,Object(i.b)("li",null,"提问、回答、赞同、关注会显示为匿名"),Object(i.b)("li",null,"除提问者本人，不能匿名编辑问题"),Object(i.b)("li",null,"不能邀请别人回答问题"),Object(i.b)("li",null,"不能使用视频功能"),o&&Object(i.b)("li",null,"不能使用商品信息发布功能"),a&&Object(i.b)("li",null,"回答无法被圈内说收录"))),Object(i.b)(N.a,{direction:"horizontal"},Object(i.b)(S.c,{onClick:t,color:"grey"},"取消"),Object(i.b)(S.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm},"确认"))))}}]),t}(s.Component),a.propTypes={question:g.a.object.isRequired},r=o))||r),E=n(229),x=n(2615),I=n.n(x),M=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={time:n.props.seconds},n.handleClearInterval=function(){n.interval&&clearInterval(n.interval)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.setState({time:e.state.time-1},function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}})},1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,r=this.state.time;return Object(i.b)(E.b,{title:t,subtitle:"".concat(r," 秒后自动跳转至").concat(n),errorImage:I.a})}}]),t}(s.Component);M.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var R=n(481),D=n(9),L=n(821),P=n.n(L),B=n(43),z=n(199),q=n(1887),F=n(287),U=n(480),V=n(23),Q=n(389),H=n(1950),K=n(108),W=n(2109),G=n(3),J=n(11),Y=n.n(J),X=n(93),$=n(501),Z=n(1758),ee=n(1760),te=n(1759),ne=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.badgeClassName,n=e.size,r=e.center,a=e.badge,o=Object($.a)(a)||{},s=o.identityInfo,c=o.bestAnswererInfo;return c&&s?Object(i.b)(Z.a,{className:t,size:n,center:r}):c?Object(i.b)(ee.a,{className:t,size:n,center:r}):s?Object(i.b)(te.a,{className:t,size:n,center:r}):null}}]),t}(c.a.Component);ne.propTypes={badge:g.a.array,size:g.a.number,center:g.a.bool,badgeClassName:g.a.string},ne.defaultProps={size:16,center:!0,badgeClassName:""};n(2616);var re="SpecialQuestionAuthor",ae=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.author,n=e.className,r=e.isMobile,a=t.avatarUrl,o=t.name,s=t.badge;return Object(i.b)("div",{className:Y()("".concat(re,"-Wrapper"),n)},Object(i.b)(l.Link,{className:Y()("".concat(re),Object(G.a)({},"ROOT_CLASS--mobile",r)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id)},Object(i.b)(X.a,{size:r?22:28,url:a,alt:o,round:!0}),Object(i.b)("span",{className:"".concat(re,"-Author")},t.name),Object(i.b)(ne,{badge:s,size:r?16:18,center:!0,badgeClassName:"".concat(re,"-Badge")}),Object(i.b)("span",{className:"".concat(re,"-Suffix")},"的提问")))}}]),t}(s.Component);ae.propTypes={author:g.a.object.isRequired,isMobile:g.a.bool};var oe,ie,se,ce,le=n(504),ue=n(195),de=n(1856),pe=Object(ue.a)(function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}})(oe=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.item;return Object(i.b)(le.a,{className:"QuestionTopic"},Object(i.b)(de.a,{noHoverCard:!1,topic:e}))}}]),t}(s.Component))||oe,fe=n(30),he=n(1776),be=n(1775),me=n(1772),ve=n(1773),ge=n(92),ye=n(44),Oe=n(134),je=n(273),we=n(496),Ce=n(512),ke=(n(2329),[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}]),Se=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],Ne={title:"",step:0,isEditingTitle:!0,detail:{toHTML:function(){return""}},showToolbar:!1,reason:null,otherReason:"",videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null}},Ae=Object(y.connect)(function(e){return{notification:e.notification[V.c]||e.notification.updateQuestion}},{showNotification:V.h,updateQuestion:T.bb})((ce=se=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).handleModalClose=function(){e.editable&&e.editable.hasVideo("upload")?e.setState({uploadModalShown:!0}):(e.setState({step:0}),e.props.onClose())},e.handleVideoQuestionModalHide=function(){e.setState({videoQuestionConfirmShown:!1})},e.handleUploadModalHide=function(){e.setState({uploadModalShown:!1})},e.handleUploadModalConfirm=function(){e.setState({uploadModalShown:!1}),e.props.onClose()},e.handleSubmit=function(){e.setState({errors:e.validate()},function(){for(var t=e.state.errors,n=0,r=["title","reason"];n<r.length;n++){var a=r[n],o=t[a];if(o&&"error"===o.level){var i=e["".concat(a,"Input")];return void(i&&i.focus())}}e.editable.hasVideo("upload")?e.props.showNotification("请等待视频上传完成后发布","red",V.c):e.editable.hasImage("upload")?e.props.showNotification("请等待图片上传完成后发布","red",V.c):!e.editable.hasVideo()||e.context.currentUser.isOrg?e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}):e.editable.hasVideo("error-review")||e.editable.hasVideo("censor")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}):e.handleSubmitEditQuestion():e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"})})},e.handleSubmitEditQuestion=function(){var t=e.props.detail,n=e.state,r=n.title,a=n.detail,o=n.reason,i=n.otherReason,s={question:{title:r},meta:{reason:"other"===o?i:o}},c=a.toHTML();c!==t&&(s.question.detail=c),Object.keys(s.question).length>0&&e.props.updateQuestion(e.props.id,s)},e.triggerImageUpload=function(){e.editable.handleKeyCommand("insert-image")},e.triggerVideoUpload=function(){e.editable.handleKeyCommand("insert-video")},e.handleError=function(t,n){Object(Ce.b)(t,n,e.props.showNotification,V.c)},e.handleBeforeVideoUpload=function(){return!e.props.isAnonymous},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.state=Ne,e.onChangeTitle=e.handleChangeTitle.bind(Object(fe.default)(e)),e.onBlurTitle=e.handleBlurTitle.bind(Object(fe.default)(e)),e.onChangeDetail=e.handleChangeDetail.bind(Object(fe.default)(e)),e.onChangeReason=e.handleChangeReason.bind(Object(fe.default)(e)),e.onChangeOtherReason=e.handleChangeOtherReason.bind(Object(fe.default)(e)),e.toggleToolbar=e.toggleToolbar.bind(Object(fe.default)(e)),e}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,a=n.show,o=n.onClose,i=e.notification,s=e.show,c=e.title,l=e.detail;if(!a&&s&&this.setState({title:c,detail:{toHTML:function(){return l}}}),r!==i){var u=i.code,d=i.text;if(i.id)this.setState(Ne),o();else switch(u){case 103003:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{title:{level:"error",text:"已经存在的问题"}})}},function(){return t.titleInput.focus()});break;case 103001:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{detail:{level:"error",text:"过长的补充说明"}})}},function(){return t.editable.focus()});break;default:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{overall:d})}})}}}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value,isEditingTitle:!0})}},{key:"handleBlurTitle",value:function(){this.setState({errors:this.validate("title",!0),isEditingTitle:!1})}},{key:"handleChangeDetail",value:function(e){this.setState({detail:e})}},{key:"handleChangeReason",value:function(e){var t=this,n=this.state.step;this.setState({reason:e,step:1},function(){0!==n?"other"===e&&t.reasonInput.focus():setTimeout(function(){return t.titleInput.focus()})})}},{key:"handleChangeOtherReason",value:function(e){this.setState({otherReason:e.target.value})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"title"===e){var r=this.state.title,a=null;0!==r.length||t?r.length>51?a={level:"error",text:"问题标题超出 ".concat(r.length-51," 个字")}:r.length>0&&r.length<3?a={level:"error",text:"问题字数太少了吧"}:r.length>0&&-1===r.indexOf("?")&&-1===r.indexOf("？")?a={level:"error",text:"你还没有给问题添加问号"}:(r.match(/(\?|？)/g)||[]).length>1&&(a={level:"warning",text:"多个问题建议拆分"}):a={level:"error",text:"问题标题不能为空"},n=Object.assign({},n,{title:a})}if(!e||"reason"===e){var o=null,i=this.state,s=i.reason,c=i.otherReason;s&&("other"!==s||c)||(o={level:"error",text:"必选"}),n=Object.assign({},n,{reason:o})}return n}},{key:"toggleToolbar",value:function(){this.setState(function(e){return{showToolbar:!e.showToolbar}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.detail,a=t.questionType,o=this.state,s=o.title,c=o.step,u=o.isEditingTitle,d=o.showToolbar,p=o.reason,f=o.otherReason,h=o.uploadModalShown,b=o.videoQuestionConfirmShown,m=o.videoQuestionConfirmAllowContinue,v=o.videoQuestionConfirmTitle,g=o.videoQuestionConfirmText,y=o.errors,O=y.title,j=y.detail,w=y.reason,C=y.overall,k=null;if(u){var N=51-s.length;N>=0?N<10&&(k="还可以输入 ".concat(N," 个字")):k=Object(i.b)("span",{className:"QuestionAsk-error"},"问题标题超出 ",-N," 个字")}else O&&(k=Object(i.b)("span",{className:"QuestionAsk-".concat(O.level)},O.text));var A=null;return 0===c?A=Object(i.b)("div",null,ke.map(function(t){return Object(i.b)("div",{className:"QuestionEdit-reason",key:t.value,onClick:function(){e.onChangeReason(t.value)}},t.text,Object(i.b)(he.a,null))})):1===c&&(A=Object(i.b)("div",{className:"QuestionAsk"},Object(i.b)(ye.b,{title:v,onClose:this.handleVideoQuestionModalHide},b&&Object(i.b)("div",{className:"QuestionAsk-videoAlert"},g,Object(i.b)(ye.a,null,m&&Object(i.b)(S.c,{preset:"primary",color:"blue",onClick:this.handleSubmitEditQuestion},"发布"),Object(i.b)(S.c,{onClick:this.handleVideoQuestionModalHide},"继续编辑")))),Object(i.b)(ye.b,{onClose:this.handleUploadModalHide},h&&Object(i.b)("div",{className:"QuestionAsk-onUploadModal"},"关闭弹窗将丢失上传中的视频内容",Object(i.b)(ye.a,null,Object(i.b)(S.c,{preset:"primary",color:"blue",onClick:this.handleUploadModalConfirm},"确认"),Object(i.b)(S.c,{onClick:this.handleUploadModalHide},"取消")))),Object(i.b)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)(ge.a,{className:"QuestionAsk-title",onRef:function(t){e.titleInput=t},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:s,onChange:this.onChangeTitle,onBlur:this.onBlurTitle})),k&&Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)("div",{className:"QuestionAsk-sectionHeader"},Object(i.b)("div",{className:"QuestionAsk-sectionHeaderRight"},k))),Object(i.b)("div",{className:"QuestionAsk-section QuestionAsk-DetailSection"},Object(i.b)("div",{className:"QuestionAsk-sectionHeader"},Object(i.b)("span",{className:"QuestionAsk-label"},"问题描述（可选）："),Object(i.b)("div",{className:"QuestionAsk-sectionHeaderRight"},Object(i.b)(je.a,{label:"".concat(d?"收起":"展开","工具栏"),isActive:d,icon:be.a,onClick:this.toggleToolbar}),Object(i.b)(je.a,{label:"插入图片",icon:me.a,onClick:this.triggerImageUpload}),Object(i.b)(je.a,{label:"上传视频",icon:ve.a,onClick:this.triggerVideoUpload}))),Object(i.b)(we.a,{onRef:function(t){e.editable=t},spread:!0,large:!0,allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:d,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:r,onError:this.handleError,onUploadError:this.handleUploadError,onChange:this.onChangeDetail,onBeforeVideoUpload:this.handleBeforeVideoUpload})),j&&Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)("div",{className:"QuestionAsk-sectionHeader"},Object(i.b)("div",{className:"QuestionAsk-sectionHeaderRight"},Object(i.b)("span",{className:"QuestionAsk-".concat(j.level)},j.text)))),Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)("div",{className:"QuestionAsk-sectionHeader"},Object(i.b)(Oe.b,{className:"QuestionEdit-reasonSelect",needsReposition:!0,plain:!0,text:p?null:"请选择一个修改理由",value:p,onChange:this.onChangeReason},ke.map(function(e){return Object(i.b)(Oe.a,{key:e.value,value:e.value,text:e.text})})),(!p||"other"===p&&!f)&&(w?Object(i.b)("span",{className:"QuestionAsk-".concat(w.level)},w.text):"必选"),"org"===a||"commercial"===a||Object(i.b)("div",{className:"QuestionAsk-sectionHeaderRight"},Object(i.b)(l.Link,{className:"QuestionEdit-why",target:"blank",to:"/question/19550238/answer/95068125"},"为什么问题可以被公共编辑？"))),"other"===p&&Object(i.b)(ge.a,{onRef:function(t){e.reasonInput=t},spread:!0,large:!0,value:f,placeholder:"请输入修改理由",onChange:this.onChangeOtherReason})),Object(i.b)(ye.a,null,Object(i.b)(S.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"提交修改"))))),Object(i.b)(ye.b,{className:1===c&&"QuestionAsk-Modal",title:Se[c].title,subtitle:Se[c].subtitle,footer:C,onClose:this.handleModalClose,hotKeyClosable:!1,maskClosable:!1},n&&A)}}]),t}(s.Component),se.propTypes={id:g.a.number,title:g.a.string,detail:g.a.string,show:g.a.bool.isRequired,onClose:g.a.func.isRequired,isAnonymous:g.a.bool},se.contextTypes={currentUser:g.a.object},ie=ce))||ie,Te=n(1957),_e={topics:[],errors:{topics:null,overall:null}},Ee=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).state=_e,e.onChangeTopics=e.handleChangeTopics.bind(Object(fe.default)(e)),e.onBlurTopics=e.handleBlurTopics.bind(Object(fe.default)(e)),e.onSubmit=e.handleSubmit.bind(Object(fe.default)(e)),e}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,a=n.show,o=n.onClose,i=e.notification,s=e.show,c=e.topics;if(!a&&s&&(setTimeout(function(){return t.topicsInput.focus()}),this.setState({topics:c})),r!==i){var l=i.text;i.id?(this.setState(_e),o()):this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{overall:l})}})}}},{key:"handleChangeTopics",value:function(e){this.setState({topics:e})}},{key:"handleBlurTopics",value:function(){this.setState({errors:this.validate("topics",!0)})}},{key:"handleSubmit",value:function(){var e=this;this.setState({errors:this.validate()},function(){for(var t=e.props.topics,n=e.state,r=n.topics,a=n.errors,o=0,i=["topics"];o<i.length;o++){var s=i[o],c=a[s];if(c&&"error"===c.level)return void e["".concat(s,"Input")].focus()}if(r!==t){var l={topicUrlTokens:r.map(function(e){return e.urlToken||e.id})};e.props.dispatch(Object(T.gb)(e.props.id,l))}})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"topics"===e){var r=null;0!==this.state.topics.length||t||(r={level:"error",text:"至少添加一个话题"}),n=Object.assign({},n,{topics:r})}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.onClose,a=this.state,o=a.topics,s=a.errors,c=s.topics,l=s.overall;return Object(i.b)(ye.b,{className:"QuestionAsk-Modal",size:"large",title:"修改话题",subtitle:"最多只能为一个问题绑定 5 个话题",footer:l,onClose:r},n&&Object(i.b)("div",{className:"QuestionAsk"},Object(i.b)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)(Te.a,{onRef:function(t){e.topicsInput=t},value:o,onChange:this.onChangeTopics,onBlur:this.onBlurTopics})),c&&Object(i.b)("div",{className:"QuestionAsk-section"},Object(i.b)("div",{className:"QuestionAsk-sectionHeader"},Object(i.b)("div",{className:"QuestionAsk-sectionHeaderRight"},Object(i.b)("span",{className:"QuestionAsk-".concat(c.level)},c.text)))),Object(i.b)(ye.a,null,Object(i.b)(S.c,{preset:"primary",color:"blue",onClick:this.onSubmit},"提交修改")))))}}]),t}(s.Component);Ee.propTypes={show:g.a.bool.isRequired,onClose:g.a.func.isRequired};var xe=Object(y.connect)(function(e){return{notification:e.notification.updateQuestionTopics}})(Ee),Ie=n(2252),Me=n(116),Re=n(105),De=n(10),Le=function(e){return c.a.createElement(De.a,e,c.a.createElement("path",{d:"M12 9h.009c4.65-.014 8.642 5.096 8.705 9.629 0 .36-.303.461-.592 0-1.474-2.544-3.878-3.862-7.03-3.862h-1.084L12 17.583a.7.7 0 0 1-1.125.556l-7.16-5.478a.7.7 0 0 1-.009-1.105l7.16-5.66a.7.7 0 0 1 1.134.55V9z"}))};Le.defaultProps={name:"Undo"};var Pe=Le,Be=function(e){return c.a.createElement(De.a,e,c.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};Be.defaultProps={name:"Preview"};var ze,qe,Fe,Ue,Ve,Qe,He=Be,Ke=n(16),We=n(727),Ge=n(52),Je=n(64),Ye=(n(2617),300),Xe=(ze=Object(y.connect)(function(e,t){return{draft:Object(T.m)(e,{id:t.params.id}),question:Object(T.T)(e,{id:t.params.id})}},{restoreAnswer:Je.y,cancelScheduledPublish:Je.d,showNotification:V.h}),Object(l.withRouter)(qe=ze((Ue=Fe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).getRenderProps=function(){var e=n.props,t=e.draft,r=e.question,a=r.id,o=r.relationship,s=(o=void 0===o?{}:o).myAnswer;return s?s.isDeleted?{icon:Object(i.b)(Pe,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:n.handleRestoreAnswer}}:{icon:Object(i.b)(He,{size:17,className:"QuestionButton-icon"}),text:"查看回答",props:{to:"/question/".concat(a,"/answer/").concat(s.answerId),onClick:n.handleFocusAnswer},Wrapper:Ge.a}:{icon:Object(i.b)(B.a,{className:"QuestionButton-icon Button-icon",name:"modify"}),text:t?"编辑回答":"写回答",props:{onClick:n.handleAddAnswer}}},n.handleFocusAnswer=function(){var e=document.querySelector(".AnswerCard");e&&(e.classList.add("is-focus"),n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){return e.classList.remove("is-focus")},Ye))},n.handleRestoreAnswer=function(){var e=n.props,t=e.question,r=t.relationship.myAnswer,a=t.id,o=e.restoreAnswer,i=e.showNotification;r.isDeleted&&o(a,r.answerId).then(function(){return i("已撤销删除回答")})},n.handleAddAnswer=n.context.authRequired(function(e){var t=n.props,r=t.draft,a=t.question.reviewInfo,o=(a=void 0===a?{}:a).tips,i=t.zaId,s=t.cancelScheduledPublish,c=e.currentTarget,l=function(){o?n.props.showNotification(o,"red"):(i&&Ke.default.trackEvent(null,{id:i}),Ke.default.trackEvent(Object(fe.default)(n),{action:r&&r.editableContent?"Edit":"Answer",is_intent:!0,name:c.textContent}),n.context.startAddAnswer())};r&&r.schedule?Re.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then(function(){s(n.props.question.id).then(l)},function(){}):l()}),n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){Object(We.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,a=e.preset,o=e.color,s=void 0===o?"blue":o,l=e.onClick,d=this.getRenderProps(),p=d.icon,f=d.text,h=d.props,b=d.Wrapper,m=void 0===b?S.c:b,v=Object(i.b)(c.a.Fragment,null,p,f);return Object(i.b)(m,Object(u.default)({},h,l&&{onClick:l},{color:s,size:r,preset:a,className:n}),t||v)}}]),t}(s.Component),Fe.contextTypes={authRequired:g.a.func,startAddAnswer:g.a.func},qe=Ue))||qe)||qe),$e=n(133),Ze=n(485),et=n(55),tt=(n(2618),Ve=Object(y.connect)(function(e){return{shouldOia:Object(et.f)(e)}}),Object(l.withRouter)(Qe=Ve(Qe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).createOpenInAppHandler=function(e){var t=n.props.question.id;return function(){return Object(Me.b)(Object(Ze.a)({type:"question",id:t},{utm_content:e}))}},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,r=n.relationship,a=n.relationship.isAuthor,o=n.isNormal,s=n.status,c=(s=void 0===s?{}:s).isLocked,l=n.questionType,d=n.isMuted,p=n.id,f=e.shouldOia,h=e.inTopBar,b="commercial"===l&&d;return Object(i.b)("div",{className:"QuestionButtonGroup"},a&&b?Object(i.b)(Ge.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green"},"推广问题"):Object(i.b)($e.a,Object(u.default)({id:p,zaId:h?3408:3309,type:"question",preset:"primary",isFollowing:(r&&{}.hasOwnProperty.call(r,"isFollowing")?r:t).isFollowing,disabled:b},f&&{onClick:this.createOpenInAppHandler("follow_question")})),o&&!c&&Object(i.b)(Xe,Object(u.default)({color:"blue",zaId:h?3409:3311},f&&{onClick:this.createOpenInAppHandler("write_answer")})))}}]),t}(s.Component))||Qe)||Qe),nt=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={count:Math.round(n.props.count)},n.next=function(){var e=n.props.onEnd,t=n.state.count-1;n.setState({count:t}),0===t&&(clearInterval(n.handle),e&&e())},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return c.a.createElement("span",null,e)}}]),t}(s.Component);nt.propTypes={count:g.a.number.isRequired,interval:g.a.number,onEnd:g.a.func},nt.defaultProps={interval:1e3};var rt,at,ot,it,st,ct,lt,ut=nt,dt=n(256),pt=n(42),ft=n(198),ht=n(103),bt=n(169),mt=n.n(bt),vt=n(70),gt=n(483),yt=n(115),Ot=n(136),jt=n(279),wt=n(24),Ct=(n(2619),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,r=e.children,a=Object(wt.a)(e,["to","className","children"]),o=Y()("QuestionMainAction",n);return t?Object(i.b)(l.Link,Object(u.default)({to:t,className:o},a),r):Object(i.b)(S.c,Object(u.default)({className:o},a),r)}}]),t}(s.Component)),kt=n(63),St=n(488),Nt=function(e,t){return e&&e.replace(new RegExp(t,"g"),function(e){return"<em>".concat(e,"</em>")})},At=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={mounted:!1},n.handleInvite=function(){var e=n.props,t=e.user.urlToken,r=e.onInvite;Ke.default.trackEvent(Object(fe.default)(n),{id:3314}),r(t)},n.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,r=e.topic,a=e.isInvited,o=e.keyword,s=e.reason,c=t.name,d=Object.assign({},t,{name:Object(i.b)(ft.a,{inline:!0,html:Nt(c,o)})}),p=Object(i.b)(St.a,{user:d,status:s||(n?Object(i.b)("div",null,"在话题 ",Object(i.b)(de.a,{topic:r})," 下有 ",Object(i.b)(l.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(r.id)},Object(kt.formatNumber)(n)," 个回答")):Object(i.b)(ft.a,{html:t.headline})),action:Object(i.b)(S.c,{color:a?void 0:"blue",disabled:a,onClick:this.handleInvite},a?"已邀请":"邀请回答"),meta:null}),f={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:o?4436:4437},extra:{search:{raw_query:o||""}},trackCardShow:!0};return this.state.mounted?Object(i.b)(U.a,Object(u.default)({getContainer:this.getContainer},f),p):p}}]),t}(s.Component),Tt=n(271),_t=n(28),Et=(n(2620),Object(y.connect)(null,{openAutoInvite:_t.N,closeAutoInvite:_t.d})((ot=at=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){var e=n.props,t=e.questionId,r=e.closeAutoInvite,a=e.openAutoInvite;return"close"===e.item.status?(Ke.default.trackEvent(null,{id:3313}),a(t)):r(t)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,r=t.description,a=t.status,o=t.title,s="close"===a;return Object(i.b)(Tt.e,{data:t,image:Object(i.b)(X.a,{size:38,url:n}),title:o,meta:Object(i.b)(Tt.d,null,r),className:"AutoInviteItem-wrapper--desktop",extra:Object(i.b)(S.c,{preset:"link",className:s?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick},s?"开启邀请":"已开启")})}}]),t}(s.Component),at.propTypes={questionId:g.a.number.isRequired,item:g.a.object},rt=ot))||rt),xt=n(513),It=(n(2621),300),Mt=function(e){var t=e.user;return Object(i.b)("div",{className:"InviteeItem"},Object(i.b)("div",{className:"InviteeItem-content"},Object(i.b)(X.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),Object(i.b)("h4",{className:"InviteeItem-title"},t.name)))},Rt=Object(ue.a)({module:"InvitationFrame"})((ct=st=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={expanded:!1,keyword:null},n.onChange=mt()(function(e){n.props.onChange(e)},It),n.handleChange=function(e){var t=e.target.value;n.setState({keyword:t}),t&&n.onChange(t)},n.handleExpand=function(){(0,n.props.trackEvent)(Object(fe.default)(n),{action:"LoadMore",element:"Button"}),n.setState({expanded:!0})},n.handleInvite=function(e){var t=n.state.keyword;return(0,n.props.onInvite)(e,t)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,Object(i.b)(ge.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:Object(i.b)(B.a,{grey:!0,name:"search"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),r=[t.length?Object(i.b)("span",null,"你已邀请 ",Object(i.b)(yt.a,{toggler:Object(i.b)(S.c,{className:"Invitees-toggler",preset:"plain"},Object(i.b)("span",{className:"Invitees-togglerUsers"},t.slice(0,2).map(function(e,t){return Object(i.b)("span",{key:t},0===t?"":"、",Object(i.b)("span",null,e.name))})),t.length>2&&" 等 ".concat(t.length," 人")),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0},Object(i.b)("div",{className:"Invitees"},t.map(function(e){return Object(i.b)(Mt,{key:e.urlToken,user:e})})))):Object(i.b)("h2",{className:"QuestionInvitation-title"},"你可以邀请下面用户，快速获得回答"),n],a=Object(d.a)(r,2),o=a[0],s=a[1];return Object(i.b)(xt.a,{header:o,options:s})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,a=t.items,o=t.searchItems,s=t.expandCount,c=t.autoInvitationItem,l=t.question,d=(l=void 0===l?{}:l).id,p=this.state,f=p.expanded,h=p.keyword,b=h?o:a,m=Boolean((void 0===s||s>0)&&!h&&b.length&&c&&c.status),v=m?s-1:s,g=!v||f,y=s?vt.d:"div";return Object(i.b)(y,{className:"QuestionInvitation"},this.renderHeader(),n?Object(i.b)("div",{className:Y()("QuestionInvitation-content","QuestionInvitation-content--centered")},Object(i.b)(Ot.a,null)):Object(i.b)("div",{className:Y()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!b.length})},b.length?Object(i.b)(U.a,{module:"UserList"},Object(i.b)(gt.b,null,m&&Object(i.b)(Et,{questionId:d,item:c}),(g?b:b.slice(0,v)).map(function(t){return Object(i.b)(gt.a,{className:Y()({"List-item--mobile":!1}),key:t.user.urlToken},Object(i.b)(At,Object(u.default)({},t,{keyword:h,onInvite:e.handleInvite})))}))):Object(i.b)(jt.a,{entityType:"users",placeholder:r?"没有可以邀请的人":"没有找到你想邀请的人"}),b.length>v&&!g&&Object(i.b)(Ct,{onClick:this.handleExpand},"更多推荐结果")))}}]),t}(s.Component),st.propTypes={expandCount:g.a.number,items:g.a.array,searchItems:g.a.array,onInvite:g.a.func.isRequired},it=ct))||it;var Dt,Lt,Pt,Bt,zt,qt=Object(y.connect)(function(e,t){var n=t.question.id,r=e.entities,a=r.users,o=r.topics,i=e.question,s=i.invitationCandidates,c=i.invitees,l=i.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,r=e.topicContributions,i=e.reason,s=r&&r.sort(function(e,t){return t.contributionsCount-e.contributionsCount})[0]||{},c=s.topic,l=s.contributionsCount;return{user:a[t],topic:o[c],isInvited:n,contributionsCount:l,reason:i}},d=s[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},p=d.isFetching,f=d.isDrained,h=d.items,b=d.searchItems,m=(c[n]||{items:[]}).items;return{isFetching:p,isDrained:f,items:h.map(u),searchItems:b.map(u),invitees:m.map(function(e){return a[e]}),autoInvitationItem:l[n]}},{loadItems:T.H,updateInvitation:T.Z,loadAutoInvitation:T.w})(lt=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleChange=function(e){var t=n.props,r=t.question.id;(0,t.loadItems)(r,"invitationCandidates",{keyword:e})},n.handleInvite=function(e,t){n.props.updateInvitation(n.props.question.id,e,t?"search":"normal")},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.status,a=(r=void 0===r?{}:r).isLocked,o=r.isClose,i=r.isEvaluate,s=r.isSuggest,c=e.loadItems,l=e.loadAutoInvitation;e.isDrained||a||o||i||s||(c(n,"invitationCandidates"),c(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,r=e.isEvaluate,a=e.isSuggest;return t||n||r||a?null:Object(i.b)(Rt,Object(u.default)({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),t}(s.Component))||lt,Ft=n(150);n(2622);var Ut,Vt=(Dt=Object(Ft.a)({replacement:null}),Lt=Object(y.connect)(function(e,t){var n=e.entities.questions,r=e.question.inviters,a=t.location.query,o=t.question.id,i={isMuteSpecial:Object(T.v)(t.question),inviters:r[o]};if(a.rf&&/^\d+$/.test(a.rf)){var s=n[Number(a.rf)];s&&(i.fromQuestion=s)}return i},{loadItems:T.H,loadQuestion:T.J,revokeQuestionRedirection:T.V,deleteInviters:T.j}),Dt(Pt=Object(l.withRouter)(Pt=Lt((zt=Bt=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},n.redirect=function(){var e=n.props,t=e.router,r=e.location.query,a=e.question,o=a.id,i=a.redirection;i&&i.to&&i.to.id&&"1"!==r.nr&&t.push("/question/".concat(i.to.id,"?rf=").concat(o))},n.handleRedirectionClose=function(){n.setState({redirectionHidden:!0,invitersHidden:!0}),n.timeout=setTimeout(function(){n.setState({invitersHidden:!1})},1e3)},n.handleCloseInviters=function(){n.setState({invitersHidden:!0})},n.handleDeleteInviters=function(e){var t=n.props,r=t.question.id;(0,t.deleteInviters)(r),n.handleCloseInviters(),Ke.default.trackEvent(e.target,{action:"Ignore"})},n.handleCancelAnonymous=function(){(0,n.props.onInvitationTipClose)(),n.context.toggleAnonymous(!1)},n.handleInvite=function(e){n.setState({invitersHidden:!0,invitationModalShown:!0}),Ke.default.trackEvent(e.target,{action:"Invite",is_intent:!0})},n.handleInvitationModalHide=function(){n.setState({invitationModalShown:!1})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){Object(pt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,r=e.location.query,a=e.question.id,o=e.fromQuestion,i=e.loadItems,s=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&i(a,"inviters"),r.rf&&/^\d+$/.test(r.rf)&&!o&&(this.setState({redirectionLoading:!0}),s(Number(r.rf)).catch(function(){}).then(function(){t.setState({redirectionLoading:!1})}))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,r=t.question.id;(0,t.revokeQuestionRedirection)(e).then(function(){n[e===r?"replace":"push"]("/question/".concat(e))}),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?Object(i.b)("div",{className:"QuestionStatus-bar"},Object(i.b)("div",{className:"QuestionStatus-bar-inner"},Object(i.b)("div",{className:"QuestionStatus-bar-commercialMuted"},"该品牌提问尚未激活，无法在社区内流通。请"," ",Object(i.b)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer"},"前往广告平台")," ","进行设置。"),Object(i.b)("p",null,"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"))):null}},{key:"renderMute",value:function(){if(this.props.isMuteSpecial)return Object(i.b)("div",{className:"QuestionStatus-bar"},Object(i.b)("div",{className:"QuestionStatus-bar-inner"},Object(i.b)("strong",null,"问题已解散。"),Object(i.b)("p",null,"当前问题下的回答暂时无法查看。")))}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&Object(i.b)("div",{className:"QuestionStatus-bar"},Object(i.b)("div",{className:"QuestionStatus-bar-inner"},Object(i.b)("strong",null,e.description,"。"),Object(i.b)("em",null,"原因：",e.reason,"。"),1033!==e.reasonId&&Object(i.b)(ft.a,{html:e.note})))}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,r=t.question,a=r.id,o=r.redirection,s=r.relationship,c=(s=void 0===s?{}:s).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,p=this.state,f=p.redirectionLoading,h=p.redirectionHidden,b=p.invitersHidden,m=null,v=null;if(!f)if(o&&o.to&&o.to.id&&!h){var g=o.to,y=g.id,O=g.title,j="1"!==n.nr&&!d;m=j?"redirect-countdown":"redirect",v=Object(i.b)("div",{className:"QuestionStatus-notification-inner"},Object(i.b)("div",{className:"QuestionStatus-notification-content"},j?Object(i.b)("span",null,"此问题将在 ",Object(i.b)(ut,{count:5,onEnd:this.redirect})," ","秒后跳转至"):Object(i.b)("span",null,"此问题已重定向至")," ",Object(i.b)(Ge.a,{preset:"plain",to:"/question/".concat(y,"?rf=").concat(a)},O)),Object(i.b)("div",{className:"QuestionStatus-notification-actions"},Object(i.b)(S.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(a)}},"撤销重定向"),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(S.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===a&&!h){var w=u.id,C=u.title;m="redirect-from",v=Object(i.b)("div",{className:"QuestionStatus-notification-inner"},Object(i.b)("div",{className:"QuestionStatus-notification-content"},"从问题"," ",Object(i.b)(Ge.a,{preset:"plain",to:"/question/".concat(w,"?nr=1")},C)," ","跳转而来"),Object(i.b)("div",{className:"QuestionStatus-notification-actions"},Object(i.b)(S.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(w)}},"撤销重定向"),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(S.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else l&&l.length&&!b&&!c&&(v=Object(i.b)(U.a,{module:"InvitationCard",trackCardShow:!0},Object(i.b)("div",{className:"QuestionStatus-notification-inner"},Object(i.b)("div",{className:"QuestionStatus-notification-content"},l.map(function(e,t){return Object(i.b)("span",{key:e.urlToken},0!==t&&"、",Object(i.b)(ht.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"}))})," ","邀请你回答此问题"),Object(i.b)("div",{className:"QuestionStatus-notification-actions"},Object(i.b)(S.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite},"邀请别人"),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(S.c,{preset:"plain",onClick:this.handleDeleteInviters},"忽略邀请")),Object(i.b)("div",null,Object(i.b)(S.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters},Object(i.b)(B.a,{name:"remove",width:11,height:11}))))));return Object(i.b)(dt.a,{className:"QuestionStatus-notification",notification:v?{key:m,text:v}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return Object(i.b)(dt.a,{className:"QuestionStatus-notification",notification:t?{text:Object(i.b)("div",{className:"QuestionStatus-notification-inner"},Object(i.b)("div",{className:"QuestionStatus-notification-content"},"在匿名状态下无法邀请他人回答"),Object(i.b)("div",{className:"QuestionStatus-notification-actions"},Object(i.b)(S.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous},"取消匿名"),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(S.c,{preset:"plain",onClick:n},"关闭")))}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return Object(i.b)("div",{className:"QuestionStatus"},this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),Object(i.b)(N.b,{size:"fullPage",onClose:this.handleInvitationModalHide},t&&Object(i.b)(qt,{question:e})))}}]),t}(s.Component),Bt.contextTypes={currentUser:g.a.object,toggleAnonymous:g.a.func},Pt=zt))||Pt)||Pt)||Pt),Qt=n(137),Ht=n(1928);var Kt,Wt,Gt,Jt=Object(y.connect)(function(e,t){var n=t.parent.id,r=e.entities.users,a=e.question,o=a.followers,i=a.concernedFollowers,s=o[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},c=s.isFetching,l=s.isDrained,u=s.order,d=s.ids,p=(i[n]||{ids:[]}).ids;return{isFetching:c,isDrained:l,order:u,items:[].concat(Object(D.a)(p),Object(D.a)(d.filter(function(e){return!p.includes(e)}))).map(function(e){return r[e]}),currentUser:Object(A.c)(e)}},{loadQuestionFollowers:T.M})(Ut=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).load=function(){var e=n.props,t=e.parent.id;(0,e.loadQuestionFollowers)(t)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,r=e.isDrained,a=e.items,o=e.currentUser;return Object(i.b)(Ht.a,{currentUser:o,isFetching:n,isDrained:r,items:a,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),t}(s.Component))||Ut,Yt=n(290);n(2623);function Xt(){var e=Object(R.a)(["","也关注了该问题"]);return Xt=function(){return e},e}var $t=(Kt=Object(y.connect)(function(e,t){var n=t.params;return{currentUser:Object(A.c)(e),concernedFollowers:Object(T.e)(e,{id:n.id})}},{loadQuestionConcernedFollowers:T.L}),Wt=Object(Yt.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}),Object(l.withRouter)(Gt=Kt(Gt=Wt(Gt=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={followersShown:!1},n.showFollowers=function(){n.setState({followersShown:!0})},n.closeFollowers=function(){n.setState({followersShown:!1})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,r=e.concernedFollowers,a=t.followerCount,o=t.visitCount,s=this.state.followersShown;return Object(i.b)("div",{className:"QuestionFollowStatus"},Object(i.b)(Qt.a,{divider:!0,className:"QuestionFollowStatus-counts"},n?Object(i.b)(Qt.a.Item,{tag:S.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:a}):Object(i.b)(Qt.a.Item,{name:"关注者",value:a}),Object(i.b)(Qt.a.Item,{name:"被浏览",value:o})),Boolean(r&&r.length)&&Object(i.b)(S.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers},Object(i.b)("span",{className:"QuestionFollowStatus-people-tip"},P()(Xt(),1===r.length?r[0].name:"他们")),r.map(function(e){return Object(i.b)(ht.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0,key:e.id})})),Object(i.b)(ye.b,{size:"fullPage",onClose:this.closeFollowers},s&&Object(i.b)(Jt,{parent:t})))}}]),t}(s.Component))||Gt)||Gt)||Gt),Zt=n(2175),en=n(2228),tn=n(1781),nn=n(1753),rn=n(56),an=n(21),on=n(1853),sn=n(1799),cn=n(200);function ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var un,dn,pn,fn,hn,bn,mn,vn,gn,yn=n(205),On=n(276),jn=(n(2624),Object(y.connect)()(un=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={value:"",items:[]},n.handleChange=function(e){var t=n.props.dispatch;n.setState({value:e});var r=e.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);r?t(Object(T.O)(r[1])).then(function(e){var t=e.payload;n.setState({items:[{name:t.title,urlToken:t.id}]})}):Object(On.b)(e).then(function(e){n.setState({items:e})})},n.handleSelect=function(e,t){var r=n.props,a=r.dispatch,o=r.question.id,i=r.onSubmitted,s=t.urlToken,c=a(Object(T.f)(o,s));i&&i({id:s},c)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return Object(i.b)("div",{className:"QuestionRedirectionCreator"},Object(i.b)("div",{className:"QuestionRedirectionCreator-content"},Object(i.b)(yn.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:Object(i.b)(B.a,{grey:!0,name:"search"})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})))}}]),t}(s.Component))||un),wn=n(39),Cn=n(2225),kn=n(282),Sn=n(2190),Nn=(dn=Object(y.connect)(function(e,t){return{isMuteSpecial:Object(T.v)(t.question)}}),Object(l.withRouter)(pn=dn((hn=fn=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={commentsShown:!1},n.handleCommentsShow=function(){var e=n.props,t=e.question.reviewInfo.tips,r=e.handleReviewingNotification;t?r():(Ke.default.trackEvent(Object(fe.default)(n),{action:"Comment",element:"Button",is_intent:!0}),n.setState({commentsShown:!0}))},n.handleCommentsClose=function(){n.setState({commentsShown:!1})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,r=n.pathname,a=n.search,o=Boolean(/^\/question\/(\d*)$/.test(r)),i=Object(wn.parse)(location.search.slice(1)).answer_deleted_redirect;if(o&&"true"!==i){var s=Object(Sn.a)(location.hash);this.setState({byComment:s}),s&&(t.replace("".concat(r).concat(a)),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,r=e.isMuteSpecial,a=t.commentCount,o=t.adminClosedComment,s=this.state.commentsShown,c="",l=a&&!o;return c="textNumber"===n?l?"评论 ".concat(Object(kt.formatNumber)(a)):"":l?"".concat(Object(kt.formatNumber)(a)," 条评论"):"添加评论",Object(i.b)("div",{className:"QuestionHeader-Comment"},Object(i.b)(S.c,{preset:"plain",onClick:this.handleCommentsShow,icon:Cn.a,label:c,disabled:r}),Object(i.b)(N.b,{size:"fullPage",onClose:this.handleCommentsClose},s&&Object(i.b)(kn.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})))}}]),t}(s.Component),fn.propTypes={question:g.a.object.isRequired,handleReviewingNotification:g.a.func.isRequired},pn=hn))||pn)||pn),An=(n(2625),{invitationShown:!1,reportShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1}),Tn=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],_n=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],En=(bn=Object(y.connect)(function(e,t){return{shouldOia:Object(et.f)(e),isMuteSpecial:Object(T.v)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(T.R)(e),allowCommercialAnonymousAnswer:"show"===Object(et.a)(e,"gue_anonymous")}},{deleteQuestion:T.k,deleteBrandQuestion:T.h,updateQuestionLocked:T.eb,showNotification:V.h,updateQuestionPermission:T.fb,updateBrandQuestionOpenStatus:T.X}),Object(l.withRouter)(mn=bn((gn=vn=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state=An,n.handleReviewingNotification=function(){var e=n.props.question.reviewInfo.tips;n.props.showNotification(e,"red")},n.handleInvite=n.context.authRequired(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).eventId,t=void 0===e?3312:e;Ke.default.trackEvent(null,{id:t});var r,a=n.props,o=a.question,i=o.relationship.isAnonymous,s=o.status,c=(s=void 0===s?{}:s).isLocked,l=s.isClose,u=s.isEvaluate,d=s.isSuggest,p=o.reviewInfo,f=(p=void 0===p?{}:p).tips,h=a.onInvitationTipShow;f?n.handleReviewingNotification():i?h():(c?r="锁定":l?r="关闭":(u||d)&&(r="建议修改"),r?n.props.showNotification("该问题已被".concat(r,"，不能邀请人回答此问题"),"red"):n.handleInvitationShow())},an.N.invite),n.handleInvitationShow=function(){return n.setState({invitationShown:!0})},n.handleInvitationHide=function(){return n.setState({invitationShown:!1})},n.handleReport=function(){n.setState({reportShown:!n.state.reportShown})},n.handleLockClick=function(){return n.props.question.status.isLocked?n.handleUpdateQuestionLocked():n.handleLockTipsShow()},n.handleOpenStatusChange=function(e){var t=n.props;(0,t.updateBrandQuestionOpenStatus)(t.question.id,e)},n.handleUpdateQuestionLocked=function(){var e=n.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},n.handleLockTipsShow=function(){return n.setState({lockTipsShown:!0})},n.handleLockTipsHide=function(){return n.setState({lockTipsShown:!1})},n.handleDelete=function(){return n.setState({deleteShown:!0})},n.handleDeleteModalClose=function(){return n.setState({deleteShown:!1})},n.handleConfirmDelete=function(){n.handleDeleteModalClose();var e=n.props,t=e.question,r=t.id,a=t.questionType,o=e.deleteQuestion,i=e.deleteBrandQuestion;return("commercial"===a?i:o)(r).then(function(){location.href="/"})},n.handleRedirectionCreatorShow=function(){n.props.question.reviewInfo.tips?n.handleReviewingNotification():n.setState({redirectionCreatorShown:!0})},n.handleRedirectionCreatorClose=function(){n.setState({redirectionCreatorShown:!1})},n.handleRedirectionCreated=function(e,t){var r=n.props,a=r.router,o=r.question.id,i=e.id;n.handleRedirectionCreatorClose(),t.then(function(){a.push("/question/".concat(i,"?rf=").concat(o))})},n.handleCommentPermissionChange=function(e){var t=n.props;(0,t.updateQuestionPermission)(t.question.id,e)},n.handleShareMenuTogglerClick=function(){var e=n.props.question.reviewInfo;return!(e=void 0===e?{}:e).tips||(n.handleReviewingNotification(),!1)},n.toggleAnonymous=function(){var e=n.props.question.reviewInfo,t=e.tips,r=e.editTips;t?n.handleReviewingNotification():r?n.props.showNotification(r,"red"):n.context.toggleAnonymous()},n.getQuestionStatus=function(){var e=n.props.question.status,t=(e=void 0===e?{}:e).isClose,r=e.isEvaluate,a=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":r?"evaluated":a?"locked":""},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(An)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,r=n.permission.canBrandAdminEdit,a=n.question,o=a.status,c=(o=void 0===o?{}:o).isLocked,l=a.commentPermission,u=a.brandOpenStatus;if(!r)return null;var d=Tn,p=_n;return Object(i.b)(s.Fragment,null,d.map(function(n){var r=n.key,a=n.name,o=!l&&"all"===r||l===r;return Object(i.b)(rn.b,{key:r,className:e,onClick:function(){return t.handleCommentPermissionChange(r)}},o&&Object(i.b)(Zt.a,{className:"MenuItem-icon",text:!0,center:!0})," ",a)}),Object(i.b)("li",{className:"Menu-divider"}),!c&&p.map(function(n){var r=n.key,a=n.name,o=u===r;return Object(i.b)(rn.b,{key:r,className:e,onClick:function(){return!o&&t.handleOpenStatusChange(r)}},o&&Object(i.b)(Zt.a,{className:"MenuItem-icon",text:!0,center:!0})," ",a)}),Object(i.b)(rn.b,{className:e,onClick:this.handleLockClick},c?"开放回答":"关闭回答"),Object(i.b)("li",{className:"Menu-divider"}))}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,r=t.shouldOia;return e.map(function(e){var t=e.text,a=e.handler;return Object(i.b)(rn.b,{key:t,onClick:r?function(){return Object(Me.b)(Object(Ze.a)({type:"question",id:n},{utm_content:"invite"}))}:a},t)})}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?Object(i.b)(rn.b,{onClick:function(){return Object(Me.b)(Object(Ze.a)({type:"question",id:t}))}},"查看问题日志"):Object(i.b)(rn.b,{tag:Ge.a,a:!0,to:"/question/".concat(t,"/log")},"查看问题日志")}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,r=e.lockTipsShown,a=e.deleteShown,o=e.redirectionCreatorShown,s=this.props,c=s.question,l=s.question,u=l.id,d=l.title,p=l.answerCount,f=l.collapsedAnswerCount,h=l.relationship,b=h.isAuthor,m=h.isAnonymous,v=l.questionType,g=l.isEditable,y=l.author.urlToken,O=s.isMuteSpecial,j=s.publicEditPermission,w=(j=void 0===j?{}:j).isQuestionRedirectEditable,C=s.currentUserUrlToken,k=s.permission.canBrandAdminEdit,A=this.context.currentUser,T="commercial"===v,_=A&&!b,E=T?k:Boolean(b&&0===p&&0===f),x=[_&&{text:"举报",icon:en.a,handler:this.handleReport}].filter(Boolean),I=ln(g,y===C,w),M=this.shouldShowAnonymousMenuItem,R=M||this.shouldShowMenu,D=Y()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":T});return Object(i.b)("div",{className:"QuestionHeaderActions"},Object(i.b)(S.c,{color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:tn.a,disabled:O}),Object(i.b)(Nn,{question:c,handleReviewingNotification:this.handleReviewingNotification}),Object(i.b)(sn.a,{id:u,title:d,href:"/question/".concat(u),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:O}),x.map(function(e){var t=e.text,n=e.icon,r=e.handler,a=e.disabled;return Object(i.b)(S.c,{key:t,preset:"plain",onClick:r,label:t,icon:n,disabled:a})}),R&&Object(i.b)(rn.c,{toggler:Object(i.b)(S.c,{preset:"plain","aria-label":"更多",icon:nn.a}),menuClassName:"QuestionHeader-menu",itemClassName:D},!1,M&&Object(i.b)(rn.b,{onClick:this.toggleAnonymous},m?"取消匿名身份":"使用匿名身份"),T&&this.renderCommercialMenuItems(D),E&&Object(i.b)(rn.b,{onClick:this.handleDelete},"删除问题"),I&&!A.isOrg&&"normal"===v&&Object(i.b)(rn.b,{onClick:this.handleRedirectionCreatorShow},"问题重定向"),!T&&this.renderLogMenuItem()),Object(i.b)(cn.a,{type:"question",urlToken:u,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),Object(i.b)(N.b,{size:"fullPage",onClose:this.handleInvitationHide},t&&Object(i.b)(qt,{question:c})),Object(i.b)(on.a,{title:T?"关闭回答":"锁定问题",subtitle:"".concat(T?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(T?"关闭":"锁定","吗？"),shown:r,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),Object(i.b)(N.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose},o&&Object(i.b)(jn,{question:c,onSubmitted:this.handleRedirectionCreated})),Object(i.b)(on.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a}))}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,r=n.questionType,a=n.relationship.isAnonymous,o=t.allowCommercialAnonymousAnswer;if(a)return!0;if("normal"===r)return!0;if("commercial"===r&&o)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,r="commercial"===t;return!r||!(!r||!n)}}]),t}(s.PureComponent),vn.contextTypes={currentUser:g.a.object,authRequired:g.a.func,toggleAnonymous:g.a.func},mn=gn))||mn)||mn),xn=n(2273),In=(n(2626),function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleTrackClick=function(e){Ke.default.trackEvent(e.target,{id:4026,action:"Click"})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){Ke.default.trackCardShow(this,{id:4025})}},{key:"render",value:function(){if(this.props.tips){var e=this.props.tips,t=e.text,n=e.link;return Object(i.b)("a",{className:"CircleDiscussion",href:n,onClick:this.handleTrackClick,target:"_blank"},Object(i.b)(xn.a,{className:"CircleDiscussion-icon",size:16}),Object(i.b)("span",{className:"CircleDiscussion-text"},Object(i.b)("span",null,t),Object(i.b)("span",null,"了解更多")))}}}]),t}(s.Component)),Mn=n(2179),Rn=(n(2627),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.brand,t=e.name,n=e.logo,r=e.target,a=e.description,o=e.typeDescription,s=r?"a":"div";return Object(i.b)("div",{className:Y()("BrandQuestionSymbol",{"is-mobile":!1})},Object(i.b)(s,Object(u.default)({className:"BrandQuestionSymbol-brandLink"},r&&{href:this.memberProfileUrl}),Object(i.b)("img",{role:"presentation",src:n,className:"BrandQuestionSymbol-logo"}),Object(i.b)("span",{className:"BrandQuestionSymbol-name"},t),r&&Object(i.b)(Mn.a,{badge:r.badge,isOrg:r.isOrg,noLink:!0})),Object(i.b)("span",null,a),Boolean(o)&&Object(i.b)("span",{className:"BrandQuestionSymbol-typeDesc"},o),!this.props.noDivider&&Object(i.b)("div",{className:"BrandQuestionSymbol-divider"}))}},{key:"memberProfileUrl",get:function(){var e=this.props.brand.target;return"/".concat("organization"===e.userType?"org":"people","/").concat(e.urlToken)}}]),t}(s.Component)),Dn=n(525),Ln=864e5;function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),r=e-Math.floor(n.getTime()/1e3);if(r<0)return null;var a,o,i,s,c,l,u=0;if(r>86400){var d=new Date(1e3*e);o=d,i=new Date(n),s=new Date(o),c=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()),l=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate()),u=Math.floor((l-c)/Ln),a="天"}else r>3600?(u=Math.floor(r/3600),a="小时"):r>60?(u=Math.floor(r/60),a="分钟"):(u=r,a="秒");return{quantity:u,unit:a}}var Bn=n(2628),zn=n.n(Bn);n(2629);function qn(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,r=t.prize,a=r.endTime,o=r.rule,s=r.status;return Object(i.b)("div",{className:"BrandQuestionPrizes-tips"},Object(i.b)("div",{className:"BrandQuestionPrizes-tip"},Object(i.b)("span",{className:"BrandQuestionPrizes-tipTitle"},"活动时间","："),Dn.a(new Date(1e3*a),"yyyy-MM-dd HH:mm")," 截止"),Object(i.b)("div",{className:"BrandQuestionPrizes-tip"},Object(i.b)("span",{className:"BrandQuestionPrizes-tipTitle"},"活动规则","："),o),Object(i.b)("div",{className:"BrandQuestionPrizes-tip"},Object(i.b)("span",{className:"BrandQuestionPrizes-tipTitle"},"获奖公示","："),"ongoing"===s&&"获奖名单将在活动结束后公布","finished"===s&&"品牌开奖中，即将公布获奖名单","awarded"===s&&Object(i.b)(l.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners")},"查看获奖名单"),!1),Object(i.b)("div",{className:"BrandQuestionPrizes-rule"},"品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",Object(i.b)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer"},"《有奖问答活动管理办法》")))},r=e.handleToggle,a=e.expanded,o=e.question,s=o.id,c=o.prize,u=o.relationship,d=(u=void 0===u?{}:u).isAuthor,p=o.permission,f=(p=void 0===p?{}:p).isSuperUser;if(!c||!c.status)return null;var h=c.endTime,b=c.prizes,m=c.status,v=Pn(h);return Object(i.b)("div",{className:Y()("BrandQuestionPrizes",{"is-mobile":!1})},Object(i.b)("div",{className:"BrandQuestionPrizes-info"},Object(i.b)("div",{className:"BrandQuestionPrizes-bar",onClick:r},Object(i.b)("div",{className:"BrandQuestionPrizes-desc"},Object(i.b)("div",{className:"BrandQuestionPrizes-symbol"},Object(i.b)(zn.a,{alt:"logo",width:72,height:18,fill:"ongoing"===m?"#ff9607":"#999999"}),"ongoing"===m&&Object(i.b)("span",null,"距离结束还有",Object(i.b)("em",null,v.quantity),v.unit),"finished"===m&&"待开奖","awarded"===m&&"已开奖"),Object(i.b)("div",{className:"BrandQuestionPrizes-name"},"奖品：",b[0].name,b.length>1&&"等")),Object(i.b)("div",{className:"BrandQuestionPrizes-images"},b.map(function(e,t){var n=e.imageUrl;return n&&Object(i.b)("img",{key:"BrandQuestionPrizes-images".concat(t),src:n,role:"presentation"})}),Object(i.b)(B.a,{name:"arrow",width:9,height:5,fill:"#9fadc7"}))),a&&Object(i.b)("div",{className:"BrandQuestionPrizes-detail"},b.map(function(e,n){var r=e.imageUrl,a=e.name,o=e.value,s=e.quantity;return Object(i.b)("div",{key:"BrandQuestionPrizes-prize".concat(n),className:"BrandQuestionPrizes-prize"},Object(i.b)("div",{className:"BrandQuestionPrizes-intro"},r&&Object(i.b)("img",{className:"BrandQuestionPrizes-prizeImage",src:r,role:"presentation"}),Object(i.b)("div",{className:"BrandQuestionPrizes-prizeInfo"},Object(i.b)("div",{className:"BrandQuestionPrizes-prizeName"},b.length>1&&"".concat(t[n],"等奖："),a),Object(i.b)("div",{className:"BrandQuestionPrizes-prizeValue"},"价值 ¥ ",o))),Object(i.b)("div",{className:"BrandQuestionPrizes-prizeQuantity"},s," 份"))})),a&&!1),a&&n(),a&&Object(i.b)("hr",{className:"BrandQuestionPrizes-split"}),(f||d)&&Object(i.b)(Ge.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(s,"/setting/").concat("finished"===m?"winners":"prize")},"ongoing"===m&&"编辑有奖回答","finished"===m&&"填写获奖名单"))}var Fn,Un,Vn,Qn,Hn,Kn,Wn=n(331),Gn=(n(2630),Object(y.connect)(function(e,t){return{question:e.entities.questions[t.question.id]}})(Fn=Object(Wn.a)()((Vn=Un=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,r=t.permission,a=void 0===r?{}:r,o=a.isSuperUser,c=a.canBrandAdminEdit,l=a.haveCard;return c||o?Object(i.b)(rn.c,{className:"BrandQuestionSettingMenu",toggler:Object(i.b)(S.c,null,"设置样式")},Object(i.b)(s.Fragment,null,Object(i.b)(rn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/topbanner"))}},"设置提问头图"),Object(i.b)(rn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/prize"))}},"编辑有奖问答"),l&&Object(i.b)(rn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/advanced"))}},"编辑品牌推荐"))):null}}]),t}(s.Component),Un.contextTypes={currentUser:g.a.object,router:g.a.object},Fn=Vn))||Fn)||Fn),Jn=n(1736),Yn=n(498),Xn=n(490),$n=(n(2631),Object(y.connect)(function(e,t){return{pin:Object(Xn.g)(e,t.target.id)}},{getPinContents:Xn.e})(Qn=Object(ue.a)(function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})((Kn=Hn=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleFollow=function(){var e=n.props.pin,t=(e=void 0===e?{}:e).author.isFollowing?1977:1976;n.handleTrack(t)},n.handleTrack=function(e){var t=n.props.pin,r=(t=void 0===t?{}:t).author;Ke.default.trackEvent(Object(fe.default)(n),{id:e},{button:{text:r.name}})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=n.type,a=n.id,o=t.getPinContents;"pin"===r&&o(a,{failsafe:!0}).then(function(t){var n=t.payload,r=(void 0===n?{}:n).author,a=(r=void 0===r?{}:r).name;Ke.default.trackCardShow(e,{id:1969},{button:{text:a}})})}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,r=t.id,a=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),o=n||{},s=o.type,c=o.urlToken,l=o.isFollowing,u="https://www.zhihu.com/pin/".concat(r);return Object(i.b)("div",{className:"QuestionRelatedCard"},Object(i.b)("div",{className:"QuestionRelatedCard-title"},"相关报道"),Object(i.b)("div",{className:"QuestionRelatedCard-content"},Object(i.b)("span",{dangerouslySetInnerHTML:{__html:Object(Yn.truncateHTML)(a,110).content}}),u&&Object(i.b)("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)}},"查看详情")),c&&Object(i.b)("div",{className:"QuestionRelatedCard-footer"},Object(i.b)("div",null,"来自",Object(i.b)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(c),target:"_blank",onClick:function(){e.handleTrack(1971)}},n.name)),Object(i.b)("div",{onClick:this.handleFollow},Object(i.b)($e.a,{className:"QuestionRelatedCard-follow",type:s,id:c,isFollowing:l},Object(i.b)(Jn.a,{key:"icon",text:!0,center:!0}),"关注机构"))))}}]),t}(s.Component),Hn.propTypes={target:g.a.shape({type:g.a.string,id:g.a.string}).isRequired},Qn=Kn))||Qn)||Qn),Zn=(n(2632),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.question.author;return Object(i.b)("div",{className:"OrgQuestionSymbol"},Object(i.b)("div",{className:Y()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1})},Object(i.b)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main"},Object(i.b)("div",{className:"OrgQuestionSymbol-avatar"},Object(i.b)(ht.a,{user:e,avatar:!0,avatarProps:{size:38}})),Object(i.b)("div",{className:"OrgQuestionSymbol-name"},Object(i.b)(ht.a,{user:e})," 的提问")),Object(i.b)("div",{className:"OrgQuestionSymbol-tip"},Object(i.b)(Ge.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank"},"了解机构提问"))))}}]),t}(s.Component)),er=n(2183),tr=n(170);n(2330);function nr(){var e=Object(R.a)(["","人评价"]);return nr=function(){return e},e}var rr=function(e){var t=e.percent,n=e.reviewerCount,r=e.ratioStatus,a=e.title;return Object(i.b)("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer"},Object(i.b)("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle"},a),"normal"===r?Object(i.b)("div",null," ",Object(i.b)("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum"},t)," ",Object(i.b)("span",null,"知乎评分 · ",P()(nr(),n))):Object(i.b)("span",null,"  推荐数据积累中"))};rr.propType={percent:g.a.number.isRequired,reviewerCount:g.a.string.isRequired};var ar,or=rr,ir=n(25),sr=n(2306),cr=Object(ir.compose)(Object(y.connect)(null,function(e,t){var n=t.metaInfo.id,r=t.questionId;return{onUpdateVoteTopic:function(t){var a=t.voteFor,o=t.method;return e(Object(_t.cb)({questionId:r,id:n,voteFor:a,method:o}))}}}),l.withRouter)(sr.a),lr=(n(2633),Object(Ft.a)(null)(ar=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).trackReviewCardOpenUrl=function(e){Ke.default.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},n.renderUnpublishedCard=function(e,t,r){return Object(i.b)(vt.d,{className:"QuestionHeaderTopicMeta"},n.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(i.b)("div",{className:"QuestionHeaderTopicMeta-Content"},Object(i.b)("div",{className:"QuestionHeaderTopicMeta-UnpublishedTitleContainer"},Object(i.b)("h3",{className:"QuestionHeaderTopicMeta-UnpublishedTitle"},e),"  ",Object(i.b)("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo"},"暂未上映",Boolean(t)&&" · ".concat(t," 上映"))),Object(i.b)("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",dangerouslySetInnerHTML:{__html:r}})))},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,r=t.meta.meta,a=r.title,o=r.avatar,s=n.avatarUrl,c=n.category;return Object(i.b)(er.a,{className:Y()("".concat(e),{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===c}),src:o||s,alt:a})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,r=t.meta,a=r.title,o=r.summary,s=r.description2,c=r.description1,l=r.pubInfo,u=t.excerpt,d=o||u||s||c;if(1===l.status||2===l.status){var p=l.pubDate;return this.renderUnpublishedCard(a,p,d)}return Object(i.b)(vt.d,{className:"QuestionHeaderTopicMeta"},Object(i.b)("div",{className:"QuestionHeaderTopicMeta-CardMain"},this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(i.b)("div",{className:"QuestionHeaderTopicMeta-Content"},Object(i.b)(cr,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:or,reviewerCountFormatter:kt.formatNumber},Object(i.b)("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:d}})))))}},{key:"render",value:function(){var e=this.props.meta,t=e.category,n=e.id,r=e.vote,a=e.isVote,o=r&&a;if(!o)return null;var s=["like","dislike"].includes(r.status);return Object(i.b)(U.a,Object(u.default)({module:"TopicItem",moduleName:t},o&&{view:{id:4174,name:s?"已评价":"未评价"}},{card:{content:Object.assign({type:"Topic"},Object(tr.a)("topic",n),{sub_type:"MetaCard"})},trackCardShow:!0}),Object(i.b)("a",{href:"/topic/".concat(n),target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl},this.renderTopReviewCard()))}}]),t}(s.PureComponent))||ar),ur=n(2238),dr=n(1783),pr=n(54),fr=n(2634),hr=n.n(fr),br=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={remainedTime:null},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,r=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval(function(){e.setState({remainedTime:e.state.remainedTime-5})},5e3)):"function"==typeof r&&r()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return Object(i.b)(s.Fragment,null,"距结束不足 ",Object(i.b)("span",null,"1")," 分钟");var t,n,r=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),a=r.hours,o=r.minutes;return 0===a?Object(i.b)(s.Fragment,null,"距结束还有 ",Object(i.b)("span",null,o)," 分钟"):Object(i.b)(s.Fragment,null,"距结束还有 ",Object(i.b)("span",null,a)," 小时"," ",o>0&&Object(i.b)(s.Fragment,null,Object(i.b)("span",null,o)," 分钟"))}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?Object(i.b)("div",{className:e},"距结束还有"):Object(i.b)("div",{className:e},this.renderCountdownTime())}}]),t}(s.Component);br.propTypes={totalCountdownTime:g.a.number.isRequired,onFinish:g.a.func};n(2635);var mr,vr,gr,yr,Or=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={expanded:!1,bodyHeight:0},n.contentRef=Object(s.createRef)(),n.handleExpand=function(){var e=n.contentRef.current;n.setState({expanded:!0,bodyHeight:"".concat(e.offsetHeight+1,"px")}),Ke.default.trackEvent(Object(fe.default)(n),{id:5036,action:"Expand"})},n.handleCollapse=function(){n.setState({expanded:!1,bodyHeight:0}),Ke.default.trackEvent(Object(fe.default)(n),{id:5037,action:"Fold"})},n.handleClickHeader=function(){n.state.expanded?n.handleCollapse():n.handleExpand()},n.handleCountdownFinish=function(){var e=n.props;(0,e.removeBrandQuestionRedPacket)(e.questionId)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,r="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?Object(i.b)(br,{className:r,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):Object(i.b)("div",{className:r},"还剩 ",Object(i.b)("span",null,Object(kt.niceNumber)(n))," 个红包")}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,r=n.title,a=n.image,o=n.iconText,s=n.content,c=this.state,l=c.expanded,u=c.bodyHeight;return Object(i.b)(U.a,{view:{id:5035},trackCardShow:!0},Object(i.b)("div",{className:Y()("CommercialAnswerRedPacket",t,Object(G.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),l))},Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-header"),onClick:this.handleClickHeader},Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-main")},Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle")},Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-badge")},Object(i.b)("span",null,Object(i.b)(hr.a,{size:11})),Object(i.b)("span",null,o)),this.renderCountdown()),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-title")},r)),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-image")},Object(i.b)("img",{src:Object(pr.imgUrl)(a,"xl")})),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-icon")},l?Object(i.b)(ur.a,{size:20}):Object(i.b)(dr.a,{size:20}))),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:u}},Object(i.b)("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:s}}))))}}]),t}(s.Component),jr=Object(y.connect)(null,{removeBrandQuestionRedPacket:T.U})(Or);n(2636);function wr(){var e=Object(R.a)(["","提问："]);return wr=function(){return e},e}var Cr=function(e){return Object(i.b)(S.c,Object(u.default)({preset:"plain",className:"QuestionHeader-edit"},e),Object(i.b)(B.a,{name:"modify",left:!0}),"修改")};var kr,Sr,Nr,Ar=(mr=Object(y.connect)(function(e,t){var n=e.question.brand,r=e.publicEditPermission,a=e.currentUser,o=t.question.questionType;return{brand:n,publicEditPermission:r,currentUserUrlToken:a,permission:Object(T.R)(e),isCommercialQuestion:"commercial"===o,isOrgQuestion:"org"===o}},{loadBrand:T.y,updateQuestionLocked:T.eb,deleteQuestion:T.k,deleteBrandQuestion:T.h,showNotification:V.h,loadQuestionCommercialBanner:T.K,loadBrandQuestionRedPacket:T.E,loadBrandQuestionPermission:T.C,loadBrandQuestionOpenStatus:T.B,loadBrandQuestionAdvancedStyle:T.z,loadBrandQuestionPrize:T.D}),Object(l.withRouter)(vr=mr((yr=gr=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={collapsed:!0,editShown:!1,editTopicsShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},n.getHandleInvite=function(e){e&&(n.handleInvite=e)},n.handleExpand=function(){n.setState({collapsed:!1})},n.handleCollapse=function(){n.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},n.handleEditShow=n.context.authRequired(function(){var e=(n.props.question.reviewInfo||{}).editTips;e?n.props.showNotification(e,"red"):n.setState({editShown:!0})}),n.handleEditClose=function(){n.setState({editShown:!1})},n.handleEditTopicsShow=n.context.authRequired(function(){var e=(n.props.question.reviewInfo||{}).editTips;e?n.props.showNotification(e,"red"):n.setState({editTopicsShown:!0})}),n.handleEditTopicsClose=function(){n.setState({editTopicsShown:!1})},n.handleInvitationShow=function(){n.setState({invitationModalShown:!0})},n.handleInvitationHide=function(){n.setState({invitationModalShown:!1})},n.handleInvitationTipShow=function(){n.setState({invitationTipShown:!0})},n.handleInvitationTipClose=function(){n.setState({invitationTipShown:!1})},n.handleRedirectionCreatorShow=function(){n.setState({redirectionCreatorShown:!0})},n.handleRedirectionCreatorClose=function(){n.setState({redirectionCreatorShown:!1})},n.handleRedirectionCreated=function(e,t){var r=n.props,a=r.router,o=r.question.id,i=e.id;n.handleRedirectionCreatorClose(),t.then(function(){a.push("/question/".concat(i,"?rf=").concat(o))})},n.handleDelete=function(){var e=n.props,t=e.question.id,r=e.isCommercialQuestion,a=e.deleteQuestion,o=e.deleteBrandQuestion;return r?o(t).then(function(){location.href="/"}):a(t).then(function(){location.href="/"})},n.handleConfirmDelete=function(){n.handleDeleteModalClose(),n.handleDelete()},n.handleDeleteModalShow=function(){n.setState({deleteModalShown:!0})},n.handleDeleteModalClose=function(){n.setState({deleteModalShown:!1})},n.handlePositionStatusChange=function(e){n.setState({shareMenuPositionStatus:e})},n.handleUpdateQuestionLocked=function(){var e=n.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},n.handleLockTipsShow=function(){return n.setState({lockTipsShown:!0})},n.handleLockTipsHide=function(){return n.setState({lockTipsShown:!1})},n.handleBrandQuestionPrizesToggle=function(){n.setState({brandQuestionPrizesExpanded:!n.state.brandQuestionPrizesExpanded})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,r=e.loadBrand,a=e.loadQuestionCommercialBanner,o=e.loadBrandQuestionRedPacket,i=e.loadBrandQuestionPermission,s=e.loadBrandQuestionOpenStatus,c=e.loadBrandQuestionAdvancedStyle,l=e.loadBrandQuestionPrize,u=this.context.currentUser;this.context.currentUser&&Object(Q.c)("question",t,Q.a),n&&(r(t),a(t),c(t),o(t).then(function(e){e&&e.payload||l(t)}),u&&"guest"!==u.userType&&(i(t),s(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.isAnswerPage,a=e.question,o=a.id,i=a.relationship.isAnonymous,s=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===o&&r===s||this.setState({collapsed:!0,invitationTipShown:!1}),i||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,r=t.collapsed;if(n&&!r){var a=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+a-document.documentElement.clientHeight)}}},{key:"renderFooter",value:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,r=t.id,a=t.title,o=t.editableDetail,s=t.topics,c=t.questionType,l=t.relationship.isAnonymous,u=this.state,d=u.collapsed,p=u.editShown,f=u.editTopicsShown,h=this.context.currentUser,b=n&&!0;return Object(i.b)("div",{className:"QuestionHeader-footer"},Object(i.b)("div",{className:"QuestionHeader-footer-inner"},Object(i.b)("div",{className:"QuestionHeader-main QuestionHeader-footer-main"},Object(i.b)(tt,{question:t}),b&&Object(i.b)(Gn,{question:t}),Object(i.b)(En,{question:t,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite}),Object(i.b)("div",{className:"QuestionHeader-actions"},!d&&Object(i.b)(S.c,{preset:"plain",onClick:this.handleCollapse},"收起",Object(i.b)(B.a,{name:"arrow",className:"QuestionHeader-collapse-icon"}))))),h&&Object(i.b)(Ae,{id:r,title:a,detail:o,show:p,onClose:this.handleEditClose,questionType:c,isAnonymous:l}),h&&Object(i.b)(xe,{id:r,topics:Object(D.a)(s),show:f,onClose:this.handleEditTopicsClose}))}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return Object(i.b)(s.Fragment,null,Object(i.b)(ae,{className:"QuestionHeader-specialQuestionAuthor",author:e}),Object(i.b)("div",{className:"QuestionHeader-topicDivider"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.question,a=t.isAnswerPage,o=t.isCommercialQuestion,s=t.isOrgQuestion,c=t.brand,l=t.publicEditPermission,u=t.currentUserUrlToken,p=t.meta,f=t.permission.canBrandAdminEdit,h=r.title,b=r.detail,m=r.topics,v=void 0===m?[]:m,g=r.author,y=r.showAuthor,O=r.author.urlToken,j=r.excerpt,w=r.isEditable,C=r.id,k=r.reviewInfo,S=r.relatedCards,N=void 0===S?[]:S,A=r.annotationDetail,T=r.circleInfo,_=r.redPacket,E=this.state,x=E.collapsed,I=E.invitationTipShown,M=E.brandQuestionPrizesExpanded,R=Object(d.a)(p,1)[0],D=v.map(function(e){return{name:e.name,id:e.id}}),L=l||{},B=L.isQuestionEditable,V=L.isQuestionTopicEditable,Q=O===u,G=ln(w,Q,B),J=ln(w,Q,V);return Object(i.b)("div",{"data-zop-question":JSON.stringify({title:h,topics:D,id:C,isEditable:w})},Object(i.b)(K.a,null,Object(i.b)(Vt,{question:r,location:n,invitationTipShown:I,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:a})),o&&(!x||!a)&&Object(i.b)(W.a,{type:r.type,id:r.id}),Object(i.b)(U.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(C)}}},Object(i.b)("div",{className:"QuestionHeader",ref:function(t){e.container=t}},Object(i.b)("div",{className:"QuestionHeader-content"},Object(i.b)("div",{className:"QuestionHeader-main"},T&&T.canWriteCircle&&T.tips&&T.tips.text&&Object(i.b)(In,{tips:T.tips}),Object(i.b)("div",{className:"QuestionHeader-tags"},o&&Object(i.b)(Rn,{brand:c}),Object(i.b)("div",{className:"QuestionHeader-topics"},y&&this.renderSpecialQuestionAuthor(),v.map(function(e){return Object(i.b)(pe,{item:e,key:e.id})}),(J||f)&&Object(i.b)(Cr,{onClick:this.handleEditTopicsShow}))),Object(i.b)("h1",{className:"QuestionHeader-title"},s&&P()(wr(),g.name),h,(G||f)&&Object(i.b)(Cr,{onClick:this.handleEditShow})),A&&Object(i.b)(q.a,{annotationDetail:A}),N[0]&&Object(i.b)($n,{target:N[0]}),_&&Object(i.b)(jr,{questionId:C,redPacket:_}),Object(i.b)(qn,{question:r,expanded:M,handleToggle:this.handleBrandQuestionPrizesToggle}),Boolean(R&&!o)&&Object(i.b)(lr,{meta:R,questionId:C}),Object(i.b)(Ie.a,{html:b,reviewInfo:k,excerpt:j,collapsed:x,onExpand:this.handleExpand,editable:G||f,onEdit:this.handleEditShow})),Object(i.b)("div",{className:"QuestionHeader-side"},Object(i.b)("div",{className:"QuestionHeader-follow-status"},Object(i.b)($t,{question:r})))),x?this.renderFooter():Object(i.b)(z.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange},this.renderFooter()),s&&Object(i.b)(Zn,{question:r}))),Object(i.b)(H.a,null,Object(i.b)("div",{className:"QuestionHeader-content"},Object(i.b)("div",{className:"QuestionHeader-main"},Object(i.b)("h1",{className:"QuestionHeader-title",onClick:function(){Object(F.scrollToTop)()}},h)),Object(i.b)(U.a,{module:"ToolBar",card:{content:{type:"Question",token:String(C)}}},Object(i.b)("div",{className:"QuestionHeader-side"},Object(i.b)(tt,{question:r,inTopBar:!0}))))))}}]),t}(s.Component),gr.contextTypes={authRequired:g.a.func,currentUser:g.a.object},gr.propTypes={question:g.a.object,location:g.a.object,isAnswerPage:g.a.bool},vr=yr))||vr)||vr),Tr=n(2224),_r=n(678),Er=(n(2637),"已开启赞赏的回答无法设为匿名，请先关闭赞赏"),xr="匿名回答无法开启圈内说，请先取消匿名";function Ir(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var Mr=function(e){var t=Object(k.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(Ir(t.getMonth()+1),"-").concat(Ir(t.getDate()),"T").concat(Ir(t.getHours()),":").concat(Ir(t.getMinutes()),":").concat(Ir(t.getSeconds())):""};function Rr(){var e=document.querySelector("#js-answerAddCard");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var Dr=Object(y.connect)(function(e,t){var n=t.params,r=n.id,a=n.answerId,o=e.question.meta,i=e.entities.drafts,s=void 0===i?{}:i,c=e.env,l=c.referer,u=c.userAgent,d=e.reward,p=void 0===d?{}:d,f=e.currentUser,h=Boolean(a);return Object.assign({id:r,meta:o[r]||[],question:Object(T.T)(e,{id:r}),reward:p,draft:s["question_".concat(r)],referer:l,ua:u,currentUserUrlToken:f},h?{answer:Object(Je.c)(e,{id:a})}:{firstAnswer:Object(Je.h)(e,{id:r})})},{loadQuestion:T.J,loadDraft:T.G,updateQuestionAnonymous:T.cb,showNotification:V.h,getPublicEditPermission:_r.b})((Nr=Sr=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={anonymousConfirmShown:!1,isCheckedCircle:!0,answering:!1,hideIsMutedCover:!1},n.getPublicEditPermission=function(){var e=n.props,t=e.question,r=e.currentUserUrlToken,a=e.getPublicEditPermission,o=C()(t,"author.urlToken","");C()(t,"isEditable",!1)&&r&&o!==r&&a()},n.handleToggleAnonymous=function(){var e=n.props,t=e.showNotification,r=e.reward.question,a=void 0===r?{}:r,o=e.id;o&&a[o]&&a[o].isRewardable?t(Er,"red"):n.setState({anonymousConfirmShown:!n.state.anonymousConfirmShown})},n.startAddAnswer=function(){var e=n.props,t=e.params.answerId,r=e.location.query.group_id;t||r?(n.context.router.push("/question/".concat(n.props.id)),setTimeout(n.focusAddAnswer)):n.focusAddAnswer()},n.endAddAnswer=function(){n.setState({answering:!1})},n.focusAddAnswer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Rr(),n.setState({answering:Date.now()},function(){e&&setTimeout(Rr)})},n.onChangecircleSettings=function(e){var t=n.props,r=t.question.relationship.isAnonymous,a=t.showNotification;if(r&&e)return a(xr,"red"),void n.setState({isCheckedCircle:!1});n.setState({isCheckedCircle:e})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer,onChangecircleSettings:this.onChangecircleSettings,isCheckedCircle:this.state.isCheckedCircle}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.question;Promise.resolve(t?this.fetchDraft():this.fetchQuestionAndDraft()).then(function(){var t=e.props.draft;if(!e.props.params.answerId){var n="#draft"===location.hash||"#write"===location.hash;(t&&!t.schedule||!t&&n)&&e.focusAddAnswer(n)}}),this.getPublicEditPermission()}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props.loadDraft;return this.context.currentUser&&(e=t(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,r=e.topics,a=e.answerCount,o=e.commentCount,i=e.created,s=e.updatedTime,c=e.visitsCount,l=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:r.map(function(e){return e.name}).join(","),answerCount:a,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*s).toISOString(),"zhihu:visitsCount":c,"zhihu:followerCount":l}}(this.props.question);return Object.keys(e).map(function(t){return Object(i.b)("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,r=e.answer,a=e.params.answerId,o=e.ua;if(!/baiduspider/i.test(o.origin))return null;var s=Boolean(a),c=s?r:n;if(c){var l=s?[c.createdTime,c.updatedTime]:[c.created,c.updatedTime],u=Object(d.a)(l,2),p=u[0],f=u[1],h=Mr(p),b=Mr(f);return Object(i.b)("script",{type:"application/ld+json"},'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(h,'",\n          "upDate": "').concat(b,'"\n        }'))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.params,a=t.children,o=t.question,c=t.router.location.query,l=t.meta,d=t.firstAnswer,p=Boolean(r.answerId);if(!o)return Object(i.b)("div",null);if("true"===c.answer_deleted_redirect)return Object(i.b)(M,{id:o.id});var f=o.questionType,h=o.isMuted,b=o.title,m=o.relationship,v=m.isAuthor,g=m.myAnswer,y=this.state,O=y.anonymousConfirmShown,w=y.isCheckedCircle,k=y.answering,S=y.hideIsMutedCover,N=C()(o,"circleInfo.canWriteCircle",!1);return Object(i.b)(U.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(o.id)}}},Object(i.b)("div",{className:"QuestionPage",itemScope:!0,itemType:"http://schema.org/Question"},Object(i.b)(j.a,Object(u.default)({title:b},!p&&{meta:Object(Tr.c)(o,d)})),this.renderMeta(),this.renderJSONLD(),"commercial"===f&&h&&!S&&v&&Object(i.b)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){e.setState({hideIsMutedCover:!0})}}),Object(i.b)(Ar,{meta:l,question:o,location:n,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:p}),Object(s.cloneElement)(s.Children.only(a),{question:o,answering:k}),Object(i.b)(_,{question:o,myAnswer:g,shown:O,showCircle:N,isCheckedCircle:w,onChangecircleSettings:this.onChangecircleSettings,onClose:this.handleToggleAnonymous})))}}]),t}(s.PureComponent),Sr.fetchData=function(e){var t=e.params,n=t.id,r=t.answerId;return function(e,t){return t().env.userAgent.isBot?Promise.all([e(Object(T.P)(n,r)),e(Object(T.Q)(n)),e(Object(T.J)(n))]):e(Object(T.J)(n))}},Sr.contextTypes={router:g.a.object,currentUser:g.a.object,authRequired:g.a.func},Sr.childContextTypes={toggleAnonymous:g.a.func,startAddAnswer:g.a.func,endAddAnswer:g.a.func,onChangecircleSettings:g.a.func,isCheckedCircle:g.a.bool},kr=Nr))||kr,Lr=n(87),Pr=n(818),Br=n(1779),zr=n(35),qr=n.n(zr),Fr=n(532),Ur=n(272),Vr=n.n(Ur),Qr=n(1766);n(2638);var Hr=function(e){var t=e.className,n=e.titleClassName,r=e.sourceClassName,a=e.hideButtonClassName,o=e.question,c=o.id,l=o.title,u=o.detail,p=o.excerpt,f=o.isDeleted,h=e.mainSource,b=e.subSource,m=e.mainTool,v=e.subTool,g=e.zaId,y=void 0===g?{}:g,O=e.onMouseEnter,j=void 0===O?Vr.a:O,w=e.onMouseLeave,C=void 0===w?Vr.a:w,k=e.onExpand,S=void 0===k?Vr.a:k,N=e.onCollapse,A=void 0===N?Vr.a:N,T="https://www.zhihu.com/question/".concat(c),_=Object(s.useState)(!0),E=Object(d.a)(_,2),x=E[0],I=E[1],M=Object(s.useCallback)(function(e){I(!0),A(e),Ke.default.trackEvent(e.target,{id:y.collapse,action:"Collapse"})},[I,A,y]),R=Object(s.useCallback)(function(e){I(!1),S(e),Ke.default.trackEvent(e.target,{id:y.expand,action:"Expand"})},[I,S,y]);return f?Object(i.b)("div",{className:Y()("ListQuestionItem","ListQuestionItem--deleted",t)},Object(i.b)("div",{className:"ListQuestionItem-hint"},"该问题已被删除"),Object(i.b)("div",{className:"ListQuestionItem-mainTool"},m)):Object(i.b)(U.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c)}},trackCardShow:Boolean(y.cardShow),view:{id:y.cardShow}},Object(i.b)("div",{className:Y()("ListQuestionItem",t),onMouseEnter:j,onMouseLeave:C},(h||b)&&Object(i.b)("div",{className:Y()("ListQuestionItem-source",r)},h&&Object(i.b)("div",{className:"ListQuestionItem-mainSource"},h),b&&Object(i.b)("div",{className:"ListQuestionItem-subSource"},b)),Object(i.b)("a",{className:Y()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!u}),href:T,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":y.titleClick},l),u&&Object(i.b)(Ie.a,{className:"ListQuestionItem-RichText",html:u,reviewInfo:{},excerpt:p,collapsed:x,onExpand:R,editable:!1}),Object(i.b)("div",{className:"ListQuestionItem-tool"},Object(i.b)("div",{className:"ListQuestionItem-mainTool"},Object(i.b)(Ge.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:Qr.a,label:"写回答",href:"".concat(T,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){Ke.default.trackEvent(e.target,{id:y.writeAnswer,action:"Answer"})}}),m),(v||!v&&!x)&&Object(i.b)("div",{className:"ListQuestionItem-subTool"},v,!x&&Object(i.b)("div",{className:Y()("ListQuestionItem-hideButton",a),onClick:M},"收起",Object(i.b)(ur.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0}))))))};n(2639);var Kr=function(e){var t=e.className,n=e.type,r=n.icon,a=n.text,o=e.active,s=void 0!==o&&o,c=e.onClick;return Object(i.b)("div",{className:Y()("QuestionType",t,{"QuestionType--active":s}),onClick:c},Object(i.b)(r,{className:"QuestionType-icon",size:18}),a)};n(2640);var Wr=function(e){var t=e.className,n=e.label,r=n.icon,a=n.text,o=n.name,s=e.onClick;return Object(i.b)("div",{className:Y()("QuestionLabel","QuestionLabel--".concat(o),t),onClick:s},Object(i.b)(r,{className:"QuestionLabel-icon",size:18}),a)},Gr=n(756);n(2641);var Jr=Object(y.connect)(function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:Gr.b.find(function(e){return e.queryName===n})||Gr.b[0]}},{updateLaterQuestion:T.ab,updateQuestionFollowers:T.db,getWaitingQuestions:T.t,deleteWaitingQuestion:T.l,setLaterQuestionAnimate:T.W})(function(e){var t=e.allWaitingQuestions,n=e.defaultType,r=e.updateLaterQuestion,a=e.updateQuestionFollowers,o=e.getWaitingQuestions,u=e.deleteWaitingQuestion,p=e.setLaterQuestionAnimate,f=Object(s.useRef)(null),h=Object(s.useState)(n.name),b=Object(d.a)(h,2),m=b[0],v=b[1],g=Object(s.useState)(Gr.b.reduce(function(e,t){var n=t.name;return Object.assign({},e,Object(G.a)({},n,0))},{})),y=Object(d.a)(g,2),O=y[0],w=y[1],C=Object(s.useState)(null),k=Object(d.a)(C,2),N=k[0],A=k[1],T=Object(s.useState)(new Set),_=Object(d.a)(T,2),E=_[0],x=_[1],I=Object(s.useState)(new Set),M=Object(d.a)(I,2),R=M[0],D=M[1],L=t[m],P=L.isEnd,B=L.isLoading,q=L.questions.filter(function(e){var t=e.question;return!E.has(t.id)});return Object(i.b)("div",{className:"QuestionWaiting"},Object(i.b)(j.a,{title:"等你来答"}),Object(i.b)(vt.d,{className:"QuestionWaiting-mainColumn"},Object(i.b)(z.a,{offset:62},function(e){var n=e.isFixed;return Object(i.b)("div",{className:Y()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n})},n&&Object(i.b)("div",{className:"QuestionWaiting-typesTopper"}),Object(i.b)("div",{className:Y()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n})},Gr.b.map(function(e){return Object(i.b)(l.Link,{key:e.name,to:e.queryName?"/question/waiting?type=".concat(e.queryName):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:e.text}})},Object(i.b)(Kr,{className:"QuestionWaiting-type",type:e,active:e.name===m,onClick:function(){return function(e){w(Object.assign({},O,Object(G.a)({},m,window.pageYOffset))),t[e.name].questions.length||o(e.name,20,0),v(e.name),window.scrollTo(0,O[e.name])}(e)}}))})))}),Object(i.b)(Lr.b,{ref:f,className:"QuestionWaiting-questions",onLoad:function(){return o(m,20,q.length)},isLoading:B,placeholder:Object(i.b)(Lr.a,{className:"QuestionWaiting-placeholder"}),isDrained:P},q.map(function(e){var t=e.labelType,n=e.question,o=e.question.relationship.isFollowing;return Object(i.b)(Hr,{key:n.id,className:"QuestionWaiting-questionItem",titleClassName:"QuestionWaiting-questionItemTitle",sourceClassName:Y()("QuestionWaiting-questionItemSource",{"QuestionWaiting-questionItemSource--empty":!t}),hideButtonClassName:"QuestionWaiting-questionItemHideButton",question:n,onMouseEnter:function(){return A(n.id)},onMouseLeave:function(){return A(null)},zaId:{titleClick:5364,expand:5365,cardShow:5363,writeAnswer:5367},mainSource:t&&Object(i.b)(Wr,{label:Gr.a.find(function(e){return e.name===t})}),subSource:N===n.id&&Object(i.b)(S.c,{className:"QuestionWaiting-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionWaiting-ignoreButtonTooltip",color:"grey",icon:Pr.a,onClick:function(e){x(new Set(E).add(n.id)),u(n.id),f.current.maybeRun(),Ke.default.trackEvent(e.target,{id:5366,action:"Close"})}}),mainTool:Object(i.b)(c.a.Fragment,null,Object(i.b)(S.c,{className:Y()("QuestionWaiting-followButton",{"QuestionWaiting-followButton--active":o}),preset:"plain",color:"grey",onClick:function(e){a(n.id,!o),Ke.default.trackEvent(e.target,{id:5368,action:o?"UnFollow":"Follow"})}},o?null:Object(i.b)(Jn.a,{size:16}),o?"已关注":"关注问题"),Object(i.b)(S.c,{className:Y()("QuestionWaiting-laterButton",{"QuestionWaiting-laterButton--active":R.has(n.id)}),preset:"plain",color:"grey",onClick:function(e){var t=!R.has(n.id),a=new Set(R);t?a.add(n.id):a.delete(n.id),D(a),r(n.id,t),t&&!qr.a.get("question:hasSeenLaterAnimation")&&(p(!0),qr.a.set("question:hasSeenLaterAnimation",!0)),Ke.default.trackEvent(e.target,{id:5369,action:t?"Add":"UnAdd"})}},R.has(n.id)?null:Object(i.b)(Br.a,null),R.has(n.id)?"已添加":"稍后答")),subTool:Object(i.b)("div",{className:"QuestionWaiting-info"},Object(kt.formatNumber)(n.answerCount)," 个回答"," · ",Object(kt.formatNumber)(n.visitCount)," 个浏览"),hideSubToolWhenExpanded:!0})}))),Object(i.b)(Fr.a,{omit:{noCategory:!0}}))}),Yr=n(1768),Xr=n(2642),$r=n.n(Xr);n(2643);function Zr(e){var t=e.laterQuestions,n=e.getLaterQuestions,r=e.updateLaterQuestion,a=Object(s.useRef)(null),o=Object(s.useState)(new Set),u=Object(d.a)(o,2),p=u[0],f=u[1],h=t.count,b=t.isEnd,m=t.isLoading,v=t.questions.filter(function(e){return!p.has(e.id)});return Object(i.b)("div",{className:"QuestionLater"},Object(i.b)(vt.d,{className:"QuestionLater-mainColumn"},Object(i.b)("div",{className:"QuestionLater-title"},Object(i.b)(Br.a,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(h)&&Object(i.b)("div",{className:"QuestionLater-titleNumber"},h)),!m&&0===v.length&&Object(i.b)("div",{className:"QuestionLater-empty"},Object(i.b)("img",{className:"QuestionLater-emptyImage",src:$r.a,alt:""}),Object(i.b)("div",{className:"QuestionLater-emptyText"},"还没有稍后答，",Object(i.b)(l.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting"},"看看为你推荐的问题"))),Object(i.b)(Lr.b,{ref:a,className:"QuestionLater-questions",onLoad:function(){return n(20,v.length)},isLoading:m,placeholder:Object(i.b)(Lr.a,{className:"QuestionLater-placeholder"}),isDrained:b},v.map(function(e){return Object(i.b)(Hr,{key:e.id,className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:Object(i.b)(c.a.Fragment,null,Object(i.b)(S.c,{className:Y()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){f(new Set(p).add(e.id)),r(e.id,!1),a.current.maybeRun(),Ke.default.trackEvent(t.target,{id:5376,action:"Delete"})}},Object(i.b)(Yr.a,{size:22}),"移除"),!e.isDeleted&&Object(i.b)("div",{className:"QuestionLater-info"},Object(kt.formatNumber)(e.answerCount)," 个回答"," · ",Object(kt.formatNumber)(e.visitCount)," 个浏览"))})}))),Object(i.b)(Fr.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}Zr.fetchData=function(e){return(0,e.dispatch)(Object(T.r)())};var ea=Object(y.connect)(function(e){return{laterQuestions:e.question.laterQuestions}},{getLaterQuestions:T.q,updateLaterQuestion:T.ab})(Zr),ta=n(2194);var na=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?Object(i.b)(ht.a,{user:n[0]}):2===n.length?Object(i.b)(c.a.Fragment,null,Object(i.b)(ht.a,{user:n[0]})," 和 ",Object(i.b)(ht.a,{user:n[1]})):3===n.length?Object(i.b)(c.a.Fragment,null,Object(i.b)(ht.a,{user:n[0]}),"、",Object(i.b)(ht.a,{user:n[1]})," 和"," ",Object(i.b)(ht.a,{user:n[2]})):n.length>3?Object(i.b)(c.a.Fragment,null,Object(i.b)(ht.a,{user:n[0]}),"、",Object(i.b)(ht.a,{user:n[1]})," 和"," ",Object(i.b)(ht.a,{user:n[2]})," 等 ",n.length," 人"):null};n(2644);var ra=function(e){var t=e.user,n=t.isFollowed,r=t.isFollowing,a=t.gender,o=null;return n&&r?o="互相关注":r&&(o="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(a))),o?Object(i.b)("div",{className:"RelationLabel"},o):null},aa=n(465),oa=(n(2645),aa.a[0]);function ia(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,r=e.ignoreInvitedQuestion,a=e.updateLaterQuestion,o=Object(s.useRef)(null),l=Object(s.useState)(oa),u=Object(d.a)(l,2),p=u[0],f=u[1],h=Object(s.useState)(new Set),b=Object(d.a)(h,2),m=b[0],v=b[1],g=Object(s.useState)(new Set),y=Object(d.a)(g,2),O=y[0],j=y[1],w=Object(s.useState)(aa.a.reduce(function(e,t){var n=t.name;return Object.assign({},e,Object(G.a)({},n,0))},{})),C=Object(d.a)(w,2),k=C[0],N=C[1],A=t[p.name],T=A.isEnd,_=A.isLoading,E=A.questions.filter(function(e){var t=e.question;return!m.has(t.id)});return Object(i.b)("div",{className:"QuestionInvited"},Object(i.b)(vt.d,{className:"QuestionInvited-mainColumn"},Object(i.b)("div",{className:"QuestionInvited-title"},"邀请回答",Boolean(t.total.count)&&Object(i.b)("div",{className:"QuestionInvited-titleNumber"},t.total.count-k.total)),Object(i.b)("div",{className:"QuestionInvited-tabs"},aa.a.map(function(e){return Object(i.b)("div",{key:e.name,className:Y()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===p.name}),onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),Ke.default.trackEvent(null,{id:5377},{button:{text:e.text}}),f(e)}(e)}},Object(i.b)("div",{className:"QuestionInvited-tabTitle"},e.text),Object(i.b)("div",{className:"QuestionInvited-tabMeta"},t[e.name].count-k[e.name]))})),Object(i.b)(Lr.b,{ref:o,className:"QuestionInvited-questions",onLoad:function(){return n(p,20,E.length)},isLoading:_,placeholder:Object(i.b)(Lr.a,{className:"QuestionInvited-placeholder"}),isDrained:T},E.map(function(e){var t=e.inviters,n=e.question;return Object(i.b)(Hr,{key:n.id,className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:Object(i.b)("div",{className:"QuestionInvited-questionItemMainSource"},Object(i.b)(na,{users:t})," 邀请你回答"),subSource:1===t.length&&Object(i.b)(ra,{user:t[0]}),mainTool:Object(i.b)(c.a.Fragment,null,Object(i.b)(S.c,{className:Y()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){v(new Set(m).add(n.id)),N(Object.assign({},k,Object(G.a)({total:k.total+1},p.name,k[p.name]+1))),r(n.id),o.current.maybeRun(),Ke.default.trackEvent(e.target,{id:5382,action:"Ignore"})}},Object(i.b)(ta.a,{size:18}),"忽略"),Object(i.b)(S.c,{className:Y()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":O.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!O.has(n.id),r=new Set(O);t?r.add(n.id):r.delete(n.id),j(r),a(n.id,t),Ke.default.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})}},O.has(n.id)?null:Object(i.b)(Br.a,null),O.has(n.id)?"已添加":"稍后答"),Object(i.b)("div",{className:"QuestionInvited-info"},Object(kt.formatNumber)(n.answerCount)," 个回答"," · ",Object(kt.formatNumber)(n.visitCount)," 个浏览"))})}))),Object(i.b)(Fr.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}ia.fetchData=function(e){return(0,e.dispatch)(Object(T.p)())};var sa=Object(y.connect)(function(e){return{allInvitedQuestions:e.question.invitedQuestions}},{getInvitedQuestions:T.o,ignoreInvitedQuestion:T.u,updateLaterQuestion:T.ab})(ia),ca=n(96),la=n.n(ca),ua=n(2646),da=n.n(ua),pa=n(1800),fa=n(1930),ha=n(12),ba=4,ma=5,va=3,ga=5,ya=20;var Oa={isDrained:!1,isFetching:!1,ids:[]};function ja(e,t){var n=t.id,r=t.resource;return e.question[r][n]||Oa}var wa,Ca,ka=function(e){var t=e.item,n=Object(wt.a)(e,["item"]);return Object(i.b)(pa.a,{key:t.id},Object(i.b)(fa.a,Object(u.default)({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n)))},Sa=function(e,t,n){var r=t.relationship,a=r.canCollapseAnswers,o=r.canStickAnswers,i=t.hasPublishingDraft,s=e.map(function(e,t){return ka({item:e,canCollapse:a,canStick:o,hasPublishingDraft:i,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})});return n?s:Object(K.b)(2,s)},Na=function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return e&&!e.isDelete})},Aa=Object(pt.isBrowser)()?la()(Na,function(e,t){return"".concat(e.join(","),"-").concat(t.length)}):Na;n(2214);var Ta,_a,Ea=(wa=Object(y.connect)(function(e,t){var n=ja(e,{id:t.id,resource:"notificationAnswers"}),r=n.isFetching,a=n.isDrained,o=n.ids;return{isFetching:r,isDrained:a,items:Aa(o,e.entities.answers)}},{loadNotificationAnswers:T.I}),Object(l.withRouter)(Ca=wa(Ca=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).load=function(){var e=n.props,t=e.isFetching,r=e.id,a=e.loadNotificationAnswers;t||a(r)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,r=e.items,a=e.router;r.length||a.replace(location.pathname),(t||r.length)&&Object(T.I)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,r=t.answerCount,a=e.question,o=e.items,s=e.isFetching,c=e.isDrained;return Object(i.b)("div",{className:"QuestionAnswers-answers"},Object(i.b)(vt.d,null,Object(i.b)(Ct,{to:"/question/".concat(n)},"查看全部 ",Object(kt.formatNumber)(r)," 条回答")),Object(i.b)(vt.d,null,Object(i.b)(gt.b,null,Sa(o,a),s&&Object(i.b)(Lr.a,{className:"List-item"})),!c&&!s&&Object(i.b)(Ct,{onClick:this.load},"更多")),Object(i.b)(vt.d,null,Object(i.b)(Ct,{to:"/question/".concat(n)},"查看全部 ",Object(kt.formatNumber)(r)," 条回答")))}}]),t}(s.PureComponent))||Ca)||Ca),xa=n(1884),Ia=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],Ma={updatedAnswers:"updated",answers:"default"};var Ra,Da,La,Pa,Ba,za,qa,Fa,Ua=(Ta=Object(y.connect)(function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(T.R)(e)}},{loadBrandQuestionAnswerCount:T.A}),Object(l.withRouter)(_a=Ta(_a=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleResourceChange=function(e){n.props.router.push("/question/".concat(n.props.question.id).concat("default"===e?"":"/answers/".concat(e)))},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,r=t.questionType,a=e.permission.canBrandAdminEdit,o=e.loadBrandQuestionAnswerCount;"commercial"===r&&a&&o(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.id,a=n.answerCount,o=n.questionType,s=e.commonAnswerCount,c=e.hiddenAnswerCount,l=e.permission.canBrandAdminEdit;return"commercial"===o?l?Object(i.b)("div",{className:"QuestionAnswers-navs"},Object(i.b)(S.c,{preset:"plain",className:Y()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(r)}},Object(kt.formatNumber)(s)," 个回答","，由品牌推荐"),Object(i.b)(S.c,{preset:"plain",className:Y()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(r,"/answers/hidden")}},Object(kt.formatNumber)(c)," 个隐藏回答")):Object(i.b)("span",null,Object(kt.formatNumber)(a)," 个回答，由品牌推荐"):Object(i.b)("span",null,Object(kt.formatNumber)(a)," 个回答")}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return Object(i.b)(vt.d,{className:"AnswersNavWrapper"},Object(i.b)(xa.a,Object(u.default)({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?Object(i.b)("span",null,"按时间排序"):Object(i.b)(Oe.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:Ma[t],onChange:this.handleResourceChange},Ia.map(function(e){var t=e.value,n=e.text;return Object(i.b)(Oe.a,{key:t,value:t,text:n})}))}),n))}}]),t}(s.PureComponent))||_a)||_a),Va=n(2237),Qa=n(17),Ha=(Ra=Object(y.connect)(function(e,t){var n=t.page,r=ja(e,{id:t.question.id,resource:"updatedAnswers"}),a=r.isFetching,o=r.isDrained,i=r.ids,s=Object(ha.d)(n,i),c=s.total,l=s.isCurrentLoaded,u=s.isNextLoaded,d=s.items;return{isMuteSpecial:Object(T.v)(t.question),isFetching:a,isDrained:o,total:c,isNextLoaded:u,isCurrentLoaded:l,items:Aa(d,e.entities.answers).filter(function(e){return!e.isDelete})}},{loadItems:T.H}),Object(l.withRouter)(Da=Ra(Da=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handlePaginationClick=function(e){n.props.router.push("".concat(location.pathname,"?page=").concat(e))},n.handleUpdatedAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa.b,r=n.props,a=r.question.id;(0,r.loadItems)(a,"updatedAnswers",{offset:e,limit:t})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,a=e.items,o=e.loadItems;!r&&a.length<Qa.b&&o(t,"updatedAnswers",{offset:Object(ha.c)(n)+a.length,limit:Qa.b-a.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.isCurrentLoaded,o=e.page,s=e.items,c=e.total,l=e.question,u=e.isMuteSpecial;return n&&!s.length?Object(i.b)(vt.d,{className:"Answers-none"},Object(i.b)(jt.a,{entityType:"answers",placeholder:u?"回答暂时无法查看":"还没有回答"})):Object(i.b)(Va.a,{isFetching:t,isDrained:o>=c?n:a,isNextLoaded:r,page:o,total:c,placeholder:Object(i.b)(Lr.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad},Sa(s,l))}}]),t}(s.PureComponent))||Da)||Da),Ka=n(840),Wa=n.n(Ka),Ga=5,Ja=Object(y.connect)(function(e,t){var n=ja(e,{id:t.question.id,resource:"answers"}),r=n.isFetching,a=n.isDrained,o=n.ids,i=a||r?o:o.slice(0,Math.max(Ga,o.length-5));return{isBot:e.env.userAgent.isBot,isFetching:r,isDrained:a,items:Aa(i,e.entities.answers).filter(function(e){return e&&!e.isDelete}),adverts:Object(T.c)(e)}},{loadItems:T.H})(La=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleLoad=function(){var e=n.props,t=e.question.id,r=e.loadItems,a=e.isFetching,o=e.isDrained,i=e.resource;o||a||r(t,void 0===i?"answers":i,{limit:Ga})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.isDrained,r=e.items,a=e.loadItems;!n&&r.length<Ga&&a(t,"answers",{offset:r.length,limit:Ga})}},{key:"render",value:function(){var e=this,t=this.props,n=t.adverts,r=t.isBot,a=t.isFetching,o=t.isDrained,s=t.items,c=t.question,l=c.relationship,u=l.canCollapseAnswers,d=l.canStickAnswers,p=c.hasPublishingDraft,f=[0].concat(Object(D.a)(Object.keys(n||{}).map(Number).sort(function(e,t){return e-t}))),h={canCollapse:u,canStick:d,hasPublishingDraft:p};return Object(i.b)("div",null,Object(i.b)(Lr.b,{onRef:function(t){e.listEl=t},isLocal:!0,isLoading:a,isDrained:o,onLoad:this.handleLoad,placeholder:Object(i.b)(Lr.a,{className:"List-item"})},r?s.map(function(e,t){return ka(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},h))}):Object(K.b)(2,Wa()(f.map(function(e,t){var r,a=f[t+1],o=(a?s.slice(e,a):s.slice(e)).map(function(n,r){var a=e+r+t;return ka(Object.assign({item:n,itemProp:0===a?"acceptedAnswer":"suggestedAnswer",dataZaIndex:a},h))});return a?[].concat(Object(D.a)(o),[(r=n[a],r?Object(i.b)(da.a,{data:r}):null)]):o})))))}}]),t}(s.Component))||La,Ya=(Pa=Object(y.connect)(function(e,t){var n=t.page,r=ja(e,{id:t.question.id,resource:"hiddenAnswers"}),a=r.isFetching,o=r.isDrained,i=r.ids,s=Object(ha.d)(n,i,Qa.b);return Object.assign({isFetching:a,isDrained:o},s,{items:Aa(s.items,e.entities.answers).filter(function(e){return!e.isDelete})})},{loadItems:T.H}),Object(l.withRouter)(Ba=Pa(Ba=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handlePaginationClick=function(e){n.props.router.push("".concat(location.pathname,"?page=").concat(e))},n.handleHiddenAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa.b,r=n.props,a=r.question.id;(0,r.loadItems)(a,"hiddenAnswers",{offset:e,limit:t})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,a=e.items,o=e.loadItems;!r&&a.length<Qa.b&&o(t,"hiddenAnswers",{offset:Object(ha.c)(n)+a.length,limit:Qa.b-a.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,a=e.isCurrentLoaded,o=e.page,s=e.items,c=e.total,l=e.question;return Object(i.b)(Va.a,{isFetching:t,isDrained:o>=c?n:a,isNextLoaded:r,page:o,total:c,placeholder:Object(i.b)(Lr.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad},Sa(s,l))}}]),t}(s.PureComponent))||Ba)||Ba),Xa=(za=Object(ue.a)({module:"ContentList"}),qa=Object(y.connect)(function(e,t){return{isMuteSpecial:Object(T.v)(t.question)}}),za(Fa=Object(l.withRouter)(Fa=qa(Fa=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.relationship.isAuthor,a=e.resource,o=e.router;"collapsedAnswers"!==a||r||o.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,r=e.question,a=r.questionType,o=r.answerCount,s=r.reviewInfo.tips,c=e.location;if(e.isMuteSpecial)return Object(i.b)(vt.d,{className:"Answers-none"},Object(i.b)(jt.a,{entityType:"answers",placeholder:"回答暂时无法查看"}));if("commercial"!==a&&!o){if(s)return null;var l=n.status||{},u=l.isClose,d=l.isLocked,p=l.isSuggest;return u||d||p?null:Object(i.b)(vt.d,{className:"Answers-none"},Object(i.b)(jt.a,{entityType:"answers",placeholder:Object(i.b)("div",null,"暂时还没有回答，开始",Object(i.b)(Xe,{preset:"plain",className:"QuestionAnswers-answerLink"},"写第一个回答"))}))}return Object(i.b)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1"},Object(i.b)(Ua,{question:n,resource:t},"updatedAnswers"===t&&Object(i.b)(Ha,{question:n,page:Number(c.query.page)||1}),"answers"===t&&Object(i.b)(Ja,{question:n}),"hiddenAnswers"===t&&Object(i.b)(Ya,{question:n,page:Number(c.query.page)||1})))}}]),t}(s.PureComponent))||Fa)||Fa)||Fa),$a=n(2257),Za=n(1948),eo=n(2106),to=n(482),no=n(80),ro=n(132),ao=n(2327),oo=n(19),io=n.n(oo),so=(n(2648),function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleChange=function(e){n.props.onChange(e)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.name,a=e.type,o=e.value,i=e.checked,s=JSON.stringify(o);return c.a.createElement("label",{className:io()("CheckItem",t)},c.a.createElement("input",{className:"CheckItem-input",type:a,name:r,value:s,onChange:this.handleChange,checked:i}),c.a.createElement("div",{className:"CheckItem-box"},c.a.createElement("div",{className:"CheckItem-inner"},n),c.a.createElement(ao.a,{className:"CheckItem-icon",size:20})))}}]),t}(s.Component));so.propTypes={name:g.a.string,onChange:g.a.func,checked:g.a.bool,className:g.a.string,type:g.a.string,value:g.a.any},so.defaultProps={name:"checkitems",type:"checkbox"};var co=so,lo=n(492),uo=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={value:null},n.handleModify=function(){n.setState({modifying:!0})},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleCancel=function(){n.setState({value:null,modifying:!1})},n.handleSubmit=function(e){e.preventDefault(),n.props.onBioChange(n.state.value),n.handleCancel()},n.handleSelect=function(){n.props.onSelect(n.props.value)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,a=e.checked,o=e.rich,s=this.state,c=s.modifying,l=s.value;return c?Object(i.b)("div",{className:"TopicBioItem"},Object(i.b)("div",{className:"TopicBioItem-title"},r),Object(i.b)("form",{onSubmit:this.handleSubmit},Object(i.b)("div",{className:"TopicBioItem-inner"},Object(i.b)(to.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t},Object(i.b)(ge.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0}))),Object(i.b)("div",{className:"TopicBioItem-inputFooter"},Object(i.b)(lo.a,{current:l?l.length:0,max:40}),Object(i.b)("div",{className:"TopicBioItem-actions"},Object(i.b)(S.c,{preset:"plain",type:"reset",onClick:this.handleCancel},"取消"),Object(i.b)(S.c,{preset:"primary",color:"blue",type:"submit"},"保存"))))):n?Object(i.b)("div",{className:"TopicBioItem"},Object(i.b)("div",{className:"TopicBioItem-title"},r),Object(i.b)(co,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:a},Object(i.b)(to.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo"},Object(i.b)("div",null,o?Object(i.b)(ft.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(i.b)("span",{className:"TopicBioItem-bio"},n),Object(i.b)(Za.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify}))))):Object(i.b)("div",{className:"TopicBioItem"},Object(i.b)(S.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify},Object(i.b)(B.a,{name:"plus",left:!0}),"添加",r))}}]),t}(s.Component);uo.propTypes={user:g.a.object.isRequired,title:g.a.node.isRequired,value:g.a.object.isRequired,onBioChange:g.a.func.isRequired,onSelect:g.a.func.isRequired,checked:g.a.bool.isRequired};var po=uo,fo=(n(2649),function(e,t){var n=e.type,r=e.topic,a=(r=void 0===r?{}:r).id,o=t.type,i=t.topic,s=(i=void 0===i?{}:i).id;return n===o&&a===s}),ho=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={value:null},n.handleSelect=function(e){return n.setState({value:e})},n.handleChoose=function(){return n.props.onBioChoose(n.state.value)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(i.b)("div",{className:"TopicBios-loading"},Object(i.b)(Ot.a,null));var t=this.props,n=t.user,r=t.question.topics,a=t.bios,o=t.currentBio,s=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||o,d={type:"headline"};return Object(i.b)("div",null,Object(i.b)("div",{className:"TopicBioItems"},Object(i.b)(po,{title:"一句话介绍",user:n,bio:n.headline,value:d,onBioChange:s,onSelect:this.handleSelect,checked:fo(l,d),rich:!0}),r.map(function(t){var r={type:"topic",topic:{id:t.id}};return Object(i.b)(po,Object(u.default)({key:t.id,title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find(function(e){return e.topic.id===t})}(a,t.id),{value:r,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:fo(l,r)}))})),Object(i.b)(ye.a,null,Object(i.b)(S.c,{color:"blue",preset:"primary",onClick:this.handleChoose},"完成")))}}]),t}(s.Component);ho.propTypes={onHeadlineUpdate:g.a.func.isRequired,onBioUpdate:g.a.func.isRequired,onBioChoose:g.a.func.isRequired,question:g.a.object.isRequired,user:g.a.object.isRequired};var bo,mo,vo,go=ho;var yo=Object(y.connect)(function(e,t){var n=e.currentUser,r=e.question.bio,a=e.entities,o=a.questions,i=a.users,s=e.topic.bios,c=t.question.id,l=o[c],u=(r[c]||{result:{type:"headline"}}).result;return{isFetching:s.isFetching,currentBio:{type:u.type,topic:u.topic},bios:l.topics.map(function(e){return{topic:e,bio:s[e.id]}}),question:l,user:i[n]}},{updateProfile:no.i,updateBio:ro.ab,chooseBio:T.d,loadBios:T.x})((vo=mo=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleUpdateHeadline=function(e){n.props.updateProfile(null,{headline:e})},n.handleUpdateBio=function(e,t){n.props.updateBio(e,t)},n.handleBioChoose=function(e){e&&n.props.chooseBio(n.props.question.id,e),n.props.onClose()},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(i.b)(go,Object(u.default)({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),t}(s.Component),mo.contextTypes={currentUser:g.a.object},mo.propTypes={question:g.a.object.isRequired},bo=vo))||bo,Oo=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=Object(wt.a)(e,["shown","onClose"]);return Object(i.b)(ye.b,{title:"编辑话题经验",subtitle:Object(i.b)("span",null,"可以填写你从事的职业、取得的资格或过往经历，",Object(i.b)("br",null),"让你在这个问题下的回答更具说服力。"),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1},t&&Object(i.b)(yo,Object(u.default)({},r,{onClose:n})))}}]),t}(s.Component);Oo.propTypes=Object.assign({shown:g.a.bool.isRequired,onClose:g.a.func.isRequired},yo.propTypes);var jo,wo,Co,ko,So=Oo;n(2650);var No,Ao,To,_o,Eo,xo,Io=(jo=Object(y.connect)(function(e,t){var n=e.question.bio,r=e.topic.bios,a=e.answers.newAnswer,o=(n[t.question.id]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=r[o.topic.id]||o.bio),{currentUser:Object(A.c)(e),questionBio:o,newAnswer:a,allowCommercialAnonymousAnswer:"show"===Object(et.a)(e,"gue_anonymous")}},{showNotification:V.h,addAnswer:Je.a,scheduledPublish:Je.z,validateScheduledPublish:Je.L,loadDraft:T.G,getBio:T.n}),Object(l.withRouter)(wo=jo((ko=Co=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={topicBiosModalShown:!1},n.answerFormRef=c.a.createRef(),n.handleSubmit=function(e){var t=n.props,r=t.currentUser,a=t.question.id,o=t.addAnswer,i=t.scheduledPublish,s=t.validateScheduledPublish,c=t.loadDraft;if(e.publishAt){var l=i(a,e);return l.then(function(){n.context.endAddAnswer(),c(a)}),l}var u=function(){return o(a,e)};return r.autoSendingCreations?s(a).then(u,function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return Re.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,function(){})}):u()},n.focus=function(){n.answerFormRef.current.focus()},n.handleToggleAnonymous=function(){var e=n.context,t=e.isCheckedCircle,r=e.toggleAnonymous,a=n.props,o=a.showNotification,i=a.question.relationship.isAnonymous;if(i||!n.answerFormRef.current.hasVideo()){if(i||!n.answerFormRef.current.hasMCNLinkCard())return t&&!i?(r(),void n.context.onChangecircleSettings(!1)):void r();o("不能使用匿名身份推荐商品","red")}else o("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},n.handleTopicBiosModalShown=function(){return n.setState({topicBiosModalShown:!0})},n.handleTopicBiosModalHide=function(){return n.setState({topicBiosModalShown:!1})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props,t=e.currentUser,n=e.questionBio;return n.bio&&"headline"!==n.type?Object(i.b)("span",{className:"AnswerAdd-bio"},n.bio):t.headline?Object(i.b)(ft.a,{className:"AnswerAdd-bio",inline:!0,html:(n||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.currentUser,n=e.question.relationship.isAnonymous,r=e.question;return n?Object(i.b)(to.a,{className:"AnswerAdd-info",noLink:!0,author:an.e}):t&&t.isOrg?Object(i.b)(to.a,{className:"AnswerAdd-info",noLink:!0,author:t}):Object(i.b)(to.a,{className:"AnswerAdd-info",noLink:!0,author:t},this.renderBio(),Object(i.b)(Za.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),Object(i.b)(So,{shown:this.state.topicBiosModalShown,question:r,onClose:this.handleTopicBiosModalHide}))}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.question,r=n.relationship.isAnonymous,a=n.questionType,o=e.question,s=e.allowCommercialAnonymousAnswer,c=t&&!t.isOrg&&("normal"===a||"commercial"===a&&s||r);return Object(i.b)("div",{className:"AnswerAdd"},Object(i.b)("div",{className:"AnswerAdd-header"},this.renderAuthor(),c&&Object(i.b)(S.c,{className:"AnswerAdd-toggleAnonymous",preset:"plain",onClick:this.handleToggleAnonymous},r?"使用实名身份回答":"使用匿名身份回答")),Object(i.b)(eo.a,{imperativeRef:this.answerFormRef,question:o,onSubmit:this.handleSubmit}))}}]),t}(s.Component),Co.contextTypes={toggleAnonymous:g.a.func.isRequired,isCheckedCircle:g.a.bool,onChangecircleSettings:g.a.func,endAddAnswer:g.a.func},wo=ko))||wo)||wo),Mo=Object(l.withRouter)((To=Ao=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,r=n.id,a=n.relationship.myAnswer,o=void 0===a?{}:a,i=t.router,s=e.question,c=s.id,l=s.relationship.myAnswer,u=void 0===l?{}:l;r===c&&o.answerId!==u.answerId&&(Ke.default.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),i.push("/question/".concat(r,"/answer/").concat(u.answerId)),qr.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,r=n.relationship.myAnswer,a=n.isNormal,o=n.status,s=(o=void 0===o?{}:o).isClose,c=o.isLocked,l=o.isSuggest,u=n.hasPublishingDraft,d=e.answering;return r?null:l?Object(i.b)("div",{className:"QuestionAnswers-answerTip"},"被建议修改的问题不允许添加新的回答。",Object(i.b)(Ge.a,{preset:"plain",to:"/question/21290061"},"问题为什么会被建议修改？")):c?Object(i.b)("div",{className:"QuestionAnswers-answerTip"},"该问题目前已经被锁定，无法添加新答案。",Object(i.b)(Ge.a,{preset:"plain",to:"/question/19604313"},"问题为什么会被锁定？")):s?Object(i.b)("div",{className:"QuestionAnswers-answerTip"},"被关闭的问题不允许添加新的回答。",Object(i.b)(Ge.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？"},Object(i.b)(B.a,{name:"questionMark"}))):u?Object(i.b)(vt.d,{className:"QuestionAnswers-answerTipCard"},"你创建的回答正在发布中…"):a?Object(i.b)($a.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div"},d&&Object(i.b)(vt.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard"},Object(i.b)("a",{name:"draft"}),Object(i.b)(Io,{question:t,answering:d}))):null}}]),t}(s.PureComponent),Ao.contextTypes={currentUser:g.a.object},No=To))||No,Ro=(n(2651),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=Object(wt.a)(e,["className","children"]);return Object(i.b)("div",Object(u.default)({},r,{className:Y()("QuestionMainDivider",t)}),Object(i.b)("span",{className:"QuestionMainDivider-inner"},n))}}]),t}(s.Component));n(2652);var Do,Lo,Po,Bo=Object(y.connect)(function(e,t){var n=ja(e,{id:t.question.id,resource:"collapsedAnswers"}),r=n.isFetching,a=n.isDrained,o=n.ids;return{isFetching:r,isDrained:a,items:Aa(o,e.entities.answers)}},{loadItems:T.H})((xo=Eo=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={opened:!1},n.handleLoad=function(){var e=n.props,t=e.question.id;return(0,e.loadItems)(t,"collapsedAnswers")},n.handleOpen=function(){n.handleLoad(),n.setState({opened:!0})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,a=e.question,o=e.question,s=o.collapsedAnswerCount,c=o.questionType,l=this.state.opened,u="org"===c,d="".concat(Object(kt.formatNumber)(s)," 个回答被").concat(u?"隐藏":"折叠"),p=Object(i.b)(Ge.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank"},"为什么？");return l?Object(i.b)(vt.d,null,Object(i.b)(Ro,null,d,"（",p,"）"),Object(i.b)(gt.b,null,Sa(r,a),n&&Object(i.b)(Lr.a,{className:"List-item"})),!t&&!n&&Object(i.b)(Ct,{onClick:this.handleLoad},"更多")):Object(i.b)("div",{className:"CollapsedAnswers-bar",style:{}},Object(i.b)(S.c,{preset:"plain",onClick:this.handleOpen},d),"（",p,"）")}}]),t}(s.Component),Eo.contextTypes={currentUser:g.a.object},_o=xo))||_o,zo=n(558),qo=n.n(zo),Fo=n(559),Uo=n(521),Vo=n(60),Qo=Object(ue.a)(function(e){var t=e.answer;return{module:"AnswerItem",content:{type:"Answer",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(Do=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.answer,t=e.id,n=e.voteupCount,r=e.question,a=r.id,o=r.title;return Object(i.b)("div",{className:"SimilarQuestions-item"},Object(i.b)(Ge.a,{preset:"plain",to:"/question/".concat(a,"/answer/").concat(t),target:"_blank"},o)," ",n&&"".concat(Object(kt.formatNumber)(n)," 个赞同"))}}]),t}(s.Component))||Do,Ho=Object(ue.a)(function(e){var t=e.article;return{module:"PostItem",content:{type:"Post",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(Lo=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.article,t=e.id,n=e.title,r=e.voteupCount;return Object(i.b)("div",{className:"SimilarQuestions-item"},Object(i.b)(Ge.a,{preset:"plain",a:!0,to:"".concat(an.i,"/p/").concat(t),target:"_blank"},n)," ",r&&"".concat(Object(kt.formatNumber)(r)," 个赞同"))}}]),t}(s.Component))||Lo;n(2653);var Ko,Wo,Go=Object(y.connect)(function(e,t){var n=e.explore.recommendations,r=n.items;return{isLoading:n.isLoading,isDrained:n.isDrained,isError:n.isError,items:r,similarQuestions:e.question.similarQuestions[t.question.id]}},{loadRecommendations:Vo.i})(Po=Object(ue.a)({module:"EditorRecommendList"})(Po=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.similarQuestions,r=t.isLoading,a=t.isDrained,o=t.isError,i=t.loadRecommendations;e.similarQuestions||!n||n.length||r||a||o||i(),!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.similarQuestions;return n&&n.length||!t||!t.length?null:Object(i.b)(vt.d,null,Object(i.b)(vt.b,{className:"Recommendations-title"},"优质推荐"),Object(i.b)(vt.c,{className:"Recommendations-list"},t.map(function(e){var t=e.answer,n=e.article;return t?Object(i.b)(Qo,{answer:t,key:t.id}):Object(i.b)(Ho,{article:n,key:n.id})})))}}]),t}(s.Component))||Po)||Po,Jo=Object(ue.a)(function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}})(Ko=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.answerCount,a=e.followerCount,o="/question/".concat(t);return Object(i.b)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0},Object(i.b)("meta",{itemProp:"name",content:n}),Object(i.b)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(o)}),Object(i.b)("meta",{itemProp:"answerCount",content:r}),Object(i.b)("meta",{itemProp:"zhihu:followerCount",content:a}),Object(i.b)(Ge.a,{preset:"plain",to:o,target:"_blank"},n)," ",Object(kt.formatNumber)(r)," 个回答")}}]),t}(s.Component))||Ko;n(2654);var Yo,Xo=Object(y.connect)(function(e,t){return{items:e.question.similarQuestions[t.question.id]}},{loadSimilarQuestions:T.Q})(Wo=Object(ue.a)({module:"RelatedQuestions"})(Wo=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadSimilarQuestions,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(i.b)(vt.d,null,Object(i.b)(vt.b,{className:"SimilarQuestions-title"},"相关问题"),Object(i.b)(vt.c,{className:"SimilarQuestions-list"},e.map(function(e){return Object(i.b)(Jo,{question:e,key:e.id})}))):null}}]),t}(s.Component))||Wo)||Wo,$o=n(13),Zo=n(1782),ei=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={hideDescription:!1},n.handleRef=function(e){n.title=e},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,r=e.description,a=e.meta,o=e.imageUrl,s=this.state.hideDescription;return Object(i.b)(Ge.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank"},Object(i.b)("img",{className:"RelatedCommodities-image",src:Object(pr.imgUrl)(o,{quality:90,size:"250x0"}),alt:"live"}),Object(i.b)("div",{className:"RelatedCommodities-content"},Object(i.b)("div",{className:Y()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":s}),style:{},ref:this.handleRef,"data-tooltip":n},n),s||Object(i.b)("div",{className:"RelatedCommodities-description"},r),Object(i.b)("div",{className:"RelatedCommodities-meta"},a)))}}]),t}(s.Component),ti=n(2204),ni=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),Ke.default.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,r=e.reviewScore,a=e.seats,o=(e.startsAt,e.speaker.member),s=o.name,c=o.avatarUrl;return Object(i.b)(ei,{link:"/lives/".concat(t),imageUrl:c,title:n,description:s,meta:Object(i.b)("div",{className:"RelatedCommodities-scoreWrapper"},Object(i.b)(ti.a,{score:r}),Boolean(a&&a.taken)&&"".concat(a.taken," 人参与"),!1)});case"remix_album":case"podcast":case"remix":var l=e.id,u=e.artwork,d=e.title,p=e.author,f=(p=void 0===p?{}:p).user,h=e.trackCount,b="/remix/albums/".concat(l);return Object(i.b)(ei,{link:b,imageUrl:u,title:d,description:f&&f.name,meta:Object(i.b)("div",{className:"RelatedCommodities-remixMeta"},Object(i.b)("div",null,"共 ",Object(kt.formatNumber)(h)," 节课"),Object(i.b)(S.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain"},"试听"))});case"special":var m=e.id,v=e.subject,g=e.liveCount,y=e.liveMemberCount,O=e.speakers,j=e.artworkMobile,w=O.slice(0,2).map(function(e){return e.member.name}).join("、");return Object(i.b)(ei,{link:"/lives/specials/".concat(m),imageUrl:j,title:v,description:"".concat(w).concat(O.length>=2?" 等":""),meta:"".concat(Object(kt.formatNumber)(g)," 场 Live, ").concat(Object(kt.formatNumber)(y)," 次参与")});case"book":var C=e.id,k=e.title,N=e.cover,A=e.authorName,T=e.readCount;return Object(i.b)(ei,{link:"/pub/book/".concat(C),imageUrl:N,title:k,description:A,meta:Object(i.b)("div",{className:"RelatedCommodities-bookMeta"},"".concat(Object(kt.formatNumber)(T)," 人读过"),Object(i.b)("span",{className:"RelatedCommodities-bookRead"},Object(i.b)(Zo.a,{width:13,height:14,center:!0}),"阅读"))});default:return null}}}]),t}(s.Component),ri=Object(ue.a)(function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var r="special"===t.type?"LiveAlbum":Object($o.pascalize)(t.type);return{module:"".concat(r,"Item"),index:n,content:Object.assign({type:r,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}})(ni);n(2655);var ai,oi,ii,si=Object(y.connect)(function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}},{loadRelatedCommodities:T.P})(Yo=Object(ue.a)(function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})(Yo=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadRelatedCommodities,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(i.b)(vt.d,null,Object(i.b)(vt.b,{className:"RelatedCommodities-title"},"相关推荐"),Object(i.b)(vt.c,{className:"RelatedCommodities-list"},e.slice(0,3).map(function(e){return Object(i.b)(ri,{item:e,key:e.id})}))):null}}]),t}(s.Component))||Yo)||Yo,ci=n(2332),li=n(562);n(2660);var ui=Object(y.connect)(function(e){var t=e.entities,n=e.question.brand,r={};return n&&n.target&&n.target.urlToken&&(r=t.users[n.target.urlToken]||{}),{brand:n,brandMember:r}},{loadBrand:T.y,loadProfile:no.e})((ii=oi=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).goToBrand=function(){var e=n.props.brand.target;e&&(location.href="/org/".concat(e.urlToken))},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,r=t.name,a=t.target,o=t.isPuQuestion,s=e.brandMember,c=this.context.currentUser,l=o?"关于大咖":"关于品牌";return Object(i.b)(vt.d,{className:Y()({MobileBrandQuestionAuthor:!1})},Object(i.b)(vt.b,{className:"BrandQuestionAuthor-header"},Object(i.b)("span",{className:"BrandQuestionAuthor-headerText"},l)),Object(i.b)(vt.c,{className:Y()("BrandQuestionAuthor",a&&"is-clickable"),onClick:this.goToBrand},Object(i.b)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),Object(i.b)("div",{className:"BrandQuestionAuthor-content"},Object(i.b)("div",{className:"BrandQuestionAuthor-name"},r,a&&a.urlToken&&Object(i.b)(Mn.a,{className:"BrandQuestionAuthor-badge",badge:a.badge,isOrg:a.isOrg,noLink:!0})),a&&a.headline&&Object(i.b)("div",{className:"BrandQuestionAuthor-intro"},a.headline))),s&&s.id&&c&&c.id!==s.id&&Object(i.b)(li.a,{className:"BrandQuestionAuthor-buttons",user:s}))}}]),t}(s.Component),oi.contextTypes={currentUser:g.a.object},ai=ii))||ai;function di(e){var t=e.text,n=e.from,r=e.score;return Object(i.b)("span",null,n||t,r&&Object(i.b)("strong",null,r))}var pi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?Object(i.b)(er.a,{className:Y()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta.title;return Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods"},this.renderCardImage(),Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardContent"},Object(i.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},e)))}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,r=e.description2,a=function(e){var t=e.scores,n=void 0===t?[]:t,r=e.tags,a=void 0===r?[]:r;return n.length>0?n:a.length>0?a:[]}(e),o=a.length?a.map(function(e,t){return Object(i.b)(di,Object(u.default)({key:t},e))}):r;return Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardMain"},this.renderCardImage(),Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardContent"},Object(i.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},t),n&&Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardDesc"},n),o&&Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardScore"},o)))}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,r=e.metaCardDisplay,a=t.summary||n;return Object(i.b)(vt.d,null,this.renderCard(),"normal"===r&&Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardMore"},a&&Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:a}}),Object(i.b)("div",{className:"QuestionSidebarTopicMeta-cardLink"},"查看更多",Object(i.b)(he.a,{center:!0}))))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,r=e.metaCardDisplay;if(!n||"none"===r)return null;var a=n.category;return Object(i.b)(U.a,{module:"TopicItem",moduleName:a,card:{content:Object.assign({type:"Topic"},Object(tr.a)("topic",t),{sub_type:"MetaCard"})},trackCardShow:!0},Object(i.b)("a",{href:"/topic/".concat(t),target:"_blank",rel:"noopener noreferrer"},this.renderModule()))}}]),t}(s.PureComponent);pi.propTypes={id:g.a.string.isRequired,excerpt:g.a.string,meta:g.a.shape({category:g.a.string,avatar:g.a.string,title:g.a.string,description1:g.a.string,description2:g.a.string,summary:g.a.string,scores:g.a.arrayOf(g.a.shape({url:g.a.string,score:g.a.string,from:g.a.string})),tags:g.a.arrayOf(g.a.shape({text:g.a.string}))}).isRequired,metaCardDisplay:g.a.oneOf(["normal","none"])};n(2661);var fi,hi,bi,mi,vi=(fi=Object(y.connect)(function(e,t){var n=t.params;return{questionId:n.id,items:Object(T.S)(e,{id:n.id})}},{loadQuestionMetaTopics:T.N}),hi=Object(Ft.a)(null),Object(l.withRouter)(bi=fi(bi=hi(bi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,r=e.loadQuestionMetaTopics;n||r(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var r=t.filter(function(e){return e&&e.meta});if(!r||r.length<1)return null;var a=r[0],o=a.vote,s=a.isVote,c="normal";return o&&s&&(c="none"),Object(i.b)("div",{className:"QuestionSidebarTopicMeta"},Object(i.b)(pi,Object(u.default)({metaCardDisplay:c},a,{questionId:n})))}}]),t}(s.Component))||bi)||bi)||bi),gi=n(154),yi=(n(2662),Object(ir.compose)(Object(Ft.a)(null),Object(gi.b)(),Object(y.connect)(null,{getReadingMembership:T.s}))(function(e){var t=e.getReadingMembership,n=e.isLogin,r=Object(s.useState)(!1),a=Object(d.a)(r,2),o=a[0],l=a[1],u=Object(s.useState)(!1),p=Object(d.a)(u,2),f=p[0],h=p[1];Object(s.useEffect)(function(){n&&t().then(function(e){var t=e.payload;h(t.isHaveRight)}).catch(function(){})},[t,n]);var b=function(){l(!o)};return f&&Object(i.b)(c.a.Fragment,null,Object(i.b)(vt.d,{className:"ReadingMembership",onClick:b},Object(i.b)("div",{className:"ReadingMembership-banner"},Object(i.b)("div",null,"领取读书会会员体验卡"),Object(i.b)("div",null,"海量电子书免费读 ",Object(i.b)(he.a,{size:22}))),Object(i.b)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg"})),Object(i.b)(ye.b,{className:"ReadingMembership-modal",onClose:b},o&&Object(i.b)("div",{className:"ReadingMembership-content"},Object(i.b)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg"}),Object(i.b)("div",{className:"ReadingMembership-title"},Object(i.b)("div",null,"登录知乎 App 领取"),Object(i.b)("div",null,"读书会会员 7 天体验卡")),Object(i.b)("div",{className:"ReadingMembership-qrcode"},Object(i.b)("div",null,"知乎读书会会员，海量电子书免费读"),Object(i.b)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),Object(i.b)("div",null,"扫码下载知乎 App")))))})),Oi=n(520);var ji,wi,Ci,ki,Si,Ni,Ai,Ti,_i=Object(Ft.a)(null)(mi=Object(ue.a)({module:"RightSideBar"})(mi=Object(y.connect)(function(e){return{brand:e.question.brand}},{loadBrand:T.y,loadProfile:no.e})(mi=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).onHeightChange=function(){n.dynamicSticky&&n.dynamicSticky.check()},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,a=e.loadBrand;"commercial"===r&&a(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,a=r.id,o=r.questionType,s=t.brand;return Object(i.b)(Oi.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:an.f+10,ref:function(t){e.dynamicSticky=t}},"commercial"===o&&Object(i.b)(ci.a,{questionId:a,pageType:"question",onLoad:this.onHeightChange}),"commercial"===o&&s&&Object(i.b)(ui,{brand:s}),"commercial"!==o&&Object(i.b)(Fo.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===o&&Object(i.b)("div",{className:"Card"},Object(i.b)(qo.a,{isMobile:!1,id:"question/".concat(a),location:"new_question_up",query:{question_token:a},onHeightChange:this.onHeightChange})),Object(i.b)(vi,null),"commercial"!==o&&Object(i.b)(Go,{question:n,onLoad:this.onHeightChange}),Object(i.b)(yi,null),"normal"===o&&Object(i.b)(Xo,{question:n,onLoad:this.onHeightChange}),"normal"===o&&Object(i.b)(si,{question:n,onLoad:this.onHeightChange}),"normal"===o&&Object(i.b)("div",{className:"Card"},Object(i.b)(qo.a,{isMobile:!1,id:"question/".concat(a),location:"new_question_down_sticky",query:{question_token:a},delay:500,onHeightChange:this.onHeightChange})),"commercial"===o&&Object(i.b)(Fo.a,{type:"question",getSidebar:function(){return e.sidebar}}),Object(i.b)(Uo.a,null))}}]),t}(s.Component))||mi)||mi)||mi,Ei=Object(y.connect)(function(e,t){var n=t.params.id,r=t.route.resource,a=t.location.query,o=a.group_id,i=a.qc,s=e.currentUser,c=!i&&o,l=ja(e,{id:n,resource:r}).isDrained,u=Object(T.T)(e,{id:n}),d=u.answerCount,p=u.relationship.isAnonymous;return{isNormalNotification:c,notificationId:o,resource:r,question:u,isDrained:l,invitationShowCount:s&&!p&&d<ba?d?ma:va:0,isBot:e.env.userAgent.isBot,isHuman:Object(et.c)(e),currentUser:Object(A.c)(e),canOia:Object(et.d)(e),shouldOia:Object(et.f)(e),shouldSpecialOia:Object(et.g)(e),referer:Object(et.e)(e),isMuteSpecial:Object(T.v)(u)}})((Ci=wi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.questionType,a=n.collapsedAnswerCount,o=n.answerCount,s=n.isNormal,c=n.status,l=(c=void 0===c?{}:c).isLocked,u=e.question,d=e.location,p=e.answering,f=e.invitationShowCount,h=e.isDrained,b=e.isMuteSpecial,m="updatedAnswers"===t||h,v="commercial"!==r&&!o;return Object(i.b)("div",null,Object(i.b)(Mo,{question:u,answering:p}),Boolean(f)&&!b&&Object(i.b)(qt,{expandCount:f,question:u}),Object(i.b)(Xa,{resource:t,question:u,location:d}),s&&!l&&"updatedAnswers"!==t&&h&&!v&&Object(i.b)(U.a,{module:"BottomBar"},Object(i.b)(vt.d,null,Object(i.b)(Xe,{className:"QuestionAnswers-answerButton",size:"spread"}))),m&&a>0&&!b&&Object(i.b)(Bo,{question:u}))}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,r=e.notificationId,a=e.location;return Object(i.b)("div",{className:"Question-main"},Object(i.b)("div",{className:"Question-mainColumn"},n?Object(i.b)(Ea,{location:a,question:t,id:r}):this.renderAnswers()),Object(i.b)(K.a,null,Object(i.b)(_i,{question:t})))}}]),t}(s.PureComponent),wi.fetchData=function(e){var t=e.params.id,n=e.route.resource,r=e.location.query,a=r.group_id,o=r.page,i=r.qc;return function(e,r){if(!i&&a)return e(Object(T.I)(a));var s=r(),c=s.env.userAgent,l=Object(et.d)(s),u=ga;return c.isBot?u=ya:l&&(u=4),e(Object(T.H)(t,n,{offset:Object(ha.c)(Number(o)||1),limit:u}))}},ji=Ci))||ji,xi=Object(s.createContext)({}),Ii=n(119),Mi=Object(l.withRouter)(function(e){var t=e.to,n=e.router,r=Object(s.useContext)(xi);return r.url||(r.url=t),Object(s.useEffect)(function(){Object(Ii.isAbsoluteUrl)(t)?window.location.replace(t):n.replace(t)},[n,t]),null}),Ri=n(168),Di=n(65),Li=(n(2333),ki=Object(y.connect)(null,{loadAnswer:Je.m,loadContentRightsNotification:Di.o}),Object(l.withRouter)(Si=ki((Ai=Ni=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={contentRef:null},n.contentRef=c.a.createRef(),n.handleCloseComment=function(){var e=n.props,t=e.location,r=t.pathname,a=t.search,o=e.byComment,i=e.router;o&&i.replace({pathname:r,search:a})},n.handleCloseEditing=function(){var e=n.props,t=e.location,r=t.pathname,a=t.query,o=e.router,i=a.editing,s=Object(wt.a)(a,["editing"]);i&&o.replace({pathname:r,query:s})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification;this.context.currentUser&&Object(Q.c)("answer",t,Q.a),this.setState({contentRef:this.contentRef.current}),qr.a.get("answer::justPublished")&&(qr.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e,t=this.props,n=t.question,r=n.id,a=n.relationship,o=a.canCollapseAnswers,s=a.canStickAnswers,c=n.hasPublishingDraft,l=t.answer,u=t.location,d=u.hash,p=u.query;return(null==l?void 0:null===(e=l.question)||void 0===e?void 0:e.id)!==r||l.isDelete?Object(i.b)(Mi,{to:"/question/".concat(r)}):Object(i.b)(vt.d,{className:"AnswerCard"},Object(i.b)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0},Object(i.b)(Ri.d.Provider,{value:this.state.contentRef},Object(i.b)(fa.a,{relatedTo:"answer",answer:l,byComment:Object(Sn.a)(d),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:o,canStick:s,editing:p&&"true"===p.editing,editable:!0,canAbstract:!0,expanded:!0,hasPublishingDraft:c,itemProp:"mainEntityOfPage"}))))}}]),t}(s.Component),Ni.contextTypes={currentUser:g.a.object},Si=Ai))||Si)||Si),Pi=(n(2663),2);var Bi,zi,qi,Fi,Ui=Object(y.connect)(function(e,t){var n=t.question.id,r=t.answerId,a=e.entities.answers,o=e.question.answers[n]||{ids:[],isDrained:!1},i=o.ids;return{isDrained:o.isDrained,items:i.filter(function(e){return e!==Number(r)}).slice(0,Pi).map(function(e){return a[e]}),isWechat:e.env.userAgent.Wechat}},{loadAnswer:Je.m,loadItems:T.H})(Ti=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,r=e.isDrained,a=e.items;n!==t&&!r&&a.length<Pi&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,r=e.isWechat;return Boolean(n.length)&&Object(i.b)(vt.d,{className:"MoreAnswers"},Object(i.b)(gt.b,{title:"更多回答","data-zop-feedlist":!0},n.map(function(e){return Object(i.b)(pa.a,{key:e.id},Object(i.b)(fa.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!r}))})))}}]),t}(s.Component))||Ti,Vi=n(1739),Qi=n(185),Hi=n(333),Ki=n(494),Wi=n(1763),Gi=n(97),Ji=Object(y.connect)(function(e,t){var n=t.author;return Object.assign({currentUser:Object(A.c)(e)},n&&function(e,t){var n=t.urlToken||t.id,r=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:r.isDrained,isFetching:r.isFetching,items:r.ids.map(function(t){var n=Object(Gi.c)(e,{id:t});return n.code?null:n}).filter(Boolean)}}(e,{urlToken:n.urlToken}))},{loadItems:no.d})(Bi=Object(Yt.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}})((qi=zi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?Object(i.b)("div",{className:"AnswerAuthor-item"},Object(i.b)("span",{className:"AnswerAuthor-item-icon"},Object(i.b)(Wi.a,{text:!0,center:!0})),Object(i.b)("div",{className:"AnswerAuthor-item-value"},Object(i.b)(Ki.CJKSpace,null,t.slice(0,3).map(function(e,t){return Object(i.b)("span",{key:e.urlToken},0!==t&&"、",Object(i.b)(ht.a,{user:e,noBadge:!0,noHoverCard:!0},e.name))}),"也关注了",an.F[n.gender]))):null}}]),t}(s.Component),zi.propTypes={author:g.a.object.isRequired},Bi=qi))||Bi)||Bi,Yi=(n(2664),function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge});var Xi,$i=Object(y.connect)(function(e,t){var n=t.answer,r=n.author,a=n.author.urlToken,o=e.entities.users,i=a?o[a]:r;return{currentUser:Object(A.c)(e),isDrained:Yi(i),user:i,isSelf:Object(A.g)(e,i)}},{loadProfile:no.e})(Fi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,r=e.isDrained;t&&(r||n(t))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.isSelf;if(!t)return null;var r=t.urlToken,a=t.isOrg,o=t.headline,s=t.badge,c=t.answerCount,l=t.articlesCount,u=t.followerCount,d=Object(Qi.a)(s),p=d.identityInfo,f=d.bestAnswererInfo,h=d.bestAnswererTopics,b=d.baikeInfo,m=a?"org":"people";return Object(i.b)(vt.d,{className:"AnswerAuthor"},Object(i.b)(vt.b,{className:"AnswerAuthor-title"},"关于作者"),Object(i.b)(vt.c,null,Object(i.b)("div",{className:"AnswerAuthor-user"},Object(i.b)("div",{className:"AnswerAuthor-user-avatar"},Object(i.b)(ht.a,{user:t,avatar:!0,avatarProps:{size:60},noHoverCard:!0})),Object(i.b)("div",{className:"AnswerAuthor-user-content"},Object(i.b)("div",{className:"AnswerAuthor-user-name"},Object(i.b)(ht.a,{user:t,noBadge:!0,noHoverCard:!0})),o&&Object(i.b)("div",{className:"AnswerAuthor-user-headline"},Object(i.b)(ft.a,{html:o}))))),Object(i.b)(vt.c,null,p&&Object(i.b)("div",{className:"AnswerAuthor-item"},Object(i.b)("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank"},Object(i.b)(te.a,{center:!0,size:19})),Object(i.b)("div",{className:"AnswerAuthor-item-value"},p.slice(0,2).join("，"))),h&&h.length>0&&Object(i.b)("div",{className:"AnswerAuthor-item"},Object(i.b)("span",{className:"AnswerAuthor-item-icon"},Object(i.b)(ee.a,{center:!0,size:19})),Object(i.b)("div",null,Object(i.b)(Hi.a,{topics:h,user:t,noHoverCard:!0}),"的",f)),Boolean(b)&&Object(i.b)("div",{className:"AnswerAuthor-item"},Object(i.b)("span",{className:"AnswerAuthor-item-icon"},Object(i.b)(Vi.a,{center:!0,size:19})),Object(i.b)("div",null,b)),t&&!n&&Object(i.b)(Ji,{author:t})),r&&Object(i.b)(vt.c,null,Object(i.b)("div",{className:"AnswerAuthor-counts"},Object(i.b)(Qt.a,null,Object(i.b)(Qt.a.Item,{tag:Ge.a,preset:"plain",to:"/".concat(m,"/").concat(r,"/answers"),name:"回答",value:c,"data-za-detail-view-element_name":"Answer"}),Object(i.b)(Qt.a.Item,{tag:Ge.a,preset:"plain",to:"/".concat(m,"/").concat(r,"/posts"),name:"文章",value:l,"data-za-detail-view-element_name":"Post"}),Object(i.b)(Qt.a.Item,{tag:Ge.a,preset:"plain",to:"/".concat(m,"/").concat(r,"/followers"),name:"关注者",value:u,"data-za-detail-view-element_name":"Follower"}))),!n&&Object(i.b)(li.a,{className:"AnswerAuthor-buttons",user:t})))}}]),t}(s.Component))||Fi,Zi=n(2171);n(2665);var es,ts=Object(y.connect)(function(e,t){var n=t.answer.id,r=e.entities.favlists,a=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map(function(e){return r[e]}),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}},{loadAnswerFavlists:Je.q})(Xi=Object(ue.a)({module:"CollectionList"})(Xi=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).load=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerFavlists)(t)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,a=e.isDrained;return Object(i.b)("div",{className:"AnswerFavlists"},Object(i.b)("div",{className:"AnswerFavlists-header"},Object(i.b)("div",{className:"AnswerFavlists-title"},"被收藏 ",Object(kt.formatNumber)(n)," 次")),!(a&&!t.length)&&Object(i.b)(Lr.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:r,isDrained:a,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(i.b)(Lr.a,{className:"AnswerFavlists-item",small:!0})},t.map(function(e){var t=e.id,n=e.type,r=e.creator,a=e.isFollowing,o=e.answerCount,s=e.followerCount;return Object(i.b)(gt.a,{key:t},Object(i.b)(Zi.a,{favlist:e,action:Object(i.b)($e.a,{preset:"primary",id:t,type:n,isFollowing:a}),status:Object(i.b)(Tt.d,null,Object(i.b)("span",null,"由"," ",Object(i.b)(ht.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"),Object(i.b)("span",null,Object(kt.formatNumber)(o)," 条内容"),Object(i.b)("span",null,Object(kt.formatNumber)(s)," 人关注"))}))})))}}]),t}(s.Component))||Xi)||Xi;n(2666);var ns,rs,as,os=Object(y.connect)(function(e,t){var n=t.answer.id,r=e.entities.copyrightApplicants,a=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map(function(e){return r[e]}),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}},{loadAnswerCopyrightApplicants:Je.p})(es=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).load=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerCopyrightApplicants)(t)},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,a=e.isDrained;return Object(i.b)("div",{className:"AnswerCopyrightApplicants"},Object(i.b)("div",{className:"AnswerCopyrightApplicants-header"},Object(i.b)("div",{className:"AnswerCopyrightApplicants-title"},"授权转载 ",Object(kt.formatNumber)(n)," 次")),!(a&&!t.length)&&Object(i.b)(Lr.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:r,isDrained:a,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(i.b)(Lr.a,{className:"AnswerCopyrightApplicants-item",small:!0})},t.map(function(e){var t=e.applier,n=e.accountType,r=e.accountUsername,a=e.createdAt;return Object(i.b)("div",{className:"AnswerCopyrightApplicants-item",key:"".concat(t.name,".").concat(a)},Object(i.b)(St.a,{user:t,meta:"".concat(n," ").concat(r),status:null,action:Object(i.b)("div",{className:"AnswerCopyrightApplicants-time"},"申请于 ",Object(k.toDateString)(a))}))})))}}]),t}(s.Component))||es,is=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,r=e.accountUsername,a=e.createdAt;return Object(i.b)("div",{className:"AnswerInfo-copyright-applicant",key:"".concat(t.name,".").concat(a)},Object(i.b)(ht.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",r)}}]),t}(s.Component),ss=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return Object(i.b)(vt.c,{className:"AnswerInfo-copyright-applicants",key:"content"},e.map(function(e,t){return Object(i.b)(is,{key:t,copyrightApplicant:e})}))}}]),t}(s.Component),cs=Object(ue.a)(function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}})(ns=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,r=e.followerCount,a=e.creator;return Object(i.b)("div",{className:"AnswerInfo-favlist",key:t},Object(i.b)("div",{className:"AnswerInfo-favlist-title"},Object(i.b)(Ge.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n},n)),Object(i.b)("div",{className:"AnswerInfo-favlist-author"},Object(i.b)(ht.a,{user:a,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"),Object(i.b)("div",{className:"AnswerInfo-favlist-followers"},Object(kt.formatNumber)(r)," 人关注"))}}]),t}(s.Component))||ns,ls=Object(ue.a)({module:"CollectionList"})(rs=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.favlists;return Object(i.b)(vt.c,{className:"AnswerInfo-favlists",key:"content"},e.map(function(e){return Object(i.b)(cs,{favlist:e,key:e.id})}))}}]),t}(s.Component))||rs;n(2667);var us,ds,ps,fs,hs,bs=Object(y.connect)(function(e,t){var n=t.answer.id,r=e.entities,a=r.copyrightApplicants,o=r.favlists,i=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},s=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:i.ids.map(function(e){return a[e]}),copyrightApplicantCount:i.totals,favlists:s.ids.map(function(e){return o[e]}),favlistCount:s.totals}},{loadAnswerCopyrightApplicants:Je.p,loadAnswerFavlists:Je.q})(as=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},n.handleCopyrightApplicantsModalShow=function(){Ke.default.trackEvent(Object(fe.default)(n),{action:"Click",element:"Button",name:"转载授权"}),n.setState({copyrightApplicantsModalShown:!0})},n.handleCopyrightApplicantsModalHide=function(){n.setState({copyrightApplicantsModalShown:!1})},n.handleFavlistsModalShow=function(){Ke.default.trackEvent(Object(fe.default)(n),{action:"Click",element:"Button",name:"被收藏"}),n.setState({favlistsModalShown:!0})},n.handleFavlistsModalClose=function(){n.setState({favlistsModalShown:!1})},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,r=e.favlists,a=e.loadAnswerCopyrightApplicants,o=e.loadAnswerFavlists;n.length||r.length||(a(t),o(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,r=e.copyrightApplicantCount,a=e.favlists,o=e.favlistCount,s=this.state,c=s.favlistsModalShown,l=s.copyrightApplicantsModalShown;return n.length||a.length?Object(i.b)(vt.d,null,Boolean(n.length)&&[Object(i.b)(vt.b,{className:"AnswerInfo-title",key:"header"},"授权转载"," ",Object(i.b)(S.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow},Object(kt.formatNumber)(r))," ","次"),Object(i.b)(ss,{copyrightApplicants:n.slice(0,5),key:"content"})],Boolean(a.length)&&[Object(i.b)(vt.b,{className:"AnswerInfo-title",key:"header"},"被收藏"," ",Object(i.b)(S.c,{preset:"plain",onClick:this.handleFavlistsModalShow},Object(kt.formatNumber)(o))," ","次"),Object(i.b)(ls,{favlists:a.slice(0,5),key:"content"})],Object(i.b)(ye.b,{size:"fullPage",onClose:this.handleFavlistsModalClose},c&&Object(i.b)(ts,{answer:t})),Object(i.b)(ye.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide},l&&Object(i.b)(os,{answer:t}))):null}}]),t}(s.Component))||as,ms=Object(Ft.a)(null)(us=Object(ue.a)(function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})(us=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).onHeightChange=function(){n.dynamicSticky&&n.dynamicSticky.check()},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,a=r.id,o=r.questionType,s=t.answer,c=Object(Je.l)(s)||Object(Je.j)(s);return Object(i.b)(Oi.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:an.f+10,ref:function(t){e.dynamicSticky=t}},Object(i.b)(Fo.a,{type:"question",getSidebar:function(){return e.sidebar}}),c||"normal"===o&&Object(i.b)("div",{className:"Question-sideColumnAdContainer"},Object(i.b)(qo.a,{isMobile:!1,id:"question/".concat(a,"/answer/").concat(s.id),location:"new_answer_up",query:{question_token:a,answer_token:s.id},onHeightChange:this.onHeightChange})),"commercial"===o&&Object(i.b)(ci.a,{questionId:a}),s.author&&Object(i.b)($i,{answer:s,onLoad:this.onHeightChange}),Object(i.b)(vi,null),Object(i.b)(bs,{answer:s,onLoad:this.onHeightChange}),c||"commercial"!==o&&Object(i.b)(Go,{question:n,onLoad:this.onHeightChange}),Object(i.b)(yi,null),c||"normal"===o&&Object(i.b)(Xo,{question:n,onLoad:this.onHeightChange}),c||"normal"===o&&Object(i.b)(si,{answer:s,question:n,onLoad:this.onHeightChange}),c||"normal"===o&&Object(i.b)("div",null,Object(i.b)(qo.a,{isMobile:!1,id:"question/".concat(a,"/answer/").concat(s.id),location:"new_answer_down_sticky",query:{question_token:a,answer_token:s.id},delay:1e3,onHeightChange:this.onHeightChange})),Object(i.b)(Uo.a,null))}}]),t}(s.Component))||us)||us,vs=(n(2668),Object(ue.a)(function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}})(ds=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,r=e.questionType;e.bottom;return Object(i.b)(vt.d,{className:Y()("ViewAll",{"ViewAll--bottom":!1})},Object(i.b)(Ct,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{}},"commercial"===r?"查看 ".concat(Object(kt.formatNumber)(n)," 个品牌推荐的回答"):"查看全部 ".concat(Object(kt.formatNumber)(n)," 个回答")))}}]),t}(s.Component))||ds);var gs=Object(y.connect)(function(e,t){var n=t.params,r=n.id,a=n.answerId,o=Object(T.T)(e,{id:r}),i=Object(Je.c)(e,{id:a}),s=(o||{}).relationship||{myAnswer:{isDelete:!1}};return{question:o,answer:i&&Object.assign({},i,{isDelete:(i.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(T.v)(o)}},{loadAnswer:Je.m})((hs=fs=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,r=e.loadAnswer;t||r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,r=e.loadAnswer;n!==t&&r(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,r=e.question,a=e.question,o=a.id,s=a.answerCount,c=a.questionType,l=e.location,u=e.isMuteSpecial;return Object(i.b)("div",{className:"Question-main"},Object(i.b)(j.a,{meta:Object(Tr.a)(t)}),Object(i.b)(Ri.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(",")},Object(i.b)("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0},Object(Je.l)(t)||Object(Je.j)(t)||s>0&&!u&&Object(i.b)(vs,{itemNum:s,to:"/question/".concat(o),questionType:c}),Object(i.b)(Li,{question:r,location:l,answer:t}),Object(Je.l)(t)||Object(Je.j)(t)||Object(i.b)(Ui,{question:r,answerId:n}),s>0&&!u&&Object(i.b)(vs,{itemNum:s,to:"/question/".concat(o),questionType:c}))),Object(i.b)(K.a,null,Object(i.b)(ms,{question:r,answer:t})))}}]),t}(s.Component),fs.fetchData=function(e){var t=e.params.answerId;return Object(Je.m)(t)},ps=hs))||ps;t.default=Object(i.b)(l.Route,null,Object(i.b)(l.Route,{path:"waiting",component:Jr,name:"QuestionWaiting",authRequired:!0,zaPageId:5541}),Object(i.b)(l.Route,{path:"later",component:ea,name:"QuestionLater",authRequired:!0,zaPageId:5371}),Object(i.b)(l.Route,{path:"invited",component:sa,name:"QuestionInvited",authRequired:!0,zaPageId:5543}),Object(i.b)(l.Route,{path:":id",component:Dr,name:"Question"},Object(i.b)(l.Route,{sticky:function(){var e=document.querySelector("#QuestionAnswers-answers");return e?e.offsetTop:0}},Object(i.b)(l.IndexRoute,{component:Ei,entity:"answers",resource:"answers",name:"QuestionPage",zaPageId:3378}),Object(i.b)(l.Route,{path:"answers/hidden",component:Ei,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),Object(i.b)(l.Route,{path:"answers/updated",component:Ei,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),Object(i.b)(l.Redirect,{from:"answers/created",to:"answers/updated"})),Object(i.b)(l.Route,{path:"answer/:answerId",component:gs,name:"AnswerPage",zaPageId:2012}),Object(i.b)(l.Redirect,{from:"noti-answers",to:"."})))}])]);
//# sourceMappingURL=main.question-routes.0fbfebd92bd9f5d10134.js.map